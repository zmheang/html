  <h6>The canvas state</h6>

  <p>Objects that implement the <code>CanvasState</code> interface maintain a stack of drawing
  states. <dfn data-x="drawing state">Drawing states</dfn> consist of:</p>

  <ul class="brief">
   <li>The current <span data-x="dom-context-2d-transformation">transformation matrix</span>.</li>
   <li>The current <span>clipping region</span>.</li>
   <li>The current values of the following attributes: <code
   data-x="dom-context-2d-strokeStyle">strokeStyle</code>, <code
   data-x="dom-context-2d-fillStyle">fillStyle</code>, <code
   data-x="dom-context-2d-globalAlpha">globalAlpha</code>, <code
   data-x="dom-context-2d-lineWidth">lineWidth</code>, <code
   data-x="dom-context-2d-lineCap">lineCap</code>, <code
   data-x="dom-context-2d-lineJoin">lineJoin</code>, <code
   data-x="dom-context-2d-miterLimit">miterLimit</code>, <code
   data-x="dom-context-2d-lineDashOffset">lineDashOffset</code>, <code
   data-x="dom-context-2d-shadowOffsetX">shadowOffsetX</code>, <code
   data-x="dom-context-2d-shadowOffsetY">shadowOffsetY</code>, <code
   data-x="dom-context-2d-shadowBlur">shadowBlur</code>, <code
   data-x="dom-context-2d-shadowColor">shadowColor</code>, <code
   data-x="dom-context-2d-filter">filter</code>, <code
   data-x="dom-context-2d-globalCompositeOperation">globalCompositeOperation</code>, <code
   data-x="dom-context-2d-font">font</code>, <code
   data-x="dom-context-2d-textAlign">textAlign</code>, <code
   data-x="dom-context-2d-textBaseline">textBaseline</code>, <code
   data-x="dom-context-2d-direction">direction</code>, <code
   data-x="dom-context-2d-imageSmoothingEnabled">imageSmoothingEnabled</code>, <code
   data-x="dom-context-2d-imageSmoothingQuality">imageSmoothingQuality</code>.</li>
   <li>The current <span>dash list</span>.</li>
  </ul>

  <p class="note">The <span>current default path</span> and the rendering context's bitmaps are not
  part of the drawing state. The <span>current default path</span> is persistent, and can only be
  reset using the <code data-x="dom-context-2d-beginPath">beginPath()</code> method. The bitmaps
  depend on whether and how the rendering context is bound to a <code>canvas</code> element.</p>

  <dl class="domintro">

   <dt><var>context</var> . <code subdfn data-x="dom-context-2d-save">save</code>()</dt>

   <dd>

    <p>Pushes the current state onto the stack.</p>

   </dd>

   <dt><var>context</var> . <code subdfn data-x="dom-context-2d-restore">restore</code>()</dt>

   <dd>

    <p>Pops the top state on the stack, restoring the context to that state.</p>

   </dd>

  </dl>

  <div w-nodev>

  <p>The <dfn><code data-x="dom-context-2d-save">save()</code></dfn> method, when invoked, must push
  a copy of the current drawing state onto the drawing state stack.</p>

  <p>The <dfn><code data-x="dom-context-2d-restore">restore()</code></dfn> method, when invoked,
  must pop the top entry in the drawing state stack, and reset the drawing state it describes. If
  there is no saved state, then the method must do nothing.</p>

  <p>When the user agent is to <dfn>reset the rendering context to its default state</dfn>, it must
  clear the drawing state stack and everything that <span>drawing state</span> consists of to
  initial values.</p>

  <!-- v7
idea from Mihai:
> 5. Drawing states should be saveable with IDs, and for easier restoring.
>
> save(id)
> restore(id)
>
> If id is not provided, then save() works as defined now. The same for
> restore().
>
> Currently, it's not trivial to save and restore a specific state.
...and from Philip:
> I think a more convenient syntax would be:
>   var state = ctx.save();
>   ctx.restore(state);
> But how would it interact with normal calls to ctx.restore()?
  -->

  </div>


