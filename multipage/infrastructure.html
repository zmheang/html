<!DOCTYPE html><html class=split lang=en-US-x-hixie><script src=/html/link-fixup.js defer=""></script><meta charset=utf-8><meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name=viewport><title>HTML Standard</title><meta content=#3c790a name=theme-color><link rel=stylesheet href=https://resources.whatwg.org/spec.css crossorigin=""><link rel=stylesheet href=https://resources.whatwg.org/standard.css crossorigin=""><link rel=stylesheet href=https://resources.whatwg.org/standard-shared-with-dev.css crossorigin=""><link rel=icon href=https://resources.whatwg.org/logo.svg crossorigin=""><link rel=stylesheet href=/html/styles.css crossorigin=""><script>
   function toggleStatus(div) {
     div.parentNode.classList.toggle('wrapped');
   }
   function setLinkFragment(link) {
     link.hash = location.hash;
   }
  </script><link rel=stylesheet href=/html/resources/zh-cn.css><body>
  
  <script async="" crossorigin="" src=/html/resources/html-dfn.js></script>
  <script data-file-issue-url=https://github.com/whatwg/html/issues/new async="" crossorigin="" src=https://resources.whatwg.org/file-issue.js></script>
  
  <header id=head class="head with-buttons">
   <a href=https://whatwg.org/ class=logo><img width=100 alt=WHATWG crossorigin="" src=https://resources.whatwg.org/logo.svg height=100></a>
   <hgroup><h1 class=allcaps>HTML</h1><h2 id=living-standard class="no-num no-toc">Living Standard — Last Updated <span class=pubdate>20 June 2021</span></h2><div data-en-date="Sat Aug 11 2018 08:00:56 GMT+0000 (UTC)" class=translate-info data-zh-date="" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/living-standard-mdash-last-updated-date-01-jan-1901.en.html data-zh-file="https://github.com/whatwg-cn/html/new/master/src/living-standard-mdash-last-updated-date-01-jan-1901.zh.html?filename=living-standard-mdash-last-updated-date-01-jan-1901.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fliving-standard-mdash-last-updated-date-01-jan-1901.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91"></div><div data-en-date="Sat Aug 11 2018 08:00:56 GMT+0000 (UTC)" class=translate-info data-zh-date="" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/commit-snapshot-mdash-last-updated-date-01-jan-1901.en.html data-zh-file="https://github.com/whatwg-cn/html/new/master/src/commit-snapshot-mdash-last-updated-date-01-jan-1901.zh.html?filename=commit-snapshot-mdash-last-updated-date-01-jan-1901.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fcommit-snapshot-mdash-last-updated-date-01-jan-1901.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91"></div><div data-en-date="Sat Aug 11 2018 08:00:56 GMT+0000 (UTC)" class=translate-info data-zh-date="" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/review-draft-mdash-published-date-01-jan-1901.en.html data-zh-file="https://github.com/whatwg-cn/html/new/master/src/review-draft-mdash-published-date-01-jan-1901.zh.html?filename=review-draft-mdash-published-date-01-jan-1901.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Freview-draft-mdash-published-date-01-jan-1901.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91"></div></hgroup>
   
   
   <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-91053840-1', 'auto');
      ga('send', 'pageview');
   </script>
  </header>

  

  


  
<div data-en-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" class=translate-info data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/table-of-contents.en.html data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/table-of-contents.zh.html></div>
  


  
<div data-en-date="Sat Aug 11 2018 08:00:56 GMT+0000 (UTC)" class=translate-info data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/full-table-of-contents.en.html data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/full-table-of-contents.zh.html></div>
  

  

  


  <nav><a href=introduction.html>← 1 概述</a> — <a href=./>Table of Contents</a> — <a href=dom.html>3 HTML 文档的语义，结构，与API →</a></nav><ol class=toc><li id=toc-infrastructure><a href=infrastructure.html#infrastructure><span class=secno>2</span> 公共基础设施</a><ol><li><a href=infrastructure.html#术语><span class=secno>2.1</span> 术语</a><ol><li><a href=infrastructure.html#parallelism><span class=secno>2.1.1</span> Parallelism</a><li><a href=infrastructure.html#资源><span class=secno>2.1.2</span> 资源</a><li><a href=infrastructure.html#xml><span class=secno>2.1.3</span> XML 兼容性</a><li><a href=infrastructure.html#dom-树><span class=secno>2.1.4</span> DOM 树</a><li><a href=infrastructure.html#脚本><span class=secno>2.1.5</span> 脚本</a><li><a href=infrastructure.html#插件><span class=secno>2.1.6</span> 插件</a><li><a href=infrastructure.html#encoding-terminology><span class=secno>2.1.7</span> 字符编码</a><li><a href=infrastructure.html#符合性类别><span class=secno>2.1.8</span> 符合性类别</a><li><a href=infrastructure.html#dependencies><span class=secno>2.1.9</span> Dependencies</a><li><a href=infrastructure.html#可扩展性-2><span class=secno>2.1.10</span> 可扩展性</a><li><a href=infrastructure.html#interactions-with-xpath-and-xslt><span class=secno>2.1.11</span> 与 XPath 和 XSLT 交互</a></ol><li><a href=infrastructure.html#case-sensitivity-and-string-comparison><span class=secno>2.2</span> String comparison</a><li><a href=infrastructure.html#policy-controlled-features><span class=secno>2.3</span> Policy-controlled features</a><li><a href=infrastructure.html#公共微语法><span class=secno>2.4</span> 公共微语法</a><ol><li><a href=infrastructure.html#常见的解析器风格><span class=secno>2.4.1</span> 常见的解析器风格</a><li><a href=infrastructure.html#布尔属性><span class=secno>2.4.2</span> 布尔属性</a><li><a href=infrastructure.html#关键字和枚举属性><span class=secno>2.4.3</span> 关键字和枚举属性</a><li><a href=infrastructure.html#数字><span class=secno>2.4.4</span> 数字</a><ol><li><a href=infrastructure.html#有符号整数><span class=secno>2.4.4.1</span> 有符号整数</a><li><a href=infrastructure.html#非负整数><span class=secno>2.4.4.2</span> 非负整数</a><li><a href=infrastructure.html#浮点数><span class=secno>2.4.4.3</span> 浮点数</a><li><a href=infrastructure.html#percentages-and-dimensions><span class=secno>2.4.4.4</span> 百分数和长度</a><li><a href=infrastructure.html#非零百分数和长度><span class=secno>2.4.4.5</span> 非零百分数和长度</a><li><a href=infrastructure.html#浮点数列表><span class=secno>2.4.4.6</span> 浮点数列表</a><li><a href=infrastructure.html#维度值列表><span class=secno>2.4.4.7</span> 维度值列表</a></ol><li><a href=infrastructure.html#日期和时间><span class=secno>2.4.5</span> 日期和时间</a><ol><li><a href=infrastructure.html#月份><span class=secno>2.4.5.1</span> 月份</a><li><a href=infrastructure.html#日期><span class=secno>2.4.5.2</span> 日期</a><li><a href=infrastructure.html#无年的日期><span class=secno>2.4.5.3</span> 无年的日期</a><li><a href=infrastructure.html#时间><span class=secno>2.4.5.4</span> 时间</a><li><a href=infrastructure.html#本地日期和时间><span class=secno>2.4.5.5</span> 本地日期和时间</a><li><a href=infrastructure.html#时区><span class=secno>2.4.5.6</span> 时区</a><li><a href=infrastructure.html#全球日期和时间><span class=secno>2.4.5.7</span> 全球日期和时间</a><li><a href=infrastructure.html#星期><span class=secno>2.4.5.8</span> 星期</a><li><a href=infrastructure.html#时间间隔><span class=secno>2.4.5.9</span> 时间间隔</a><li><a href=infrastructure.html#模糊的时间><span class=secno>2.4.5.10</span> 模糊的时间</a></ol><li><a href=infrastructure.html#colours><span class=secno>2.4.6</span> 颜色</a><li><a href=infrastructure.html#空格分隔的令牌><span class=secno>2.4.7</span> 空格分隔的令牌</a><li><a href=infrastructure.html#逗号分隔的字符集><span class=secno>2.4.8</span> 逗号分隔的字符集</a><li><a href=infrastructure.html#syntax-references><span class=secno>2.4.9</span> 引用</a><li><a href=infrastructure.html#mq><span class=secno>2.4.10</span> 媒体查询</a></ol><li><a href=infrastructure.html#url-2><span class=secno>2.5</span> URL</a><ol><li><a href=infrastructure.html#术语-2><span class=secno>2.5.1</span> 术语</a><li><a href=infrastructure.html#resolving-urls><span class=secno>2.5.2</span> 解析 URL</a><li><a href=infrastructure.html#基-url-的动态变化><span class=secno>2.5.3</span> 基 URL 的动态变化</a></ol><li><a href=infrastructure.html#fetching-resources><span class=secno>2.6</span> 获取资源</a><ol><li><a href=infrastructure.html#术语-3><span class=secno>2.6.1</span> 术语</a><li><a href=infrastructure.html#content-type-sniffing><span class=secno>2.6.2</span> 确定响应类型</a><li><a href=infrastructure.html#从-meta-元素提取字符编码><span class=secno>2.6.3</span> 从 <code>meta</code> 元素提取字符编码</a><li><a href=infrastructure.html#cors-设置属性><span class=secno>2.6.4</span> CORS 设置属性</a><li><a href=infrastructure.html#引荐来源策略属性><span class=secno>2.6.5</span> 引荐来源策略属性</a><li><a href=infrastructure.html#nonce-attributes><span class=secno>2.6.6</span> Nonce attributes</a><li><a href=infrastructure.html#lazy-loading-attributes><span class=secno>2.6.7</span> Lazy loading attributes</a></ol><li><a href=infrastructure.html#通用-dom-接口><span class=secno>2.7</span> 通用 DOM 接口</a><ol><li><a href=infrastructure.html#在-idl-属性中反映内容属性><span class=secno>2.7.1</span> 在 IDL 属性中反映内容属性</a><li><a href=infrastructure.html#集合><span class=secno>2.7.2</span> 集合</a><ol><li><a href=infrastructure.html#the-htmlallcollection-interface><span class=secno>2.7.2.1</span> The <code>HTMLAllCollection</code> interface</a><ol><li><a href=infrastructure.html#HTMLAllCollection-call><span class=secno>2.7.2.1.1</span> [[Call]] ( <var>thisArgument</var>,  <var>argumentsList</var> )</a></ol><li><a href=infrastructure.html#htmlformcontrolscollection-接口><span class=secno>2.7.2.2</span> <code>HTMLFormControlsCollection</code> 接口</a><li><a href=infrastructure.html#htmloptionscollection-接口><span class=secno>2.7.2.3</span> <code>HTMLOptionsCollection</code> 接口</a></ol><li><a href=infrastructure.html#domstringlist-接口><span class=secno>2.7.3</span> <code>DOMStringList</code> 接口</a></ol><li><a href=infrastructure.html#安全地传递结构化数据><span class=secno>2.8</span> 安全地传递结构化数据</a><ol><li><a href=infrastructure.html#可序列化对象><span class=secno>2.8.1</span> 可序列化对象</a><li><a href=infrastructure.html#可传输对象><span class=secno>2.8.2</span> 可传输对象</a><li><a href=infrastructure.html#structuredserializeinternal><span class=secno>2.8.3</span> StructuredSerializeInternal ( <var>value</var>, <var>forStorage</var> [ ,
  <var>memory</var> ] )</a><li><a href=infrastructure.html#structuredserialize><span class=secno>2.8.4</span> StructuredSerialize ( <var>value</var> )</a><li><a href=infrastructure.html#structuredserializeforstorage><span class=secno>2.8.5</span> StructuredSerializeForStorage ( <var>value</var> )</a><li><a href=infrastructure.html#structureddeserialize><span class=secno>2.8.6</span> StructuredDeserialize ( <var>serialized</var>, <var>targetRealm</var> [ ,
  <var>memory</var> ] )</a><li><a href=infrastructure.html#structuredserializewithtransfer><span class=secno>2.8.7</span> StructuredSerializeWithTransfer ( <var>value</var>, <var>transferList</var>
  )</a><li><a href=infrastructure.html#structureddeserializewithtransfer><span class=secno>2.8.8</span> StructuredDeserializeWithTransfer ( <var>serializeWithTransferResult</var>,
  <var>targetRealm</var> )</a><li><a href=infrastructure.html#performing-structured-clones-from-other-specifications><span class=secno>2.8.9</span> 在其他规范中执行序列化和传输</a></ol></ol></ol><h2 id=infrastructure><span class=secno>2</span> 公共基础设施<a href=#infrastructure class=self-link></a></h2>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/index.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/index.en.html></div>

  <p>该标准依赖于 WHATWG Infra 标准。 <a href=references.html#refsINFRA>[INFRA]</a></p>


  <h3 id=术语><span class=secno>2.1</span> 术语<a href=#术语 class=self-link></a></h3>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/terminology/index.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/terminology/index.en.html></div>

  <p>该标准所说的属性，指的是 HTML，XML 和 IDL 属性，通常在同一个上下文中。当未具体提及所指时，HTML 和 XML 属性指的是 <dfn>content attributes</dfn>，而 <dfn>IDL
  attributes</dfn>指的是在 IDL 接口中定义的属性。同样，“属性”这个词也同时指 Javascript 对象属性和 CSS 属性。在可能产生混淆时，
  该标准使用 <dfn>object properties</dfn> 和 <dfn>CSS properties</dfn> 来区别。</p>

  <p>一般而言，当该标准申明一个特性可以在 <a href=syntax.html#syntax id=术语:syntax>HTML 语法</a> 或 <a href=xhtml.html#the-xhtml-syntax id=术语:the-xhtml-syntax>XML 语法</a> 中应用，则在另一个中也可用。
  当一个特性仅在两个语言之一中应用时，该标准将显式申明它不能在另一个语言中使用，
  如：“可在 HTML 中使用，…… （该语法不可用于 XML）”。</p>

  <p>该标准使用术语 <a href=dom.html#document id=术语:document>文档</a>指任何 HTML，从短小精悍的文档到长篇累牍的论文，
  亦或是多媒体报告、完整的交互式应用程序。该术语同时指 <code id=术语:document-2><a href=dom.html#document>Document</a></code> 对象和他们的后裔 DOM 树。至于序列化的字节流，
  则根据上下文使用 <a href=syntax.html#syntax id=术语:syntax-2>HTML 语法</a> 或 <a href=xhtml.html#the-xhtml-syntax id=术语:the-xhtml-syntax-2>XML 语法</a> 来表示。</p>

  <p>在 DOM 结构的上下文中，使用的术语 <a href=https://dom.spec.whatwg.org/#html-document id=术语:html-documents data-x-internal=html-documents>HTML 文档</a> 和
  <a href=https://dom.spec.whatwg.org/#xml-document id=术语:xml-documents data-x-internal=xml-documents>XML 文档</a> 定义在 DOM 标准中，
  并且特指 <code id=术语:document-3><a href=dom.html#document>Document</a></code> 对象所处的两种不同模式。 <a href=references.html#refsDOM>[DOM]</a> （这样的使用都会超链接到它们的定义）</p>

  <p>在字节流的上下文中，术语 <a href=https://dom.spec.whatwg.org/#html-document id=术语:html-documents-2 data-x-internal=html-documents>HTML 文档</a> 指标记为 <code id=术语:text/html><a href=iana.html#text/html>text/html</a></code> 的资源，
  术语 <a href=https://dom.spec.whatwg.org/#xml-document id=术语:xml-documents-2 data-x-internal=xml-documents>XML 文档</a> 指标记为 <a id=术语:xml-mime-type href=https://mimesniff.spec.whatwg.org/#xml-mime-type data-x-internal=xml-mime-type>XML MIME type</a> 的资源。</p>

  <hr>

  <p>简单起见，像 <dfn>shown</dfn>, <dfn>displayed</dfn>, 以及
  <dfn>visible</dfn> 这样的术语可能会用来指明文档渲染给用户的方式，
  这些术语并不是指应用于视觉媒介；必须考虑将它们以等价的方式应用于其他的媒介。</p>
  <p class=comment>某个元素是visible的并不仅仅指该元素在视觉上可见，比如屏幕阅读器也应将该元素阅读给用户。</p>

  

  <h4 id=parallelism><span class=secno>2.1.1</span> Parallelism<a href=#parallelism class=self-link></a></h4>
<div data-zh-date="" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file="https://github.com/whatwg-cn/html/new/master/src/common-infrastructure/terminology/parallelism.zh.html?filename=parallelism.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fcommon-infrastructure%2Fterminology%2Fparallelism.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/terminology/parallelism.en.html></div>

  <p>To run steps <dfn id=in-parallel data-export="">in parallel</dfn> means those steps are to be run, one after another,
  at the same time as other logic in the standard (e.g., at the same time as the <a id=parallelism:event-loop href=webappapis.html#event-loop>event
  loop</a>). This standard does not define the precise mechanism by which this is achieved, be it
  time-sharing cooperative multitasking, fibers, threads, processes, using different hyperthreads,
  cores, CPUs, machines, etc. By contrast, an operation that is to run <dfn id=immediately>immediately</dfn> must
  interrupt the currently running task, run itself, and then resume the previously running task.</p>

  <p class=note>For guidance on writing specifications that leverage parallelism, see <a href=webappapis.html#event-loop-for-spec-authors>Dealing with the event loop from other specifications</a>.</p>

  <p>To avoid race conditions between different <a href=#in-parallel id=parallelism:in-parallel>in parallel</a> algorithms that operate on
  the same data, a <a href=#parallel-queue id=parallelism:parallel-queue>parallel queue</a> can be used.</p>

  <p>A <dfn id=parallel-queue data-export="">parallel queue</dfn> represents a queue of algorithm steps that must be run in
  series.</p>

  <p>A <a href=#parallel-queue id=parallelism:parallel-queue-2>parallel queue</a> has an <dfn id=algorithm-queue>algorithm queue</dfn> (a <a id=parallelism:queue href=https://infra.spec.whatwg.org/#queue data-x-internal=queue>queue</a>),
  initially empty.</p>

  <p>To <dfn data-dfn-for="parallel queue" id=enqueue-the-following-steps data-lt="enqueue steps|enqueue the following
  steps" data-export="">enqueue steps</dfn> to a <a href=#parallel-queue id=parallelism:parallel-queue-3>parallel queue</a>,
  <a id=parallelism:enqueue href=https://infra.spec.whatwg.org/#queue-enqueue data-x-internal=enqueue>enqueue</a> the algorithm steps to the <a href=#parallel-queue id=parallelism:parallel-queue-4>parallel queue</a>'s <a href=#algorithm-queue id=parallelism:algorithm-queue>algorithm
  queue</a>.</p>

  <p>To <dfn id=starting-a-new-parallel-queue data-lt="start a new parallel queue|starting a
  new parallel queue" data-export="">start a new parallel queue</dfn>, run the following steps:</p>

  <ol><li><p>Let <var>parallelQueue</var> be a new <a href=#parallel-queue id=parallelism:parallel-queue-5>parallel queue</a>.<li>
    <p>Run the following steps <a href=#in-parallel id=parallelism:in-parallel-2>in parallel</a>:</p>

    <ol><li>
      <p>While true:</p>

      <ol><li><p>Let <var>steps</var> be the result of <a href=https://infra.spec.whatwg.org/#queue-dequeue id=parallelism:dequeue data-x-internal=dequeue>dequeueing</a> from
       <var>parallelQueue</var>'s <a href=#algorithm-queue id=parallelism:algorithm-queue-2>algorithm queue</a>.<li><p>If <var>steps</var> is not nothing, then run <var>steps</var>.<li><p>Assert: running <var>steps</var> did not throw an exception, as steps running <a href=#in-parallel id=parallelism:in-parallel-3>in
       parallel</a> are not allowed to throw.</ol>

      <p class=note>Implementations are not expected to implement this as a continuously running
      loop. Algorithms in standards are to be easy to understand and are not necessarily great for
      battery life or performance.</p>
     </ol>
   <li><p>Return <var>parallelQueue</var>.</ol>

  <p class=note>Steps running <a href=#in-parallel id=parallelism:in-parallel-4>in parallel</a> can themselves run other steps in <a href=#in-parallel id=parallelism:in-parallel-5>in
  parallel</a>. E.g., inside a <a href=#parallel-queue id=parallelism:parallel-queue-6>parallel queue</a> it can be useful to run a series of
  steps in parallel with the queue.</p>

  <div class=example>
   <p>Imagine a standard defined <var>nameList</var> (a <a id=parallelism:list href=https://infra.spec.whatwg.org/#list data-x-internal=list>list</a>), along with a method to
   add a <var>name</var> to <var>nameList</var>, unless <var>nameList</var> already <a href=https://infra.spec.whatwg.org/#list-contain id=parallelism:list-contains data-x-internal=list-contains>contains</a> <var>name</var>, in which case it rejects.</p>

   <p>The following solution suffers from race conditions:</p>

   <ol><li><p>Let <var>p</var> be a new promise.<li>
     <p>Run the following steps <a href=#in-parallel id=parallelism:in-parallel-6>in parallel</a>:</p>

     <ol><li><p>If <var>nameList</var> <a href=https://infra.spec.whatwg.org/#list-contain id=parallelism:list-contains-2 data-x-internal=list-contains>contains</a> <var>name</var>,
      reject <var>p</var> with a <code id=parallelism:typeerror><a data-x-internal=typeerror href=https://tc39.es/ecma262/#sec-native-error-types-used-in-this-standard-typeerror>TypeError</a></code> and abort these steps.<li><p>Do some potentially lengthy work.<li><p><a href=https://infra.spec.whatwg.org/#list-append id=parallelism:list-append data-x-internal=list-append>Append</a> <var>name</var> to
      <var>nameList</var>.<li><p>Resolve <var>p</var> with undefined.</ol>
    <li><p>Return <var>p</var>.</ol>

   <p>Two invocations of the above could run simultaneously, meaning <var>name</var> isn't in
   <var>nameList</var> during step 2.1, but it <em>might be added</em> before step 2.3 runs,
   meaning <var>name</var> ends up in <var>nameList</var> twice.</p>

   <p>Parallel queues solve this. The standard would let <var>nameListQueue</var> be the result of
   <a href=#starting-a-new-parallel-queue id=parallelism:starting-a-new-parallel-queue>starting a new parallel queue</a>, then:</p>

   <ol><li><p>Let <var>p</var> be a new promise.<li>
     <p><mark><a href=#enqueue-the-following-steps id=parallelism:enqueue-the-following-steps>Enqueue the following steps</a> to <var>nameListQueue</var>:</mark></p>

     <ol><li><p>If <var>nameList</var> <a href=https://infra.spec.whatwg.org/#list-contain id=parallelism:list-contains-3 data-x-internal=list-contains>contains</a> <var>name</var>,
      reject <var>p</var> with a <code id=parallelism:typeerror-2><a data-x-internal=typeerror href=https://tc39.es/ecma262/#sec-native-error-types-used-in-this-standard-typeerror>TypeError</a></code> and abort these steps.<li><p>Do some potentially lengthy work.<li><p><a href=https://infra.spec.whatwg.org/#list-append id=parallelism:list-append-2 data-x-internal=list-append>Append</a> <var>name</var> to
      <var>nameList</var>.<li><p>Resolve <var>p</var> with undefined.</ol>
    <li><p>Return <var>p</var>.</ol>

   <p>The steps would now queue and the race is avoided.</p>
  </div>

  



  <h4 id=资源><span class=secno>2.1.2</span> 资源<a href=#资源 class=self-link></a></h4>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/terminology/resources.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/terminology/resources.en.html></div>

  <p>本标准中术语 <dfn>支持</dfn>  是指用户代理是否实现了对外部资源的语义的解码能力。
  <i>支持</i> 某种格式或类型是指这一实现可以处理该格式或类型的外部资源，且处理过程不会忽略关键方面。
  是否 <i>支持</i> 某种特定资源取决于该资源类型有哪些在用的特性。</p>

  <p class=example>例如，如果可以解码和渲染 PNG 图片的像素数据，就可以认为支持 PNG 图片格式。
  即使这一实现不知道该图片还包含了动画数据。</p>

  <p class=example>如果不支持使用的压缩格式，即使实现可以从文件的元数据确定电影的尺寸，MPEG-4 视频文件也不会被视为支持的格式。</p>

  <p>有些标准中（特别是 HTTP 标准）中称为 <i>表示（representation）</i> 的在本标准中称为 <dfn>资源（resource）</dfn>。
  <a href=references.html#refsHTTP>[HTTP]</a></p>

  <p>资源的 <dfn id=critical-subresources>关键子资源</dfn> 是那些需要被正确处理的资源。
  哪些资源被认为是关键的，由定义该资源格式的标准来定义。</p>



  <h4 id=xml><span class=secno>2.1.3</span> XML 兼容性<a href=#xml class=self-link></a></h4>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/terminology/xml-compatibility.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/terminology/xml-compatibility.en.html></div>

  <p id=html-namespace>为了方便从 HTML 迁移到 XML，遵循本标准的用户代理会把 HTML 中的元素放在
  <code id=xml:html-namespace-2><a data-x-internal=html-namespace-2 href=https://infra.spec.whatwg.org/#html-namespace>http://www.w3.org/1999/xhtml</a></code> 命名空间，
  至少是为了 DOM 和 CSS 的目的。
  本标准中使用的术语 "<dfn id=html-elements>HTML 元素</dfn>"，是指所有在那个命名空间中的元素，
  包括 XML 文档中的。</p>

  <p>除非另有声明，所有本标准中定义和提到的元素均位于
  <a href=https://infra.spec.whatwg.org/#html-namespace id=xml:html-namespace-2-2 data-x-internal=html-namespace-2>HTML</a>
  （"<code>http：//www.w3.org/1999/xhtml</code>"），
  本标准中所有定义和提到的属性（Attribute）没有命名空间。</p>

  <p>术语 <dfn id=element-type>元素类型</dfn> 用于指代给定命名空间和局部名的那些元素。
  例如，<code id=xml:the-button-element><a href=form-elements.html#the-button-element>button</a></code> 元素的元素类型为 <code id=xml:the-button-element-2><a href=form-elements.html#the-button-element>button</a></code>，意味着它们的局部名为
  "<code>button</code>" 且（如上述定义地）命名空间为
  <a href=https://infra.spec.whatwg.org/#html-namespace id=xml:html-namespace-2-3 data-x-internal=html-namespace-2>HTML</a>。</p>

  <p>如果属性名匹配 XML 中定义的 <code id=xml:xml-name><a data-x-internal=xml-name href=https://www.w3.org/TR/xml/#NT-Name>Name</a></code> 生成式且不包含
  U+003A COLON 字符（：），那么它就是 <dfn id=xml-compatible>XML 兼容的</dfn> <a href=references.html#refsXML>[XML]</a></p>



  <h4 id=dom-树><span class=secno>2.1.4</span> DOM 树<a href=#dom-树 class=self-link></a></h4>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/terminology/dom-trees.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/terminology/dom-trees.en.html></div>

  <p>当声明 <dfn id=ignore>忽略</dfn> 某些元素或属性，或当作其他值处理，或当作其他东西处理时，
  都是指节点在 DOM 中之后的处理。在这些情形下用户代理禁止改动 DOM。</p>

  <p>只有内容属性的新值和原值不同时，才说内容属性的值发生了 <dfn>改变</dfn>；
  将内容属性设置到它已有的值不会让它发生改变。</p>

  <p>术语 <dfn>空</dfn> 用于属性值、<code id=dom-树:text><a data-x-internal=text href=https://dom.spec.whatwg.org/#interface-text>文本</a></code> 节点、或字符串时，
  表示文本的长度是零（即不包含<a href=https://infra.spec.whatwg.org/#control id=dom-树:control data-x-internal=control>控制字符</a> 或 U+0020 SPACE）。</p>

  <p><dfn id=nodes-are-inserted>插入节点 <var>A</var></dfn> 到节点 <var>B</var>
  是指以 <var>A</var> 作为参数调用 <a href=https://dom.spec.whatwg.org/#concept-node-insert-ext id=dom-树:concept-node-insert-ext data-x-internal=concept-node-insert-ext>插入步骤</a>，
  然后 <var>A</var> 新的父节点就是 <var>B</var>。类似地，从节点 <var>B</var>
  <dfn id=nodes-are-removed>移除节点 <var>A</var></dfn> 是指以 <var>A</var> 作为
  <var>removedNode</var> 参数，以 <var>B</var> 作为 <var>oldParent</var> 参数调用
  <a href=https://dom.spec.whatwg.org/#concept-node-remove-ext id=dom-树:concept-node-remove-ext data-x-internal=concept-node-remove-ext>移除步骤</a>。</p>

  <p><dfn id=insert-an-element-into-a-document data-lt="inserted into a document|node is inserted into a document" data-export="">插入节点到文档</dfn>
  是指把它作为参数调用 <a href=https://dom.spec.whatwg.org/#concept-node-insert-ext id=dom-树:concept-node-insert-ext-2 data-x-internal=concept-node-insert-ext>插入步骤</a>，
  然后它就 <a href=https://dom.spec.whatwg.org/#in-a-document-tree id=dom-树:in-a-document-tree data-x-internal=in-a-document-tree>在文档树中</a> 了。类似地，
  <dfn id=remove-an-element-from-a-document data-lt="removed from a document|node is removed from a document" data-export="">
  从文档中移除节点</dfn> 是指把它作为参数调用 <a href=https://dom.spec.whatwg.org/#concept-node-remove-ext id=dom-树:concept-node-remove-ext-2 data-x-internal=concept-node-remove-ext>移除步骤</a>，
  然后它就不 <a href=https://dom.spec.whatwg.org/#in-a-document-tree id=dom-树:in-a-document-tree-2 data-x-internal=in-a-document-tree>在文档树中</a> 了。</p>

  <p>把节点作为参数调用 <a href=https://dom.spec.whatwg.org/#concept-node-insert-ext id=dom-树:concept-node-insert-ext-3 data-x-internal=concept-node-insert-ext>插入步骤</a> 后，
  节点就 <dfn id=becomes-connected data-export="">变成已连接的</dfn>。
  类似地，把它作为参数调用 <a href=https://dom.spec.whatwg.org/#concept-node-remove-ext id=dom-树:concept-node-remove-ext-3 data-x-internal=concept-node-remove-ext>移除步骤</a> 后，
  节点就 <dfn id=becomes-disconnected data-lt="become disconnected" data-export="">
  变成了分离的</dfn>。</p>

  <p>如果节点是 <a href=https://dom.spec.whatwg.org/#connected id=dom-树:connected data-x-internal=connected>已连接的</a> 且它的
  <a href=https://dom.spec.whatwg.org/#concept-shadow-including-root id=dom-树:shadow-including-root data-x-internal=shadow-including-root>包含 Shadow 的根</a> 有
  <a href=browsers.html#concept-document-bc id=dom-树:concept-document-bc>浏览环境</a>，那么它是
  <dfn id=browsing-context-connected data-export="">连接到浏览环境的</dfn>。
  把节点作为参数调用 <a href=https://dom.spec.whatwg.org/#concept-node-insert-ext id=dom-树:concept-node-insert-ext-4 data-x-internal=concept-node-insert-ext>插入步骤</a> 后，
  它就 <dfn id=becomes-browsing-context-connected data-lt="become browsing-context connected" data-export="">连接到了浏览环境</dfn>。
  把节点作为参数调用<a href=https://dom.spec.whatwg.org/#concept-node-remove-ext id=dom-树:concept-node-remove-ext-4 data-x-internal=concept-node-remove-ext>移除步骤</a>，
  或者它的 <a href=https://dom.spec.whatwg.org/#concept-shadow-including-root id=dom-树:shadow-including-root-2 data-x-internal=shadow-including-root>包含 Shadow 的根</a> 不再拥有
  <a href=browsers.html#concept-document-bc id=dom-树:concept-document-bc-2>浏览环境</a> 后，
  它就 <dfn id=becomes-browsing-context-disconnected data-lt="become browsing-context disconnected" data-export="">与浏览环境分离了</dfn>。



  <h4 id=脚本><span class=secno>2.1.5</span> 脚本<a href=#脚本 class=self-link></a></h4>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/terminology/scripting.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/terminology/scripting.en.html></div>

  <p>有时会用构造 "一个 <code>Foo</code> 对象"
  （其中 <code>Foo</code> 其实是一个接口），
  来表示 "一个实现了 <code>Foo</code> 接口的对象"。</p>

  <p>获取 IDL 属性的值称为 <dfn>获取</dfn>（例如在作者的脚本中），
  将新的值赋值给 IDL 属性则称为 <dfn>设置</dfn>。</p>

  <p>如果 DOM 对象是 <dfn id=live>活的</dfn>，该对象上的属性和方法
  必须 在真正的底层数据（而不是数据快照）上进行操作。</p>



  <h4 id=插件><span class=secno>2.1.6</span> 插件<a href=#插件 class=self-link></a></h4>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/terminology/plugins.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/terminology/plugins.en.html></div>

  <p>术语 <dfn id=plugin>插件</dfn> 是指一些用户代理定义的内容处理程序，用户代理用它们
  参与 <code id=插件:document><a href=dom.html#document>Document</a></code> 对象的渲染，但不会作为 <code id=插件:document-2><a href=dom.html#document>Document</a></code> 的
  <a href=browsers.html#child-browsing-context id=插件:child-browsing-context>子浏览环境</a>，也不会给
  <code id=插件:document-3><a href=dom.html#document>Document</a></code> 的 DOM 引入任何 <code id=插件:node><a data-x-internal=node href=https://dom.spec.whatwg.org/#interface-node>Node</a></code> 对象。</p>

  <p>通常，这样的内容处理程序由第三方提供，尽管用户代理也可以将内置的内容处理程序指定为插件。</p>

  

  <p>用户代理不得将 <code id=插件:text/plain><a data-x-internal=text/plain href=https://tools.ietf.org/html/rfc2046#section-4.1.3>text/plain</a></code> 和 <code id=插件:application/octet-stream><a data-x-internal=application/octet-stream href=https://tools.ietf.org/html/rfc2046#section-4.5.1>application/octet-stream</a></code> 类型视为注册有
  <a href=#plugin id=插件:plugin>插件</a>。</p> 

  

  <p class=example>插件的一个例子是当用户导航到PDF文件时在
  <a href=browsers.html#browsing-context id=插件:browsing-context>浏览环境</a> 中实例化的PDF查看器。
  无论执行PDF查看器组件的一方是否与实现用户代理本身的方相同，这将被视为插件。
  但是根据定义，与用户代理（而不是使用相同的接口）分开启动的PDF查看器应用程序不是插件。</p>

  <p class=note>该规范没有定义与插件交互的机制，因为插件预期就是用户代理和平台特定的。
  UA 可以选择支持某种插件机制，比如 Netscape Plugin API；
  也可以选择对某些类型使用远程内容转换器或提供内置支持。
  实际上，本标准根本没有要求用户代理支持插件。<a href=references.html#refsNPAPI>[NPAPI]</a></p>

  <p><dfn id=concept-plugin-secure>安全</dfn> 插件应该遵循
  <code id=插件:attr-iframe-sandbox><a href=iframe-embed-object.html#attr-iframe-sandbox>sandbox</a></code> 属性的语义。</p>

  <p class=example>例如，在沙盒 <code id=插件:the-iframe-element><a href=iframe-embed-object.html#the-iframe-element>iframe</a></code> 中初始化的
  安全插件应该阻止其中的内容创建弹出窗口。</p>

  

  <p class=warning>在与 <a href=#plugin id=插件:plugin-2>插件</a> 的外部内容交互时，浏览器应该格外小心。
  当第三方软件以与用户代理本身相同的权限运行时，第三方软件中的漏洞变得与用户代理中的漏洞同样危险。</p>

  <p>因为不同的用户有不同的 <a href=#plugin id=插件:plugin-3>插件</a>，这提供了唯一识别用户的指纹向量，
  推荐用户代理对每个用户都支持同样的 <a href=#plugin id=插件:plugin-4>plugins</a>。
  
  </p>

  




  <h4 id=encoding-terminology><span class=secno>2.1.7</span> 字符编码<a href=#encoding-terminology class=self-link></a></h4>
<div data-zh-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/terminology/character-encodings.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/terminology/character-encodings.en.html></div>

  <p><dfn id=encoding><a href=https://encoding.spec.whatwg.org/#encoding>字符编码</a></dfn>
  或着没有歧义时说的 <i id=encoding-terminology:encoding><a data-x-internal=encoding href=https://encoding.spec.whatwg.org/#encoding>编码</a></i>，是一种字节流与 Unicode 字符串的转换，
  定义在 <cite>Encoding</cite> 中。<a href=https://encoding.spec.whatwg.org/#encoding id=encoding-terminology:encoding-2 data-x-internal=encoding>编码</a> 包括一个
  <dfn id=encoding-name><a href=https：//encoding.spec.whatwg.org/#name>编码名称</a></dfn>
  和一个或更多的 <dfn id=encoding-label><a href=https：//encoding.spec.whatwg.org/#label>
  编码标签</a></dfn>，编码的 <i>名称</i> 和 <i>标签</i>
  定义在 Encoding 标准中。 <a href=references.html#refsENCODING>[ENCODING]</a></p>


  


  <h4 id=符合性类别><span class=secno>2.1.8</span> 符合性类别<a href=#符合性类别 class=self-link></a></h4>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/terminology/conformance-classes.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/terminology/conformance-classes.en.html></div>

  <p>本标准描述了 用户代理（实现者相关）和 文档
   （作者和编写工具的实现者相关） 的符合性标准。</p>

  <p><dfn id=conforming-documents>符合规范的文档</dfn> 是符合所有符合性要求的文档。
  为了提高可读性，有些符合性要求是对作者提出的；这些是对文档的隐性要求：
  按照定义所有文档都有对应的作者。（有些情况下，作者本身可能是一个用户代理
  — 这些用户代理受其他规则的约束，见下文。）
  </p>

  <p class=example>例如，如果一项要求声明 "作者 禁止使用
  <code>foobar</code> 元素"，意味着文档不允许包含名为 <code>foobar</code> 的元素。</p>

  <p class="note impl">文档的符合性要求与实现的符合性要求没有隐含的关系。
  用户代理不能随意处理不合规范的文档；不论输入的文档是否合规，本标准中描述的处理模型都适用。</p>

  <p>按照不同的符合性要求，用户代理分为（有重合的）几类。</p>

  <dl><dt id=interactive>Web 浏览器和其他交互式用户代理<dd>

    <p>支持 <a href=xhtml.html#the-xhtml-syntax id=符合性类别:the-xhtml-syntax>XML 语法</a> 的 Web 浏览器必须按照本标准的描述
    处理 XML 文档中 <a href=https://infra.spec.whatwg.org/#html-namespace id=符合性类别:html-namespace-2 data-x-internal=html-namespace-2>HTML 命名空间</a> 的元素和属性，
    以便用户与之交互，除非那些元素的语义已经被其他标准覆盖。</p>

    <p class=example>在 XML 文档中查找 <code id=符合性类别:the-script-element><a href=scripting.html#the-script-element>script</a></code> 元素时，符合规范的 Web
    浏览器会执行该元素包含的脚本。然而，如果该元素处于 XSLT 变换中（假设用户代理也支持 XSLT），
    那么处理器会将 <code id=符合性类别:the-script-element-2><a href=scripting.html#the-script-element>script</a></code> 元素作为组成这一变换的不透明元素处理。</p>

    <p>支持 <a href=syntax.html#syntax id=符合性类别:syntax>HTML 语法</a> 的 Web 浏览器必须按照本标准的描述
    处理标记为 <a href=https://mimesniff.spec.whatwg.org/#html-mime-type id=符合性类别:html-mime-type data-x-internal=html-mime-type>HTML MIME 类型</a> 的文档，以便用户与它们交互。</p>

    <p>支持脚本的用户代理也必须一致地实现本标准中的 IDL 片段，IDL 片段定义在 Web IDL 标准中。 <a href=references.html#refsWEBIDL>[WEBIDL]</a></p>

    <p class=note>除非明确声明，覆盖 HTML 元素语义的标准不覆盖对（表示这些元素的） DOM 对象的要求。
    例如，上面例子中的 <code id=符合性类别:the-script-element-3><a href=scripting.html#the-script-element>script</a></code> 元素仍然实现 <code id=符合性类别:htmlscriptelement><a href=scripting.html#htmlscriptelement>HTMLScriptElement</a></code> 接口。</p>

   <dt id=non-interactive>表示性的非交互式用户代理<dd>

    <p>处理 HTML 和 XML 文档并纯粹地渲染它们的非交互式版本的用户代理必须遵循与
    Web 浏览器同样的符合性规范，除了它们可以免除用户交互的要求。</p>

    <p class=note>非交互式用户代理的典型例子就是打印机（静态 UA）和投影仪（动态 UA）。
    多数静态的非交互式用户代理 <a href=#non-scripted>不支持脚本</a>。</p>

    <p class=example>非交互式的动态 UA 仍然会执行脚本，以便动态提交表单。
    但是因为没有获得焦点的概念，这些 UA 可能不需要实现焦点相关的 DOM API。</p>

   <dt id=renderingUA>支持建议默认渲染的可视化用户代理<dd>

    <p>无论是交互式还是非交互式用户代理，都可以被指定（比如通过作为用户选项）本标准定义的建议默认渲染。</p>

    <p>这并非强制要求，特别是即使用户代理实现了建议默认渲染，也建议为此提供设置来提升用户体验，
    例如改变色彩对比度，使用不同的焦点样式，或者其他提升可访问性和可用性的方式。</p>

    <p>如果指定了建议默认渲染，支持建议默认渲染的用户代理必须根据
    <a href=rendering.html#rendering>渲染部分</a> 定义的规则实现
    用户代理 <em>期望</em> 实现的行为。</p>

   <dt id=non-scripted>不支持脚本的用户代理<dd>

    <p>不支持脚本的实现（或者完全禁用了其脚本特性的用户代理）可以不支持本标准中提到的事件和 DOM 接口。
    但对于本标准中定义的事件模型和 DOM，这些用户代理仍然必须表现地像支持事件和 DOM 一样。</p>

    <p class=note>脚本可能是构成应用的一部分。不支持脚本或禁用了脚本的 Web 浏览器可能无法完全表达作者的意图。</p>

   <dt>符合性检查器<dd id=conformance-checkers>

    <p>符合性检查器必须验证文档是否符合

    符合性检查程序必须验证文档是否符合本规范中描述的适用的一致性标准。
    自动化的符合检查程序可以不必检测需要解释作者意图的错误（例如，
    <code id=符合性类别:the-blockquote-element><a href=grouping-content.html#the-blockquote-element>blockquote</a></code> 的内容不是引用文档就不符合标准，如果符合性检查程序在运行时没有人为判断的输入，
    就不必检查 <code id=符合性类别:the-blockquote-element-2><a href=grouping-content.html#the-blockquote-element>blockquote</a></code>  元素是否只包含引用的内容）。</p>

    <p>符合性检查器必须检查没有
    <a href=browsers.html#concept-document-bc id=符合性类别:concept-document-bc>浏览环境</a>
    （意味着没有脚本运行，并且禁用了解析器的
    <a href=parsing.html#scripting-flag id=符合性类别:scripting-flag>脚本标志</a>
    ）时解析输入文档符合规范，
    还应检查在会执行脚本的
    <a href=browsers.html#concept-document-bc id=符合性类别:concept-document-bc-2>浏览环境</a>
    下解析输入文档符合规范，并且脚本的执行永远不会导致不符合规范的状态（脚本执行过程中除外）出现。
    （这只是一个“应该”而不是“必须”的要求，因为这已被证明是不可能的。<a href=references.html#refsCOMPUTABLE>[COMPUTABLE]</a>）</p>

    <p>"HTML 校验器" 可以指代遵循本标准中的适用要求的符合性检查器。</p>

    <div class=note>

     <p>XML DTD 无法表达本标准的所有符合性要求。因此 XML 校验器加 DTD 不能代替符合性检查器。
     此外本标准中定义的这两种写作格式都不属于 SGML，因此 SGML 系统也不能代替符合性检查器。</p>

     <p>换句话说，有三种符合性规则：</p>

     <ol><li>DTD 可表达的规则。<li>DTD 不可表达但仍然可以由机器检查的规则。<li>只能由人工检查的规则。</ol>

     <p>符合性检查器可以检查前面两种。简单的基于 DTD 的校验器只能检查第一类错误，
     因此根据本标准，它不是一种遵循标准的符合性检查器。</p>

    </div>
   <dt>数据挖掘工具<dd id=data-mining>

    <p>不是出于渲染文档或检查文档是否符合规范目的的，处理 HTML 和 XML 文档的应用程序和工具，
    其行为应当与其处理的文档的语义保持一致。</p>

    <p class=example>只增加每个段落（paragraph）的嵌套层级但不增加每个章节（section）的嵌套层级的
    <a href=sections.html#outline id=符合性类别:outline>文档大纲</a> 生成工具是不合规范的。</p>

    <p class=comment>只增加 <code>&lt;p></code> 的层级而不增加
    <code>&lt;section></code> 的层级会破坏 DOM 原有的语义，比如让段落变成了子段落。</p>

   <dt id=editors>编写工具和标记生成器<dd>

    <p>编写工具和标记生成器必须生成 <a href=#conforming-documents id=符合性类别:conforming-documents>符合规范的文档</a>。
    在适当的地方，适用于作者的符合性规则也适用于编写工具。</p>

    <p>如果编写工具还不能决定作者的意图，可以免除“只能按规定的用途使用元素”的严格要求。
    但是编写工具禁止自动地错误使用元素或鼓励它们的用户这样做。</p>

    <p class=example>例如，将 <code id=符合性类别:the-address-element><a href=sections.html#the-address-element>address</a></code> 元素用于任意的联系信息是不合规范的；
    该元素只能用于标记文档或章节作者的联系信息。因为编写工具不能区分此意图，所以可以免除这项要求。
    但这不意味着（比如）编写工具可以为了斜体字而任意地使用 <code id=符合性类别:the-address-element-2><a href=sections.html#the-address-element>address</a></code> 元素；
    只意味着编写工具可以在用户给章节插入联系信息时不验证它，
    也不需保证用户没用它做别的事或插入别的东西。</p>

    <p class=note>在符合性检查方面，文本编辑器必须像符合性检查器一样输出符合规范的文档。</p>

    <p>当使用编写工具编辑不符合规范的文档时，可以保持未编辑部分的符合性错误。
    （即允许错误的内容经过编辑工具而不发生改变）。
    但如果保持了错误，禁止编写工具声明其输出是符合规范的。</p>

    <p>编写工具大致分为两类：在结构化或语义数据上进行编辑，
    或者在所见即所得的（WYSIWYG）特定媒体上进行编辑。</p>

    <p>前者是编写 HTML 工具的理想机制，因为源码信息中的结构可用于更好地选择 HTML 元素和属性。</p>

    <p>但是 WYSIWYG 工具也是合理的。WYSIWYG 工具应该使用它们认为合适的元素，
    不应该使用它们不确定是否合适的元素。这可能在特定极端情况下意味着对能够使用的流式元素做出限制，
    比如 <code id=符合性类别:the-div-element><a href=grouping-content.html#the-div-element>div</a></code>，<code id=符合性类别:the-b-element><a href=text-level-semantics.html#the-b-element>b</a></code>，<code id=符合性类别:the-i-element><a href=text-level-semantics.html#the-i-element>i</a></code>，以及 <code id=符合性类别:the-span-element><a href=text-level-semantics.html#the-span-element>span</a></code>，以及使用大量的
    <code id=符合性类别:style-属性><a href=dom.html#style-属性>style</a></code> 属性。</p>

    <p>不论是不是 WYSIWYG，所有编写工具都应该尽量让用户创建良构的、语义丰富的、媒体无关的内容。</p>

   </dl>

  <p id=hardwareLimitations>为了防范诸如 DoS 攻击、内存耗尽，或解决平台相关的限制，
  用户代理可能会对本来不受约束的输入强加实现相关的限制。
  
  </p>

  <p>为了兼容既有内容与标准，本标准描述了两种写作格式：
  一种基于 <a href=xhtml.html#the-xhtml-syntax id=符合性类别:the-xhtml-syntax-2>XML</a>，
  另一种基于 SGML 启发的 <a href=syntax.html#writing>自定义格式</a>
  （称为 <a href=syntax.html#syntax id=符合性类别:syntax-2>HTML 语法</a>）。
  本标准鼓励实现同时支持以上两种格式，但至少支持其中一种。</p>

  <p>一些符合性要求称为元素、属性、方法或对象的要求。
  这些要求分为两类：描述内容模型限制的，和描述实现行为的。
  前者是对文档和编写工具的要求，后者是对用户代理的要求。
  类似地，另一些符合性要求称为对作者的要求；这些要求应解释为对作者产出的文档的符合性要求。
  （换句话说，本标准不区分对作者和对文档的符合性要求）</p>

  



  <h4 id=dependencies><span class=secno>2.1.9</span> Dependencies<a href=#dependencies class=self-link></a></h4>
<div data-zh-date="" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file="https://github.com/whatwg-cn/html/new/master/src/common-infrastructure/terminology/dependencies.zh.html?filename=dependencies.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fcommon-infrastructure%2Fterminology%2Fdependencies.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/terminology/dependencies.en.html></div>

  
  <div data-noexport="">

  <p>This specification relies on several other underlying specifications.</p>

  <dl><dt>Infra<dd>
    <p>The following terms are defined in <cite>Infra</cite>: <a href=references.html#refsINFRA>[INFRA]</a></p>

    <ul class=brief><li>The general iteration terms <dfn id=while><a href=https://infra.spec.whatwg.org/#iteration-while>while</a></dfn>,
             <dfn id=continue><a href=https://infra.spec.whatwg.org/#iteration-continue>continue</a></dfn>, and
             <dfn id=break><a href=https://infra.spec.whatwg.org/#iteration-break>break</a></dfn>.<li><dfn id=implementation-defined><a href=https://infra.spec.whatwg.org/#implementation-defined>implementation-defined</a></dfn><li id=fingerprint><span id=fingerprinting-vector></span>
     
     <dfn id=tracking-vector><a href=https://infra.spec.whatwg.org/#tracking-vector>tracking vector</a></dfn><li><dfn id=code-point><a href=https://infra.spec.whatwg.org/#code-point>code point</a></dfn> and its synonym
         <dfn id=character><a href=https://infra.spec.whatwg.org/#code-point>character</a></dfn><li><dfn id=surrogate><a href=https://infra.spec.whatwg.org/#surrogate>surrogate</a></dfn><li><dfn id=scalar-value><a href=https://infra.spec.whatwg.org/#scalar-value>scalar value</a></dfn><li><dfn id=tuple><a href=https://infra.spec.whatwg.org/#tuple>tuple</a></dfn><li><dfn id=noncharacter><a href=https://infra.spec.whatwg.org/#noncharacter>noncharacter</a></dfn><li><dfn id=string><a href=https://infra.spec.whatwg.org/#string>string</a></dfn>,
         <dfn id=code-unit><a href=https://infra.spec.whatwg.org/#code-unit>code unit</a></dfn>,
         <dfn id=length><a href=https://infra.spec.whatwg.org/#string-length>length</a></dfn>, and
         <dfn id=code-point-length><a href=https://infra.spec.whatwg.org/#string-code-point-length>code point length</a></dfn><li id=case-sensitive>The string equality operations <dfn id=is><a href=https://infra.spec.whatwg.org/#string-is>is</a></dfn> and
         <dfn id=identical-to><a href=https://infra.spec.whatwg.org/#string-is>identical to</a></dfn><li><dfn id=scalar-value-string><a href=https://infra.spec.whatwg.org/#scalar-value-string>scalar value string</a></dfn><li><dfn id=space-characters><a href=https://infra.spec.whatwg.org/#ascii-whitespace>ASCII whitespace</a></dfn><li><dfn id=control><a href=https://infra.spec.whatwg.org/#control>control</a></dfn><li><dfn id=ascii-digits><a href=https://infra.spec.whatwg.org/#ascii-digit>ASCII digit</a></dfn><li><dfn id=uppercase-ascii-hex-digits><a href=https://infra.spec.whatwg.org/#ascii-upper-hex-digit>ASCII upper hex digit</a></dfn><li><dfn id=lowercase-ascii-hex-digits><a href=https://infra.spec.whatwg.org/#ascii-lower-hex-digit>ASCII lower hex digit</a></dfn><li><dfn id=ascii-hex-digits><a href=https://infra.spec.whatwg.org/#ascii-hex-digit>ASCII hex digit</a></dfn><li><dfn id=uppercase-ascii-letters><a href=https://infra.spec.whatwg.org/#ascii-upper-alpha>ASCII upper alpha</a></dfn><li><dfn id=lowercase-ascii-letters><a href=https://infra.spec.whatwg.org/#ascii-lower-alpha>ASCII lower alpha</a></dfn><li><dfn id=ascii-letters><a href=https://infra.spec.whatwg.org/#ascii-alpha>ASCII alpha</a></dfn><li><dfn id=alphanumeric-ascii-characters><a href=https://infra.spec.whatwg.org/#ascii-alphanumeric>ASCII alphanumeric</a></dfn><li><dfn id=isomorphic-decode><a href=https://infra.spec.whatwg.org/#isomorphic-decode>isomorphic decode</a></dfn><li><dfn id=converted-to-ascii-lowercase><a href=https://infra.spec.whatwg.org/#ascii-lowercase>ASCII lowercase</a></dfn><li><dfn id=converted-to-ascii-uppercase><a href=https://infra.spec.whatwg.org/#ascii-uppercase>ASCII uppercase</a></dfn><li><dfn id=ascii-case-insensitive><a href=https://infra.spec.whatwg.org/#ascii-case-insensitive>ASCII case-insensitive</a></dfn><li><dfn id=strip-newlines><a href=https://infra.spec.whatwg.org/#strip-newlines>strip newlines</a></dfn><li><dfn id=normalize-newlines><a href=https://infra.spec.whatwg.org/#normalize-newlines>normalize newlines</a></dfn><li><dfn id=strip-leading-and-trailing-ascii-whitespace><a href=https://infra.spec.whatwg.org/#strip-leading-and-trailing-ascii-whitespace>strip leading and trailing ASCII whitespace</a></dfn><li><dfn id=strip-and-collapse-ascii-whitespace><a href=https://infra.spec.whatwg.org/#strip-and-collapse-ascii-whitespace>strip and collapse ASCII whitespace</a></dfn><li><dfn id=split-a-string-on-spaces><a href=https://infra.spec.whatwg.org/#split-on-ascii-whitespace>split a string on ASCII whitespace</a></dfn><li><dfn id=split-a-string-on-commas><a href=https://infra.spec.whatwg.org/#split-on-commas>split a string on commas</a></dfn><li><dfn id=collect-a-sequence-of-code-points><a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points>collect a sequence of code points</a></dfn> and its associated
         <dfn id=position-variable><a href=https://infra.spec.whatwg.org/#string-position-variable>position variable</a></dfn><li><dfn id=skip-ascii-whitespace><a href=https://infra.spec.whatwg.org/#skip-ascii-whitespace>skip ASCII whitespace</a></dfn><li>The <dfn id=ordered-map><a href=https://infra.spec.whatwg.org/#ordered-map>ordered map</a></dfn> data structure and the associated definitions for
             <dfn id=map-value><a href=https://infra.spec.whatwg.org/#map-value>value</a></dfn>,
             <dfn id=map-entry><a href=https://infra.spec.whatwg.org/#map-entry>entry</a></dfn>,
             <dfn id=map-exists><a href=https://infra.spec.whatwg.org/#map-exists>exists</a></dfn>,
             <dfn id=map-get><a href=https://infra.spec.whatwg.org/#map-get>getting the value of an entry</a></dfn>,
             <dfn id=map-set><a href=https://infra.spec.whatwg.org/#map-set>setting the value of an entry</a></dfn>,
             <dfn id=map-remove><a href=https://infra.spec.whatwg.org/#map-remove>removing an entry</a></dfn>,
             <dfn id=map-clear><a href=https://infra.spec.whatwg.org/#map-clear>clear</a></dfn>,
             <dfn id=map-get-the-keys><a href=https://infra.spec.whatwg.org/#map-getting-the-keys>getting the keys</a></dfn>,
             <dfn id=map-size><a href=https://infra.spec.whatwg.org/#map-size>size</a></dfn>, and
             <dfn id=map-iterate><a href=https://infra.spec.whatwg.org/#map-iterate>iterate</a></dfn><li>The <dfn id=list><a href=https://infra.spec.whatwg.org/#list>list</a></dfn> data structure and the associated definitions for
             <dfn id=list-append><a href=https://infra.spec.whatwg.org/#list-append>append</a></dfn>,
             <dfn id=list-extend><a href=https://infra.spec.whatwg.org/#list-extend>extend</a></dfn>,
             <dfn id=list-replace><a href=https://infra.spec.whatwg.org/#list-remove>replace</a></dfn>,
             <dfn id=list-remove><a href=https://infra.spec.whatwg.org/#list-remove>remove</a></dfn>,
             <dfn id=list-empty><a href=https://infra.spec.whatwg.org/#list-empty>empty</a></dfn>,
             <dfn id=list-contains><a href=https://infra.spec.whatwg.org/#list-contain>contains</a></dfn>,
             <dfn id=list-size><a href=https://infra.spec.whatwg.org/#list-size>size</a></dfn>,
             <dfn id=list-is-empty><a href=https://infra.spec.whatwg.org/#list-is-empty>is empty</a></dfn>,
             <dfn id=list-iterate><a href=https://infra.spec.whatwg.org/#list-iterate>iterate</a></dfn>, and
             <dfn id=list-clone><a href=https://infra.spec.whatwg.org/#list-clone>clone</a></dfn><li>The <dfn id=stack><a href=https://infra.spec.whatwg.org/#stack>stack</a></dfn> data structure and the associated definitions for
             <dfn id=stack-push><a href=https://infra.spec.whatwg.org/#stack-push>push</a></dfn> and
             <dfn id=stack-pop><a href=https://infra.spec.whatwg.org/#stack-pop>pop</a></dfn><li>The <dfn id=queue><a href=https://infra.spec.whatwg.org/#queue>queue</a></dfn> data structure and the associated definitions for
             <dfn id=enqueue><a href=https://infra.spec.whatwg.org/#queue-enqueue>enqueue</a></dfn> and
             <dfn id=dequeue><a href=https://infra.spec.whatwg.org/#queue-dequeue>dequeue</a></dfn><li>The <dfn id=set><a href=https://infra.spec.whatwg.org/#ordered-set>ordered set</a></dfn> data structure and the associated definition for
             <dfn id=set-append><a href=https://infra.spec.whatwg.org/#set-append>append</a></dfn> and
             <dfn id=set-union><a href=https://infra.spec.whatwg.org/#set-union>union</a></dfn><li>The <dfn id=struct><a href=https://infra.spec.whatwg.org/#struct>struct</a></dfn> specification type and the associated definition for
             <dfn id=struct-item><a href=https://infra.spec.whatwg.org/#struct-item>item</a></dfn><li>The <dfn id=forgiving-base64-encode><a href=https://infra.spec.whatwg.org/#forgiving-base64-encode>forgiving-base64 encode</a></dfn> and
             <dfn id=forgiving-base64-decode><a href=https://infra.spec.whatwg.org/#forgiving-base64-decode>forgiving-base64 decode</a></dfn> algorithms<li><dfn id=html-namespace-2><a href=https://infra.spec.whatwg.org/#html-namespace>HTML namespace</a></dfn><li><dfn id=mathml-namespace><a href=https://infra.spec.whatwg.org/#mathml-namespace>MathML namespace</a></dfn><li><dfn id=svg-namespace><a href=https://infra.spec.whatwg.org/#svg-namespace>SVG namespace</a></dfn><li><dfn id=xlink-namespace><a href=https://infra.spec.whatwg.org/#xlink-namespace>XLink namespace</a></dfn><li><dfn id=xml-namespace><a href=https://infra.spec.whatwg.org/#xml-namespace>XML namespace</a></dfn><li><dfn id=xmlns-namespace><a href=https://infra.spec.whatwg.org/#xmlns-namespace>XMLNS namespace</a></dfn></ul>
   <dt>Unicode and Encoding<dd>
    <p>The Unicode character set is used to represent textual data, and <cite>Encoding</cite>
    defines requirements around <a href=https://encoding.spec.whatwg.org/#encoding id=dependencies:encoding data-x-internal=encoding>character encodings</a>. <a href=references.html#refsUNICODE>[UNICODE]</a></p>

    <p class=note>This specification <a href=#encoding-terminology>introduces terminology</a>
    based on the terms defined in those specifications, as described earlier.</p>

    <p>The following terms are used as defined in <cite>Encoding</cite>: <a href=references.html#refsENCODING>[ENCODING]</a></p>

    <ul class=brief><li><dfn id=getting-an-encoding><a href=https://encoding.spec.whatwg.org/#concept-encoding-get>Getting an
     encoding</a></dfn><li><dfn id=get-an-output-encoding><a href=https://encoding.spec.whatwg.org/#get-an-output-encoding>Get an output
     encoding</a></dfn><li>The generic <dfn id=decode><a href=https://encoding.spec.whatwg.org/#decode>decode</a></dfn>
     algorithm which takes a byte stream and an encoding and returns a character stream<li>The <dfn id=utf-8-decode><a href=https://encoding.spec.whatwg.org/#utf-8-decode>UTF-8 decode</a></dfn>
     algorithm which takes a byte stream and returns a character stream, additionally stripping one
     leading UTF-8 Byte Order Mark (BOM), if any<li>The <dfn id=utf-8-decode-without-bom><a href=https://encoding.spec.whatwg.org/#utf-8-decode-without-bom>UTF-8
     decode without BOM</a></dfn> algorithm which is identical to <a id=dependencies:utf-8-decode href=https://encoding.spec.whatwg.org/#utf-8-decode data-x-internal=utf-8-decode>UTF-8 decode</a> except that
     it does not strip one leading UTF-8 Byte Order Mark (BOM)<li>The <dfn id=encode><a href=https://encoding.spec.whatwg.org/#encode>encode</a></dfn> algorithm
     which takes a character stream and an encoding and returns a byte stream<li>The <dfn id=utf-8-encode><a href=https://encoding.spec.whatwg.org/#utf-8-encode>UTF-8 encode</a></dfn>
     algorithm which takes a character stream and returns a byte stream<li>The <dfn id=bom-sniff><a href=https://encoding.spec.whatwg.org/#bom-sniff>BOM sniff</a></dfn>
     algorithm which takes a byte stream and returns an encoding or null.</ul>
   <dt>XML and related specifications<dd>
    <p>Implementations that support <a id=dependencies:the-xhtml-syntax href=xhtml.html#the-xhtml-syntax>the XML syntax</a> for HTML must support some version
    of XML, as well as its corresponding namespaces specification, because that syntax uses an XML
    serialization with namespaces. <a href=references.html#refsXML>[XML]</a> <a href=references.html#refsXMLNS>[XMLNS]</a></p>

    <p>Data mining tools and other user agents that perform operations on content without running
    scripts, evaluating CSS or XPath expressions, or otherwise exposing the resulting DOM to
    arbitrary content, may "support namespaces" by just asserting that their DOM node analogues are
    in certain namespaces, without actually exposing the namespace strings.</p>

    <p class=note>In <a id=dependencies:syntax href=syntax.html#syntax>the HTML syntax</a>, namespace prefixes and namespace declarations
    do not have the same effect as in XML. For instance, the colon has no special meaning in HTML
    element names.</p>

    <hr>

    <p>The attribute with the name <dfn id=attr-xml-space><a href=https://www.w3.org/TR/xml/#sec-white-space><code>space</code></a></dfn> in the <a id=dependencies:xml-namespace href=https://infra.spec.whatwg.org/#xml-namespace data-x-internal=xml-namespace>XML namespace</a> is defined by
    <cite>Extensible Markup Language</cite> (<cite>XML</cite>). <a href=references.html#refsXML>[XML]</a></p>

    <p>The <dfn id=xml-name><a href=https://www.w3.org/TR/xml/#NT-Name><code>Name</code></a></dfn> production is defined in <cite>XML</cite>. <a href=references.html#refsXML>[XML]</a></p>

    <p>This specification also references the <dfn id=xml-stylesheet><a href=https://www.w3.org/TR/xml-stylesheet/#the-xml-stylesheet-processing-instruction><code>&lt;?xml-stylesheet?></code></a></dfn>
    processing instruction, defined in <cite>Associating Style Sheets with XML documents</cite>.
    <a href=references.html#refsXMLSSPI>[XMLSSPI]</a></p>

    <p>This specification also non-normatively mentions the <dfn id=xsltprocessor><code>XSLTProcessor</code></dfn>
    interface and its <dfn id=dom-xsltprocessor-transformtofragment><code>transformToFragment()</code></dfn> and <dfn id=dom-xsltprocessor-transformtodocument><code>transformToDocument()</code></dfn> methods. <a href=references.html#refsXSLTP>[XSLTP]</a></p>
   <dt>URLs<dd>
    <p>The following terms are defined in <cite>URL</cite>: <a href=references.html#refsURL>[URL]</a></p>

    <ul class=brief><li><dfn id=concept-host><a href=https://url.spec.whatwg.org/#concept-host>host</a></dfn><li><dfn id=public-suffix><a href=https://url.spec.whatwg.org/#host-public-suffix>public suffix</a></dfn><li><dfn id=concept-domain><a href=https://url.spec.whatwg.org/#concept-domain>domain</a></dfn><li><dfn id=ipv4-address><a href=https://url.spec.whatwg.org/#concept-ipv4>IPv4 address</a></dfn><li><dfn id=ipv6-address><a href=https://url.spec.whatwg.org/#concept-ipv6>IPv6 address</a></dfn><li><dfn id=url><a href=https://url.spec.whatwg.org/#concept-url>URL</a></dfn><li><dfn id=concept-url-origin><a href=https://url.spec.whatwg.org/#concept-url-origin>Origin</a></dfn> of URLs<li><dfn id=absolute-url><a href=https://url.spec.whatwg.org/#syntax-url-absolute>Absolute URL</a></dfn><li><dfn id=relative-url><a href=https://url.spec.whatwg.org/#syntax-url-relative>Relative URL</a></dfn><li><dfn id=registrable-domain><a href=https://url.spec.whatwg.org/#host-registrable-domain>registrable domain</a></dfn><li>
      The <dfn id=url-parser><a href=https://url.spec.whatwg.org/#concept-url-parser>URL parser</a></dfn> and
      <dfn id=basic-url-parser><a href=https://url.spec.whatwg.org/#concept-basic-url-parser>basic URL
      parser</a></dfn> as well as these parser states:
      <ul class=brief><li><dfn id=scheme-start-state><a href=https://url.spec.whatwg.org/#scheme-start-state>scheme start state</a></dfn><li><dfn id=host-state><a href=https://url.spec.whatwg.org/#host-state>host state</a></dfn><li><dfn id=hostname-state><a href=https://url.spec.whatwg.org/#hostname-state>hostname state</a></dfn><li><dfn id=port-state><a href=https://url.spec.whatwg.org/#port-state>port state</a></dfn><li><dfn id=path-start-state><a href=https://url.spec.whatwg.org/#path-start-state>path start state</a></dfn><li><dfn id=query-state><a href=https://url.spec.whatwg.org/#query-state>query state</a></dfn><li><dfn id=fragment-state><a href=https://url.spec.whatwg.org/#fragment-state>fragment state</a></dfn></ul>
     <li>
      <dfn id=url-record><a href=https://url.spec.whatwg.org/#concept-url>URL record</a></dfn>, as well as its
      individual components:
      <ul class=brief><li><dfn id=concept-url-scheme><a href=https://url.spec.whatwg.org/#concept-url-scheme>scheme</a></dfn><li><dfn id=concept-url-username><a href=https://url.spec.whatwg.org/#concept-url-username>username</a></dfn><li><dfn id=concept-url-password><a href=https://url.spec.whatwg.org/#concept-url-password>password</a></dfn><li><dfn id=concept-url-host><a href=https://url.spec.whatwg.org/#concept-url-host>host</a></dfn><li><dfn id=concept-url-port><a href=https://url.spec.whatwg.org/#concept-url-port>port</a></dfn><li><dfn id=concept-url-path><a href=https://url.spec.whatwg.org/#concept-url-path>path</a></dfn><li><dfn id=concept-url-query><a href=https://url.spec.whatwg.org/#concept-url-query>query</a></dfn><li><dfn id=concept-url-fragment><a href=https://url.spec.whatwg.org/#concept-url-fragment>fragment</a></dfn><li><dfn id=cannot-be-a-base-url-flag><a href=https://url.spec.whatwg.org/#url-cannot-be-a-base-url-flag>cannot-be-a-base-URL flag</a></dfn><li><dfn id=concept-url-object><a href=https://url.spec.whatwg.org/#concept-url-object>object</a></dfn></ul>
     <li><dfn id=valid-url-string><a href=https://url.spec.whatwg.org/#valid-url-string>valid URL string</a></dfn><li>The <dfn id=cannot-have-a-username/password/port><a href=https://url.spec.whatwg.org/#cannot-have-a-username-password-port>cannot have a username/password/port</a></dfn> concept<li>The <dfn id=concept-url-serializer><a href=https://url.spec.whatwg.org/#concept-url-serializer>URL serializer</a></dfn><li>The <dfn id=host-parser><a href=https://url.spec.whatwg.org/#concept-host-parser>host parser</a></dfn><li>The <dfn id=host-serializer><a href=https://url.spec.whatwg.org/#concept-host-serializer>host serializer</a></dfn><li><dfn id=host-equals><a href=https://url.spec.whatwg.org/#concept-host-equals>Host equals</a></dfn><li><dfn id=concept-url-equals><a href=https://url.spec.whatwg.org/#concept-url-equals>URL equals</a></dfn><li><dfn id=serialize-an-integer><a href=https://url.spec.whatwg.org/#serialize-an-integer>serialize an integer</a></dfn><li><dfn id=default-encode-set><a href=https://url.spec.whatwg.org/#default-encode-set>Default encode set</a></dfn><li><dfn id=component-percent-encode-set><a href=https://url.spec.whatwg.org/#component-percent-encode-set>component percent-encode set</a></dfn><li><dfn id=utf-8-percent-encode><a href=https://url.spec.whatwg.org/#string-utf-8-percent-encode>UTF-8 percent-encode</a></dfn><li><dfn id=percent-decode><a href=https://url.spec.whatwg.org/#string-percent-decode>percent-decode</a></dfn><li><dfn id=set-the-username><a href=https://url.spec.whatwg.org/#set-the-username>set the username</a></dfn><li><dfn id=set-the-password><a href=https://url.spec.whatwg.org/#set-the-password>set the password</a></dfn><li>The <dfn id=application/x-www-form-urlencoded><a href=https://url.spec.whatwg.org/#concept-urlencoded><code>application/x-www-form-urlencoded</code></a></dfn> format<li>The <dfn id=application/x-www-form-urlencoded-serializer><a href=https://url.spec.whatwg.org/#concept-urlencoded-serializer><code>application/x-www-form-urlencoded</code> serializer</a></dfn></ul>

    <p>A number of schemes and protocols are referenced by this specification also:</p>

    <ul class=brief><li>The <dfn id=about-protocol><a href=https://tools.ietf.org/html/rfc6694#section-2><code>about:</code></a></dfn> scheme <a href=references.html#refsABOUT>[ABOUT]</a><li>The <dfn id=blob-protocol><a href=https://w3c.github.io/FileAPI/#DefinitionOfScheme><code>blob:</code></a></dfn> scheme <a href=references.html#refsFILEAPI>[FILEAPI]</a><li>The <dfn id=data-protocol><a href=https://tools.ietf.org/html/rfc2397#section-2><code>data:</code></a></dfn> scheme <a href=references.html#refsRFC2397>[RFC2397]</a><li>The <dfn id=http-protocol><a href=https://tools.ietf.org/html/rfc7230#section-2.7.1><code>http:</code></a></dfn> scheme <a href=references.html#refsHTTP>[HTTP]</a><li>The <dfn id=https-protocol><a href=https://tools.ietf.org/html/rfc7230#section-2.7.2><code>https:</code></a></dfn> scheme <a href=references.html#refsHTTP>[HTTP]</a><li>The <dfn id=mailto-protocol><a href=https://tools.ietf.org/html/rfc6068#section-2><code>mailto:</code></a></dfn> scheme <a href=references.html#refsMAILTO>[MAILTO]</a><li>The <dfn id=sms-protocol><a href=https://tools.ietf.org/html/rfc5724#section-2><code>sms:</code></a></dfn> scheme <a href=references.html#refsSMS>[SMS]</a><li>The <dfn id=urn-protocol><a href=https://tools.ietf.org/html/rfc2141#section-2><code>urn:</code></a></dfn> scheme <a href=references.html#refsURN>[URN]</a></ul>

    <p><dfn id=media-fragment-syntax><a href=https://www.w3.org/TR/media-frags/#media-fragment-syntax>Media fragment
    syntax</a></dfn> is defined in <cite>Media Fragments URI</cite>. <a href=references.html#refsMEDIAFRAG>[MEDIAFRAG]</a></p>
   <dt>HTTP and related specifications<dd>
    <p>The following terms are defined in the HTTP specifications: <a href=references.html#refsHTTP>[HTTP]</a></p>

    <ul class=brief><li>`<dfn id=http-accept><a href=https://tools.ietf.org/html/rfc7231#section-5.3.2><code>Accept</code></a></dfn>` header<li>`<dfn id=http-accept-language><a href=https://tools.ietf.org/html/rfc7231#section-5.3.5><code>Accept-Language</code></a></dfn>` header<li>`<dfn id=http-cache-control><a href=https://tools.ietf.org/html/rfc7234#section-5.2><code>Cache-Control</code></a></dfn>` header<li>`<dfn id=http-content-disposition><a href=https://tools.ietf.org/html/rfc6266><code>Content-Disposition</code></a></dfn>` header<li>`<dfn id=http-content-language><a href=https://tools.ietf.org/html/rfc7231#section-3.1.3.2><code>Content-Language</code></a></dfn>` header<li>`<dfn id=http-last-modified><a href=https://tools.ietf.org/html/rfc7232#section-2.2><code>Last-Modified</code></a></dfn>` header<li>`<dfn id=http-referer><a href=https://tools.ietf.org/html/rfc7231#section-5.5.2><code>Referer</code></a></dfn>` header</ul>

    <p>The following terms are defined in <cite>HTTP State Management Mechanism</cite>: <a href=references.html#refsCOOKIES>[COOKIES]</a></p>

    <ul class=brief><li><dfn id=cookie-string>cookie-string</dfn><li><dfn id=receives-a-set-cookie-string>receives a set-cookie-string</dfn><li>`<dfn id=http-cookie><code>Cookie</code></dfn>` header</ul>

    <p>The following term is defined in <cite>Web Linking</cite>: <a href=references.html#refsWEBLINK>[WEBLINK]</a></p>

    <ul class=brief><li>`<dfn id=http-link><a href=https://tools.ietf.org/html/rfc8288#section-3><code>Link</code></a></dfn>` header</ul>

    <p>The following terms are defined in <cite>Structured Field Values for HTTP</cite>: <a href=references.html#refsSTRUCTURED-FIELDS>[STRUCTURED-FIELDS]</a></p>

    <ul class=brief><li><dfn id=http-structured-header><a href=https://httpwg.org/http-extensions/draft-ietf-httpbis-header-structure.html>structured header</a></dfn><li><dfn id=http-structured-header-boolean><a href=https://httpwg.org/http-extensions/draft-ietf-httpbis-header-structure.html#boolean>boolean</a></dfn><li><dfn id=http-structured-header-token><a href=https://httpwg.org/http-extensions/draft-ietf-httpbis-header-structure.html#token>token</a></dfn><li><dfn id=http-structured-header-parameters><a href=https://httpwg.org/http-extensions/draft-ietf-httpbis-header-structure.html#param>parameters</a></dfn></ul>

    <p>The following terms are defined in <cite>MIME Sniffing</cite>: <a href=references.html#refsMIMESNIFF>[MIMESNIFF]</a></p>

    <ul class=brief><li><dfn id=mime-type><a href=https://mimesniff.spec.whatwg.org/#mime-type>MIME type</a></dfn><li><dfn id=valid-mime-type-string><a href=https://mimesniff.spec.whatwg.org/#valid-mime-type>valid MIME type string</a></dfn><li><dfn id=valid-mime-type-string-with-no-parameters><a href=https://mimesniff.spec.whatwg.org/#valid-mime-type-with-no-parameters>valid MIME type string with no parameters</a></dfn><li><dfn id=html-mime-type><a href=https://mimesniff.spec.whatwg.org/#html-mime-type>HTML MIME type</a></dfn><li><dfn id=javascript-mime-type><a href=https://mimesniff.spec.whatwg.org/#javascript-mime-type>JavaScript MIME type</a></dfn> and
         <dfn id=javascript-mime-type-essence-match><a href=https://mimesniff.spec.whatwg.org/#javascript-mime-type-essence-match>JavaScript MIME type essence match</a></dfn><li><dfn id=json-mime-type><a href=https://mimesniff.spec.whatwg.org/#json-mime-type>JSON MIME type</a></dfn><li><dfn id=xml-mime-type><a href=https://mimesniff.spec.whatwg.org/#xml-mime-type>XML MIME type</a></dfn></ul>
   <dt>Fetch<dd>
    <p>The following terms are defined in <cite>Fetch</cite>: <a href=references.html#refsFETCH>[FETCH]</a></p>

    <ul class=brief><li><dfn id=header-abnf><a href=https://fetch.spec.whatwg.org/#abnf>ABNF</a></dfn><li><dfn id=about:blank><code>about:blank</code></dfn><li>An <dfn id=http(s)-scheme><a href=https://fetch.spec.whatwg.org/#http-scheme>HTTP(S) scheme</a></dfn><li>A <dfn id=local-scheme><a href=https://fetch.spec.whatwg.org/#local-scheme>local scheme</a></dfn><li>A <dfn id=network-scheme><a href=https://fetch.spec.whatwg.org/#network-scheme>network scheme</a></dfn><li>A <dfn id=fetch-scheme><a href=https://fetch.spec.whatwg.org/#fetch-scheme>fetch scheme</a></dfn><li><dfn id=cors-protocol><a href=https://fetch.spec.whatwg.org/#http-cors-protocol>CORS protocol</a></dfn><li><dfn id=default-user-agent-value><a href=https://fetch.spec.whatwg.org/#default-user-agent-value>default `<code>User-Agent</code>` value</a></dfn><li><dfn id=extract-a-mime-type><a href=https://fetch.spec.whatwg.org/#concept-header-extract-mime-type>extract a MIME type</a></dfn><li><dfn id=concept-fetch><a href=https://fetch.spec.whatwg.org/#concept-fetch>fetch</a></dfn><li><dfn id=http-redirect-fetch><a href=https://fetch.spec.whatwg.org/#concept-http-redirect-fetch>HTTP-redirect fetch</a></dfn><li><dfn id=ok-status><a href=https://fetch.spec.whatwg.org/#ok-status>ok status</a></dfn><li><dfn id=navigation-request><a href=https://fetch.spec.whatwg.org/#navigation-request>navigation request</a></dfn><li><dfn id=network-error><a href=https://fetch.spec.whatwg.org/#concept-network-error>network error</a></dfn><li>`<dfn id=http-origin><a href=https://fetch.spec.whatwg.org/#http-origin><code>Origin</code></a></dfn>` header<li>`<dfn id=cross-origin-resource-policy><a href=https://fetch.spec.whatwg.org/#http-cross-origin-resource-policy><code>Cross-Origin-Resource-Policy</code></a></dfn>` header<li><dfn id=process-response><a href=https://fetch.spec.whatwg.org/#process-response>process response</a></dfn><li><dfn id=getting-a-structured-field-value><a href=https://fetch.spec.whatwg.org/#concept-header-list-get-structured-header>getting a structured field value</a></dfn><li><dfn id=concept-header-list-set><a href=https://fetch.spec.whatwg.org/#concept-header-list-set>set</a></dfn><li><dfn id=concept-header-list-get-decode-split><a href=https://fetch.spec.whatwg.org/#concept-header-list-get-decode-split>get, decode, and split</a></dfn><li><dfn id=concept-fetch-terminate><a href=https://fetch.spec.whatwg.org/#concept-fetch-terminate>terminate</a></dfn><li><dfn id=cross-origin-resource-policy-check><a href=https://fetch.spec.whatwg.org/#cross-origin-resource-policy-check>cross-origin resource policy check</a></dfn><li>the <dfn id=requestcredentials><a href=https://fetch.spec.whatwg.org/#requestcredentials><code>RequestCredentials</code></a></dfn> enumeration<li>the <dfn id=requestdestination><a href=https://fetch.spec.whatwg.org/#requestdestination><code>RequestDestination</code></a></dfn> enumeration<li>the <dfn id=fetch()><a href=https://fetch.spec.whatwg.org/#dom-global-fetch><code>fetch()</code></a></dfn> method<li><dfn id=serialize-a-response-url-for-reporting><a href=https://fetch.spec.whatwg.org/#serialize-a-response-url-for-reporting>serialize a response URL for reporting</a></dfn><li>
      <dfn id=concept-response><a href=https://fetch.spec.whatwg.org/#concept-response>response</a></dfn> and its
      associated:
      <ul class=brief><li><dfn id=concept-response-type><a href=https://fetch.spec.whatwg.org/#concept-response-type>type</a></dfn><li><dfn id=concept-response-url><a href=https://fetch.spec.whatwg.org/#concept-response-url>url</a></dfn><li><dfn id=concept-response-url-list><a href=https://fetch.spec.whatwg.org/#concept-response-url-list>url list</a></dfn><li><dfn id=concept-response-status><a href=https://fetch.spec.whatwg.org/#concept-response-status>status</a></dfn><li><dfn id=concept-response-header-list><a href=https://fetch.spec.whatwg.org/#concept-response-header-list>header list</a></dfn><li><dfn id=concept-response-body><a href=https://fetch.spec.whatwg.org/#concept-response-body>body</a></dfn><li><dfn id=concept-internal-response><a href=https://fetch.spec.whatwg.org/#concept-internal-response>internal response</a></dfn><li><dfn id=concept-response-csp-list><a href=https://fetch.spec.whatwg.org/#concept-response-csp-list>CSP list</a></dfn><li><dfn id=concept-response-location-url><a href=https://fetch.spec.whatwg.org/#concept-response-location-url>location URL</a></dfn></ul>
     <li>
      <dfn id=concept-request><a href=https://fetch.spec.whatwg.org/#concept-request>request</a></dfn> and its associated:
      <ul class=brief><li><dfn id=concept-request-url><a href=https://fetch.spec.whatwg.org/#concept-request-url>url</a></dfn><li><dfn id=concept-request-method><a href=https://fetch.spec.whatwg.org/#concept-request-method>method</a></dfn><li><dfn id=concept-request-header-list><a href=https://fetch.spec.whatwg.org/#concept-request-header-list>header list</a></dfn><li><dfn id=concept-request-body><a href=https://fetch.spec.whatwg.org/#concept-request-body>body</a></dfn><li><dfn id=concept-request-client><a href=https://fetch.spec.whatwg.org/#concept-request-client>client</a></dfn><li><dfn id=concept-request-url-list><a href=https://fetch.spec.whatwg.org/#concept-request-url-list>URL list</a></dfn><li><dfn id=concept-request-current-url><a href=https://fetch.spec.whatwg.org/#concept-request-current-url>current URL</a></dfn><li><dfn id=concept-request-reserved-client><a href=https://fetch.spec.whatwg.org/#concept-request-reserved-client>reserved client</a></dfn><li><dfn id=concept-request-replaces-client-id><a href=https://fetch.spec.whatwg.org/#concept-request-replaces-client-id>replaces client id</a></dfn><li><dfn id=concept-request-initiator><a href=https://fetch.spec.whatwg.org/#concept-request-initiator>initiator</a></dfn><li><dfn id=concept-request-destination><a href=https://fetch.spec.whatwg.org/#concept-request-destination>destination</a></dfn><li><dfn id=concept-potential-destination><a href=https://fetch.spec.whatwg.org/#concept-potential-destination>potential destination</a></dfn><li><dfn id=concept-potential-destination-translate><a href=https://fetch.spec.whatwg.org/#concept-potential-destination-translate>translating</a></dfn> a <a href=https://fetch.spec.whatwg.org/#concept-potential-destination id=dependencies:concept-potential-destination data-x-internal=concept-potential-destination>potential destination</a><li><dfn id=concept-script-like-destination><a href=https://fetch.spec.whatwg.org/#request-destination-script-like>script-like</a></dfn> <a href=https://fetch.spec.whatwg.org/#concept-request-destination id=dependencies:concept-request-destination data-x-internal=concept-request-destination>destinations</a><li><dfn id=concept-request-priority><a href=https://fetch.spec.whatwg.org/#concept-request-priority>priority</a></dfn><li><dfn id=concept-request-origin><a href=https://fetch.spec.whatwg.org/#concept-request-origin>origin</a></dfn><li><dfn id=concept-request-referrer><a href=https://fetch.spec.whatwg.org/#concept-request-referrer>referrer</a></dfn><li><dfn id=synchronous-flag><a href=https://fetch.spec.whatwg.org/#synchronous-flag>synchronous flag</a></dfn><li><dfn id=concept-request-mode><a href=https://fetch.spec.whatwg.org/#concept-request-mode>mode</a></dfn><li><dfn id=concept-request-credentials-mode><a href=https://fetch.spec.whatwg.org/#concept-request-credentials-mode>credentials mode</a></dfn><li><dfn id=use-url-credentials-flag><a href=https://fetch.spec.whatwg.org/#concept-request-use-url-credentials-flag>use-URL-credentials flag</a></dfn><li><dfn id=unsafe-request-flag><a href=https://fetch.spec.whatwg.org/#unsafe-request-flag>unsafe-request flag</a></dfn><li><dfn id=concept-request-cache-mode><a href=https://fetch.spec.whatwg.org/#concept-request-cache-mode>cache mode</a></dfn><li><dfn id=concept-request-redirect-mode><a href=https://fetch.spec.whatwg.org/#concept-request-redirect-mode>redirect mode</a></dfn><li><dfn id=concept-request-referrer-policy><a href=https://fetch.spec.whatwg.org/#concept-request-referrer-policy>referrer policy</a></dfn><li><dfn id=concept-request-nonce-metadata><a href=https://fetch.spec.whatwg.org/#concept-request-nonce-metadata>cryptographic nonce metadata</a></dfn><li><dfn id=concept-request-integrity-metadata><a href=https://fetch.spec.whatwg.org/#concept-request-integrity-metadata>integrity metadata</a></dfn><li><dfn id=concept-request-parser-metadata><a href=https://fetch.spec.whatwg.org/#concept-request-parser-metadata>parser metadata</a></dfn><li><dfn id=concept-request-reload-navigation-flag><a href=https://fetch.spec.whatwg.org/#concept-request-reload-navigation-flag>reload-navigation flag</a></dfn><li><dfn id=concept-request-history-navigation-flag><a href=https://fetch.spec.whatwg.org/#concept-request-history-navigation-flag>history-navigation flag</a></dfn></ul>
     </ul>

    <p>The following terms are defined in <cite>Referrer Policy</cite>: <a href=references.html#refsREFERRERPOLICY>[REFERRERPOLICY]</a></p>

    <ul class=brief><li><dfn id=referrer-policy><a href=https://w3c.github.io/webappsec-referrer-policy/#referrer-policy>referrer policy</a></dfn><li>The `<dfn id=http-referrer-policy><a href=https://w3c.github.io/webappsec-referrer-policy/#referrer-policy-header-dfn><code>Referrer-Policy</code></a></dfn>` HTTP header<li>The <dfn id=parse-referrer-policy-header><a href=https://w3c.github.io/webappsec-referrer-policy/#parse-referrer-policy-from-header>parse a referrer policy from a `<code>Referrer-Policy</code>` header</a></dfn> algorithm<li>The "<dfn id=referrer-policy-no-referrer><a href=https://w3c.github.io/webappsec-referrer-policy/#referrer-policy-no-referrer><code>no-referrer</code></a></dfn>",
             "<dfn id=referrer-policy-no-referrer-when-downgrade><a href=https://w3c.github.io/webappsec-referrer-policy/#referrer-policy-no-referrer-when-downgrade><code>no-referrer-when-downgrade</code></a></dfn>",
             "<dfn id=referrer-policy-origin-when-cross-origin><a href=https://w3c.github.io/webappsec-referrer-policy/#referrer-policy-origin-when-cross-origin><code>origin-when-cross-origin</code></a></dfn>", and
             "<dfn id=referrer-policy-unsafe-url><a href=https://w3c.github.io/webappsec-referrer-policy/#referrer-policy-unsafe-url><code>unsafe-url</code></a></dfn>" referrer policies</ul>

    <p>The following terms are defined in <cite>Mixed Content</cite>: <a href=references.html#refsMIX>[MIX]</a></p>

    <ul class=brief><li><dfn id=a-priori-authenticated-url><a href=https://w3c.github.io/webappsec-mixed-content/#a-priori-authenticated-url><i>a priori</i> authenticated URL</a></dfn></ul>
   <dt>Paint Timing<dd>
    <p>The following terms are defined in <cite>Paint Timing</cite>: <a href=references.html#refsPAINTTIMING>[PAINTTIMING]</a></p>

    <ul class=brief><li><dfn id=mark-paint-timing><a href=https://w3c.github.io/paint-timing/#mark-paint-timing>mark paint timing</a></dfn></ul>
   <dt>Long Tasks<dd>
    <p>The following terms are defined in <cite>Long Tasks</cite>: <a href=references.html#refsLONGTASKS>[LONGTASKS]</a></p>

    <ul class=brief><li><dfn id=report-long-tasks><a href=https://w3c.github.io/longtasks/#report-long-tasks>report long tasks</a></dfn></ul>
   <dt>Web IDL<dd>
    <p>The IDL fragments in this specification must be interpreted as required for conforming IDL
    fragments, as described in <cite>Web IDL</cite>. <a href=references.html#refsWEBIDL>[WEBIDL]</a></p>

    <p>The following terms are defined in <cite>Web IDL</cite>:</p>

    <ul class=brief><li><dfn id=this><a href=https://heycam.github.io/webidl/#this>this</a></dfn><li><dfn id=extended-attribute><a href=https://heycam.github.io/webidl/#dfn-extended-attribute>extended attribute</a></dfn><li><dfn id=named-constructor><a href=https://heycam.github.io/webidl/#dfn-named-constructor>named constructor</a></dfn><li><dfn id=constructor-operation><a href=https://heycam.github.io/webidl/#idl-constructors>constructor operation</a></dfn><li><dfn id=overridden-constructor-steps><a href=https://heycam.github.io/webidl/#overridden-constructor-steps>overridden constructor steps</a></dfn><li><dfn id=internally-create-a-new-object-implementing-the-interface><a href=https://heycam.github.io/webidl/#internally-create-a-new-object-implementing-the-interface>internally create a new object implementing the interface</a></dfn><li><dfn id=array-index-property-name><a href=https://heycam.github.io/webidl/#dfn-array-index-property-name>array index property name</a></dfn><li><dfn id=supported-property-indices><a href=https://heycam.github.io/webidl/#dfn-supported-property-indices>supported property indices</a></dfn><li><dfn id=determine-the-value-of-an-indexed-property><a href=https://heycam.github.io/webidl/#dfn-determine-the-value-of-an-indexed-property>determine the value of an indexed property</a></dfn><li><dfn id=set-the-value-of-an-existing-indexed-property><a href=https://heycam.github.io/webidl/#dfn-set-the-value-of-an-existing-indexed-property>set the value of an existing indexed property</a></dfn><li><dfn id=set-the-value-of-a-new-indexed-property><a href=https://heycam.github.io/webidl/#dfn-set-the-value-of-a-new-indexed-property>set the value of a new indexed property</a></dfn><li><dfn id=support-named-properties><a href=https://heycam.github.io/webidl/#dfn-support-named-properties>support named properties</a></dfn><li><dfn id=supported-property-names><a href=https://heycam.github.io/webidl/#dfn-supported-property-names>supported property names</a></dfn><li><dfn id=determine-the-value-of-a-named-property><a href=https://heycam.github.io/webidl/#dfn-determine-the-value-of-a-named-property>determine the value of a named property</a></dfn><li><dfn id=set-the-value-of-an-existing-named-property><a href=https://heycam.github.io/webidl/#dfn-set-the-value-of-an-existing-named-property>set the value of an existing named property</a></dfn><li><dfn id=set-the-value-of-a-new-named-property><a href=https://heycam.github.io/webidl/#dfn-set-the-value-of-a-new-named-property>set the value of a new named property</a></dfn><li><dfn id=delete-an-existing-named-property><a href=https://heycam.github.io/webidl/#dfn-delete-an-existing-named-property>delete an existing named property</a></dfn><li><dfn id=perform-a-security-check><a href=https://heycam.github.io/webidl/#dfn-perform-a-security-check>perform a security check</a></dfn><li><dfn id=platform-object><a href=https://heycam.github.io/webidl/#dfn-platform-object>platform object</a></dfn><li><dfn id=legacy-platform-object><a href=https://heycam.github.io/webidl/#dfn-legacy-platform-object>legacy platform object</a></dfn><li><dfn id=primary-interface><a href=https://heycam.github.io/webidl/#dfn-primary-interface>primary interface</a></dfn><li><dfn id=interface-object><a href=https://heycam.github.io/webidl/#dfn-interface-object>interface object</a></dfn><li><dfn id=include><a href=https://heycam.github.io/webidl/#include>include</a></dfn><li><dfn id=inherit><a href=https://heycam.github.io/webidl/#dfn-inherit>inherit</a></dfn><li><dfn id=interface-prototype-object><a href=https://heycam.github.io/webidl/#dfn-interface-prototype-object>interface prototype object</a></dfn><li><dfn id=realm-field-of-a-platform-object><a href=https://heycam.github.io/webidl/#es-platform-objects>[[Realm]] field of a platform object</a></dfn><li><dfn id=callback-context><a href=https://heycam.github.io/webidl/#dfn-callback-context>callback context</a></dfn><li><dfn id=frozen-array><a href=https://heycam.github.io/webidl/#dfn-frozen-array-type>frozen array</a></dfn> and
         <dfn id=creating-a-frozen-array><a href=https://heycam.github.io/webidl/#dfn-create-frozen-array>creating a frozen array</a></dfn><li><dfn id=new><a href=https://heycam.github.io/webidl/#new>create a new object implementing the interface</a></dfn><li><dfn id=dfn-callback-this-value><a href=https://heycam.github.io/webidl/#dfn-callback-this-value>callback this value</a></dfn><li><dfn id=concept-idl-convert><a href=https://heycam.github.io/webidl/#es-type-mapping>converting</a></dfn> between Web IDL types and JS types<li><dfn id=es-invoking-callback-functions><a href=https://heycam.github.io/webidl/#invoke-a-callback-function>invoking</a></dfn> and
         <dfn id=es-constructing-callback-functions><a href=https://heycam.github.io/webidl/#construct-a-callback-function>constructing</a></dfn> callback functions<li><dfn id=converting-to-a-sequence-of-unicode-scalar-values><a href=https://heycam.github.io/webidl/#dfn-obtain-unicode>converting to a
     sequence of Unicode scalar values</a></dfn><li><dfn id=overload-resolution-algorithm><a href=https://heycam.github.io/webidl/#dfn-overload-resolution-algorithm>overload resolution algorithm</a></dfn><li><dfn id=idl-exposed><a href=https://heycam.github.io/webidl/#dfn-exposed>exposed</a></dfn><li><dfn id=legacyfactoryfunction><a href=https://heycam.github.io/webidl/#LegacyFactoryFunction><code>[LegacyFactoryFunction]</code></a></dfn><li><dfn id=legacylenientthis><a href=https://heycam.github.io/webidl/#LegacyLenientThis><code>[LegacyLenientThis]</code></a></dfn><li><dfn id=legacynulltoemptystring><a href=https://heycam.github.io/webidl/#LegacyNullToEmptyString><code>[LegacyNullToEmptyString]</code></a></dfn><li><dfn id=legacyoverridebuiltins><a href=https://heycam.github.io/webidl/#LegacyOverrideBuiltIns><code>[LegacyOverrideBuiltIns]</code></a></dfn><li><dfn id=legacytreatnonobjectasnull><a href=https://heycam.github.io/webidl/#LegacyTreatNonObjectAsNull><code>[LegacyTreatNonObjectAsNull]</code></a></dfn><li><dfn id=legacyunenumerablenamedproperties><a href=https://heycam.github.io/webidl/#LegacyUnenumerableNamedProperties><code>[LegacyUnenumerableNamedProperties]</code></a></dfn><li><dfn id=legacyunforgeable><a href=https://heycam.github.io/webidl/#LegacyUnforgeable><code>[LegacyUnforgeable]</code></a></dfn></ul>

    <p>The <cite>Web IDL</cite> also defines the following types that are used in Web IDL fragments
    in this specification:</p>

    <ul class=brief><li><dfn id=idl-arraybuffer><a href=https://heycam.github.io/webidl/#idl-ArrayBuffer><code>ArrayBuffer</code></a></dfn><li><dfn id=idl-arraybufferview><a href=https://heycam.github.io/webidl/#common-ArrayBufferView><code>ArrayBufferView</code></a></dfn><li><dfn id=idl-boolean><a href=https://heycam.github.io/webidl/#idl-boolean><code>boolean</code></a></dfn><li><dfn id=idl-domstring><a href=https://heycam.github.io/webidl/#idl-DOMString><code>DOMString</code></a></dfn><li><dfn id=idl-double><a href=https://heycam.github.io/webidl/#idl-double><code>double</code></a></dfn><li><dfn id=idl-enumeration><a href=https://heycam.github.io/webidl/#idl-enums>enumeration</a></dfn><li><dfn id=idl-error><a href=https://heycam.github.io/webidl/#idl-Error><code>Error</code></a></dfn><li><dfn id=idl-function><a href=https://heycam.github.io/webidl/#common-Function><code>Function</code></a></dfn><li><dfn id=idl-long><a href=https://heycam.github.io/webidl/#idl-long><code>long</code></a></dfn><li><dfn id=idl-object><a href=https://heycam.github.io/webidl/#idl-object><code>object</code></a></dfn><li><dfn id=idl-uint8clampedarray><a href=https://heycam.github.io/webidl/#idl-Uint8ClampedArray><code>Uint8ClampedArray</code></a></dfn><li><dfn id=idl-unrestricted-double><a href=https://heycam.github.io/webidl/#idl-unrestricted-double><code>unrestricted double</code></a></dfn><li><dfn id=idl-unsigned-long><a href=https://heycam.github.io/webidl/#idl-unsigned-long><code>unsigned long</code></a></dfn><li><dfn id=idl-usvstring><a href=https://heycam.github.io/webidl/#idl-USVString><code>USVString</code></a></dfn><li><dfn id=idl-voidfunction><a href=https://heycam.github.io/webidl/#VoidFunction><code>VoidFunction</code></a></dfn></ul>

    <p>The term <dfn id=throw><a href=https://heycam.github.io/webidl/#dfn-throw>throw</a></dfn> in this
    specification is used as defined in <cite>Web IDL</cite>. The <dfn id=domexception><a href=https://heycam.github.io/webidl/#dfn-DOMException><code>DOMException</code></a></dfn>
    type and the following exception names are defined by Web IDL and used by this
    specification:</p>

    <ul class=brief><li><dfn id=indexsizeerror><a href=https://heycam.github.io/webidl/#indexsizeerror>"<code>IndexSizeError</code>"</a></dfn><li><dfn id=hierarchyrequesterror><a href=https://heycam.github.io/webidl/#hierarchyrequesterror>"<code>HierarchyRequestError</code>"</a></dfn><li><dfn id=invalidcharactererror><a href=https://heycam.github.io/webidl/#invalidcharactererror>"<code>InvalidCharacterError</code>"</a></dfn><li><dfn id=notfounderror><a href=https://heycam.github.io/webidl/#notfounderror>"<code>NotFoundError</code>"</a></dfn><li><dfn id=notsupportederror><a href=https://heycam.github.io/webidl/#notsupportederror>"<code>NotSupportedError</code>"</a></dfn><li><dfn id=invalidstateerror><a href=https://heycam.github.io/webidl/#invalidstateerror>"<code>InvalidStateError</code>"</a></dfn><li><dfn id=syntaxerror><a href=https://heycam.github.io/webidl/#syntaxerror>"<code>SyntaxError</code>"</a></dfn><li><dfn id=invalidaccesserror><a href=https://heycam.github.io/webidl/#invalidaccesserror>"<code>InvalidAccessError</code>"</a></dfn><li><dfn id=securityerror><a href=https://heycam.github.io/webidl/#securityerror>"<code>SecurityError</code>"</a></dfn><li><dfn id=networkerror><a href=https://heycam.github.io/webidl/#networkerror>"<code>NetworkError</code>"</a></dfn><li><dfn id=aborterror><a href=https://heycam.github.io/webidl/#aborterror>"<code>AbortError</code>"</a></dfn><li><dfn id=quotaexceedederror><a href=https://heycam.github.io/webidl/#quotaexceedederror>"<code>QuotaExceededError</code>"</a></dfn><li><dfn id=datacloneerror><a href=https://heycam.github.io/webidl/#datacloneerror>"<code>DataCloneError</code>"</a></dfn><li><dfn id=encodingerror><a href=https://heycam.github.io/webidl/#encodingerror>"<code>EncodingError</code>"</a></dfn><li><dfn id=notallowederror><a href=https://heycam.github.io/webidl/#notallowederror>"<code>NotAllowedError</code>"</a></dfn></ul>

    <p>When this specification requires a user agent to <dfn id=create-a-date-object>create a <code>Date</code> object</dfn>
    representing a particular time (which could be the special value Not-a-Number), the milliseconds
    component of that time, if any, must be truncated to an integer, and the time value of the newly
    created <code id=dependencies:date><a data-x-internal=date href=https://tc39.es/ecma262/#sec-date-objects>Date</a></code> object must represent the resulting truncated time.</p>

    <p class=example>For instance, given the time 23045 millionths of a second after 01:00 UTC on
    January 1st 2000, i.e. the time 2000-01-01T00:00:00.023045Z, then the <code id=dependencies:date-2><a data-x-internal=date href=https://tc39.es/ecma262/#sec-date-objects>Date</a></code> object
    created representing that time would represent the same time as that created representing the
    time 2000-01-01T00:00:00.023Z, 45 millionths earlier. If the given time is NaN, then the result
    is a <code id=dependencies:date-3><a data-x-internal=date href=https://tc39.es/ecma262/#sec-date-objects>Date</a></code> object that represents a time value NaN (indicating that the object does
    not represent a specific instant of time).</p>
   <dt>JavaScript<dd>
    <p>Some parts of the language described by this specification only support JavaScript as the
    underlying scripting language. <a href=references.html#refsJAVASCRIPT>[JAVASCRIPT]</a></p>

    <p class=note>The term "JavaScript" is used to refer to ECMA-262, rather than the official
    term ECMAScript, since the term JavaScript is more widely known. Similarly, the <a id=dependencies:mime-type href=https://mimesniff.spec.whatwg.org/#mime-type data-x-internal=mime-type>MIME
    type</a> used to refer to JavaScript in this specification is <code>text/javascript</code>, since that is the most commonly used type, <a href=introduction.html#willful-violation id=dependencies:willful-violation>despite it being an officially obsoleted type</a> according to RFC
    4329. <a href=references.html#refsRFC4329>[RFC4329]</a></p>

    <p>The following terms are defined in the JavaScript specification and used in this
    specification:</p>

    <ul class=brief><li><dfn id=active-function-object><a href=https://tc39.es/ecma262/#active-function-object>active function object</a></dfn><li><dfn id=agent><a href=https://tc39.es/ecma262/#sec-agents>agent</a></dfn> and
         <dfn id=agent-cluster><a href=https://tc39.es/ecma262/#sec-agent-clusters>agent cluster</a></dfn><li><dfn id=automatic-semicolon-insertion><a href=https://tc39.es/ecma262/#sec-automatic-semicolon-insertion>automatic semicolon insertion</a></dfn><li><dfn id=candidate-execution><a href=https://tc39.es/ecma262/#sec-candidate-executions>candidate execution</a></dfn><li>The <dfn id=current-realm-record><a href=https://tc39.es/ecma262/#current-realm>current Realm Record</a></dfn><li><dfn id=early-error><a href=https://tc39.es/ecma262/#early-error-rule>early error</a></dfn><li><dfn id=forward-progress><a href=https://tc39.es/ecma262/#sec-forward-progress>forward progress</a></dfn><li><dfn id=invariants-of-the-essential-internal-methods><a href=https://tc39.es/ecma262/#sec-invariants-of-the-essential-internal-methods>invariants of the essential internal methods</a></dfn><li><dfn id=javascript-execution-context><a href=https://tc39.es/ecma262/#sec-execution-contexts>JavaScript execution context</a></dfn><li><dfn id=javascript-execution-context-stack><a href=https://tc39.es/ecma262/#execution-context-stack>JavaScript execution context stack</a></dfn><li><dfn id=javascript-realm><a href=https://tc39.es/ecma262/#sec-code-realms>JavaScript realm</a></dfn><li><dfn id=environmentrecord><a href=https://tc39.es/ecma262/#sec-lexical-environments>EnvironmentRecord</a></dfn><li><dfn id=newtarget><a href=https://tc39.es/ecma262/#sec-built-in-function-objects>NewTarget</a></dfn><li><dfn id=running-javascript-execution-context><a href=https://tc39.es/ecma262/#running-execution-context>running JavaScript execution context</a></dfn><li><dfn id=surrounding-agent><a href=https://tc39.es/ecma262/#surrounding-agent>surrounding agent</a></dfn><li><dfn id=abstract-closure><a href=https://tc39.es/ecma262/#sec-abstract-closure>abstract closure</a></dfn><li><dfn id=immutable-prototype-exotic-object><a href=https://tc39.es/ecma262/#immutable-prototype-exotic-object>immutable prototype exotic object</a></dfn><li><dfn id=well-known-symbols><a href=https://tc39.es/ecma262/#sec-well-known-symbols>Well-Known Symbols</a></dfn>, including
         <dfn id=@@hasinstance>@@hasInstance</dfn>,
         <dfn id=@@isconcatspreadable>@@isConcatSpreadable</dfn>,
         <dfn id=@@toprimitive>@@toPrimitive</dfn>, and
         <dfn id=@@tostringtag>@@toStringTag</dfn><li><dfn id=well-known-intrinsic-objects><a href=https://tc39.es/ecma262/#sec-well-known-intrinsic-objects>Well-Known Intrinsic Objects</a></dfn>, including
         <dfn id=array.prototype><a href=https://tc39.es/ecma262/#sec-properties-of-the-array-prototype-object>%Array.prototype%</a></dfn>,
         <dfn id=error.prototype><a href=https://tc39.es/ecma262/#sec-properties-of-the-error-prototype-object>%Error.prototype%</a></dfn>,
         <dfn id=evalerror.prototype>%EvalError.prototype%</dfn>,
         <dfn id=function.prototype><a href=https://tc39.es/ecma262/#sec-properties-of-the-function-prototype-object>%Function.prototype%</a></dfn>,
         <dfn id=json.parse><a href=https://tc39.es/ecma262/#sec-json.parse>%JSON.parse%</a></dfn>,
         <dfn id=object.prototype><a href=https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object>%Object.prototype%</a></dfn>,
         <dfn id=object.prototype.valueof><a href=https://tc39.es/ecma262/#sec-object.prototype.valueof>%Object.prototype.valueOf%</a></dfn>,
         <dfn id=rangeerror.prototype>%RangeError.prototype%</dfn>,
         <dfn id=referenceerror.prototype>%ReferenceError.prototype%</dfn>,
         <dfn id=syntaxerror.prototype>%SyntaxError.prototype%</dfn>,
         <dfn id=typeerror.prototype>%TypeError.prototype%</dfn>, and
         <dfn id=urierror.prototype>%URIError.prototype%</dfn><li>The <dfn id=js-prod-functionbody><a href=https://tc39.es/ecma262/#prod-FunctionBody><i>FunctionBody</i></a></dfn> production<li>The <dfn id=js-prod-module><a href=https://tc39.es/ecma262/#prod-Module><i>Module</i></a></dfn> production<li>The <dfn id=js-prod-pattern><a href=https://tc39.es/ecma262/#prod-Pattern><i>Pattern</i></a></dfn> production<li>The <dfn id=js-prod-script><a href=https://tc39.es/ecma262/#prod-Script><i>Script</i></a></dfn> production<li>The <dfn id=js-type><a href=https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values>Type</a></dfn> notation<li>The <dfn id=abrupt-completion><a href=https://tc39.es/ecma262/#sec-completion-record-specification-type>Completion Record</a></dfn> specification type<li>The <dfn id=js-list><a href=https://tc39.es/ecma262/#sec-list-and-record-specification-type>List</a></dfn> and
             <dfn id=record><a href=https://tc39.es/ecma262/#sec-list-and-record-specification-type>Record</a></dfn> specification types<li>The <dfn id=propertydescriptor><a href=https://tc39.es/ecma262/#sec-property-descriptor-specification-type>Property Descriptor</a></dfn> specification type<li>The <dfn id=script-record><a href=https://tc39.es/ecma262/#sec-script-records>Script Record</a></dfn> specification type<li>The <dfn id=cyclic-module-record><a href=https://tc39.es/ecma262/#sec-cyclic-module-records>Cyclic Module Record</a></dfn> specification type<li>The <dfn id=source-text-module-record><a href=https://tc39.es/ecma262/#sec-source-text-module-records>Source Text Module Record</a></dfn> specification type and its
             <dfn id=js-evaluate><a href=https://tc39.es/ecma262/#sec-moduleevaluation>Evaluate</a></dfn> and
             <dfn id=js-link><a href=https://tc39.es/ecma262/#sec-moduledeclarationlinking>Link</a></dfn> methods<li>The <dfn id=arraycreate><a href=https://tc39.es/ecma262/#sec-arraycreate>ArrayCreate</a></dfn> abstract operation<li>The <dfn id=call><a href=https://tc39.es/ecma262/#sec-call>Call</a></dfn> abstract operation<li>The <dfn id=construct><a href=https://tc39.es/ecma262/#sec-construct>Construct</a></dfn> abstract operation<li>The <dfn id=copydatablockbytes><a href=https://tc39.es/ecma262/#sec-copydatablockbytes>CopyDataBlockBytes</a></dfn> abstract operation<li>The <dfn id=createbytedatablock><a href=https://tc39.es/ecma262/#sec-createbytedatablock>CreateByteDataBlock</a></dfn> abstract operation<li>The <dfn id=createdataproperty><a href=https://tc39.es/ecma262/#sec-createdataproperty>CreateDataProperty</a></dfn> abstract operation<li>The <dfn id=detacharraybuffer><a href=https://tc39.es/ecma262/#sec-detacharraybuffer>DetachArrayBuffer</a></dfn> abstract operation<li>The <dfn id=enumerableownpropertynames><a href=https://tc39.es/ecma262/#sec-enumerableownpropertynames>EnumerableOwnPropertyNames</a></dfn> abstract operation<li>The <dfn id=finishdynamicimport><a href=https://tc39.es/ecma262/#sec-finishdynamicimport>FinishDynamicImport</a></dfn> abstract operation<li>The <dfn id=js-ordinaryfunctioncreate><a href=https://tc39.es/ecma262/#sec-ordinaryfunctioncreate>OrdinaryFunctionCreate</a></dfn> abstract operation<li>The <dfn id=js-get><a href=https://tc39.es/ecma262/#sec-get-o-p>Get</a></dfn> abstract operation<li>The <dfn id=getactivescriptormodule><a href=https://tc39.es/ecma262/#sec-getactivescriptormodule>GetActiveScriptOrModule</a></dfn> abstract operation<li>The <dfn id=getfunctionrealm><a href=https://tc39.es/ecma262/#sec-getfunctionrealm>GetFunctionRealm</a></dfn> abstract operation<li>The <dfn id=hasownproperty><a href=https://tc39.es/ecma262/#sec-hasownproperty>HasOwnProperty</a></dfn> abstract operation<li>The <dfn id=js-hostenqueuepromisejob><a href=https://tc39.es/ecma262/#sec-hostenqueuepromisejob>HostEnqueuePromiseJob</a></dfn> abstract operation<li>The <dfn id=js-hostensurecancompilestrings><a href=https://tc39.es/ecma262/#sec-hostensurecancompilestrings>HostEnsureCanCompileStrings</a></dfn> abstract operation<li>The <dfn id=js-hostimportmoduledynamically><a href=https://tc39.es/proposal-dynamic-import/#sec-hostimportmoduledynamically>HostImportModuleDynamically</a></dfn> abstract operation<li>The <dfn id=js-hostpromiserejectiontracker><a href=https://tc39.es/ecma262/#sec-host-promise-rejection-tracker>HostPromiseRejectionTracker</a></dfn> abstract operation<li>The <dfn id=js-hostresolveimportedmodule><a href=https://tc39.es/ecma262/#sec-hostresolveimportedmodule>HostResolveImportedModule</a></dfn> abstract operation<li>The <dfn id=js-initializehostdefinedrealm><a href=https://tc39.es/ecma262/#sec-initializehostdefinedrealm>InitializeHostDefinedRealm</a></dfn> abstract operation<li>The <dfn id=isaccessordescriptor><a href=https://tc39.es/ecma262/#sec-isaccessordescriptor>IsAccessorDescriptor</a></dfn> abstract operation<li>The <dfn id=iscallable><a href=https://tc39.es/ecma262/#sec-iscallable>IsCallable</a></dfn> abstract operation<li>The <dfn id=isconstructor><a href=https://tc39.es/ecma262/#sec-isconstructor>IsConstructor</a></dfn> abstract operation<li>The <dfn id=isdatadescriptor><a href=https://tc39.es/ecma262/#sec-isdatadescriptor>IsDataDescriptor</a></dfn> abstract operation<li>The <dfn id=isdetachedbuffer><a href=https://tc39.es/ecma262/#sec-isdetachedbuffer>IsDetachedBuffer</a></dfn> abstract operation<li>The <dfn id=issharedarraybuffer><a href=https://tc39.es/ecma262/#sec-issharedarraybuffer>IsSharedArrayBuffer</a></dfn> abstract operation<li>The <dfn id=js-newobjectenvironment><a href=https://tc39.es/ecma262/#sec-newobjectenvironment>NewObjectEnvironment</a></dfn> abstract operation<li>The <dfn id=normalcompletion><a href=https://tc39.es/ecma262/#sec-normalcompletion>NormalCompletion</a></dfn> abstract operation<li>The <dfn id=ordinarygetprototypeof><a href=https://tc39.es/ecma262/#sec-ordinarygetprototypeof>OrdinaryGetPrototypeOf</a></dfn> abstract operation<li>The <dfn id=ordinarysetprototypeof><a href=https://tc39.es/ecma262/#sec-ordinarysetprototypeof>OrdinarySetPrototypeOf</a></dfn> abstract operation<li>The <dfn id=ordinaryisextensible><a href=https://tc39.es/ecma262/#sec-ordinaryisextensible>OrdinaryIsExtensible</a></dfn> abstract operation<li>The <dfn id=ordinarypreventextensions><a href=https://tc39.es/ecma262/#sec-ordinarypreventextensions>OrdinaryPreventExtensions</a></dfn> abstract operation<li>The <dfn id=ordinarygetownproperty><a href=https://tc39.es/ecma262/#sec-ordinarygetownproperty>OrdinaryGetOwnProperty</a></dfn> abstract operation<li>The <dfn id=ordinarydefineownproperty><a href=https://tc39.es/ecma262/#sec-ordinarydefineownproperty>OrdinaryDefineOwnProperty</a></dfn> abstract operation<li>The <dfn id=ordinaryget><a href=https://tc39.es/ecma262/#sec-ordinaryget>OrdinaryGet</a></dfn> abstract operation<li>The <dfn id=ordinaryset><a href=https://tc39.es/ecma262/#sec-ordinaryset>OrdinarySet</a></dfn> abstract operation<li>The <dfn id=ordinarydelete><a href=https://tc39.es/ecma262/#sec-ordinarydelete>OrdinaryDelete</a></dfn> abstract operation<li>The <dfn id=ordinaryownpropertykeys><a href=https://tc39.es/ecma262/#sec-ordinaryownpropertykeys>OrdinaryOwnPropertyKeys</a></dfn> abstract operation<li>The <dfn id=objectcreate><a href=https://tc39.es/ecma262/#sec-objectcreate>ObjectCreate</a></dfn> abstract operation<li>The <dfn id=js-parsemodule><a href=https://tc39.es/ecma262/#sec-parsemodule>ParseModule</a></dfn> abstract operation<li>The <dfn id=js-parsescript><a href=https://tc39.es/ecma262/#sec-parse-script>ParseScript</a></dfn> abstract operation<li>The <dfn id=newpromisereactionjob><a href=https://tc39.es/ecma262/#sec-newpromisereactionjob>NewPromiseReactionJob</a></dfn> abstract operation<li>The <dfn id=newpromiseresolvethenablejob><a href=https://tc39.es/ecma262/#sec-newpromiseresolvethenablejob>NewPromiseResolveThenableJob</a></dfn> abstract operation<li>The <dfn id=regexpbuiltinexec><a href=https://tc39.es/ecma262/#sec-regexpbuiltinexec>RegExpBuiltinExec</a></dfn> abstract operation<li>The <dfn id=regexpcreate><a href=https://tc39.es/ecma262/#sec-regexpcreate>RegExpCreate</a></dfn> abstract operation<li>The <dfn id=runjobs><a href=https://tc39.es/ecma262/#sec-runjobs>RunJobs</a></dfn> abstract operation<li>The <dfn id=samevalue><a href=https://tc39.es/ecma262/#sec-samevalue>SameValue</a></dfn> abstract operation<li>The <dfn id=js-scriptevaluation><a href=https://tc39.es/ecma262/#sec-runtime-semantics-scriptevaluation>ScriptEvaluation</a></dfn> abstract operation<li>The <dfn id=setimmutableprototype><a href=https://tc39.es/ecma262/#sec-set-immutable-prototype>SetImmutablePrototype</a></dfn> abstract operation<li>The <dfn id=js-toboolean><a href=https://tc39.es/ecma262/#sec-toboolean>ToBoolean</a></dfn> abstract operation<li>The <dfn id=tostring><a href=https://tc39.es/ecma262/#sec-tostring>ToString</a></dfn> abstract operation<li>The <dfn id=touint32><a href=https://tc39.es/ecma262/#sec-touint32>ToUint32</a></dfn> abstract operation<li>The <dfn id=typedarraycreate><a href=https://tc39.es/ecma262/#typedarray-create>TypedArrayCreate</a></dfn> abstract operation<li>The <dfn id=js-abstract-equality><a href=https://tc39.es/ecma262/#sec-abstract-equality-comparison>Abstract Equality Comparison</a></dfn> algorithm<li>The <dfn id=js-strict-equality><a href=https://tc39.es/ecma262/#sec-strict-equality-comparison>Strict Equality Comparison</a></dfn> algorithm<li>The <dfn id=atomics><a href=https://tc39.es/ecma262/#sec-atomics-object><code>Atomics</code></a></dfn> object<li>The <dfn id=date><a href=https://tc39.es/ecma262/#sec-date-objects><code>Date</code></a></dfn> class<li>The <dfn id=regexp><a href=https://tc39.es/ecma262/#sec-regexp-regular-expression-objects><code>RegExp</code></a></dfn> class<li>The <dfn id=sharedarraybuffer><a href=https://tc39.es/ecma262/#sec-sharedarraybuffer-objects><code>SharedArrayBuffer</code></a></dfn> class<li>The <dfn id=typeerror><a href=https://tc39.es/ecma262/#sec-native-error-types-used-in-this-standard-typeerror><code>TypeError</code></a></dfn> class<li>The <dfn id=js-rangeerror><a href=https://tc39.es/ecma262/#sec-native-error-types-used-in-this-standard-rangeerror><code>RangeError</code></a></dfn> class<li>The <dfn id=eval()><a href=https://tc39.es/ecma262/#sec-eval-x><code>eval()</code></a></dfn> function<li>The <dfn id=ishtmldda><a href=https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot>[[IsHTMLDDA]]</a></dfn> internal slot<li><dfn id=import()><a href=https://tc39.es/ecma262/#sec-import-calls><code>import()</code></a></dfn><li><dfn id=import.meta><a href=https://tc39.es/ecma262/#sec-meta-properties><code>import.meta</code></a></dfn><li>The <dfn id=js-hostgetimportmetaproperties><a href=https://tc39.es/ecma262/#sec-hostgetimportmetaproperties>HostGetImportMetaProperties</a></dfn> abstract operation<li>The <dfn id=js-typeof><a href=https://tc39.es/ecma262/#sec-typeof-operator><code>typeof</code></a></dfn> operator<li>The <dfn id=delete><a href=https://tc39.es/ecma262/#sec-delete-operator><code>delete</code></a></dfn> operator<li><dfn id=the-typedarray-constructors><a href=https://tc39.es/ecma262/#table-49>The <var>TypedArray</var> Constructors</a></dfn> table</ul>

    <p>Users agents that support JavaScript must also implement <cite>ECMAScript
    Internationalization API</cite>. <a href=references.html#refsJSINTL>[JSINTL]</a></p>
   <dt>WebAssembly<dd>
    <p>The following term is defined in <cite>WebAssembly JavaScript Interface</cite>: <a href=references.html#refsWASMJS>[WASMJS]</a></p>

    <ul class=brief><li><dfn id=webassembly.module><a href=https://webassembly.github.io/spec/js-api/#module><code>WebAssembly.Module</code></a></dfn></ul>
   <dt>DOM<dd>
    <p>The Document Object Model (DOM) is a representation — a model — of a document and
    its content. The DOM is not just an API; the conformance criteria of HTML implementations are
    defined, in this specification, in terms of operations on the DOM. <a href=references.html#refsDOM>[DOM]</a></p>

    <p>Implementations must support DOM and the events defined in UI Events, because this
    specification is defined in terms of the DOM, and some of the features are defined as extensions
    to the DOM interfaces. <a href=references.html#refsDOM>[DOM]</a> <a href=references.html#refsUIEVENTS>[UIEVENTS]</a></p>

    <p>In particular, the following features are defined in <cite>DOM</cite>: <a href=references.html#refsDOM>[DOM]</a></p>

    <ul class=brief><li><dfn id=attr><a href=https://dom.spec.whatwg.org/#interface-attr><code>Attr</code></a></dfn> interface<li><dfn id=comment-2><a href=https://dom.spec.whatwg.org/#interface-comment><code>Comment</code></a></dfn> interface<li><dfn id=domimplementation><a href=https://dom.spec.whatwg.org/#interface-domimplementation><code>DOMImplementation</code></a></dfn> interface<li><dfn id=dom-document><a href=https://dom.spec.whatwg.org/#interface-document><code>Document</code></a></dfn> interface<li><dfn id=dom-documentorshadowroot><a href=https://dom.spec.whatwg.org/#documentorshadowroot><code>DocumentOrShadowRoot</code></a></dfn> interface<li><dfn id=documentfragment><a href=https://dom.spec.whatwg.org/#interface-documentfragment><code>DocumentFragment</code></a></dfn> interface<li><dfn id=documenttype><a href=https://dom.spec.whatwg.org/#interface-documenttype><code>DocumentType</code></a></dfn> interface<li><dfn id=childnode><a href=https://dom.spec.whatwg.org/#interface-childnode><code>ChildNode</code></a></dfn> interface<li><dfn id=element><a href=https://dom.spec.whatwg.org/#interface-element><code>Element</code></a></dfn> interface<li><dfn id=dom-element-attachshadow><a href=https://dom.spec.whatwg.org/#dom-element-attachshadow><code>attachShadow()</code></a></dfn> method.<li>An element's <dfn id=concept-element-shadow-root><a href=https://dom.spec.whatwg.org/#concept-element-shadow-root>shadow root</a></dfn><li>The <dfn id=dom-retarget><a href=https://dom.spec.whatwg.org/#retarget>retargeting algorithm</a></dfn><li><dfn id=node><a href=https://dom.spec.whatwg.org/#interface-node><code>Node</code></a></dfn> interface<li><dfn id=nodelist><a href=https://dom.spec.whatwg.org/#interface-nodelist><code>NodeList</code></a></dfn> interface<li><dfn id=processinginstruction><a href=https://dom.spec.whatwg.org/#interface-processinginstruction><code>ProcessingInstruction</code></a></dfn> interface<li><dfn id=shadowroot><a href=https://dom.spec.whatwg.org/#interface-shadowroot><code>ShadowRoot</code></a></dfn> interface<li><dfn id=text><a href=https://dom.spec.whatwg.org/#interface-text><code>Text</code></a></dfn> interface<li><dfn id=node-document><a href=https://dom.spec.whatwg.org/#concept-node-document>node document</a></dfn> concept<li><dfn id=concept-document-type><a href=https://dom.spec.whatwg.org/#concept-document-type>document type</a></dfn> concept<li><dfn id=concept-documentfragment-host><a href=https://dom.spec.whatwg.org/#concept-documentfragment-host>host</a></dfn> concept<li>The <dfn id=shadow-root><a href=https://dom.spec.whatwg.org/#concept-shadow-root>shadow root</a></dfn> concept, and its <dfn id=delegates-focus><a href=https://dom.spec.whatwg.org/#shadowroot-delegates-focus>delegates focus</a></dfn> and <dfn id=available-to-element-internals><a href=https://dom.spec.whatwg.org/#shadowroot-available-to-element-internals>available to element internals</a></dfn>.<li>The <dfn id=shadow-host><a href=https://dom.spec.whatwg.org/#element-shadow-host>shadow host</a></dfn> concept<li><dfn id=htmlcollection><a href=https://dom.spec.whatwg.org/#interface-htmlcollection><code>HTMLCollection</code></a></dfn> interface, its
         <dfn id=dom-htmlcollection-length><a href=https://dom.spec.whatwg.org/#dom-htmlcollection-length><code>length</code></a></dfn> attribute, and its
         <dfn id=dom-htmlcollection-item><a href=https://dom.spec.whatwg.org/#dom-htmlcollection-item><code>item()</code></a></dfn> and
         <dfn id=dom-htmlcollection-nameditem><a href=https://dom.spec.whatwg.org/#dom-htmlcollection-nameditem><code>namedItem()</code></a></dfn> methods<li>The terms <dfn id=concept-collection><a href=https://dom.spec.whatwg.org/#concept-collection>collection</a></dfn> and <dfn id=represented-by-the-collection><a href=https://dom.spec.whatwg.org/#represented-by-the-collection>represented by the collection</a></dfn><li><dfn id=domtokenlist><a href=https://dom.spec.whatwg.org/#interface-domtokenlist><code>DOMTokenList</code></a></dfn> interface, and its
         <dfn id=dom-domtokenlist-value><a href=https://dom.spec.whatwg.org/#dom-domtokenlist-value><code>value</code></a></dfn> attribute<li><dfn id=dom-domimplementation-createdocument><a href=https://dom.spec.whatwg.org/#dom-domimplementation-createdocument><code>createDocument()</code></a></dfn> method<li><dfn id=dom-domimplementation-createhtmldocument><a href=https://dom.spec.whatwg.org/#dom-domimplementation-createhtmldocument><code>createHTMLDocument()</code></a></dfn> method<li><dfn id=dom-document-createelement><a href=https://dom.spec.whatwg.org/#dom-document-createelement><code>createElement()</code></a></dfn> method<li><dfn id=dom-document-createelementns><a href=https://dom.spec.whatwg.org/#dom-document-createelementns><code>createElementNS()</code></a></dfn> method<li><dfn id=dom-document-getelementbyid><a href=https://dom.spec.whatwg.org/#dom-nonelementparentnode-getelementbyid><code>getElementById()</code></a></dfn> method<li><dfn id=dom-document-getelementsbyclassname><a href=https://dom.spec.whatwg.org/#dom-document-getelementsbyclassname><code>getElementsByClassName()</code></a></dfn> method<li><dfn id=dom-node-appendchild><a href=https://dom.spec.whatwg.org/#dom-node-appendchild><code>appendChild()</code></a></dfn> method<li><dfn id=dom-node-clonenode><a href=https://dom.spec.whatwg.org/#dom-node-clonenode><code>cloneNode()</code></a></dfn> method<li><dfn id=dom-document-importnode><a href=https://dom.spec.whatwg.org/#dom-document-importnode><code>importNode()</code></a></dfn> method<li><dfn id=dom-event-preventdefault><a href=https://dom.spec.whatwg.org/#dom-event-preventdefault><code>preventDefault()</code></a></dfn> method<li><dfn id=dom-element-id><a href=https://dom.spec.whatwg.org/#dom-element-id><code>id</code></a></dfn> attribute<li><dfn id=dom-element-setattribute><a href=https://dom.spec.whatwg.org/#dom-element-setAttribute><code>setAttribute()</code></a></dfn> method<li><dfn id=textcontent><a href=https://dom.spec.whatwg.org/#dom-node-textcontent><code>textContent</code></a></dfn> attribute<li>The <dfn id=tree><a href=https://dom.spec.whatwg.org/#concept-tree>tree</a></dfn>, <dfn id=shadow-tree><a href=https://dom.spec.whatwg.org/#concept-shadow-tree>shadow tree</a></dfn>, and <dfn id=node-tree><a href=https://dom.spec.whatwg.org/#concept-node-tree>node tree</a></dfn> concepts<li>The <dfn id=tree-order><a href=https://dom.spec.whatwg.org/#concept-tree-order>tree order</a></dfn> and <dfn id=shadow-including-tree-order><a href=https://dom.spec.whatwg.org/#concept-shadow-including-tree-order>shadow-including tree order</a></dfn> concepts<li>The <dfn id=concept-tree-child><a href=https://dom.spec.whatwg.org/#concept-tree-child>child</a></dfn> concept<li>The <dfn id=root><a href=https://dom.spec.whatwg.org/#concept-tree-root>root</a></dfn> and <dfn id=shadow-including-root><a href=https://dom.spec.whatwg.org/#concept-shadow-including-root>shadow-including root</a></dfn> concepts<li>The <dfn id=inclusive-ancestor><a href=https://dom.spec.whatwg.org/#concept-tree-inclusive-ancestor>inclusive ancestor</a></dfn>,
             <dfn id=shadow-including-descendant><a href=https://dom.spec.whatwg.org/#concept-shadow-including-descendant>shadow-including descendant</a></dfn>,
             <dfn id=shadow-including-inclusive-descendant><a href=https://dom.spec.whatwg.org/#concept-shadow-including-inclusive-descendant>shadow-including inclusive descendant</a></dfn>, and
             <dfn id=shadow-including-inclusive-ancestor><a href=https://dom.spec.whatwg.org/#concept-shadow-including-inclusive-ancestor>shadow-including inclusive ancestor</a></dfn> concepts<li>The <dfn id=first-child><a href=https://dom.spec.whatwg.org/#concept-tree-first-child>first child</a></dfn> and <dfn id=next-sibling><a href=https://dom.spec.whatwg.org/#concept-tree-next-sibling>next sibling</a></dfn> concepts<li>The <dfn id=document-element><a href=https://dom.spec.whatwg.org/#document-element>document element</a></dfn> concept<li>The <dfn id=in-a-document-tree><a href=https://dom.spec.whatwg.org/#in-a-document-tree>in a document tree</a></dfn>, <dfn id=in-a-document><a href=https://dom.spec.whatwg.org/#in-a-document>in a document</a></dfn> (legacy), and <dfn id=connected><a href=https://dom.spec.whatwg.org/#connected>connected</a></dfn> concepts<li>The <dfn id=concept-slot><a href=https://dom.spec.whatwg.org/#concept-slot>slot</a></dfn> concept, and its <dfn id=slot-name><a href=https://dom.spec.whatwg.org/#slot-name>name</a></dfn> and <dfn id=assigned-nodes><a href=https://dom.spec.whatwg.org/#slot-assigned-nodes>assigned nodes</a></dfn><li>The <dfn id=assigned-slot><a href=https://dom.spec.whatwg.org/#slotable-assigned-slot>assigned slot</a></dfn> concept.
     <li>The <dfn id=finding-flattened-slottables><a href=https://dom.spec.whatwg.org/#find-flattened-slotables>find flattened slottables</a></dfn> algorithm<li>The <dfn id=assign-a-slot><a href=https://dom.spec.whatwg.org/#assign-a-slot>assign a slot</a></dfn> algorithm<li>The <dfn id=pre-insert><a href=https://dom.spec.whatwg.org/#concept-node-pre-insert>pre-insert</a></dfn>, <dfn id=concept-node-insert><a href=https://dom.spec.whatwg.org/#concept-node-insert>insert</a></dfn>, <dfn id=concept-node-append><a href=https://dom.spec.whatwg.org/#concept-node-append>append</a></dfn>, <dfn id=concept-node-replace><a href=https://dom.spec.whatwg.org/#concept-node-replace>replace</a></dfn>, <dfn id=concept-node-replace-all><a href=https://dom.spec.whatwg.org/#concept-node-replace-all>replace all</a></dfn>, <dfn id=string-replace-all><a href=https://dom.spec.whatwg.org/#string-replace-all>string replace all</a></dfn>, <dfn id=concept-node-remove><a href=https://dom.spec.whatwg.org/#concept-node-remove>remove</a></dfn>, and <dfn id=concept-node-adopt><a href=https://dom.spec.whatwg.org/#concept-node-adopt>adopt</a></dfn> algorithms for nodes<li>The <dfn id=concept-node-insert-ext><a href=https://dom.spec.whatwg.org/#concept-node-insert-ext>insertion steps</a></dfn>,
             <dfn id=concept-node-remove-ext><a href=https://dom.spec.whatwg.org/#concept-node-remove-ext>removing steps</a></dfn>,
             <dfn id=concept-node-adopt-ext><a href=https://dom.spec.whatwg.org/#concept-node-adopt-ext>adopting steps</a></dfn>, and
             <dfn id=children-changed-steps><a href=https://dom.spec.whatwg.org/#concept-node-children-changed-ext>children changed steps</a></dfn> hooks for elements<li>The <dfn id=concept-element-attributes-change><a href=https://dom.spec.whatwg.org/#concept-element-attributes-change>change</a></dfn>, <dfn id=concept-element-attributes-append><a href=https://dom.spec.whatwg.org/#concept-element-attributes-append>append</a></dfn>, <dfn id=concept-element-attributes-remove><a href=https://dom.spec.whatwg.org/#concept-element-attributes-remove>remove</a></dfn>, <dfn id=concept-element-attributes-replace><a href=https://dom.spec.whatwg.org/#concept-element-attributes-replace>replace</a></dfn>, and <dfn id=concept-element-attributes-set-value><a href=https://dom.spec.whatwg.org/#concept-element-attributes-set-value>set value</a></dfn> algorithms for attributes<li>The <dfn id=concept-element-attributes-change-ext><a href=https://dom.spec.whatwg.org/#concept-element-attributes-change-ext>attribute change steps</a></dfn> hook for attributes<li>The <dfn id=attribute-list><a href=https://dom.spec.whatwg.org/#concept-element-attribute>attribute list</a></dfn> concept<li>The <dfn id=concept-cd-data><a href=https://dom.spec.whatwg.org/#concept-cd-data>data</a></dfn> of a text node<li>The <dfn id=child-text-content><a href=https://dom.spec.whatwg.org/#concept-child-text-content>child text content</a></dfn> of a node<li>The <dfn id=descendant-text-content><a href=https://dom.spec.whatwg.org/#concept-descendant-text-content>descendant text content</a></dfn> of a node<li><dfn id=event><a href=https://dom.spec.whatwg.org/#interface-event><code>Event</code></a></dfn> interface<li><dfn id=dom-event-constructor><a href=https://dom.spec.whatwg.org/#concept-event-constructor><code>Event</code> and derived interfaces constructor behavior</a></dfn><li><dfn id=eventtarget><a href=https://dom.spec.whatwg.org/#interface-eventtarget><code>EventTarget</code></a></dfn> interface<li>The <dfn id=activation-behaviour><a href=https://dom.spec.whatwg.org/#eventtarget-activation-behavior>activation behavior</a></dfn> hook<li>The <dfn id=legacy-pre-activation-behavior><a href=https://dom.spec.whatwg.org/#eventtarget-legacy-pre-activation-behavior>legacy-pre-activation behavior</a></dfn> hook<li>The <dfn id=legacy-canceled-activation-behavior><a href=https://dom.spec.whatwg.org/#eventtarget-legacy-canceled-activation-behavior>legacy-canceled-activation behavior</a></dfn> hook<li>The <dfn id=creating-an-event><a href=https://dom.spec.whatwg.org/#concept-event-create>create an event</a></dfn> algorithm<li>The <dfn id=concept-event-fire><a href=https://dom.spec.whatwg.org/#concept-event-fire>fire an event</a></dfn> algorithm<li>The <dfn id=canceled-flag><a href=https://dom.spec.whatwg.org/#canceled-flag>canceled flag</a></dfn><li>The <dfn id=concept-event-dispatch><a href=https://dom.spec.whatwg.org/#concept-event-dispatch>dispatch</a></dfn> algorithm<li><dfn id=eventinit><a href=https://dom.spec.whatwg.org/#dictdef-eventinit><code>EventInit</code></a></dfn> dictionary type<li><dfn id=dom-event-type><a href=https://dom.spec.whatwg.org/#dom-event-type><code>type</code></a></dfn> attribute<li><dfn id=dom-event-target><a href=https://dom.spec.whatwg.org/#dom-event-target><code>target</code></a></dfn> attribute<li><dfn id=dom-event-currenttarget><a href=https://dom.spec.whatwg.org/#dom-event-currenttarget><code>currentTarget</code></a></dfn> attribute<li><dfn id=dom-event-bubbles><a href=https://dom.spec.whatwg.org/#dom-event-bubbles><code>bubbles</code></a></dfn> attribute<li><dfn id=dom-event-cancelable><a href=https://dom.spec.whatwg.org/#dom-event-cancelable><code>cancelable</code></a></dfn> attribute<li><dfn id=dom-event-composed><a href=https://dom.spec.whatwg.org/#dom-event-composed><code>composed</code></a></dfn> attribute<li><dfn id=composed-flag><a href=https://dom.spec.whatwg.org/#composed-flag>composed flag</a></dfn><li><dfn id=dom-event-istrusted><a href=https://dom.spec.whatwg.org/#dom-event-istrusted><code>isTrusted</code></a></dfn> attribute<li><dfn id=dom-event-initevent><a href=https://dom.spec.whatwg.org/#dom-event-initevent><code>initEvent()</code></a></dfn> method<li><dfn id=add-an-event-listener><a href=https://dom.spec.whatwg.org/#add-an-event-listener>add an event listener</a></dfn><li><dfn id=dom-eventtarget-addeventlistener><a href=https://dom.spec.whatwg.org/#dom-eventtarget-addeventlistener><code>addEventListener()</code></a></dfn> method<li>The <dfn id=remove-an-event-listener><a href=https://dom.spec.whatwg.org/#remove-an-event-listener>remove an event listener</a></dfn> and
             <dfn id=remove-all-event-listeners><a href=https://dom.spec.whatwg.org/#remove-all-event-listeners>remove all event listeners</a></dfn> algorithms<li><dfn id=dom-eventlistener><a href=https://dom.spec.whatwg.org/#callbackdef-eventlistener><code>EventListener</code></a></dfn> callback interface<li>The <dfn id=concept-event-type><a href=https://dom.spec.whatwg.org/#dom-event-type>type</a></dfn> of an event<li>An <dfn id=event-listener><a href=https://dom.spec.whatwg.org/#concept-event-listener>event listener</a></dfn> and its
            <dfn id=event-listener-type><a href=https://dom.spec.whatwg.org/#event-listener-type>type</a></dfn> and
            <dfn id=event-listener-callback><a href=https://dom.spec.whatwg.org/#event-listener-callback>callback</a></dfn><li>The <dfn id="document's-character-encoding"><a href=https://dom.spec.whatwg.org/#concept-document-encoding>encoding</a></dfn> (herein the <i>character encoding</i>),
             <dfn id=concept-document-mode><a href=https://dom.spec.whatwg.org/#concept-document-mode>mode</a></dfn>, and
             <dfn id=concept-document-content-type><a href=https://dom.spec.whatwg.org/#concept-document-content-type>content type</a></dfn> of a <code id=dependencies:document><a href=dom.html#document>Document</a></code><li>The distinction between <dfn id=xml-documents><a href=https://dom.spec.whatwg.org/#xml-document>XML documents</a></dfn> and
                                 <dfn id=html-documents><a href=https://dom.spec.whatwg.org/#html-document>HTML documents</a></dfn><li>The terms <dfn id=quirks-mode><a href=https://dom.spec.whatwg.org/#concept-document-quirks>quirks mode</a></dfn>,
                   <dfn id=limited-quirks-mode><a href=https://dom.spec.whatwg.org/#concept-document-limited-quirks>limited-quirks mode</a></dfn>, and
                   <dfn id=no-quirks-mode><a href=https://dom.spec.whatwg.org/#concept-document-no-quirks>no-quirks mode</a></dfn><li>The algorithm to <dfn id=concept-node-clone><a href=https://dom.spec.whatwg.org/#concept-node-clone>clone</a></dfn> a <code id=dependencies:node><a data-x-internal=node href=https://dom.spec.whatwg.org/#interface-node>Node</a></code>, and the concept of
                          <dfn id=concept-node-clone-ext><a href=https://dom.spec.whatwg.org/#concept-node-clone-ext>cloning steps</a></dfn> used by that algorithm<li>The concept of <dfn id=base-url-change-steps>base URL change steps</dfn> and the definition of what happens when an element is <dfn id=affected-by-a-base-url-change>affected by a base URL change</dfn><li>The concept of an element's <dfn id=concept-id><a href=https://dom.spec.whatwg.org/#concept-id>unique identifier (ID)</a></dfn><li>The concept of an element's <dfn id=concept-class><a href=https://dom.spec.whatwg.org/#concept-class>classes</a></dfn><li>The term <dfn id=concept-supported-tokens><a href=https://dom.spec.whatwg.org/#concept-supported-tokens>supported tokens</a></dfn><li>The concept of a DOM <dfn id=concept-range><a href=https://dom.spec.whatwg.org/#concept-range>range</a></dfn>, and the terms
                              <dfn id=concept-range-start><a href=https://dom.spec.whatwg.org/#concept-range-start>start</a></dfn>,
                              <dfn id=concept-range-end><a href=https://dom.spec.whatwg.org/#concept-range-end>end</a></dfn>, and
                              <dfn id=concept-range-bp><a href=https://dom.spec.whatwg.org/#concept-range-bp>boundary point</a></dfn> as applied to ranges.<li>The <dfn id=create-an-element><a href=https://dom.spec.whatwg.org/#concept-create-element>create an element</a></dfn> algorithm<li>The <dfn id=element-interface><a href=https://dom.spec.whatwg.org/#concept-element-interface>element interface</a></dfn> concept<li>The concepts of <dfn id=custom-element-state><a href=https://dom.spec.whatwg.org/#concept-element-custom-element-state>custom element state</a></dfn>, and of
                         <dfn id=concept-element-defined><a href=https://dom.spec.whatwg.org/#concept-element-defined>defined</a></dfn> and
                         <dfn id=concept-element-custom><a href=https://dom.spec.whatwg.org/#concept-element-custom>custom</a></dfn> elements<li>An element's <dfn id=concept-element-namespace><a href=https://dom.spec.whatwg.org/#concept-element-namespace>namespace</a></dfn>,
                      <dfn id=concept-element-namespace-prefix><a href=https://dom.spec.whatwg.org/#concept-element-namespace-prefix>namespace prefix</a></dfn>,
                      <dfn id=concept-element-local-name><a href=https://dom.spec.whatwg.org/#concept-element-local-name>local name</a></dfn>,
                      <dfn id=concept-element-custom-element-definition><a href=https://dom.spec.whatwg.org/#concept-element-custom-element-definition>custom element definition</a></dfn>, and
                      <dfn id=concept-element-is-value><a href=https://dom.spec.whatwg.org/#concept-element-is-value><code>is</code> value</a></dfn><li><dfn id=mutationobserver><a href=https://dom.spec.whatwg.org/#mutationobserver><code>MutationObserver</code></a></dfn> interface and <dfn id=mutation-observers><a href=https://dom.spec.whatwg.org/#mutation-observers>mutation observers</a></dfn> in general</ul>

    <p>The following features are defined in <cite>UI Events</cite>: <a href=references.html#refsUIEVENTS>[UIEVENTS]</a></p>

    <ul class=brief><li>The <dfn id=mouseevent><a href=https://w3c.github.io/uievents/#mouseevent><code>MouseEvent</code></a></dfn> interface<li>The <code id=dependencies:mouseevent><a data-x-internal=mouseevent href=https://w3c.github.io/uievents/#mouseevent>MouseEvent</a></code> interface's <dfn id=dom-mouseevent-relatedtarget><a href=https://w3c.github.io/uievents/#dom-mouseevent-relatedtarget><code>relatedTarget</code></a></dfn> attribute<li><dfn id=mouseeventinit><a href=https://w3c.github.io/uievents/#dictdef-mouseeventinit><code>MouseEventInit</code></a></dfn> dictionary type<li>The <dfn id=focusevent><a href=https://w3c.github.io/uievents/#focusevent><code>FocusEvent</code></a></dfn> interface<li>The <code id=dependencies:focusevent><a data-x-internal=focusevent href=https://w3c.github.io/uievents/#focusevent>FocusEvent</a></code> interface's <dfn id=dom-focusevent-relatedtarget><a href=https://w3c.github.io/uievents/#dom-focusevent-relatedtarget><code>relatedTarget</code></a></dfn> attribute<li>The <dfn id=uievent><a href=https://w3c.github.io/uievents/#uievent><code>UIEvent</code></a></dfn> interface<li>The <code id=dependencies:uievent><a data-x-internal=uievent href=https://w3c.github.io/uievents/#uievent>UIEvent</a></code> interface's <dfn id=dom-uievent-view><a href=https://w3c.github.io/uievents/#dom-uievent-view><code>view</code></a></dfn> attribute<li><dfn id=event-auxclick><a href=https://w3c.github.io/uievents/#event-type-auxclick><code>auxclick</code></a></dfn> event<li><dfn id=event-click><a href=https://w3c.github.io/uievents/#event-type-click><code>click</code></a></dfn> event<li><dfn id=event-dblclick><a href=https://w3c.github.io/uievents/#event-type-dblclick><code>dblclick</code></a></dfn> event<li><dfn id=event-mousedown><a href=https://w3c.github.io/uievents/#event-type-mousedown><code>mousedown</code></a></dfn> event<li><dfn id=event-mouseenter><a href=https://w3c.github.io/uievents/#event-type-mouseenter><code>mouseenter</code></a></dfn> event<li><dfn id=event-mouseleave><a href=https://w3c.github.io/uievents/#event-type-mouseleave><code>mouseleave</code></a></dfn> event<li><dfn id=event-mousemove><a href=https://w3c.github.io/uievents/#event-type-mousemove><code>mousemove</code></a></dfn> event<li><dfn id=event-mouseout><a href=https://w3c.github.io/uievents/#event-type-mouseout><code>mouseout</code></a></dfn> event<li><dfn id=event-mouseover><a href=https://w3c.github.io/uievents/#event-type-mouseover><code>mouseover</code></a></dfn> event<li><dfn id=event-mouseup><a href=https://w3c.github.io/uievents/#event-type-mouseup><code>mouseup</code></a></dfn> event<li><dfn id=event-wheel><a href=https://w3c.github.io/uievents/#event-type-wheel><code>wheel</code></a></dfn> event<li><dfn id=event-keydown><a href=https://w3c.github.io/uievents/#event-type-keydown><code>keydown</code></a></dfn> event<li><dfn id=event-keypress><a href=https://w3c.github.io/uievents/#event-type-keypress><code>keypress</code></a></dfn> event<li><dfn id=event-keyup><a href=https://w3c.github.io/uievents/#event-type-keyup><code>keyup</code></a></dfn> event</ul>

    <p>The following features are defined in <cite>Touch Events</cite>: <a href=references.html#refsTOUCH>[TOUCH]</a></p>

    <ul class=brief><li><dfn id=touch><a href=https://w3c.github.io/touch-events/#touch-interface><code>Touch</code></a></dfn> interface<li><dfn id=touch-point><a href=https://w3c.github.io/touch-events/#dfn-touch-point>Touch point</a></dfn> concept<li><dfn id=event-touchend><a href=https://w3c.github.io/touch-events/#event-touchend><code>touchend</code></a></dfn> event</ul>

    <p>The following features are defined in <cite>Pointer Events</cite>: <a href=references.html#refsPOINTEREVENTS>[POINTEREVENTS]</a></p>

    <ul class=brief><li><dfn id=event-pointerup><a href=https://w3c.github.io/pointerevents/#the-pointerup-event><code>pointerup</code></a></dfn> event</ul>

    <p>This specification sometimes uses the term <dfn>name</dfn> to refer to the event's
    <a href=https://dom.spec.whatwg.org/#dom-event-type id=dependencies:concept-event-type data-x-internal=concept-event-type>type</a>; as in, "an event named <code>click</code>" or "if the event name is <code>keypress</code>". The terms
    "name" and "type" for events are synonymous.</p>

    <p>The following features are defined in <cite>DOM Parsing and Serialization</cite>: <a href=references.html#refsDOMPARSING>[DOMPARSING]</a></p>

    <ul class=brief><li><dfn id=dom-innerhtml><a href=https://w3c.github.io/DOM-Parsing/#dom-element-innerhtml><code>innerHTML</code></a></dfn><li><dfn id=dom-outerhtml><a href=https://w3c.github.io/DOM-Parsing/#dom-element-outerhtml><code>outerHTML</code></a></dfn></ul>

    <p>The following features are defined in <cite>Selection API</cite>: <a href=references.html#refsSELECTION>[SELECTION]</a></p>

    <ul class=brief><li><dfn id=document-selection><a href=https://w3c.github.io/selection-api/#dfn-selection>selection</a></dfn><li><dfn id=selection><a href=https://w3c.github.io/selection-api/#selection-interface><code>Selection</code></a></dfn></ul>

    <p class=note>User agents are encouraged to implement the features described in
    <cite>execCommand</cite>. <a href=references.html#refsEXECCOMMAND>[EXECCOMMAND]</a></p>

    <p>The following parts of <cite>Fullscreen API</cite> are referenced from this
    specification, in part to define the rendering of <code id=dependencies:the-dialog-element><a href=interactive-elements.html#the-dialog-element>dialog</a></code> elements, and also to
    define how the Fullscreen API interacts with HTML: <a href=references.html#refsFULLSCREEN>[FULLSCREEN]</a></p>

    <ul class=brief><li><dfn id=top-layer><a href=https://fullscreen.spec.whatwg.org/#top-layer>top layer</a></dfn> (an
         <a href=https://infra.spec.whatwg.org/#ordered-set id=dependencies:set data-x-internal=set>ordered set</a>) and its
         <dfn id=top-layer-add><a href=https://fullscreen.spec.whatwg.org/#top-layer-add>add</a></dfn>
         operation<li><dfn id=dom-element-requestfullscreen><a href=https://fullscreen.spec.whatwg.org/#dom-element-requestfullscreen><code>requestFullscreen()</code></a></dfn><li><dfn id=run-the-fullscreen-steps><a href=https://fullscreen.spec.whatwg.org/#run-the-fullscreen-steps>run the fullscreen steps</a></dfn></ul>

    <p><cite>High Resolution Time</cite> provides the <dfn id=current-high-resolution-time><a href=https://w3c.github.io/hr-time/#dfn-current-high-resolution-time>current high
    resolution time</a></dfn> and the <dfn id=domhighrestimestamp><a href=https://w3c.github.io/hr-time/#dom-domhighrestimestamp><code>DOMHighResTimeStamp</code></a></dfn>
    typedef. <a href=references.html#refsHRT>[HRT]</a></p>
   <dt>File API<dd>
    <p>This specification uses the following features defined in <cite>File API</cite>: <a href=references.html#refsFILEAPI>[FILEAPI]</a></p>

    <ul class=brief><li>The <dfn id=blob><a href=https://w3c.github.io/FileAPI/#dfn-Blob><code>Blob</code></a></dfn> interface and its
             <dfn id=dom-blob-type><a href=https://w3c.github.io/FileAPI/#dfn-type><code>type</code></a></dfn> attribute<li>The <dfn id=file><a href=https://w3c.github.io/FileAPI/#dfn-file><code>File</code></a></dfn> interface and its
             <dfn id=dom-file-name><a href=https://w3c.github.io/FileAPI/#dfn-name><code>name</code></a></dfn> and
             <dfn id=dom-file-lastmodified><a href=https://w3c.github.io/FileAPI/#dfn-lastModified><code>lastModified</code></a></dfn> attributes<li>The <dfn id=filelist><a href=https://w3c.github.io/FileAPI/#filelist-section><code>FileList</code></a></dfn> interface<li>The concept of a <code id=dependencies:blob><a data-x-internal=blob href=https://w3c.github.io/FileAPI/#dfn-Blob>Blob</a></code>'s <dfn id=snapshot-state><a href=https://w3c.github.io/FileAPI/#snapshot-state>snapshot state</a></dfn><li>The concept of <dfn id=file-error-read>read errors</dfn><li><dfn id=blob-url-store><a href=https://w3c.github.io/FileAPI/#BlobURLStore>Blob URL Store</a></dfn></ul>
   <dt>Indexed Database API<dd><p>This specification uses <dfn id=cleanup-indexed-database-transactions><a href=https://w3c.github.io/IndexedDB/#cleanup-indexed-database-transactions>cleanup
   Indexed Database transactions</a></dfn> defined by <cite>Indexed Database API</cite>. <a href=references.html#refsINDEXEDDB>[INDEXEDDB]</a></p>



   <dt>Media Source Extensions<dd>
    <p>The following terms are defined in <cite>Media Source Extensions</cite>: <a href=references.html#refsMEDIASOURCE>[MEDIASOURCE]</a></p>

    <ul class=brief><li><dfn id=mediasource><a href=https://w3c.github.io/media-source/#idl-def-mediasource><code>MediaSource</code></a></dfn> interface<li><dfn id=detaching-from-a-media-element><a href=https://w3c.github.io/media-source/#mediasource-detach>detaching from a media element</a></dfn></ul>
   <dt>Media Capture and Streams<dd>
    <p>The following terms are defined in <cite>Media Capture and Streams</cite>: <a href=references.html#refsMEDIASTREAM>[MEDIASTREAM]</a></p>

    <ul class=brief><li><dfn id=mediastream><a href=https://w3c.github.io/mediacapture-main/getusermedia.html#idl-def-mediastream><code>MediaStream</code></a></dfn> interface</ul>
   <dt>Reporting<dd>
    <p>The following terms are defined in <cite>Reporting</cite>: <a href=references.html#refsREPORTING>[REPORTING]</a></p>

    <ul class=brief><li><dfn id=queue-a-report><a href=https://w3c.github.io/reporting/#queue-report>Queue a report</a></dfn><li><dfn id=report-type><a href=https://w3c.github.io/reporting/#report-type>report type</a></dfn><li><dfn id=visible-to-reportingobservers><a href=https://w3c.github.io/reporting/#visible-to-reportingobservers>visible to <code>ReportingObserver</code>s</a></dfn></ul>
   <dt>XMLHttpRequest<dd>
    <p>The following features and terms are defined in <cite>XMLHttpRequest</cite>: <a href=references.html#refsXHR>[XHR]</a></p>

    <ul class=brief><li>The <dfn id=xmlhttprequest><a href=https://xhr.spec.whatwg.org/#xmlhttprequest><code>XMLHttpRequest</code></a></dfn> interface, and its
             <dfn id=dom-xmlhttprequest-responsexml><a href=https://xhr.spec.whatwg.org/#dom-xmlhttprequest-responsexml><code>responseXML</code></a></dfn> attribute<li>The <dfn id=progressevent><a href=https://xhr.spec.whatwg.org/#interface-progressevent><code>ProgressEvent</code></a></dfn> interface, and its
             <dfn id=dom-progressevent-lengthcomputable><a href=https://xhr.spec.whatwg.org/#dom-progressevent-lengthcomputable><code>lengthComputable</code></a></dfn>,
             <dfn id=dom-progressevent-loaded><a href=https://xhr.spec.whatwg.org/#dom-progressevent-loaded><code>loaded</code></a></dfn>, and
             <dfn id=dom-progressevent-total><a href=https://xhr.spec.whatwg.org/#dom-progressevent-total><code>total</code></a></dfn> attributes<li>The <dfn id=formdata><a href=https://xhr.spec.whatwg.org/#formdata><code>FormData</code></a></dfn> interface<li>The <dfn id=formdataentryvalue><a href=https://xhr.spec.whatwg.org/#formdataentryvalue><code>FormDataEntryValue</code></a></dfn> type<li><dfn id=formdata-entry><a href=https://xhr.spec.whatwg.org/#concept-formdata-entry>entry</a></dfn><li><dfn id=create-an-entry><a href=https://xhr.spec.whatwg.org/#create-an-entry>create an entry</a></dfn></ul>
   <dt>Battery Status<dd>
    <p>The following features are defined in <cite>Battery Status API</cite>: <a href=references.html#refsBATTERY>[BATTERY]</a></p>

    <ul class=brief><li><dfn id=dom-navigator-getbattery><a href=https://w3c.github.io/battery/#widl-Navigator-getBattery-Promise-BatteryManager><code>getBattery()</code></a></dfn> method</ul>
   <dt>Media Queries<dd>
    <p>Implementations must support <cite>Media Queries</cite>. The <dfn id=media-condition><a href=https://drafts.csswg.org/mediaqueries/#typedef-media-condition>&lt;media-condition></a></dfn>
    feature is defined therein. <a href=references.html#refsMQ>[MQ]</a></p>
   <dt>CSS modules<dd>
    <p>While support for CSS as a whole is not required of implementations of this specification
    (though it is encouraged, at least for web browsers), some features are defined in terms of
    specific CSS requirements.</p>

    <p>When this specification requires that something be <dfn id=parse-something-according-to-a-css-grammar><a href=https://drafts.csswg.org/css-syntax/#parse-grammar>parsed according
    to a particular CSS grammar</a></dfn>, the relevant algorithm in <cite>CSS Syntax</cite> must be followed,
    including error handling rules. <a href=references.html#refsCSSSYNTAX>[CSSSYNTAX]</a></p>

    <p class=example>For example, user agents are required to close all open constructs upon
    finding the end of a style sheet unexpectedly. Thus, when parsing the string "<code>rgb(0,0,0</code>" (with a missing close-parenthesis) for a color value, the close
    parenthesis is implied by this error handling rule, and a value is obtained (the color 'black').
    However, the similar construct "<code>rgb(0,0,</code>" (with both a missing
    parenthesis and a missing "blue" value) cannot be parsed, as closing the open construct does not
    result in a viable value.</p>

    <p>To <dfn id=parsed-as-a-css-color-value>parse a CSS &lt;color> value</dfn>, given a string
    <var>input</var> with an optional element <var>element</var>, run these steps:</p>

    <ol><li><p>Let <var>color</var> be the result of <a href=https://drafts.csswg.org/css-syntax/#parse-grammar id=dependencies:parse-something-according-to-a-css-grammar data-x-internal=parse-something-according-to-a-css-grammar>parsing</a> <var>input</var> as a CSS <a id=dependencies:color href=https://drafts.csswg.org/css-color/#typedef-color data-x-internal=color>&lt;color></a>. <a href=references.html#refsCSSCOLOR>[CSSCOLOR]</a><li><p>If <var>color</var> is failure, then return failure.<li>
      <p>If <var>color</var> is <a id=dependencies:currentcolor href=https://drafts.csswg.org/css-color/#valdef-color-currentcolor data-x-internal=currentcolor>'currentcolor'</a>, then:</p>

      <ol><li><p>If <var>element</var> is not given, then set <var>color</var> to <a id=dependencies:opaque-black href=https://drafts.csswg.org/css-color/#opaque-black data-x-internal=opaque-black>opaque
       black</a>.<li><p>Otherwise, set <var>color</var> to the computed value of the <a id="dependencies:'color'" href=https://drafts.csswg.org/css-color/#the-color-property data-x-internal="'color'">'color'</a>
       property of <var>element</var>.</ol>
     <li><p>Return <var>color</var>.</ol>

    <p>The following terms and features are defined in <cite>Cascading Style Sheets</cite>
    (<cite>CSS</cite>): <a href=references.html#refsCSS>[CSS]</a></p>

    <ul class=brief><li><dfn id=viewport><a href=https://drafts.csswg.org/css2/#viewport>viewport</a></dfn><li><dfn id=line-box><a href=https://drafts.csswg.org/css2/#line-box>line box</a></dfn><li><dfn id=out-of-flow><a href=https://drafts.csswg.org/css2/#out-of-flow>out-of-flow</a></dfn><li><dfn id=in-flow><a href=https://drafts.csswg.org/css2/#in-flow>in-flow</a></dfn><li><dfn id=content-area><a href=https://drafts.csswg.org/css2/#box-content-area>content area</a></dfn><li><dfn id=content-box><a href=https://drafts.csswg.org/css2/#content-box>content box</a></dfn><li><dfn id=border-box><a href=https://drafts.csswg.org/css2/#border-box>border box</a></dfn><li><dfn id=margin-box><a href=https://drafts.csswg.org/css2/#margin-box>margin box</a></dfn><li><dfn id=border-edge><a href=https://drafts.csswg.org/css2/#border-edge>border edge</a></dfn><li><dfn id=margin-edge><a href=https://drafts.csswg.org/css2/#margin-edge>margin edge</a></dfn><li><dfn id=collapsing-margins><a href=https://drafts.csswg.org/css2/#collapsing-margins>collapsing margins</a></dfn><li><dfn id=containing-block><a href=https://drafts.csswg.org/css2/#containing-block-details>containing block</a></dfn><li><dfn id=inline-box><a href=https://drafts.csswg.org/css2/#inline-box>inline box</a></dfn><li><dfn id=block-box><a href=https://drafts.csswg.org/css2/#block-boxes%E2%91%A0>block box</a></dfn><li>The <dfn id="'margin-top'"><a href=https://drafts.csswg.org/css2/#propdef-margin-top>'margin-top'</a></dfn>,
              <dfn id="'margin-bottom'"><a href=https://drafts.csswg.org/css2/#propdef-margin-bottom>'margin-bottom'</a></dfn>,
              <dfn id="'margin-left'"><a href=https://drafts.csswg.org/css2/#propdef-margin-left>'margin-left'</a></dfn>, and
              <dfn id="'margin-right'"><a href=https://drafts.csswg.org/css2/#propdef-margin-right>'margin-right'</a></dfn> properties<li>The <dfn id="'padding-top'"><a href=https://drafts.csswg.org/css2/#propdef-padding-top>'padding-top'</a></dfn>,
              <dfn id="'padding-bottom'"><a href=https://drafts.csswg.org/css2/#propdef-padding-bottom>'padding-bottom'</a></dfn>,
              <dfn id="'padding-left'"><a href=https://drafts.csswg.org/css2/#propdef-padding-left>'padding-left'</a></dfn>, and
              <dfn id="'padding-right'"><a href=https://drafts.csswg.org/css2/#propdef-padding-right>'padding-right'</a></dfn> properties<li>The <dfn id="'top'"><a href=https://drafts.csswg.org/css2/#propdef-top>'top'</a></dfn>,
              <dfn id="'bottom'"><a href=https://drafts.csswg.org/css2/#propdef-bottom>'bottom'</a></dfn>,
              <dfn id="'left'"><a href=https://drafts.csswg.org/css2/#propdef-left>'left'</a></dfn>, and
              <dfn id="'right'"><a href=https://drafts.csswg.org/css2/#propdef-right>'right'</a></dfn> properties<li>The <dfn id="'float'"><a href=https://drafts.csswg.org/css2/#float-position>'float'</a></dfn> property<li>The <dfn id="'clear'"><a href=https://drafts.csswg.org/css2/#flow-control>'clear'</a></dfn> property<li>The <dfn id="'width'"><a href=https://drafts.csswg.org/css2/#the-width-property>'width'</a></dfn> property<li>The <dfn id="'height'"><a href=https://drafts.csswg.org/css2/#the-height-property>'height'</a></dfn> property<li>The <dfn id="'max-width'"><a href=https://drafts.csswg.org/css2/#min-max-widths>'max-width'</a></dfn> property<li>The <dfn id="'max-height'"><a href=https://drafts.csswg.org/css2/#min-max-heights>'max-height'</a></dfn> property<li>The <dfn id="'line-height'"><a href=https://drafts.csswg.org/css2/#propdef-line-height>'line-height'</a></dfn> property<li>The <dfn id="'vertical-align'"><a href=https://drafts.csswg.org/css2/#propdef-vertical-align>'vertical-align'</a></dfn> property<li>The <dfn id="'content'"><a href=https://drafts.csswg.org/css2/#content%E2%91%A0>'content'</a></dfn> property<li>The <dfn id="'inline-block'"><a href=https://drafts.csswg.org/css2/#value-def-inline-block>'inline-block'</a></dfn> value of the <a id="dependencies:'display'" href=https://drafts.csswg.org/css2/#display-prop data-x-internal="'display'">'display'</a> property<li>The <dfn id="'visibility'"><a href=https://drafts.csswg.org/css2/#propdef-visibility>'visibility'</a></dfn> property</ul>

    <p><cite>CSS</cite> also defines the following border properties: <a href=references.html#refsCSS>[CSS]</a></p>

    <table><caption>Border properties
     </caption><tr><td>
       <th>Top
       <th>Bottom
       <th>Left
       <th>Right
      <tr><th>Width
       <td><dfn id="'border-top-width'"><a href=https://drafts.csswg.org/css2/#propdef-border-top-width>'border-top-width'</a></dfn>
       <td><dfn id="'border-bottom-width'"><a href=https://drafts.csswg.org/css2/#propdef-border-bottom-width>'border-bottom-width'</a></dfn>
       <td><dfn id="'border-left-width'"><a href=https://drafts.csswg.org/css2/#propdef-border-left-width>'border-left-width'</a></dfn>
       <td><dfn id="'border-right-width'"><a href=https://drafts.csswg.org/css2/#propdef-border-right-width>'border-right-width'</a></dfn>
      <tr><th>Style
       <td><dfn id="'border-top-style'"><a href=https://drafts.csswg.org/css2/#propdef-border-top-style>'border-top-style'</a></dfn>
       <td><dfn id="'border-bottom-style'"><a href=https://drafts.csswg.org/css2/#propdef-border-bottom-style>'border-bottom-style'</a></dfn>
       <td><dfn id="'border-left-style'"><a href=https://drafts.csswg.org/css2/#propdef-border-left-style>'border-left-style'</a></dfn>
       <td><dfn id="'border-right-style'"><a href=https://drafts.csswg.org/css2/#propdef-border-right-style>'border-right-style'</a></dfn>
      <tr><th>Color
       <td><dfn id="'border-top-color'"><a href=https://drafts.csswg.org/css2/#propdef-border-top-color>'border-top-color'</a></dfn>
       <td><dfn id="'border-bottom-color'"><a href=https://drafts.csswg.org/css2/#propdef-border-bottom-color>'border-bottom-color'</a></dfn>
       <td><dfn id="'border-left-color'"><a href=https://drafts.csswg.org/css2/#propdef-border-left-color>'border-left-color'</a></dfn>
       <td><dfn id="'border-right-color'"><a href=https://drafts.csswg.org/css2/#propdef-border-right-color>'border-right-color'</a></dfn>
    </table>

    <p>The basic version of the <dfn id="'display'"><a href=https://drafts.csswg.org/css2/#display-prop>'display'</a></dfn> property
    is defined in <cite>CSS</cite>, and the property is extended by other CSS
    modules. <a href=references.html#refsCSS>[CSS]</a> <a href=references.html#refsCSSRUBY>[CSSRUBY]</a> <a href=references.html#refsCSSTABLE>[CSSTABLE]</a></p>

    <p>The following terms and features are defined in <cite>CSS Logical Properties</cite>: <a href=references.html#refsCSSLOGICAL>[CSSLOGICAL]</a></p>

    <ul class=brief><li>The <dfn id="'margin-block-start'"><a href=https://drafts.csswg.org/css-logical/#propdef-margin-block-start>'margin-block-start'</a></dfn>,
              <dfn id="'margin-block-end'"><a href=https://drafts.csswg.org/css-logical/#propdef-margin-block-end>'margin-block-end'</a></dfn>,
              <dfn id="'margin-inline-start'"><a href=https://drafts.csswg.org/css-logical/#propdef-margin-inline-start>'margin-inline-start'</a></dfn>, and
              <dfn id="'margin-inline-end'"><a href=https://drafts.csswg.org/css-logical/#propdef-margin-inline-end>'margin-inline-end'</a></dfn> properties<li>The <dfn id="'padding-block-start'"><a href=https://drafts.csswg.org/css-logical/#propdef-padding-block-start>'padding-block-start'</a></dfn>,
              <dfn id="'padding-block-end'"><a href=https://drafts.csswg.org/css-logical/#propdef-padding-block-end>'padding-block-end'</a></dfn>,
              <dfn id="'padding-inline-start'"><a href=https://drafts.csswg.org/css-logical/#propdef-padding-inline-start>'padding-inline-start'</a></dfn>, and
              <dfn id="'padding-inline-end'"><a href=https://drafts.csswg.org/css-logical/#propdef-padding-inline-end>'padding-inline-end'</a></dfn> properties<li>The <dfn id="'border-block-start-width'"><a href=https://drafts.csswg.org/css-logical/#propdef-border-block-start-width>'border-block-start-width'</a></dfn> property<li>The <dfn id="'block-size'"><a href=https://drafts.csswg.org/css-logical/#propdef-block-size>'block-size'</a></dfn> property<li>The <dfn id="'inline-size'"><a href=https://drafts.csswg.org/css-logical/#propdef-inline-size>'inline-size'</a></dfn> property<li>The <dfn id="'inset-block-start'"><a href=https://drafts.csswg.org/css-logical/#propdef-inset-block-start>'inset-block-start'</a></dfn> property<li>The <dfn id="'inset-block-end'"><a href=https://drafts.csswg.org/css-logical/#propdef-inset-block-end>'inset-block-end'</a></dfn> property</ul>

    <p>The following terms and features are defined in <cite>CSS Color</cite>: <a href=references.html#refsCSSCOLOR>[CSSCOLOR]</a></p>

    <ul class=brief><li><dfn id=named-color><a href=https://drafts.csswg.org/css-color/#named-color>named color</a></dfn><li><dfn id=color><a href=https://drafts.csswg.org/css-color/#typedef-color>&lt;color></a></dfn><li>The <dfn id="'color'"><a href=https://drafts.csswg.org/css-color/#the-color-property>'color'</a></dfn> property<li>The <dfn id=currentcolor><a href=https://drafts.csswg.org/css-color/#valdef-color-currentcolor>'currentcolor'</a></dfn> value<li><dfn id=opaque-black><a href=https://drafts.csswg.org/css-color/#opaque-black>opaque black</a></dfn><li><dfn id=transparent-black><a href=https://drafts.csswg.org/css-color/#transparent-black>transparent black</a></dfn></ul>

    <p>The following terms are defined in <cite>CSS Images</cite>: <a href=references.html#refsCSSIMAGES>[CSSIMAGES]</a></p>

    <ul class=brief><li><dfn id=default-object-size><a href=https://drafts.csswg.org/css-images/#default-object-size>default object size</a></dfn><li><dfn id=intrinsic-dimensions><a href=https://drafts.csswg.org/css-images/#intrinsic-dimensions>intrinsic dimensions</a></dfn><li><dfn id=intrinsic-aspect-ratio><a href=https://drafts.csswg.org/css-images/#intrinsic-aspect-ratio>intrinsic aspect ratio</a></dfn><li><dfn id=intrinsic-height><a href=https://drafts.csswg.org/css-images/#intrinsic-height>intrinsic height</a></dfn><li><dfn id=intrinsic-width><a href=https://drafts.csswg.org/css-images/#intrinsic-width>intrinsic width</a></dfn><li>The <dfn id="'image-orientation'"><a href=https://drafts.csswg.org/css-images-3/#the-image-orientation>'image-orientation'</a></dfn> property<li>The <dfn id="'object-fit'"><a href=https://drafts.csswg.org/css-images/#the-object-fit>'object-fit'</a></dfn> property</ul>

    <p>The term <dfn id=paint-source><a href=https://drafts.csswg.org/css-images-4/#paint-source>paint
    source</a></dfn> is used as defined in <cite>CSS Images Level 4</cite>
    to define the interaction of certain HTML elements with the CSS 'element()'
    function. <a href=references.html#refsCSSIMAGES4>[CSSIMAGES4]</a></p>

    <p>The following features are defined in <cite>CSS Backgrounds and Borders</cite>: <a href=references.html#refsCSSBG>[CSSBG]</a></p>

    <ul class=brief><li>The <dfn id="'background-color'"><a href=https://drafts.csswg.org/css-backgrounds/#the-background-color>'background-color'</a></dfn> property<li>The <dfn id="'background-image'"><a href=https://drafts.csswg.org/css-backgrounds/#the-background-image>'background-image'</a></dfn> property<li>The <dfn id="'border-radius'"><a href=https://drafts.csswg.org/css-backgrounds/#propdef-border-radius>'border-radius'</a></dfn> property</ul>

    <p>The following features are defined in <cite>CSS Box Alignment</cite>: <a href=references.html#refsCSSALIGN>[CSSALIGN]</a></p>

    <ul class=brief><li>The <dfn id="'align-content'"><a href=https://drafts.csswg.org/css-align/#propdef-align-content>'align-content'</a></dfn> property<li>The <dfn id="'align-items'"><a href=https://drafts.csswg.org/css-align/#propdef-align-items>'align-items'</a></dfn> property<li>The <dfn id="'align-self'"><a href=https://drafts.csswg.org/css-align/#propdef-align-self>'align-self'</a></dfn> property<li>The <dfn id="'justify-self'"><a href=https://drafts.csswg.org/css-align/#propdef-justify-self>'justify-self'</a></dfn> property<li>The <dfn id="'justify-content'"><a href=https://drafts.csswg.org/css-align/#propdef-propdef-justify-content>'justify-content'</a></dfn> property<li>The <dfn id="'justify-items'"><a href=https://drafts.csswg.org/css-align/#propdef-propdef-justify-items>'justify-items'</a></dfn> property</ul>

    <p>The following terms and features are defined in <cite>CSS Display</cite>: <a href=references.html#refsCSSDISPLAY>[CSSDISPLAY]</a></p>

    <ul class=brief><li><dfn id=outer-display-type><a href=https://drafts.csswg.org/css-display/#outer-display-type>outer display type</a></dfn><li><dfn id=block-level><a href=https://drafts.csswg.org/css-display/#block-level>block-level</a></dfn><li><dfn id=block-container><a href=https://drafts.csswg.org/css-display/#block-container>block container</a></dfn><li><dfn id=formatting-context><a href=https://drafts.csswg.org/css-display/#formatting-context>formatting context</a></dfn><li><dfn id=block-formatting-context><a href=https://drafts.csswg.org/css-display/#block-formatting-context>block formatting context</a></dfn><li><dfn id=inline-formatting-context><a href=https://drafts.csswg.org/css-display/#inline-formatting-context>inline formatting context</a></dfn><li><dfn id=absolutely-positioned><a href=https://drafts.csswg.org/css-display/#absolutely-positioned>absolutely positioned</a></dfn><li><dfn id=replaced-element><a href=https://drafts.csswg.org/css-display/#replaced-element>replaced element</a></dfn><li><dfn id=css-box><a href=https://drafts.csswg.org/css-display/#css-box>CSS box</a></dfn></ul>

    <p>The following features are defined in <cite>CSS Flexible Box Layout</cite>: <a href=references.html#refsCSSFLEXBOX>[CSSFLEXBOX]</a></p>

    <ul class=brief><li>The <dfn id="'flex-direction'"><a href=https://drafts.csswg.org/css-flexbox/#propdef-flex-direction>'flex-direction'</a></dfn> property<li>The <dfn id="'flex-wrap'"><a href=https://drafts.csswg.org/css-flexbox/#propdef-flex-wrap>'flex-wrap'</a></dfn> property</ul>

    <p>The following terms and features are defined in <cite>CSS Fonts</cite>: <a href=references.html#refsCSSFONTS>[CSSFONTS]</a></p>

    <ul class=brief><li><dfn id=first-available-font><a href=https://drafts.csswg.org/css-fonts/#first-available-font>first available font</a></dfn><li>The <dfn id="'font-family'"><a href=https://drafts.csswg.org/css-fonts/#font-family-prop>'font-family'</a></dfn> property<li>The <dfn id="'font-weight'"><a href=https://drafts.csswg.org/css-fonts/#font-weight-prop>'font-weight'</a></dfn> property<li>The <dfn id="'font-size'"><a href=https://drafts.csswg.org/css-fonts/#font-size-prop>'font-size'</a></dfn> property<li>The <dfn id="'font'"><a href=https://drafts.csswg.org/css-fonts/#font-prop>'font'</a></dfn> property</ul>

    <p>The following features are defined in <cite>CSS Grid Layout</cite>: <a href=references.html#refsCSSGRID>[CSSGRID]</a></p>

    <ul class=brief><li>The <dfn id="'grid-auto-columns'"><a href=https://drafts.csswg.org/css-grid/#propdef-grid-auto-columns>'grid-auto-columns'</a></dfn> property<li>The <dfn id="'grid-auto-flow'"><a href=https://drafts.csswg.org/css-grid/#propdef-grid-auto-flow>'grid-auto-flow'</a></dfn> property<li>The <dfn id="'grid-auto-rows'"><a href=https://drafts.csswg.org/css-grid/#propdef-grid-auto-rows>'grid-auto-rows'</a></dfn> property<li>The <dfn id="'grid-column-gap'"><a href=https://drafts.csswg.org/css-grid/#propdef-grid-column-gap>'grid-column-gap'</a></dfn> property<li>The <dfn id="'grid-row-gap'"><a href=https://drafts.csswg.org/css-grid/#propdef-grid-row-gap>'grid-row-gap'</a></dfn> property<li>The <dfn id="'grid-template-areas'"><a href=https://drafts.csswg.org/css-grid/#propdef-grid-template-areas>'grid-template-areas'</a></dfn> property<li>The <dfn id="'grid-template-columns'"><a href=https://drafts.csswg.org/css-grid/#propdef-grid-template-columns>'grid-template-columns'</a></dfn> property<li>The <dfn id="'grid-template-rows'"><a href=https://drafts.csswg.org/css-grid/#propdef-grid-template-rows>'grid-template-rows'</a></dfn> property</ul>

    <p>The following terms are defined in <cite>CSS Inline Layout</cite>: <a href=references.html#refsCSSINLINE>[CSSINLINE]</a></p>

    <ul class=brief><li><dfn id=alphabetic-baseline><a href=https://drafts.csswg.org/css-inline/#alphabetic-baseline>alphabetic baseline</a></dfn><li><dfn id=ascent-metric><a href=https://drafts.csswg.org/css-inline/#ascent-metric>ascent metric</a></dfn><li><dfn id=descent-metric><a href=https://drafts.csswg.org/css-inline/#descent-metric>descent metric</a></dfn><li><dfn id=hanging-baseline><a href=https://drafts.csswg.org/css-inline/#hanging-baseline>hanging baseline</a></dfn><li><dfn id=ideographic-under-baseline><a href=https://drafts.csswg.org/css-inline/#ideographic-under-baseline>ideographic-under baseline</a></dfn></ul>

    <p>The following terms and features are defined in <cite>CSS Intrinsic &amp; Extrinsic
    Sizing</cite>: <a href=references.html#refsCSSSIZING>[CSSSIZING]</a></p>

    <ul class=brief><li><dfn id=fit-content-inline-size><a href=https://drafts.csswg.org/css-sizing/#fit-content-inline-size>fit-content inline size</a></dfn></ul>

    <p>The <dfn id="'list-style-type'"><a href=https://drafts.csswg.org/css-lists/#propdef-list-style-type>'list-style-type'</a></dfn>
    property is defined in <cite>CSS Lists and Counters</cite>. <a href=references.html#refsCSSLISTS>[CSSLISTS]</a></p>

    <p>The following features are defined in <cite>CSS Overflow</cite>. <a href=references.html#refsCSSOVERFLOW>[CSSOVERFLOW]</a></p>

    <ul class=brief><li>The <dfn id="'overflow'"><a href=https://drafts.csswg.org/css-overflow/#propdef-overflow>'overflow'</a></dfn> property and its <dfn id="'hidden'"><a href=https://drafts.csswg.org/css-overflow/#valdef-overflow-hidden>'hidden'</a></dfn> value<li>The <dfn id="'text-overflow'"><a href=https://drafts.csswg.org/css-overflow/#propdef-text-overflow>'text-overflow'</a></dfn> property</ul>

    <p>The following features are defined in <cite>CSS Positioned Layout</cite>: <a href=references.html#refsCSSPOSITION>[CSSPOSITION]</a></p>

    <ul class=brief><li>The <dfn id="'position'"><a href=https://drafts.csswg.org/css-position/#position-property>'position'</a></dfn> property and its
              <dfn id="'static'"><a href=https://drafts.csswg.org/css-position/#valdef-position-static>'static'</a></dfn> value</ul>

    <p>The following features are defined in <cite>CSS Multi-column Layout</cite>. <a href=references.html#refsCSSMULTICOL>[CSSMULTICOL]</a></p>

    <ul class=brief><li>The <dfn id="'column-count'"><a href=https://drafts.csswg.org/css-multicol/#propdef-column-count>'column-count'</a></dfn> property<li>The <dfn id="'column-fill'"><a href=https://drafts.csswg.org/css-multicol/#propdef-column-fill>'column-fill'</a></dfn> property<li>The <dfn id="'column-gap'"><a href=https://drafts.csswg.org/css-multicol/#propdef-column-gap>'column-gap'</a></dfn> property<li>The <dfn id="'column-rule'"><a href=https://drafts.csswg.org/css-multicol/#propdef-column-rule>'column-rule'</a></dfn> property<li>The <dfn id="'column-width'"><a href=https://drafts.csswg.org/css-multicol/#propdef-column-width>'column-width'</a></dfn> property</ul>

    <p>The <dfn id="'ruby-base'"><a href=https://drafts.csswg.org/css-ruby/#valdef-display-ruby-base>'ruby-base'</a></dfn>
    value of the <a id="dependencies:'display'-2" href=https://drafts.csswg.org/css2/#display-prop data-x-internal="'display'">'display'</a> property is defined in <cite>CSS Ruby Layout</cite>. <a href=references.html#refsCSSRUBY>[CSSRUBY]</a></p>

    <p>The following features are defined in <cite>CSS Table</cite>: <a href=references.html#refsCSSTABLE>[CSSTABLE]</a></p>

    <ul class=brief><li>The <dfn id="'border-spacing'"><a href=https://drafts.csswg.org/css-tables/#propdef-border-spacing>'border-spacing'</a></dfn> property<li>The <dfn id="'border-collapse'"><a href=https://drafts.csswg.org/css-tables/#border-collapse-property>'border-collapse'</a></dfn> property<li>The <dfn id="'table-cell'"><a href=https://drafts.csswg.org/css-tables/#table-cell>'table-cell'</a></dfn>,
              <dfn id="'table-row'"><a href=https://drafts.csswg.org/css-tables/#table-row>'table-row'</a></dfn>,
              <dfn id="'table-caption'"><a href=https://drafts.csswg.org/css-tables/#table-caption>'table-caption'</a></dfn>, and
              <dfn id="'table'"><a href=https://drafts.csswg.org/css-tables/#table>'table'</a></dfn> values of the <a id="dependencies:'display'-3" href=https://drafts.csswg.org/css2/#display-prop data-x-internal="'display'">'display'</a> property</ul>

    <p>The following features are defined in <cite>CSS Text</cite>: <a href=references.html#refsCSSTEXT>[CSSTEXT]</a></p>

    <ul class=brief><li>The <dfn id="'text-transform'"><a href=https://drafts.csswg.org/css-text/#text-transform-property>'text-transform'</a></dfn> property<li>The <dfn id="'white-space'"><a href=https://drafts.csswg.org/css-text/#white-space-property>'white-space'</a></dfn> property<li>The <dfn id="'text-align'"><a href=https://drafts.csswg.org/css-text/#text-align-property>'text-align'</a></dfn> property<li>The <dfn id="'letter-spacing'"><a href=https://drafts.csswg.org/css-text/#letter-spacing-property>'letter-spacing'</a></dfn> property</ul>

    <p>The following features are defined in <cite>CSS Writing Modes</cite>: <a href=references.html#refsCSSWM>[CSSWM]</a></p>

    <ul class=brief><li>The <dfn id="'direction'"><a href=https://drafts.csswg.org/css-writing-modes/#direction>'direction'</a></dfn> property<li>The <dfn id="'unicode-bidi'"><a href=https://drafts.csswg.org/css-writing-modes/#unicode-bidi>'unicode-bidi'</a></dfn> property<li>The <dfn id=block-flow-direction><a href=https://drafts.csswg.org/css-writing-modes/#block-flow-direction>block flow direction</a></dfn>,
              <dfn id=block-size><a href=https://drafts.csswg.org/css-writing-modes/#block-size>block size</a></dfn>,
              <dfn id=inline-size><a href=https://drafts.csswg.org/css-writing-modes/#inline-size>inline size</a></dfn>,
              <dfn id=block-start><a href=https://drafts.csswg.org/css-writing-modes/#block-start>block-start</a></dfn>,
              <dfn id=block-end><a href=https://drafts.csswg.org/css-writing-modes/#block-end>block-end</a></dfn>,
              <dfn id=inline-start><a href=https://drafts.csswg.org/css-writing-modes/#inline-start>inline-start</a></dfn>,
              <dfn id=inline-end><a href=https://drafts.csswg.org/css-writing-modes/#inline-end>inline-end</a></dfn>,
              <dfn id=line-left><a href=https://drafts.csswg.org/css-writing-modes/#line-left>line-left</a></dfn>, and
              <dfn id=line-right><a href=https://drafts.csswg.org/css-writing-modes/#line-right>line-right</a></dfn> concepts</ul>

    <p>The following features are defined in <cite>CSS Basic User Interface</cite>: <a href=references.html#refsCSSUI>[CSSUI]</a></p>

    <ul class=brief><li>The <dfn id="'outline'"><a href=https://drafts.csswg.org/css-ui/#outline>'outline'</a></dfn> property<li>The <dfn id="'cursor'"><a href=https://drafts.csswg.org/css-ui/#cursor>'cursor'</a></dfn> property<li>The <dfn id="'appearance'"><a href=https://drafts.csswg.org/css-ui-4/#appearance-switching>'appearance'</a></dfn> property</ul>

    <p>The algorithm to <dfn id=update-animations-and-send-events><a href=https://drafts.csswg.org/web-animations/#update-animations-and-send-events>update
    animations and send events</a></dfn> is defined in <cite>Web Animations</cite>. <a href=references.html#refsWEBANIMATIONS>[WEBANIMATIONS]</a>.</p>

    <p>Implementations that support scripting must support the CSS Object Model. The following
    features and terms are defined in the CSSOM specifications: <a href=references.html#refsCSSOM>[CSSOM]</a> <a href=references.html#refsCSSOMVIEW>[CSSOMVIEW]</a>

    <ul class=brief><li><dfn id=screen><a href=https://drafts.csswg.org/cssom-view/#the-screen-interface><code>Screen</code></a></dfn> interface<li><dfn id=linkstyle><a href=https://drafts.csswg.org/cssom/#the-linkstyle-interface><code>LinkStyle</code></a></dfn> interface<li><dfn id=cssstyledeclaration><a href=https://drafts.csswg.org/cssom/#the-cssstyledeclaration-interface><code>CSSStyleDeclaration</code></a></dfn> interface<li><dfn id=dom-style><a href=https://drafts.csswg.org/cssom/#dom-elementcssinlinestyle-style><code>style</code></a></dfn> IDL attribute<li><dfn id=dom-cssstyledeclaration-csstext><a href=https://drafts.csswg.org/cssom/#dom-cssstyledeclaration-csstext><code>cssText</code></a></dfn> attribute of <code id=dependencies:cssstyledeclaration><a data-x-internal=cssstyledeclaration href=https://drafts.csswg.org/cssom/#the-cssstyledeclaration-interface>CSSStyleDeclaration</a></code><li><dfn id=stylesheet><a href=https://drafts.csswg.org/cssom/#the-stylesheet-interface><code>StyleSheet</code></a></dfn> interface<li><dfn id=create-a-css-style-sheet><a href=https://drafts.csswg.org/cssom/#create-a-css-style-sheet>create a CSS style sheet</a></dfn><li><dfn id=remove-a-css-style-sheet><a href=https://drafts.csswg.org/cssom/#remove-a-css-style-sheet>remove a CSS style sheet</a></dfn><li><dfn id=associated-css-style-sheet><a href=https://drafts.csswg.org/cssom/#associated-css-style-sheet>associated CSS style sheet</a></dfn><li>
      <dfn id=css-style-sheet><a href=https://drafts.csswg.org/cssom/#css-style-sheet>CSS style sheets</a></dfn> and their
      properties:
      <ul class=brief><li><dfn id=concept-css-style-sheet-type><a href=https://drafts.csswg.org/cssom/#concept-css-style-sheet-type>type</a></dfn><li><dfn id=concept-css-style-sheet-location><a href=https://drafts.csswg.org/cssom/#concept-css-style-sheet-location>location</a></dfn><li><dfn id=concept-css-style-sheet-parent-css-style-sheet><a href=https://drafts.csswg.org/cssom/#concept-css-style-sheet-parent-css-style-sheet>parent CSS style sheet</a></dfn><li><dfn id=concept-css-style-sheet-owner-node><a href=https://drafts.csswg.org/cssom/#concept-css-style-sheet-owner-node>owner node</a></dfn><li><dfn id=concept-css-style-sheet-owner-css-rule><a href=https://drafts.csswg.org/cssom/#concept-css-style-sheet-owner-css-rule>owner CSS rule</a></dfn><li><dfn id=concept-css-style-sheet-media><a href=https://drafts.csswg.org/cssom/#concept-css-style-sheet-media>media</a></dfn><li><dfn id=concept-css-style-sheet-title><a href=https://drafts.csswg.org/cssom/#concept-css-style-sheet-title>title</a></dfn><li><dfn id=concept-css-style-sheet-alternate-flag><a href=https://drafts.csswg.org/cssom/#concept-css-style-sheet-alternate-flag>alternate flag</a></dfn><li><dfn id=concept-css-style-sheet-disabeld-flag><a href=https://drafts.csswg.org/cssom/#concept-css-style-sheet-disabled-flag>disabled flag</a></dfn><li><dfn id=concept-css-style-sheet-css-rules><a href=https://drafts.csswg.org/cssom/#concept-css-style-sheet-css-rules>CSS rules</a></dfn><li><dfn id=concept-css-style-sheet-origin-clean-flag><a href=https://drafts.csswg.org/cssom/#concept-css-style-sheet-origin-clean-flag>origin-clean flag</a></dfn></ul>
     <li><dfn id=css-style-sheet-set><a href=https://drafts.csswg.org/cssom/#css-style-sheet-set>CSS style sheet set</a></dfn><li><dfn id=css-style-sheet-set-name><a href=https://drafts.csswg.org/cssom/#css-style-sheet-set-name>CSS style sheet set name</a></dfn><li><dfn id=preferred-css-style-sheet-set-name><a href=https://drafts.csswg.org/cssom/#preferred-css-style-sheet-set-name>preferred CSS style sheet set name</a></dfn><li><dfn id=change-the-preferred-css-style-sheet-set-name><a href=https://drafts.csswg.org/cssom/#change-the-preferred-css-style-sheet-set-name>change the preferred CSS style sheet set name</a></dfn><li><dfn id=serializing-a-css-value><a href=https://drafts.csswg.org/cssom/#serialize-a-css-value>Serializing a CSS value</a></dfn><li><dfn id=run-the-resize-steps><a href=https://drafts.csswg.org/cssom-view/#run-the-resize-steps>run the resize steps</a></dfn><li><dfn id=run-the-scroll-steps><a href=https://drafts.csswg.org/cssom-view/#run-the-scroll-steps>run the scroll steps</a></dfn><li><dfn id=evaluate-media-queries-and-report-changes><a href=https://drafts.csswg.org/cssom-view/#evaluate-media-queries-and-report-changes>evaluate media queries and report changes</a></dfn><li><dfn id=scroll-an-element-into-view><a href=https://drafts.csswg.org/cssom-view/#scroll-an-element-into-view>Scroll an element into view</a></dfn><li><dfn id=scroll-to-the-beginning-of-the-document><a href=https://drafts.csswg.org/cssom-view/#scroll-to-the-beginning-of-the-document>Scroll to the beginning of the document</a></dfn><li>The <dfn id=event-resize><a href=https://drafts.csswg.org/cssom-view/#eventdef-window-resize><code>resize</code></a></dfn> event<li>The <dfn id=event-scroll><a href=https://drafts.csswg.org/cssom-view/#eventdef-document-scroll><code>scroll</code></a></dfn> event<li><dfn id=set-up-browsing-context-features><a href=https://drafts.csswg.org/cssom-view/#set-up-browsing-context-features>set up browsing context features</a></dfn></ul>

    <p>The following features and terms are defined in <cite>CSS Syntax</cite>: <a href=references.html#refsCSSSYNTAX>[CSSSYNTAX]</a></p>

    <ul class=brief><li><dfn id=conformant-style-sheet><a href=https://drafts.csswg.org/css-syntax/#conform-classes>conformant style sheet</a></dfn><li><dfn id=parse-a-list-of-component-values><a href=https://drafts.csswg.org/css-syntax/#parse-a-list-of-component-values>parse a list of component values</a></dfn><li><dfn id=parse-a-comma-separated-list-of-component-values><a href=https://drafts.csswg.org/css-syntax/#parse-a-comma-separated-list-of-component-values>parse a comma-separated list of component values</a></dfn><li><dfn id=component-value><a href=https://drafts.csswg.org/css-syntax/#component-value>component value</a></dfn><li><dfn id=environment-encoding><a href=https://drafts.csswg.org/css-syntax/#environment-encoding>environment encoding</a></dfn><li><dfn id=whitespace-token><a href=https://drafts.csswg.org/css-syntax/#typedef-whitespace-token>&lt;whitespace-token></a></dfn></ul>

    <p>The following terms are defined in <cite>Selectors</cite>: <a href=references.html#refsSELECTORS>[SELECTORS]</a></p>

    <ul class=brief><li><dfn id=type-selector><a href=https://drafts.csswg.org/selectors/#type-selector>type selector</a></dfn><li><dfn id=attribute-selector><a href=https://drafts.csswg.org/selectors/#attribute-selector>attribute selector</a></dfn><li><dfn id=pseudo-class><a href=https://drafts.csswg.org/selectors/#pseudo-class>pseudo-class</a></dfn></ul>

    <p>The following features are defined in <cite>CSS Values and Units</cite>: <a href=references.html#refsCSSVALUES>[CSSVALUES]</a></p>

    <ul class=brief><li><dfn id=length-2><a href=https://drafts.csswg.org/css-values/#lengths>&lt;length></a></dfn><li>The <dfn id="'em'"><a href=https://drafts.csswg.org/css-values/#em>'em'</a></dfn> unit<li>The <dfn id="'ex'"><a href=https://drafts.csswg.org/css-values/#ex>'ex'</a></dfn> unit<li>The <dfn id="'vw'"><a href=https://drafts.csswg.org/css-values/#vw>'vw'</a></dfn> unit<li>The <dfn id="'in'"><a href=https://drafts.csswg.org/css-values/#in>'in'</a></dfn> unit<li>The <dfn id="'px'"><a href=https://drafts.csswg.org/css-values/#px>'px'</a></dfn> unit<li>The <dfn id="'attr()'"><a href=https://drafts.csswg.org/css-values/#funcdef-attr>'attr()'</a></dfn> function<li>The <dfn id=math-functions><a href=https://drafts.csswg.org/css-values/#math-function>math functions</a></dfn></ul>

    <p>The term <dfn id=css-styling-attribute><a href=https://drafts.csswg.org/css-style-attr/#style-attribute>style attribute</a></dfn> is
    defined in <cite>CSS Style Attributes</cite>. <a href=references.html#refsCSSATTR>[CSSATTR]</a></p>

    <p>The following terms are defined in the <cite>CSS Cascading and Inheritance</cite>: <a href=references.html#refsCSSCASCADE>[CSSCASCADE]</a></p>

    <ul class=brief><li><dfn id=specified-value><a href=https://drafts.csswg.org/css-cascade/#specified-value>specified value</a></dfn><li><dfn id=computed-value><a href=https://drafts.csswg.org/css-cascade/#computed-value>computed value</a></dfn><li><dfn id=used-value><a href=https://drafts.csswg.org/css-cascade/#used-value>used value</a></dfn></ul>

    <p>The <code id=dependencies:canvasrenderingcontext2d><a href=canvas.html#canvasrenderingcontext2d>CanvasRenderingContext2D</a></code> object's use of fonts depends on the features
    described in the CSS <cite>Fonts</cite> and <cite>Font Loading</cite> specifications, including
    in particular <dfn id=fontface><code>FontFace</code></dfn> objects and the <dfn id=font-source><a href=https://drafts.csswg.org/css-font-loading/#font-source>font source</a></dfn> concept.
    <a href=references.html#refsCSSFONTS>[CSSFONTS]</a> <a href=references.html#refsCSSFONTLOAD>[CSSFONTLOAD]</a></p>

    <p>The following interfaces and terms are defined in <cite>Geometry Interfaces</cite>: <a href=references.html#refsGEOMETRY>[GEOMETRY]</a></p>

    <ul class=brief><li><dfn id=dommatrix><a href=https://drafts.fxtf.org/geometry/#dommatrix><code>DOMMatrix</code></a></dfn> interface, and associated
         <dfn id=m11-element><a href=https://drafts.fxtf.org/geometry/#matrix-m11-element>m11 element</a></dfn>,
         <dfn id=m12-element><a href=https://drafts.fxtf.org/geometry/#matrix-m12-element>m12 element</a></dfn>,
         <dfn id=m21-element><a href=https://drafts.fxtf.org/geometry/#matrix-m21-element>m21 element</a></dfn>,
         <dfn id=m22-element><a href=https://drafts.fxtf.org/geometry/#matrix-m22-element>m22 element</a></dfn>,
         <dfn id=m41-element><a href=https://drafts.fxtf.org/geometry/#matrix-m41-element>m41 element</a></dfn>, and
         <dfn id=m42-element><a href=https://drafts.fxtf.org/geometry/#matrix-m42-element>m42 element</a></dfn><li><dfn id=dommatrix2dinit><a href=https://drafts.fxtf.org/geometry/#dictdef-dommatrix2dinit><code>DOMMatrix2DInit</code></a></dfn> and
         <dfn id=dommatrixinit><a href=https://drafts.fxtf.org/geometry/#dictdef-dommatrixinit><code>DOMMatrixInit</code></a></dfn> dictionaries<li>The <dfn id=create-a-dommatrix-from-a-dictionary><a href=https://drafts.fxtf.org/geometry/#create-a-dommatrix-from-the-dictionary>create a <code>DOMMatrix</code> from a dictionary</a></dfn>
         and <dfn id=create-a-dommatrix-from-a-2d-dictionary><a href=https://drafts.fxtf.org/geometry/#create-a-dommatrix-from-the-2d-dictionary>create a <code>DOMMatrix</code> from a 2D dictionary</a></dfn>
         algorithms for <code id=dependencies:dommatrix2dinit><a data-x-internal=dommatrix2dinit href=https://drafts.fxtf.org/geometry/#dictdef-dommatrix2dinit>DOMMatrix2DInit</a></code> or <code id=dependencies:dommatrixinit><a data-x-internal=dommatrixinit href=https://drafts.fxtf.org/geometry/#dictdef-dommatrixinit>DOMMatrixInit</a></code></ul>

    <p>The following terms are defined in the <cite>CSS Scoping</cite>: <a href=references.html#refsCSSSCOPING>[CSSSCOPING]</a></p>

    <ul class=brief><li><dfn id=flat-tree><a href=https://drafts.csswg.org/css-scoping/#flat-tree>flat tree</a></dfn></ul>

    <p>The following terms and features are defined in <cite>CSS Color Adjustment</cite>: <a href=references.html#refsCSSCOLORADJUST>[CSSCOLORADJUST]</a></p>

    <ul class=brief><li><dfn id="'color-scheme'"><a href=https://drafts.csswg.org/css-color-adjust/#color-scheme-prop>'color-scheme'</a></dfn></ul>
   <dt>Intersection Observer<dd>
    <p>The following term is defined in <cite>Intersection Observer</cite>: <a href=references.html#refsINTERSECTIONOBSERVER>[INTERSECTIONOBSERVER]</a></p>

    <ul class=brief><li><dfn id=run-the-update-intersection-observations-steps><a href=https://w3c.github.io/IntersectionObserver/#run-the-update-intersection-observations-steps>run the update intersection observations steps</a></dfn><li><dfn id=intersectionobserver><a href=https://w3c.github.io/IntersectionObserver/#intersectionobserver><code>IntersectionObserver</code></a></dfn><li><dfn id=intersectionobserverinit><a href=https://w3c.github.io/IntersectionObserver/#dictdef-intersectionobserverinit><code>IntersectionObserverInit</code></a></dfn><li><dfn id=dom-intersectionobserver-observe><a href=https://w3c.github.io/IntersectionObserver/#dom-intersectionobserver-observe><code>observe</code></a></dfn><li><dfn id=dom-intersectionobserver-unobserve><a href=https://w3c.github.io/IntersectionObserver/#dom-intersectionobserver-unobserve><code>unobserve</code></a></dfn><li><dfn id=dom-intersectionobserverentry-isintersecting><a href=https://w3c.github.io/IntersectionObserver/#dom-intersectionobserverentry-isintersecting><code>isIntersecting</code></a></dfn><li><dfn id=dom-intersectionobserverentry-target><a href=https://w3c.github.io/IntersectionObserver/#dom-intersectionobserverentry-target><code>target</code></a></dfn></ul>
   <dt>WebGL<dd>
    <p>The following interfaces are defined in the WebGL specifications: <a href=references.html#refsWEBGL>[WEBGL]</a></p>

    <ul class=brief><li><dfn id=webglrenderingcontext><a href=https://www.khronos.org/registry/webgl/specs/latest/1.0/#WebGLRenderingContext><code>WebGLRenderingContext</code></a></dfn> interface<li><dfn id=webgl2renderingcontext><a href=https://www.khronos.org/registry/webgl/specs/latest/2.0/#WebGL2RenderingContext><code>WebGL2RenderingContext</code></a></dfn> interface<li><dfn id=webglcontextattributes><a href=https://www.khronos.org/registry/webgl/specs/latest/1.0/#WebGLContextAttributes><code>WebGLContextAttributes</code></a></dfn> dictionary</ul>
   <dt>WebVTT<dd>
    <p>Implementations may support WebVTT as a text track format for subtitles, captions, metadata,
    etc., for media resources. <a href=references.html#refsWEBVTT>[WEBVTT]</a></p>

    <p>The following terms, used in this specification, are defined in <cite>WebVTT</cite>:</p>

    <ul class=brief><li><dfn id=webvtt-file><a href=https://w3c.github.io/webvtt/#webvtt-file>WebVTT file</a></dfn><li><dfn id=webvtt-file-using-cue-text><a href=https://w3c.github.io/webvtt/#webvtt-file-using-cue-text>WebVTT file using cue text</a></dfn><li><dfn id=webvtt-file-using-only-nested-cues><a href=https://w3c.github.io/webvtt/#webvtt-file-using-only-nested-cues>WebVTT file using only nested cues</a></dfn><li><dfn id=webvtt-parser><a href=https://w3c.github.io/webvtt/#webvtt-parser>WebVTT parser</a></dfn><li>The <dfn id=rules-for-updating-the-display-of-webvtt-text-tracks><a href=https://w3c.github.io/webvtt/#rules-for-updating-the-display-of-webvtt-text-tracks>rules for updating the display of WebVTT text tracks</a></dfn><li>The WebVTT <dfn id=text-track-cue-writing-direction><a href=https://w3c.github.io/webvtt/#webvtt-cue-writing-direction>text track cue writing direction</a></dfn><li><dfn id=vttcue><a href=https://w3c.github.io/webvtt/#vttcue><code>VTTCue</code></a></dfn> interface</ul>
   <dt>The WebSocket protocol<dd>
    <p>The following terms are defined in <cite>Fetch</cite>: <a href=references.html#refsFETCH>[FETCH]</a></p>

    <ul class=brief><li><dfn id=concept-websocket-establish><a href=https://fetch.spec.whatwg.org/#concept-websocket-establish>establish a WebSocket connection</a></dfn></ul>

    <p>The following terms are defined in <cite>The WebSocket protocol</cite>: <a href=references.html#refsWSP>[WSP]</a></p>

    <ul class=brief><li><dfn id=concept-websocket-established>the WebSocket connection is established</dfn><li><dfn id=concept-websockets-active-extensions>extensions in use</dfn><li><dfn id=concept-websocket-subprotocol>subprotocol in use</dfn><li><dfn id=concept-websocket-message-received>a WebSocket message has been received</dfn><li><dfn id=concept-websocket-send>send a WebSocket Message</dfn><li><dfn id=concept-websocket-fail>fail the WebSocket connection</dfn><li><dfn id=concept-websocket-close>close the WebSocket connection</dfn><li><dfn id=concept-websocket-start-closing-handshake>start the WebSocket closing handshake</dfn><li><dfn id=concept-websocket-closing-handshake>the WebSocket closing handshake is started</dfn><li><dfn id=concept-websocket-closed>the WebSocket connection is closed</dfn> (possibly <i>cleanly</i>)<li><dfn id=concept-websocket-close-code>the WebSocket connection close code</dfn><li><dfn id=concept-websocket-close-reason>the WebSocket connection close reason</dfn><li><dfn id=http-sec-websocket-protocol><code>Sec-WebSocket-Protocol</code></dfn> field</ul>
   <dt>ARIA<dd>
    <p>The <dfn id=attr-aria-role data-dfn-type=element-attr><code>role</code></dfn> attribute is defined in
    <cite>Accessible Rich Internet Applications</cite> (<cite>ARIA</cite>), as are the following
    roles: <a href=references.html#refsARIA>[ARIA]</a></p>

    <ul class=brief><li><dfn id=attr-aria-role-button><a href=https://w3c.github.io/aria/#button><code>button</code></a></dfn><li><dfn id=attr-aria-role-presentation><a href=https://w3c.github.io/aria/#presentation><code>presentation</code></a></dfn></ul>

    <p>In addition, the following <dfn id=attr-aria-*><code>aria-*</code></dfn> content
    attributes are defined in <cite>ARIA</cite>: <a href=references.html#refsARIA>[ARIA]</a></p>

    <ul class=brief><li><dfn id=attr-aria-checked><a href=https://w3c.github.io/aria/#aria-checked><code>aria-checked</code></a></dfn><li><dfn id=attr-aria-describedby><a href=https://w3c.github.io/aria/#aria-describedby><code>aria-describedby</code></a></dfn><li><dfn id=attr-aria-disabled><a href=https://w3c.github.io/aria/#aria-disabled><code>aria-disabled</code></a></dfn><li><dfn id=attr-aria-label><a href=https://w3c.github.io/aria/#aria-label><code>aria-label</code></a></dfn></ul>

    <p>Finally, the following terms are defined <cite>ARIA</cite>: <a href=references.html#refsARIA>[ARIA]</a></p>

    <ul class=brief><li><dfn id=role><a href=https://w3c.github.io/aria/#dfn-role>role</a></dfn><li><dfn id=concept-accessible-name><a href=https://w3c.github.io/aria/#dfn-accessible-name>accessible name</a></dfn><li>The <dfn id=ariamixin><a href=https://w3c.github.io/aria/#ARIAMixin><code>ARIAMixin</code></a></dfn> interface, with its associated
             <dfn id=ariamixin-getter-steps><a href=https://w3c.github.io/aria/#dfn-ariamixin-getter-steps><code>ARIAMixin</code> getter steps</a></dfn> and
             <dfn id=ariamixin-setter-steps><a href=https://w3c.github.io/aria/#dfn-ariamixin-setter-steps><code>ARIAMixin</code> setter steps</a></dfn> hooks</ul>
   <dt>Content Security Policy<dd>
    <p>The following terms are defined in <cite>Content Security Policy</cite>: <a href=references.html#refsCSP>[CSP]</a></p>

    <ul class=brief><li><dfn id=content-security-policy><a href=https://w3c.github.io/webappsec-csp/#content-security-policy-object>Content Security Policy</a></dfn><li><dfn id=csp-disposition><a href=https://w3c.github.io/webappsec-csp/#policy-disposition>disposition</a></dfn><li><dfn id=csp-directive-set><a href=https://w3c.github.io/webappsec-csp/#policy-directive-set>directive set</a></dfn><li><dfn id=content-security-policy-directive><a href=https://w3c.github.io/webappsec-csp/#directives>Content Security Policy directive</a></dfn><li><dfn id=concept-csp-list><a href=https://w3c.github.io/webappsec-csp/#csp-list>CSP list</a></dfn><li>The <dfn id=content-security-policy-syntax><a href=https://w3c.github.io/webappsec-csp/#grammardef-serialized-policy>Content Security Policy syntax</a></dfn><li><dfn id=enforce-the-policy><a href=https://w3c.github.io/webappsec-csp/#enforced>enforce the policy</a></dfn><li>The <dfn id=parse-a-serialized-content-security-policy><a href=https://w3c.github.io/webappsec-csp/#parse-serialized-policy>parse a serialized Content Security Policy</a></dfn> algorithm<li>The <dfn id="initialize-a-global-object's-csp-list"><a href=https://w3c.github.io/webappsec-csp/#initialize-global-object-csp>Initialize a global object's CSP list</a></dfn> algorithm<li>The <dfn id="initialize-a-document's-csp-list"><a href=https://w3c.github.io/webappsec-csp/#initialize-document-csp>Initialize a Document's CSP list</a></dfn> algorithm<li>The <dfn id="should-element's-inline-behavior-be-blocked-by-content-security-policy"><a href=https://w3c.github.io/webappsec-csp/#should-block-inline>Should element's inline behavior be blocked by Content Security Policy?</a></dfn> algorithm<li>The <dfn id=should-navigation-request-of-type-be-blocked-by-content-security-policy><a href=https://w3c.github.io/webappsec-csp/#should-block-navigation-request>Should navigation request of type be blocked by Content Security Policy?</a></dfn> algorithm<li>The <dfn id=should-navigation-response-to-navigation-request-of-type-in-target-be-blocked-by-content-security-policy><a href=https://w3c.github.io/webappsec-csp/#should-block-navigation-response>Should navigation response to navigation request of type in target be blocked by Content Security Policy?</a></dfn> algorithm<li>The <dfn id=report-uri-directive><a href=https://w3c.github.io/webappsec-csp/#report-uri><code>report-uri</code> directive</a></dfn><li>The <dfn id=csp-ensurecspdoesnotblockstringcompilation><a href=https://w3c.github.io/webappsec-csp/#can-compile-strings>EnsureCSPDoesNotBlockStringCompilation</a></dfn> abstract operation<li>The <dfn id=is-base-allowed-for-document><a href=https://w3c.github.io/webappsec-csp/#allow-base-for-document>Is base allowed for Document?</a></dfn> algorithm<li>The <dfn id=frame-ancestors-directive><a href=https://w3c.github.io/webappsec-csp/#frame-ancestors><code>frame-ancestors</code> directive</a></dfn><li>The <dfn id=sandbox-directive><a href=https://w3c.github.io/webappsec-csp/#sandbox><code>sandbox</code> directive</a></dfn><li>The <dfn id=should-plugin-element-be-blocked-a-priori-by-content-security-policy><a href=https://w3c.github.io/webappsec-csp/#should-plugin-element-be-blocked-a-priori-by-content-security-policy>Should plugin element be blocked <i lang=la>a priori</i> by Content Security Policy?</a></dfn> algorithm<li>The <dfn id=contains-a-header-delivered-content-security-policy><a href=https://w3c.github.io/webappsec-csp/#contains-a-header-delivered-content-security-policy>contains a header-delivered Content Security Policy</a></dfn> property.</ul>
   <dt>Service Workers<dd>
    <p>The following terms are defined in <cite>Service Workers</cite>: <a href=references.html#refsSW>[SW]</a></p>

    <ul class=brief><li><dfn id=dfn-active-worker><a href=https://w3c.github.io/ServiceWorker/#dfn-active-worker>active worker</a></dfn><li><dfn id=dfn-client-message-queue><a href=https://w3c.github.io/ServiceWorker/#dfn-client-message-queue>client message queue</a></dfn><li><dfn id=dfn-control><a href=https://w3c.github.io/ServiceWorker/#dfn-control>control</a></dfn><li><dfn id=on-fetch-request-algorithm><a href=https://w3c.github.io/ServiceWorker/#on-fetch-request-algorithm>handle fetch</a></dfn><li><dfn id=scope-match-algorithm><a href=https://w3c.github.io/ServiceWorker/#scope-match-algorithm>match service worker registration</a></dfn><li><dfn id=dfn-service-worker><a href=https://w3c.github.io/ServiceWorker/#dfn-service-worker>service worker</a></dfn><li><dfn id=serviceworkercontainer-service-worker-client><a href=https://w3c.github.io/ServiceWorker/#serviceworkercontainer-service-worker-client>service worker client</a></dfn><li><dfn id=serviceworker><a href=https://w3c.github.io/ServiceWorker/#serviceworker><code>ServiceWorker</code></a></dfn> interface<li><dfn id=serviceworkercontainer><a href=https://w3c.github.io/ServiceWorker/#serviceworkercontainer><code>ServiceWorkerContainer</code></a></dfn> interface<li><dfn id=serviceworkerglobalscope><a href=https://w3c.github.io/ServiceWorker/#serviceworkerglobalscope><code>ServiceWorkerGlobalScope</code></a></dfn> interface</ul>
   <dt>Secure Contexts<dd>
    <p>The following algorithms are defined in <cite>Secure Contexts</cite>: <a href=references.html#refsSECURE-CONTEXTS>[SECURE-CONTEXTS]</a></p>

    <ul class=brief><li><dfn id=is-url-potentially-trustworthy><a href=https://w3c.github.io/webappsec-secure-contexts/#potentially-trustworthy-url>Is url potentially trustworthy?</a></dfn></ul>
   <dt>Permissions Policy<dd>
    <p>The following terms are defined in <cite>Permissions Policy</cite>: <a href=references.html#refsPERMISSIONSPOLICY>[PERMISSIONSPOLICY]</a></p>

    <ul class=brief><li><dfn id=concept-permissions-policy><a href=https://w3c.github.io/webappsec-feature-policy/#permissions-policy>permissions policy</a></dfn><li><dfn id=concept-policy-controlled-feature><a href=https://w3c.github.io/webappsec-feature-policy/#policy-controlled-feature>policy-controlled feature</a></dfn><li><dfn id=concept-container-policy><a href=https://w3c.github.io/webappsec-feature-policy/#container-policy>container policy</a></dfn><li><dfn id=concept-serialized-permissions-policy><a href=https://w3c.github.io/webappsec-feature-policy/#serialized-permissions-policy>serialized permissions policy</a></dfn><li><dfn id=concept-default-allowlist><a href=https://w3c.github.io/webappsec-feature-policy/#default-allowlist>default allowlist</a></dfn><li>The <dfn id=creating-a-permissions-policy><a href=https://w3c.github.io/webappsec-feature-policy/#create-for-browsingcontext>creating a permissions policy</a></dfn> algorithm<li>The <dfn id=creating-a-permissions-policy-from-a-response><a href=https://w3c.github.io/webappsec-feature-policy/#create-from-response>creating a permissions policy from a response</a></dfn> algorithm<li>The <dfn id=is-feature-enabled><a href=https://w3c.github.io/webappsec-feature-policy/#is-feature-enabled>is feature enabled by policy for origin</a></dfn> algorithm<li>The <dfn id=process-permissions-policy-attributes><a href=https://w3c.github.io/webappsec-feature-policy/#process-permissions-policy-attributes>process permissions policy attributes</a></dfn> algorithm</ul>
   <dt>Payment Request API<dd>
    <p>The following feature is defined in <cite>Payment Request API</cite>:
    <a href=references.html#refsPAYMENTREQUEST>[PAYMENTREQUEST]</a></p>

    <ul class=brief><li><dfn id=paymentrequest><a href=https://w3c.github.io/payment-request/#dom-paymentrequest><code>PaymentRequest</code></a></dfn> interface</ul>
   <dt>MathML<dd>
    <p>While support for MathML as a whole is not required by this specification (though it is
    encouraged, at least for web browsers), certain features depend upon small parts of MathML being
    implemented. <a href=references.html#refsMATHML>[MATHML]</a></p>

    <p>The following features are defined in <cite>Mathematical Markup Language</cite>
    (<cite>MathML</cite>):</p>

    <ul class=brief><li><dfn id=mathml-annotation-xml><a href=https://www.w3.org/Math/draft-spec/chapter5.html#mixing.elements.annotation.xml>MathML <code>annotation-xml</code></a></dfn> element<li><dfn id=mathml-math><a href=https://www.w3.org/Math/draft-spec/chapter2.html#interf.toplevel>MathML <code>math</code></a></dfn> element<li><dfn id=mathml-merror><a href=https://www.w3.org/Math/draft-spec/chapter3.html#presm.merror>MathML <code>merror</code></a></dfn> element<li><dfn id=mathml-mi><a href=https://www.w3.org/Math/draft-spec/chapter3.html#presm.mi>MathML <code>mi</code></a></dfn> element<li><dfn id=mathml-mn><a href=https://www.w3.org/Math/draft-spec/chapter3.html#presm.mn>MathML <code>mn</code></a></dfn> element<li><dfn id=mathml-mo><a href=https://www.w3.org/Math/draft-spec/chapter3.html#presm.mo>MathML <code>mo</code></a></dfn> element<li><dfn id=mathml-ms><a href=https://www.w3.org/Math/draft-spec/chapter3.html#presm.ms>MathML <code>ms</code></a></dfn> element<li><dfn id=mathml-mtext><a href=https://www.w3.org/Math/draft-spec/chapter3.html#presm.mtext>MathML <code>mtext</code></a></dfn> element</ul>
   <dt>SVG<dd>
    <p>While support for SVG as a whole is not required by this specification (though it is
    encouraged, at least for web browsers), certain features depend upon parts of SVG being
    implemented.</p>

    <p>User agents that implement SVG must implement the <cite>SVG 2</cite> specification, and not
    any earlier revisions.</p>

    <p>The following features are defined in the <cite>SVG 2</cite> specification: <a href=references.html#refsSVG>[SVG]</a></p>

    <ul class=brief><li><dfn id=svgelement><a href=https://svgwg.org/svg2-draft/types.html#InterfaceSVGElement><code>SVGElement</code></a></dfn> interface<li><dfn id=svgimageelement><a href=https://svgwg.org/svg2-draft/embedded.html#InterfaceSVGImageElement><code>SVGImageElement</code></a></dfn> interface<li><dfn id=svgscriptelement><a href=https://svgwg.org/svg2-draft/interact.html#InterfaceSVGScriptElement><code>SVGScriptElement</code></a></dfn> interface<li><dfn id=svgsvgelement><a href=https://svgwg.org/svg2-draft/struct.html#InterfaceSVGSVGElement><code>SVGSVGElement</code></a></dfn> interface<li><dfn id=svg-a><a href=https://svgwg.org/svg2-draft/linking.html#AElement>SVG <code>a</code></a></dfn> element<li><dfn id=svg-desc><a href=https://svgwg.org/svg2-draft/struct.html#DescElement>SVG <code>desc</code></a></dfn> element<li><dfn id=svg-foreignobject><a href=https://svgwg.org/svg2-draft/embedded.html#ForeignObjectElement>SVG <code>foreignObject</code></a></dfn> element<li><dfn id=svg-image><a href=https://svgwg.org/svg2-draft/embedded.html#ImageElement>SVG <code>image</code></a></dfn> element<li><dfn id=svg-script><a href=https://svgwg.org/svg2-draft/interact.html#ScriptElement>SVG <code>script</code></a></dfn> element<li><dfn id=svg-svg><a href=https://svgwg.org/svg2-draft/struct.html#SVGElement>SVG <code>svg</code></a></dfn> element<li><dfn id=svg-title><a href=https://svgwg.org/svg2-draft/struct.html#TitleElement>SVG <code>title</code></a></dfn> element<li><dfn id=svg-use><a href=https://svgwg.org/svg2-draft/struct.html#UseElement>SVG <code>use</code></a></dfn> element</ul>
   <dt>Filter Effects<dd>
    <p>The following feature is defined in <cite>Filter Effects</cite>:
    <a href=references.html#refsFILTERS>[FILTERS]</a></p>

    <ul class=brief><li><dfn id=filter-function-list><a href=https://drafts.fxtf.org/filter-effects/#typedef-filter-function-list>&lt;filter-function-list></a></dfn></ul>
   <dt>Cooperative Scheduling of Background Tasks<dd>
    <p>The following features are defined in <cite>Cooperative Scheduling of Background Tasks</cite>:
    <a href=references.html#refsREQUESTIDLECALLBACK>[REQUESTIDLECALLBACK]</a></p>

    <ul class=brief><li><dfn id=requestidlecallback()><a href=https://w3c.github.io/requestidlecallback/#the-requestidlecallback-method><code>requestIdleCallback()</code></a></dfn><li><dfn id=start-an-idle-period-algorithm><a href=https://w3c.github.io/requestidlecallback/#start-an-idle-period-algorithm>start an idle period algorithm</a></dfn></ul>
   <dt>Storage<dd>
    <p>The following terms are defined in <cite>Storage</cite>: <a href=references.html#refsSTORAGE>[STORAGE]</a></p>

    <ul class=brief><li><dfn id=obtain-a-local-storage-bottle-map><a href=https://storage.spec.whatwg.org/#obtain-a-local-storage-bottle-map>obtain a local storage bottle map</a></dfn><li><dfn id=obtain-a-session-storage-bottle-map><a href=https://storage.spec.whatwg.org/#obtain-a-session-storage-bottle-map>obtain a session storage bottle map</a></dfn><li><dfn id=storage-proxy-map><a href=https://storage.spec.whatwg.org/#storage-proxy-map>storage proxy map</a></dfn><li><dfn id=legacy-clone-a-browsing-session-storage-shed><a href=https://storage.spec.whatwg.org/#legacy-clone-a-browsing-session-storage-shed>legacy-clone a browsing session storage shed</a></dfn></ul>
   <dt>Web App Manifest<dd>
    <p>The following features are defined in <cite>Web App Manifest</cite>: <a href=references.html#refsMANIFEST>[MANIFEST]</a></p>

    <ul class=brief><li><dfn id=application-manifest><a href=https://w3c.github.io/manifest/#dfn-manifest>application manifest</a></dfn><li><dfn id=installed-web-application><a href=https://w3c.github.io/manifest/#dfn-installed-web-application>installed web application</a></dfn><li><dfn id=process-the-manifest><a href=https://w3c.github.io/manifest/#dfn-processing-a-manifest>process the manifest</a></dfn></ul>
   </dl>

  <hr>

  <p>This specification does not <em>require</em> support of any particular network protocol, style
  sheet language, scripting language, or any of the DOM specifications beyond those required in the
  list above. However, the language described by this specification is biased towards CSS as the
  styling language, JavaScript as the scripting language, and HTTP as the network protocol, and
  several features assume that those languages and protocols are in use.</p>

  <p>A user agent that implements the HTTP protocol must implement <cite>HTTP State Management
  Mechanism</cite> (Cookies) as well. <a href=references.html#refsHTTP>[HTTP]</a> <a href=references.html#refsCOOKIES>[COOKIES]</a></p>

  <p class=note>This specification might have certain additional requirements on character
  encodings, image formats, audio formats, and video formats in the respective sections.</p>

  </div>





  <h4 id=可扩展性-2><span class=secno>2.1.10</span> 可扩展性<a href=#可扩展性-2 class=self-link></a></h4>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/terminology/extensibility.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/terminology/extensibility.en.html></div>

  <p>强烈不鼓励本规范的厂商专有的用户代理扩展。 文档不能使用这样的扩展，因为这样做减少了互操作性并且分割了用户群，只允许特定用户代理的用户访问相关内容。</p>

  

  <p>所有扩展的定义必须使得，扩展的使用既不会违反本标准，也不会导致本标准定义的功能的不一致。</p> 

  <div class=example>

   <p>例如（强烈不鼓励这样做）实现上可以为控件添加一个新的 IDL 属性
   "<code>typeTime</code>"  返回（比如）用户选择控件的当前值所花费的时间。
   另一方面，在表单的 <code id=可扩展性-2:dom-form-elements><a href=forms.html#dom-form-elements>elements</a></code> 数组中定义一个新的控件也会违反上述要求，
   因为它将违反本标准给出的 <code id=可扩展性-2:dom-form-elements-2><a href=forms.html#dom-form-elements>elements</a></code> 定义。</p>

  </div>

  

  <hr>

  <p>当本标准需要厂商中立的扩展时，或者相应地更新本标准，或者编写一个扩展标准并重写本标准中的要求。
  如果有人在他的活动中使用了本标准，并决定识别该扩展标准的要求，这一标准就变成了本标准中符合性要求的
  <dfn id=other-applicable-specifications>适用规范</dfn>。</p>

  <p class=note>有人可能会编写一个规范来定义任意的字节流为合规的，然后声明他的随机产生的垃圾为符合规范的。
  但是这并不意味着他的随机垃圾符合所有人的目的：如果有人认为该标准不适用于他的工作，
  他就可以很合理地说上述随机垃圾就是垃圾，根本不符合规范。
  就符合性而言，（某一特定）社区内 <em>同意</em> 适用才是最重要的。</p>

  

  <hr>

  <p>用户代理必须将它们不理解的原始和属性当作语义中立的来处理；
  （DOM 处理器）把它们留在 DOM 中，（CSS 处理器）根据 CSS 设置它们的样式，
  但不要推测它们的语义。</p>


  <p>当功能的支持被禁用时（例如作为减轻安全问题的紧急措施或协助开发或出于性能原因），
  用户代理的表现必须像不支持该功能一样，像本标准没提到该功能一样。
  例如，如果某个特性是通过 Web IDL 接口的属性来访问的，实现该接口的对象将会忽略掉这个属性
  — 把属性留在对象上，让它返回 null 或抛出异常是不够的。</p>


  


  


  <h4 id=interactions-with-xpath-and-xslt><span class=secno>2.1.11</span> 与 XPath 和 XSLT 交互<a href=#interactions-with-xpath-and-xslt class=self-link></a></h4>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/terminology/interactions-with-xpath-and-xslt.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/terminology/interactions-with-xpath-and-xslt.en.html></div>

  <p id=xpath-1.0-processors>
  操作以本标准的方式解析或创建的 <a href=https://dom.spec.whatwg.org/#html-document id=interactions-with-xpath-and-xslt:html-documents data-x-internal=html-documents>HTML 文档</a>
  （例如作为 <code>document.evaluate()</code> API 的一部分）
  的 XPath 1.0 的实现必须在 XPath 1.0 标准的基础上遵循以下改动。</p>

  <p>首先，移除这一段话：</p>

  <blockquote cite=https://www.w3.org/TR/1999/REC-xpath-19991116/#node-tests>

   <p>节点测试中的 <a href=https://www.w3.org/TR/REC-xml-names/#NT-QName>QName</a>
   使用表达式上下文的命名空间声明展开为
   <a href=https://www.w3.org/TR/1999/REC-xpath-19991116/#dt-expanded-name>expanded-name</a>，
   展开的方式与开始和结束标签的元素类型名称一样，但是不使用以
   <code>xmlns</code> 声明的默认命名空间：如果
   <a href=https://www.w3.org/TR/REC-xml-names/#NT-QName>QName</a> 没有前缀，那么命名空间 URI 就是 null
   （这与属性名的展开方式相同）。
   如果 <a href=https://www.w3.org/TR/REC-xml-names/#NT-QName>QName</a> 的命名空间前缀
   在表达式上下文中没有声明将会引发错误。</p>

  </blockquote>

  <p>然后，在同样的位置插入下面一段：</p>

  <blockquote cite="https://www.w3.org/Bugs/Public/show_bug.cgi?id=7059#c37">

   <p>节点测试中的 QName 使用表达式上下文的命名空间声明展开为 expanded-name。
   如果 QName 有前缀，则该前缀必须在表达式上下文中有一个 URI 与之关联的命名空间声明，
   且相应的。
   如果 <a href=https://www.w3.org/TR/REC-xml-names/#NT-QName>QName</a> 的命名空间前缀
   在表达式上下文中没有声明将会引发错误。</p>

   <p>如果 QName 没有前缀且轴的主节点类型为元素，那么使用默认的元素命名空间。
   否则，如果 QName 没有前缀，命名空间 URI 就是 null。
   默认的元素命名空间是 XPath 表达式的上下文中的成员。
   按照 DOM3 XPath API 执行 XPath 表达式时，默认的元素命名空间的值由以下方式决定：</p>

   <ol><li>如果上下文节点来自 HTML DOM，默认元素命名空间是 "http://www.w3.org/1999/xhtml"。<li>否则，默认元素命名空间 URI is null。</ol>

   <p class=note>这相当于将 XPath 2.0 的默认元素命名空间特性添加到 XPath 1.0，
   并将 HTML 命名空间用作 HTML 文档的默认元素命名空间。这样做是希望实现兼容于遗留的 HTML 内容的同时，
   支持本标准在 HTML 元素命名空间方面引入的变更，以及希望使用 XPath 1.0 而不是 XPath 2.0。</p>

  </blockquote>

  <p class=note>这一变更的 <a href=introduction.html#willful-violation id=interactions-with-xpath-and-xslt:willful-violation>有意的违反</a> XPath 1.0 标准，
  这样做是希望实现兼容于遗留内容的同时支持本标准在 HTML 元素命名空间方面引入的变更。
  <a href=references.html#refsXPATH10>[XPATH10]</a></p> 

  <hr>

  <p id=dom-based-xslt-1.0-processors>当输出方法为 "html" 时（显式地设置或采用了 XSLT 1.0 的默认规则），
  XSLT 1.0 处理器的 DOM 输出受一下规则的影响：</p>

  <p>如果转换程序输出没有命名空间的元素，
  处理器必须在构造相应的 DOM 元素节点之前将元素的命名空间更改为
  <a href=https://infra.spec.whatwg.org/#html-namespace id=interactions-with-xpath-and-xslt:html-namespace-2 data-x-internal=html-namespace-2>HTML 命名空间</a>，
  将局部名称
  <a href=https://infra.spec.whatwg.org/#ascii-lowercase id=interactions-with-xpath-and-xslt:converted-to-ascii-lowercase data-x-internal=converted-to-ascii-lowercase>改为 ASCII 小写</a>，
  并且把元素上无命名空间的属性名
  <a href=https://infra.spec.whatwg.org/#ascii-lowercase id=interactions-with-xpath-and-xslt:converted-to-ascii-lowercase-2 data-x-internal=converted-to-ascii-lowercase>改为 ASCII 小写</a>。</p>

  <p class=note>本要求是 XSLT 1.0 标准的 <a href=introduction.html#willful-violation id=interactions-with-xpath-and-xslt:willful-violation-2>故意违反</a>，
  本标准为了兼容基于 DOM 的 XSLT 转换，而改变了 HTML 的命名空间和大小写敏感性规则。
  （不影响序列化该输出的处理器） <a href=references.html#refsXSLT10>[XSLT10]</a></p> 

  <hr>

  <p>本标准不指定 XSLT 处理具体如何与 <a href=parsing.html#html-parser id=interactions-with-xpath-and-xslt:html-parser>HTML 解析器</a> 基础设施交互
  （例如，XSLT 处理器是否将所有元素放到 <a href=parsing.html#stack-of-open-elements id=interactions-with-xpath-and-xslt:stack-of-open-elements>打开元素栈</a> 中）。
  但是当成功地完成后，XSLT 处理器必须 <a href=parsing.html#stop-parsing id=interactions-with-xpath-and-xslt:stop-parsing>停止解析</a>，
  也必须首先将 <a href=dom.html#current-document-readiness id=interactions-with-xpath-and-xslt:current-document-readiness>当前文档就绪状态</a> 设置为
  "<code>interactive</code>"，在退出后再设置为 "<code>complete</code>"。</p>

  <hr>

  <p>本标准不指定 XSLT 如何与 <a href=browsing-the-web.html#navigate id=interactions-with-xpath-and-xslt:navigate>导航</a> 算法进行交互，
  如何与 <a href=webappapis.html#event-loop id=interactions-with-xpath-and-xslt:event-loop>事件循环</a> 相匹配，
  也不指定错误页面如何处理（例如 XSLT 错误是替代 XSLT 增量输出，还是内联呈现等等）。</p>

  <p class=note>
  <a href=scripting.html#scriptTagXSLT>在 <code>script</code> 元素部分</a>，有一些关于 XSLT 与 HTML 之间交互的非规范性注释，
  <a href=scripting.html#template-XSLT-XPath>在 <code>template</code> 元素部分</a> 有一些关于 XSLT，XPath，和 HTML 之间交互的非规范性注释。</p>

  





  <h3 id=case-sensitivity-and-string-comparison><span class=secno>2.2</span> String comparison<a href=#case-sensitivity-and-string-comparison class=self-link></a></h3>
<div data-zh-date="" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file="https://github.com/whatwg-cn/html/new/master/src/common-infrastructure/string-comparison.zh.html?filename=string-comparison.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fcommon-infrastructure%2Fstring-comparison.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/string-comparison.en.html></div>

  <p>A string <var>pattern</var> is a <dfn id=prefix-match>prefix match</dfn> for a string <var>s</var> when
  <var>pattern</var> is not longer than <var>s</var> and truncating <var>s</var> to
  <var>pattern</var>'s length leaves the two strings as matches of each other.</p>



  <h3 id=policy-controlled-features><span class=secno>2.3</span> Policy-controlled features<a href=#policy-controlled-features class=self-link></a></h3>
<div data-zh-date="" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file="https://github.com/whatwg-cn/html/new/master/src/common-infrastructure/policy-controlled-features.zh.html?filename=policy-controlled-features.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fcommon-infrastructure%2Fpolicy-controlled-features.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/policy-controlled-features.en.html></div>

  <p>This document defines the following <a href=https://w3c.github.io/webappsec-feature-policy/#policy-controlled-feature id=policy-controlled-features:concept-policy-controlled-feature data-x-internal=concept-policy-controlled-feature>policy-controlled features</a>:</p>

  <div class="mdn-anno wrapped before"><button onclick=toggleStatus(this) class=mdn-anno-btn><span>MDN</span></button><div class=feature><p><a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Feature-Policy/autoplay title="The HTTP Feature-Policy header autoplay directive controls whether the current document is allowed to autoplay media requested through the HTMLMediaElement interface.">Headers/Feature-Policy/autoplay</a><div class=support><span class="firefox yes"><span>Firefox</span><span title="Requires setting a user preference or runtime flag.">🔰 65+</span></span><span class="safari no"><span>Safari</span><span>No</span></span><span class="chrome yes"><span>Chrome</span><span>64+</span></span><hr><span class="opera yes"><span>Opera</span><span>51+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge no"><span>Edge (Legacy)</span><span>No</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span title="Requires setting a user preference or runtime flag.">🔰 65+</span></span><span class="safari_ios no"><span>Safari iOS</span><span>No</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>64+</span></span><span class="webview_android yes"><span>WebView Android</span><span>64+</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>9.0+</span></span><span class="opera_android yes"><span>Opera Android</span><span>47+</span></span></div></div><div class=feature><p><a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Feature-Policy/document-domain title="The HTTP Feature-Policy header document-domain directive controls whether the current document is allowed to set document.domain. When this policy is disabled, attempting to set document.domain will fail and cause a SecurityError DOMException to be thrown.">Headers/Feature-Policy/document-domain</a><div class=support><span class="firefox yes"><span>Firefox</span><span title="Requires setting a user preference or runtime flag.">🔰 65+</span></span><span class="safari no"><span>Safari</span><span>No</span></span><span class="chrome yes"><span>Chrome</span><span>77+</span></span><hr><span class="opera yes"><span>Opera</span><span>64+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge no"><span>Edge (Legacy)</span><span>No</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span title="Requires setting a user preference or runtime flag.">🔰 65+</span></span><span class="safari_ios no"><span>Safari iOS</span><span>No</span></span><span class="chrome_android no"><span>Chrome Android</span><span>No</span></span><span class="webview_android no"><span>WebView Android</span><span>No</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>No</span></span><span class="opera_android no"><span>Opera Android</span><span>No</span></span></div></div></div><ul><li>"<dfn id=autoplay-feature><code>autoplay</code></dfn>", which has a <a href=https://w3c.github.io/webappsec-feature-policy/#default-allowlist id=policy-controlled-features:concept-default-allowlist data-x-internal=concept-default-allowlist>default allowlist</a> of <code>'self'</code>.<li>"<dfn id=cross-origin-isolated-feature><code>cross-origin-isolated</code></dfn>", which has a <a href=https://w3c.github.io/webappsec-feature-policy/#default-allowlist id=policy-controlled-features:concept-default-allowlist-2 data-x-internal=concept-default-allowlist>default allowlist</a> of <code>'self'</code>.<li>"<dfn id=document-domain-feature><code>document-domain</code></dfn>", which
    has a <a href=https://w3c.github.io/webappsec-feature-policy/#default-allowlist id=policy-controlled-features:concept-default-allowlist-3 data-x-internal=concept-default-allowlist>default allowlist</a> of <code>*</code>.</ul>



  <h3 id=公共微语法><span class=secno>2.4</span> 公共微语法<a href=#公共微语法 class=self-link></a></h3>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/common-microsyntaxes/index.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/common-microsyntaxes/index.en.html></div>

  <p>HTML 中有很多地方接受特定的数据类型，比如日期和数字。
  这一部分描述了那些类型的内容应符合的标准，以及如何解析它们。</p>

  

  <p class=note>强烈要求实现者仔细地检查考虑用来实现如下语法解析的第三方库。
  例如，日期库实现的错误处理行为可能与本标准所要求的不同。
  因为在描述类似本标准使用的日期语法的其他标准中，通常没有给出错误处理行为，
  所以实现的错误处理可能很不一样。</p>

  


  


  <h4 id=常见的解析器风格><span class=secno>2.4.1</span> 常见的解析器风格<a href=#常见的解析器风格 class=self-link></a></h4>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/common-microsyntaxes/common-parser-idioms.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/common-microsyntaxes/common-parser-idioms.en.html></div>

  

  <p><dfn id=white_space>空格字符</dfn> 是
  在 Unicode <code>PropList.txt</code> 数据文件中
  Unicode 属性为 "White_Space" 的字符。<a href=references.html#refsUNICODE>[UNICODE]</a></p>

  <p class=note>不要与 <code>Unicode.txt</code> 数据文件中
  "Bidi_Class" 属性的 "White_Space" 值（缩写为 "WS"）相混淆。</p>

  

  <p>有些下面描述的微解析器遵循这样的模式：维护一个 <var>input</var>
  变量保存待解析字符串，以及一个 <var>position</var> 变量指向 <var>input</var> 中下一个要解析的字符。</p>

  




  <h4 id=布尔属性><span class=secno>2.4.2</span> 布尔属性<a href=#布尔属性 class=self-link></a></h4>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/common-microsyntaxes/boolean-attributes.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/common-microsyntaxes/boolean-attributes.en.html></div>

  <p>有些属性是 <dfn id=boolean-attribute>布尔属性</dfn>。
  布尔属性出现在元素上表示值为 true，不出现表示表示值为 false。</p>

  <p>如果该属性出现，它的值必须为空字符串或者匹配属性的标准名称的
  <a href=https://infra.spec.whatwg.org/#ascii-case-insensitive id=布尔属性:ascii-case-insensitive data-x-internal=ascii-case-insensitive>ASCII 大小写不敏感</a> 字符串，
  并且前后没有空格。</p>

  <p class=note>布尔属性上不允许 "true" 和 "false" 值。
  为了表示 false 值，应该一并忽略该属性。</p>

  <div class=example>

   <p>这里有一个例子，表示复选框被选中和禁用。
   <code id=布尔属性:attr-input-checked><a href=input.html#attr-input-checked>checked</a></code> 和
   <code id=布尔属性:attr-fe-disabled><a href=form-control-infrastructure.html#attr-fe-disabled>disabled</a></code> 属性就是布尔属性。</p>

   <pre>&lt;label>&lt;input type=checkbox checked name=cheese disabled> Cheese&lt;/label></pre>

   <p>这可以等价地写成：

   <pre>&lt;label>&lt;input type=checkbox checked=checked name=cheese disabled=disabled> Cheese&lt;/label></pre>

   <p>你也可以混合两种风格；下面的写法仍然是等价的：</p>

   <pre>&lt;label>&lt;input type='checkbox' checked name=cheese disabled=""> Cheese&lt;/label></pre>

  </div>




  <h4 id=关键字和枚举属性><span class=secno>2.4.3</span> 关键字和枚举属性<a href=#关键字和枚举属性 class=self-link></a></h4>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Sun Mar 11 2018 04:56:33 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/common-microsyntaxes/keywords-and-enumerated-attributes.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/common-microsyntaxes/keywords-and-enumerated-attributes.en.html></div>

  <p>有些属性定义为取值只能是有限的关键字集合中的一个。
  这样的属性称为 <dfn id=enumerated-attribute>枚举属性</dfn>。
  这些关键字都定义为映射到特定的状态 <em>state</em> （可能多个关键字映射到同一个状态，
  此时这些关键字互为同义词；此外有些关键字其实是不合规范的，它们在还在这里完全是历史原因）。
  除此之外可以给出两个默认状态：第一个是 <dfn id=invalid-value-default><i>非法值的默认状态</i></dfn>，
  第二个是 <dfn id=missing-value-default><i>缺失值的默认状态</i></dfn>。</p>

  <p>如果指定了枚举属性，属性值必须是一个匹配其中一个关键字（不包括不合规范）的
  <a href=https://infra.spec.whatwg.org/#ascii-case-insensitive id=关键字和枚举属性:ascii-case-insensitive data-x-internal=ascii-case-insensitive>ASCII 大小写不敏感</a> 字符串，并且前后没有空格。</p>

  <p>指定属性时，如果它的值是匹配其中一个关键字的 <a href=https://infra.spec.whatwg.org/#ascii-case-insensitive id=关键字和枚举属性:ascii-case-insensitive-2 data-x-internal=ascii-case-insensitive>ASCII 大小写不敏感</a> 字符串
  那么该属性表示的状态就是该关键字的状态。如果属性值不匹配任何给定的关键字，但该属性有一个
  <i id=关键字和枚举属性:invalid-value-default><a href=#invalid-value-default>非法值的默认状态</a></i>，那么该属性表示那个状态。
  否则如果该属性的值不匹配任何关键字但定义有一个 <i id=关键字和枚举属性:missing-value-default><a href=#missing-value-default>缺失值的默认状态</a></i>，
  那么该属性表示的状态就是 <em>那个状态</em>。否则，没有默认状态的情况，
  非法值不表示任何状态。</p>

  <p>当 <em>没有</em> 指定属性时，如果定义有 <i id=关键字和枚举属性:missing-value-default-2><a href=#missing-value-default>缺失值的默认状态</a></i>，
  那么这个（缺失）属性表示的状态就是这个状态。否则，
  缺失的属性不表示任何状态。</p>

  <p class=note>空字符串可以是一个合法的关键字。</p>



  <h4 id=数字><span class=secno>2.4.4</span> 数字<a href=#数字 class=self-link></a></h4>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/common-microsyntaxes/numbers/index.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/common-microsyntaxes/numbers/index.en.html></div>


  <h5 id=有符号整数><span class=secno>2.4.4.1</span> 有符号整数<a href=#有符号整数 class=self-link></a></h5>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/common-microsyntaxes/numbers/signed-integers.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/common-microsyntaxes/numbers/signed-integers.en.html></div>

  <p>由一个或更多 <a href=https://infra.spec.whatwg.org/#ascii-digit id=有符号整数:ascii-digits data-x-internal=ascii-digits>ASCII 数字</a> 组成的字符串就是 <dfn id=valid-integer>合法的整数</dfn>。
  可以有一个 U+002D HYPHEN-MINUS 字符 （-） 作为前缀。</p>

  <p>没有 U+002D HYPHEN-MINUS 字符 （-） 作为前缀的 <a href=#valid-integer id=有符号整数:valid-integer>合法整数</a> 表示
  该数字字符串以 10 为基所表示的数字。
  <em>有着</em> U+002D HYPHEN-MINUS 字符 （-） 作为前缀的 <a href=#valid-integer id=有符号整数:valid-integer-2>合法的整数</a>
  表示零减去该字符串以 10 为基所表示的数字。</p>

  

  <p><dfn id=rules-for-parsing-integers>解析整数的规则</dfn> 由下列算法给出。
  被调用时，必须以给定的步骤执行，在第一个有返回值的步骤中止。该算法会返回一个整数或者一个错误。</p>

  <ol><li><p>令 <var>input</var> 为被解析的字符串。<li><p>令 <var>position</var> 为 <var>input</var> 里面的指针，初始指向字符串的开始。<li><p>令 <var>sign</var> 拥有值 "positive"。<li><p><a href=https://infra.spec.whatwg.org/#skip-ascii-whitespace id=有符号整数:skip-ascii-whitespace data-x-internal=skip-ascii-whitespace>跳过</a> <var>input</var> 中的 ASCII 空格，得到 <var>position</var>。<li><p>如果 <var>position</var> 越过了 <var>input</var> 的末尾，返回一个错误。<li>

    <p>如果 <var>position</var> 处的（第一个）字符是一个 U+002D HYPHEN-MINUS 字符 （-）:</p>

    <ol><li>令 <var>sign</var> 为 "negative"。<li>将 <var>position</var> 前进到下一个字符。<li>如果 <var>position</var> 越过了 <var>input</var> 的末尾，返回一个错误。</ol>

    <p>否则，如果 <var>position</var> 处的（第一个）字符是一个 U+002B PLUS SIGN 字符 （+）:</p>

    <ol><li>将 <var>position</var> 前进到下一个字符。 （虽然 "<code>+</code>" 会被忽略但并不符合规范。）<li>如果 <var>position</var> 越过了 <var>input</var> 的末尾，返回一个错误。</ol>

   <li><p>如果 <var>position</var> 处的字符不是 <a href=https://infra.spec.whatwg.org/#ascii-digit id=有符号整数:ascii-digits-2 data-x-internal=ascii-digits>ASCII 数字</a>，则返回一个错误。<li><p>从 <var>input</var> 的给定 <var>position</var>
     <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=有符号整数:collect-a-sequence-of-code-points data-x-internal=collect-a-sequence-of-code-points>收集</a>
     是 <a href=https://infra.spec.whatwg.org/#ascii-digit id=有符号整数:ascii-digits-3 data-x-internal=ascii-digits>ASCII 数字</a> 的代码点序列，将得到的序列解释为以10为基的整数。
     令 <var>value</var> 为该整数。<li><p>如果 <var>sign</var> 为 "positive"，返回 <var>value</var>，否则返回0减去 <var>value</var> 的结果。</ol>

  



  <h5 id=非负整数><span class=secno>2.4.4.2</span> 非负整数<a href=#非负整数 class=self-link></a></h5>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/common-microsyntaxes/numbers/non-negative-integers.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/common-microsyntaxes/numbers/non-negative-integers.en.html></div>

  <p>由一个或更多 <a href=https://infra.spec.whatwg.org/#ascii-digit id=非负整数:ascii-digits data-x-internal=ascii-digits>ASCII 数字</a> 组成的字符串就是
  <dfn id=valid-non-negative-integer>合法的非负整数</dfn>
  。</p>

  <p>
  <a href=#valid-non-negative-integer id=非负整数:valid-non-negative-integer>合法的非负整数</a>
  表示该数字字符串以10为基所表示的数字。</p>

  

  <p><dfn id=rules-for-parsing-non-negative-integers>解析非负整数的规则</dfn>
  由以下算法给出，被调用时该算法必须按顺序执行以下步骤，在第一个有返回值的步骤中止。
  该算法将返回 0，正整数或者错误。</p>

  <ol><li><p>令 <var>input</var> 为被解析的字符串。<li><p>令 <var>value</var> 为使用
   <a href=#rules-for-parsing-integers id=非负整数:rules-for-parsing-integers>解析整数的规则</a>
   解析 <var>input</var> 的结果。<li><p>如果 <var>value</var> 是一个错误, 返回一个错误。<li><p>如果 <var>value</var> 小于零, 返回一个错误。<li><p>返回 <var>value</var>。</ol>

  

  



  <h5 id=浮点数><span class=secno>2.4.4.3</span> 浮点数<a href=#浮点数 class=self-link></a></h5>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/common-microsyntaxes/numbers/floating-point-numbers.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/common-microsyntaxes/numbers/floating-point-numbers.en.html></div>

  <p><dfn id=valid-floating-point-number>合法的浮点数</dfn> 这样构成：</p>

  <ol class=brief><li>一个可选的 U+002D HYPHEN-MINUS 字符（-）。<li>下面的其中一个或者依次的两个：

    <ol><li>一个或更多 <a href=https://infra.spec.whatwg.org/#ascii-digit id=浮点数:ascii-digits data-x-internal=ascii-digits>ASCII 数字</a> 组成的序列。<li>依次出现：

      <ol><li>单个 U+002E FULL STOP 字符（.）。<li>一个或更多 <a href=https://infra.spec.whatwg.org/#ascii-digit id=浮点数:ascii-digits-2 data-x-internal=ascii-digits>ASCII 数字</a> 组成的序列。</ol>

     </ol>

   <li>可选地：

    <ol><li>一个 U+0065 LATIN SMALL LETTER E 字符（e）或 U+0045 LATIN CAPITAL LETTER E
     字符（E）。<li>可选地，一个 U+002D HYPHEN-MINUS 字符（-） 或 U+002B PLUS SIGN 字符 （+）。<li>一个或更多 <a href=https://infra.spec.whatwg.org/#ascii-digit id=浮点数:ascii-digits-3 data-x-internal=ascii-digits>ASCII 数字</a> 组成的序列。</ol>

   </ol>

  <p><a href=#valid-floating-point-number id=浮点数:valid-floating-point-number>合法的浮点数</a> 表示将有效数乘以10的指数。
  其中有效数是第一个数字，按十进制解析（包括小数点和小数点后的数字，如果后面有的话）
  如果整个字符串以 U+002D HYPHEN-MINUS character （-）字符开始且该数字不为零的话，
  将有效数解析为负数。
  其中指数是 E 后面的数字（如果有的话），如果在 E 和该数字之间有一个 U+002D HYPHEN-MINUS 字符（-）
  且该数字不为零的话，解析为负数，如果在 E 和该数字之间有一个 U+002B PLUS SIGN 字符（+）的话忽略该字符。
  如果没有 E，指数当做零来处理。</p>

  <p class=note>Infinity 和 Not-a-Number （NaN）值不是
  <a href=#valid-floating-point-number id=浮点数:valid-floating-point-number-2>合法的浮点数</a>
  。</p>

  

  <p class=note>典型地，
  <a href=#valid-floating-point-number id=浮点数:valid-floating-point-number-3>合法的浮点数</a>
  的概念只用于限制作者，对用户代理的要求采用下面的
  <a href=#rules-for-parsing-floating-point-number-values id=浮点数:rules-for-parsing-floating-point-number-values>解析浮点数值的规则</a>
  （例如，<code id=浮点数:the-progress-element><a href=form-elements.html#the-progress-element>progress</a></code> 元素的 <code id=浮点数:attr-progress-max><a href=form-elements.html#attr-progress-max>max</a></code> 属性）。
  然而，在某些情况下要求用户代理检查字符串是否是
  <a href=#valid-floating-point-number id=浮点数:valid-floating-point-number-4>合法的浮点数</a>（例如，
  <a href="input.html#number-state-(type=number)" id="浮点数:number-state-(type=number)">Number</a> 状态的 <code id=浮点数:the-input-element><a href=input.html#the-input-element>input</a></code> 元素的
  <a href=input.html#value-sanitization-algorithm id=浮点数:value-sanitization-algorithm>值清理算法</a>，或者
  <a href=images.html#parse-a-srcset-attribute id=浮点数:parse-a-srcset-attribute>解析 srcset 属性</a> 算法）。</p>

  <p><dfn id=best-representation-of-the-number-as-a-floating-point-number>
  浮点数的最佳表示 <var>n</var></dfn> 是
  运行 <a id=浮点数:tostring href=https://tc39.es/ecma262/#sec-tostring data-x-internal=tostring>ToString</a>（<var>n</var>）得到的字符串。
  <a id=浮点数:tostring-2 href=https://tc39.es/ecma262/#sec-tostring data-x-internal=tostring>ToString</a> 抽象方法不是唯一确定的。如果在特定的值上运行 <a id=浮点数:tostring-3 href=https://tc39.es/ecma262/#sec-tostring data-x-internal=tostring>ToString</a>
  可能得到多个字符串，用户代理必须对那个值总是返回同样的字符串
  （虽然它可能和其他用户代理使用的值不同）。</p>

  <p><dfn id=rules-for-parsing-floating-point-number-values data-export="">
  解析浮点数值的规则</dfn> 由以下算法给出。
  该算法必须在第一个有返回值的步骤中止。
  该算法将会返回一个数字或者错误。</p>

  <ol><li><p>令<var>input</var> 为被解析的字符串。<li><p>令<var>position</var> 为 <var>input</var> 内的指针，初始指向字符串的开始。<li><p>令<var>value</var> 的值为 1。<li><p>令<var>divisor</var> 的值为 1。<li><p>令<var>exponent</var> 的值为 1。<li><p><a href=https://infra.spec.whatwg.org/#skip-ascii-whitespace id=浮点数:skip-ascii-whitespace data-x-internal=skip-ascii-whitespace>跳过</a> <var>input</var> 中的 ASCII 空格，得到 <var>position</var>。<li><p>如果 <var>position</var> 越过了 <var>input</var> 的末尾，返回一个错误。<li>

    <p>如果 <var>position</var> 处的（第一个）字符是一个 U+002D HYPHEN-MINUS 字符 （-）:</p>

    <ol><li>将 <var>value</var> 和 <var>divisor</var> 改为 −1。<li>将 <var>position</var> 前进到下一个字符。<li>如果 <var>position</var> 越过了 <var>input</var> 的末尾，返回一个错误。</ol>

    <p>否则，如果 <var>position</var> 处的（第一个）字符是一个 U+002B PLUS SIGN 字符 （+）：</p>

    <ol><li>将 <var>position</var> 前进到下一个字符。 （虽然 "<code>+</code>" 会被忽略但并不符合规范。）<li>如果 <var>position</var> 越过了 <var>input</var> 的末尾，返回一个错误。</ol>

   <li><p>如果 <var>position</var> 处的字符是 U+002E FULL STOP （.），且不是
   <var>input</var> 的最后一个字符，
   而且 <var>position</var> 表示的字符的后一个字符是 <a href=https://infra.spec.whatwg.org/#ascii-digit id=浮点数:ascii-digits-4 data-x-internal=ascii-digits>ASCII 数字</a>，
   则将 <var>value</var> 设置为零并跳到 <i>fraction</i> 标记的步骤。</p> 

   <li><p>如果 <var>position</var> 处的数字不是 <a href=https://infra.spec.whatwg.org/#ascii-digit id=浮点数:ascii-digits-5 data-x-internal=ascii-digits>ASCII 数字</a>，
   则返回一个错误。<li><p>从 <var>input</var> 的给定 <var>position</var>
   <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=浮点数:collect-a-sequence-of-code-points data-x-internal=collect-a-sequence-of-code-points>收集</a>
   是 <a href=https://infra.spec.whatwg.org/#ascii-digit id=浮点数:ascii-digits-6 data-x-internal=ascii-digits>ASCII 数字</a> 的代码点序列，将得到的序列解释为以10为基的整数。
   将 <var>value</var> 乘以该整数。<li>如果 <var>position</var> 越过了 <var>input</var> 的末尾，跳到标记为 <i>conversion</i> 的步骤。<li><p><i>Fraction</i>：如果 <var>position</var> 处的数字是 U+002E FULL STOP （.），运行以下子步骤：</p>

    <ol><li><p>将 <var>position</var> 前进到下一个字符。<li><p>如果 <var>position</var> 越过了 <var>input</var> 的末尾或者不是
     <a href=https://infra.spec.whatwg.org/#ascii-digit id=浮点数:ascii-digits-7 data-x-internal=ascii-digits>ASCII 数字</a>、
     U+0065 LATIN SMALL LETTER E （e），或 U+0045 LATIN CAPITAL LETTER E （E），
     跳到 <i>conversion</i> 标记的步骤。<li><p>如果 <var>position</var> 处的字符是 U+0065 LATIN SMALL LETTER E character （e）或
     U+0045 LATIN CAPITAL LETTER E 字符（E），跳过下面的子步骤。</p>

     <li><p><i>Fraction loop</i>： 将 <var>divisor</var> 乘以 10。<li> 按照十进制（0..9）解释 <var>position</var> 处的字符，除以 <var>divisor</var>，
       加到 <var>value</var> 上。<li><p>将 <var>position</var> 前进到下一个字符。<li><p>如果 <var>position</var> 越过了 <var>input</var> 的末尾，
       跳到 <i>conversion</i> 标记的步骤。<li><p>如果 <var>position</var> 处的字符是 <a href=https://infra.spec.whatwg.org/#ascii-digit id=浮点数:ascii-digits-8 data-x-internal=ascii-digits>ASCII 数字</a>，
       跳回到 <i>fraction loop</i> 标记的子步骤。</ol>

   <li><p>如果 <var>position</var> 处的字符是 U+0065 （e）或 U+0045 （E），则：</p>

    <ol><li><p>将 <var>position</var> 前进到下一个字符。<li><p>如果 <var>position</var> 越过了 <var>input</var> 的末尾，跳到标记为
     <i>conversion</i> 的步骤。<li>

      <p>如果 <var>position</var> 处的字符是 U+002D HYPHEN-MINUS 字符（-）：</p>

      <ol><li>将 <var>exponent</var> 设置为 −1。<li>将 <var>position</var> 前进到下一个字符。<li><p>如果 <var>position</var> 越过了 <var>input</var> 的末尾，跳到标记为
       <i>conversion</i> 的步骤。</ol>

      <p>否则，如果 <var>position</var> 处的字符是 U+002B PLUS SIGN 字符（+）：</p>

      <ol><li>将 <var>position</var> 前进到下一个字符。<li><p>如果 <var>position</var> 越过了 <var>input</var> 的末尾，跳到标记为
       <i>conversion</i> 的步骤。</ol>

     <li><p>如果 <var>position</var> 处的字符不是 <a href=https://infra.spec.whatwg.org/#ascii-digit id=浮点数:ascii-digits-9 data-x-internal=ascii-digits>ASCII 数字</a>，则跳到标记为 <i>conversion</i> 的步骤。<li><p>从 <var>input</var> 的给定 <var>position</var>
     <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=浮点数:collect-a-sequence-of-code-points-2 data-x-internal=collect-a-sequence-of-code-points>收集</a>
     是 <a href=https://infra.spec.whatwg.org/#ascii-digit id=浮点数:ascii-digits-10 data-x-internal=ascii-digits>ASCII 数字</a> 的代码点序列，将得到的序列解释为以 10 为基的整数。
     将 <var>exponent</var> 乘以该整数。<li><p>将 <var>value</var> 乘以 10 的 <var>exponent</var> 指数。</ol>

   <li><p><i>Conversion</i>： 令<var>S</var> 为 IEEE 754 双精度浮点数值的有限集，
   −0 除外，但新增 2<sup>1024</sup> 和 −2<sup>1024</sup> 两个值。<li><p>令<var>rounded-value</var> 为 <var>S</var> 最接近 <var>value</var> 的数字，
   如果有两个同样接近的数值，则选择有效数为奇数的数字。
   （在这个处理中，2<sup>1024</sup> 和 −2<sup>1024</sup>
   这两个特殊值应视为有奇数的有效数。）<li><p>如果 <var>rounded-value</var> 是 2<sup>1024</sup> 或 −2<sup>1024</sup>，返回错误。<li><p>返回 <var>rounded-value</var>。</ol>

  




  <h5 id=percentages-and-dimensions><span class=secno>2.4.4.4</span> 百分数和长度<a href=#percentages-and-dimensions class=self-link></a></h5>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/common-microsyntaxes/numbers/percentages-and-lengths.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/common-microsyntaxes/numbers/percentages-and-lengths.en.html></div>

  <p><dfn id=rules-for-parsing-dimension-values>解析维度值的规则</dfn>
  由下面算法给出。被调用时必须按给定顺序执行这些步骤，并在第一个有返回值的步骤中止。
  本算法将会返回一个大于等于 0.0 的数字，或者一个错误；如果返回了数字，
  那么它可能是百分数或者长度。</p>

  <ol><li><p>令<var>input</var> 为被解析的字符串。<li><p>令<var>position</var> 为 <var>input</var> 中的指针，初始指向字符串的开始。<li><p><a href=https://infra.spec.whatwg.org/#skip-ascii-whitespace id=percentages-and-dimensions:skip-ascii-whitespace data-x-internal=skip-ascii-whitespace>跳过</a> <var>input</var> 中的 ASCII 空格，得到 <var>position</var>。<li><p>如果 <var>position</var> 越过了 <var>input</var> 的末尾，返回一个错误。<li><p>如果 <var>position</var> 处的字符是一个 U+002B PLUS SIGN 字符 （+），
   将 <var>position</var> 前进到下一个字符</p>。<li><p>如果 <var>position</var> 越过了 <var>input</var> 的末尾，返回一个错误。<li><p>如果 <var>position</var> 处的字符不是 <a href=https://infra.spec.whatwg.org/#ascii-digit id=percentages-and-dimensions:ascii-digits data-x-internal=ascii-digits>ASCII 数字</a>，则返回一个错误。<li><p>从 <var>input</var> 的给定 <var>position</var>
   <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=percentages-and-dimensions:collect-a-sequence-of-code-points data-x-internal=collect-a-sequence-of-code-points>收集</a>
   是 <a href=https://infra.spec.whatwg.org/#ascii-digit id=percentages-and-dimensions:ascii-digits-2 data-x-internal=ascii-digits>ASCII 数字</a> 的代码点序列，将得到的序列解释为以 10 为基的整数。
   令 <var>value</var> 为该整数。<li><p>如果 <var>position</var> 越过了 <var>input</var> 的末尾，将 <var>value</var> 作为长度返回。<li>

    <p>如果 <var>position</var> 处的字符是 U+002E FULL STOP character （.）：</p>

    <ol><li><p>将 <var>position</var> 前进到下一个字符。<li><p>如果 <var>position</var> 越过了 <var>input</var> 的末尾，或者 <var>position</var>
     处的字符不是 <a href=https://infra.spec.whatwg.org/#ascii-digit id=percentages-and-dimensions:ascii-digits-3 data-x-internal=ascii-digits>ASCII 数字</a>，则将 <var>value</var> 作为长度返回。<li><p>令<var>divisor</var> 值为 1。<li><p><i>Fraction loop</i>：将 <var>divisor</var> 乘以 10。<li> 按照十进制（0..9）解释 <var>position</var> 处的字符，除以 <var>divisor</var>，
     加到 <var>value</var> 上。<li><p>将 <var>position</var> 前进到下一个字符。<li><p>如果 <var>position</var> 越过了 <var>input</var> 的末尾，则将 <var>value</var> 作为长度返回。<li><p>如果 <var>position</var> 处的字符是一个 <a href=https://infra.spec.whatwg.org/#ascii-digit id=percentages-and-dimensions:ascii-digits-4 data-x-internal=ascii-digits>ASCII 数字</a>，
     返回到标记为 <i>fraction loop</i> 的子步骤。</ol>

   <li><p>如果 <var>position</var> 越过了 <var>input</var> 的末尾，则将 <var>value</var> 作为长度返回。<li><p>如果 <var>position</var> 处的字符是 U+0025 PERCENT SIGN character（%）,
   将 <var>value</var> 作为百分数返回。<li><p>将 <var>value</var> 作为长度返回。</ol>


  <h5 id=非零百分数和长度><span class=secno>2.4.4.5</span> 非零百分数和长度<a href=#非零百分数和长度 class=self-link></a></h5>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/common-microsyntaxes/numbers/non-zero-percentages-and-lengths.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/common-microsyntaxes/numbers/non-zero-percentages-and-lengths.en.html></div>

  <p><dfn id=rules-for-parsing-nonzero-dimension-values>解析非零维度值的规则</dfn>
  由下列算法给出。被调用时必须按给定顺序执行这些步骤，并在第一个有返回值的步骤中止。
  本算法将会返回一个大于 0.0 的数字或者一个错误；如果返回了数字，
  那么它可能是百分数或者长度。</p>

  <ol><li><p>令<var>input</var> 为被解析的字符串。<li><p>令<var>value</var> 为使用
   <a href=#rules-for-parsing-dimension-values id=非零百分数和长度:rules-for-parsing-dimension-values>解析维度值的规则</a>
   解析 <var>input</var> 的结果。<li><p>如果 <var>value</var> 是一个错误，返回一个错误。<li><p>如果 <var>value</var> 为 0，返回一个错误。<li><p>如果 <var>value</var> 为百分数，将 <var>value</var> 作为百分数返回。<li><p>将 <var>value</var> 作为长度返回。</ol>

  



  <h5 id=浮点数列表><span class=secno>2.4.4.6</span> 浮点数列表<a href=#浮点数列表 class=self-link></a></h5>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/common-microsyntaxes/numbers/lists-of-floating-point-numbers.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/common-microsyntaxes/numbers/lists-of-floating-point-numbers.en.html></div>

  <p><dfn id=valid-list-of-floating-point-numbers>合法的浮点数列表</dfn>
  是以 U+002C COMMA 字符分隔的 <a href=#valid-floating-point-number id=浮点数列表:valid-floating-point-number>合法浮点数</a> ,
  且没有其他字符（比如 <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=浮点数列表:space-characters data-x-internal=space-characters>ASCII 空格</a>）。
  此外，可能会有浮点数个数限制，或者取值范围限制。</p>

  

  <p><dfn id=rules-for-parsing-a-list-of-floating-point-numbers>解析浮点数列表的规则</dfn> 如下：</p>

  <ol><li><p>令<var>input</var> 为被解析的字符串。<li><p>令<var>position</var> 为 <var>input</var> 中的指针，初始指向字符串的开始。<li><p>令<var>numbers</var> 为空的浮点数列表。该列表将会是本算法的结果。<li><p>从 <var>input</var> 的给定 <var>position</var>
   <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=浮点数列表:collect-a-sequence-of-code-points data-x-internal=collect-a-sequence-of-code-points>收集</a>
   是 <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=浮点数列表:space-characters-2 data-x-internal=space-characters>ASCII 空格</a>,
   U+002C COMMA，或者 U+003B SEMICOLON 字符的代码点序列。
   本步骤跳过了所有前导分隔符。<li><p>当 <var>position</var> 没有越过 <var>input</var> 的末尾时：</p>

    <ol><li><p>从 <var>input</var> 的给定 <var>position</var>
     <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=浮点数列表:collect-a-sequence-of-code-points-2 data-x-internal=collect-a-sequence-of-code-points>收集</a> 不是
     <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=浮点数列表:space-characters-3 data-x-internal=space-characters>ASCII 空格</a>,
     U+002C COMMA，U+003B SEMICOLON，
     <a href=https://infra.spec.whatwg.org/#ascii-digit id=浮点数列表:ascii-digits data-x-internal=ascii-digits>ASCII 数字</a>，
     U+002E FULL STOP, 或 U+002D HYPHEN-MINUS 字符的代码点序列。
     本步骤跳过了前导的无用字符。<li><p>从 <var>input</var> 的给定 <var>position</var>
     <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=浮点数列表:collect-a-sequence-of-code-points-3 data-x-internal=collect-a-sequence-of-code-points>收集</a>
     不是 <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=浮点数列表:space-characters-4 data-x-internal=space-characters>ASCII 空格</a>,
     U+002C COMMA，或者 U+003B SEMICOLON 字符的代码点序列，令
     <var>unparsed number</var> 为收集的结果。<li><p>令<var>number</var> 为使用
     <a href=#rules-for-parsing-floating-point-number-values id=浮点数列表:rules-for-parsing-floating-point-number-values>解析浮点数值的规则</a>
     解析 <var>unparsed number</var> 的结果。<li><p>如果 <var>number</var> 是一个错误，将 <var>number</var> 设置为 0。<li><p>将 <var>number</var> 添加到 <var>numbers</var>。<li><p>从 <var>input</var> 的给定 <var>position</var>
     <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=浮点数列表:collect-a-sequence-of-code-points-4 data-x-internal=collect-a-sequence-of-code-points>收集</a>
     是 <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=浮点数列表:space-characters-5 data-x-internal=space-characters>ASCII 空格</a>,
     U+002C COMMA，或者 U+003B SEMICOLON 字符的代码点序列。
     本步骤跳过了分隔符。</ol>

   <li><p>返回 <var>numbers</var>。</ol>

  

  


  <h5 id=维度值列表><span class=secno>2.4.4.7</span> 维度值列表<a href=#维度值列表 class=self-link></a></h5>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/common-microsyntaxes/numbers/lists-of-dimensions.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/common-microsyntaxes/numbers/lists-of-dimensions.en.html></div>

  

  <p><dfn id=rules-for-parsing-a-list-of-dimensions>解析维度值列表的规则</dfn> 如下。
  这些规则返回一个由数字或单位组成的偶对列表，包含0个或更多偶对。
  其中的单位是 <i>percentage</i>, <i>relative</i>，和 <i>absolute</i> 之一。</p>

  <ol><li><p>令<var>raw input</var> 为被解析的字符串。<li><p>如果 <var>raw input</var> 的最后一个字符是 U+002C COMMA character（,）,
   则从 <var>raw input</var> 中移除该字符。<li><p><a href=https://infra.spec.whatwg.org/#split-on-commas id=维度值列表:split-a-string-on-commas data-x-internal=split-a-string-on-commas>用逗号分割 <var>raw input</var> 字符串</a>。
   令<var>raw tokens</var> 为得到的标记列表。<li><p>令<var>result</var> 为 number/unit 偶对的空列表。<li>

    <p>对 <var>raw tokens</var> 中的每一个标记，运行以下子步骤：</p>

    <ol><li><p>令<var>input</var> 为该标记。<li><p>令<var>position</var> 为 <var>input</var> 中的指针，初始指向字符串的开始。<li><p>令<var>value</var> 为数字 0。<li><p>令<var>unit</var> 为 <i>absolute</i>。<li><p>如果 <var>position</var> 越过了 <var>input</var> 的末尾，将 <var>unit</var> 设为 <i>relative</i> 并跳到最后一个子步骤。<li><p>如果 <var>position</var> 处的字符是 <a href=https://infra.spec.whatwg.org/#ascii-digit id=维度值列表:ascii-digits data-x-internal=ascii-digits>ASCII 数字</a>，
     从 <var>input</var> 的给定 <var>position</var>
     <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=维度值列表:collect-a-sequence-of-code-points data-x-internal=collect-a-sequence-of-code-points>收集</a>
     是 <a href=https://infra.spec.whatwg.org/#ascii-digit id=维度值列表:ascii-digits-2 data-x-internal=ascii-digits>ASCII 数字</a> 的代码点序列，将得到的序列解释为以10为基的整数，
     将 <var>value</var> 递增这个整数。<li>

      <p>如果在 <var>position</var> 处的字符是 U+002E（.），则：</p>

      <ol><li><p>从 <var>input</var> 的给定 <var>position</var>
       <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=维度值列表:collect-a-sequence-of-code-points-2 data-x-internal=collect-a-sequence-of-code-points>收集</a>
       是 <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=维度值列表:space-characters data-x-internal=space-characters>ASCII 空格</a> 或
       <a href=https://infra.spec.whatwg.org/#ascii-digit id=维度值列表:ascii-digits-3 data-x-internal=ascii-digits>ASCII 数字</a> 的代码点序列，
       令 <var>s</var> 为得到的结果序列。<li><p>移除 <var>s</var> 中所有的 <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=维度值列表:space-characters-2 data-x-internal=space-characters>ASCII 空格</a>。<li>

        <p>如果 <var>s</var> 不是空字符串，则：</p>

        <ol><li><p>令<var>length</var> 为 <var>s</var> 中（移除空格后的）字符数。<li><p>令<var>fraction</var> 为将 <var>s</var> 解释为以10为基的整数后的结果，
         将这个数字除以 <span>10<sup><var>length</var></sup></span>。<li><p>将 <var>value</var> 递增 <var>fraction</var>。</ol>

       </ol>

     <li><p>从给定的 <var>position</var>
     <a href=https://infra.spec.whatwg.org/#skip-ascii-whitespace id=维度值列表:skip-ascii-whitespace data-x-internal=skip-ascii-whitespace>跳过 <var>input</var> 中的 ASCII 空白字符</a>。<li>

      <p>如果 <var>position</var> 处的字符是 U+0025 PERCENT SIGN 字符（%）,
      将 <var>unit</var> 设为 <i>percentage</i>。</p>

      <p>否则，如果 <var>position</var> 处的字符是 U+002A ASTERISK 字符（*），
      则将 <var>unit</var> 设为 <i>relative</i>。</p>

     <li><p>在 <var>result</var> 中增加一项，包含由 <var>value</var> 给定的数字，
     以及由 <var>unit</var> 给定的单位。</ol>

   <li><p>返回 <var>result</var> 列表。</ol>

  



  <h4 id=日期和时间><span class=secno>2.4.5</span> 日期和时间<a href=#日期和时间 class=self-link></a></h4>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/common-microsyntaxes/dates-and-times/index.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/common-microsyntaxes/dates-and-times/index.en.html></div>

  <div>在下面的算法中，
  <dfn id=number-of-days-in-month-month-of-year-year>
  <var>year</var> 年 <var>month</var> 月的天数</dfn> 是：
  <ul><li>
      <em>31</em>，如果 <var>month</var> 是 1，3，5，7，8, 10 或 12；
    <li>
      <em>30</em>，如果 <var>month</var> 是 4，6，9 或 11；
    <li>
      <em>29</em>，如果 <var>month</var> 是 2 且 <var>year</var> 可以由 400 整除，或者 <var>year</var> 可以被 4 整除但不能被 100 整除；
    <li>否则为 <em>28</em>。 </ul>
  这考虑了格里历（现行公历）的闰年。<a href=references.html#refsGREGORIAN>[GREGORIAN]</a></div>

  <p>当本部分定义的日期与时间语法中使用了 <a href=https://infra.spec.whatwg.org/#ascii-digit id=日期和时间:ascii-digits data-x-internal=ascii-digits>ASCII 数字</a> 时,
  这些数字表示10进制数。</p>

  

  <p class=note>虽然这里描述的格式旨在成为相应的 ISO8601 格式的子集，但是本规范比 ISO8601 更详细地定义了解析规则。因此，在使用实现者之前，请仔细检查任何日期解析库，然后再使用它们来实现下面描述的解析规则; ISO8601 库可能不会以完全相同的方式解析日期和时间。<a href=references.html#refsISO8601>[ISO8601]</a></p>

  

  <p>本标准中的 <dfn id=proleptic-gregorian-calendar>外推格里历</dfn> 是指现代格里历向前外推到第 1 年。
  <a href=#proleptic-gregorian-calendar id=日期和时间:proleptic-gregorian-calendar>外推格里历</a> 中的日期
  （有时直接称 <dfn id=proleptic-gregorian-date>外推格里历日期</dfn>），
  的指用外推格里历描述的日期，即使当时还没有颁布格里历。 <a href=references.html#refsGREGORIAN>[GREGORIAN]</a></p>

  <p class=note>格里历在本标准中作为连线协议使用并非出于决策者的文化偏好。参考：
  对表单中的 <a href=forms.html#input-author-notes>date，time，和 number 格式</a> 的讨论 （对作者而言），
  <a href=input.html#input-impl-notes>关于表单控件本地化的实现说明</a>，，
  以及 <code id=日期和时间:the-time-element><a href=text-level-semantics.html#the-time-element>time</a></code> 元素。</p>



  <h5 id=月份><span class=secno>2.4.5.1</span> 月份<a href=#月份 class=self-link></a></h5>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/common-microsyntaxes/dates-and-times/months.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/common-microsyntaxes/dates-and-times/months.en.html></div>

  <p><dfn id=concept-month>月份</dfn> 由特定的
  <a href=#proleptic-gregorian-date id=月份:proleptic-gregorian-date>外推格里历日期</a> 组成，
  不包含时区信息，也不包含年和月以上的日的信息。<a href=references.html#refsGREGORIAN>[GREGORIAN]</a></p>

  <p>表示 <var>year</var> 年 <var>month</var> 月的
  <dfn id=valid-month-string>合法的月字符串</dfn>
  包含下列部分（有序）：</p>

  <ol><li>表示 <var>year</var> 年的 4 个或更多 <a href=https://infra.spec.whatwg.org/#ascii-digit id=月份:ascii-digits data-x-internal=ascii-digits>ASCII 数字</a>，
   其中 <var>year</var> > 0<li>一个 U+002D HYPHEN-MINUS 字符（-）<li>表示 <var>month</var> 月的两个 <a href=https://infra.spec.whatwg.org/#ascii-digit id=月份:ascii-digits-2 data-x-internal=ascii-digits>ASCII 数字</a>，在范围
   1 ≤ <var>month</var> ≤ 12 之内</ol>

  

  <p><dfn id=parse-a-month-string>解析月字符串</dfn> 的规则如下。将返回年和月，或者什么都不返回。
  如果算法的任何一个点说它 "失败了"，这意味着它在那一点退出并什么都不返回。</p>

  <ol><li><p>令<var>input</var> 为待解析字符串。<li><p>令<var>position</var> 为 <var>input</var> 内的指针初始指向字符串开始。<li><p><a href=#parse-a-month-component id=月份:parse-a-month-component>解析月的部分</a> 来获得 <var>year</var> 和 <var>month</var>。
   如果它没有返回，则失败。</p>

   <li><p>如果 <var>position</var> <em>没有</em> 超出 <var>input</var> 的结尾，则失败。<li><p>返回 <var>year</var> 和 <var>month</var>。</ol>

  <p>给定 <var>input</var> 字符串和位置 <var>position</var>，
  <dfn id=parse-a-month-component>解析月的部分</dfn> 的规则如下。
  将返回年和月，或者什么都不返回。
  如果算法的任何一个步说它 "失败了"，这意味着它在那一步退出并什么都不返回。</p>

  <ol><li><p>从 <var>input</var> 中给定的位置 <var>position</var>
   <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=月份:collect-a-sequence-of-code-points data-x-internal=collect-a-sequence-of-code-points>收集</a> <a href=https://infra.spec.whatwg.org/#ascii-digit id=月份:ascii-digits-3 data-x-internal=ascii-digits>ASCII 数字</a>
   组成的代码点序列。 如果收集到的序列不够 4 个字符则失败。
   否则将结果序列解释为 10 进制整数。令那个数为 <var>year</var>。<li><p>如果 <var>year</var> 不是大于0的数字则失败。。<li><p>如果 <var>position</var> 超出了 <var>input</var> 的末尾或者
   <var>position</var> 处的字符不是 U+002D HYPHEN-MINUS 字符，则失败。
   否则将 <var>position</var> 前进一个字符。<li><p>从 <var>input</var> 中给定的位置 <var>position</var>
   <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=月份:collect-a-sequence-of-code-points-2 data-x-internal=collect-a-sequence-of-code-points>收集</a> <a href=https://infra.spec.whatwg.org/#ascii-digit id=月份:ascii-digits-4 data-x-internal=ascii-digits>ASCII 数字</a>
   组成的代码点序列。 如果收集到的序列不是恰好 2 个字符则失败。
   否则将结果序列解释为 10 进制整数。令那个数为 <var>month</var>。<li><p>如果 <var>month</var> 不是 1 ≤ <var>month</var> ≤ 12 范围内的数字就失败。<li><p>返回 <var>year</var> 和 <var>month</var>。</ol>

  



  <h5 id=日期><span class=secno>2.4.5.2</span> 日期<a href=#日期 class=self-link></a></h5>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/common-microsyntaxes/dates-and-times/dates.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/common-microsyntaxes/dates-and-times/dates.en.html></div>

  <p><dfn id=concept-date>日期</dfn> 由特定的
  <a href=#proleptic-gregorian-date id=日期:proleptic-gregorian-date>外推格里历日期</a> 组成，
  不包含时区信息，由年、月、日组成。<a href=references.html#refsGREGORIAN>[GREGORIAN]</a></p>

  <p>表示 <var>year</var> 年，<var>month</var> 月，<var>day</var> 日的
  <dfn id=valid-date-string>合法的日期字符串</dfn> 由下列几个有序的组成部分：</p>

  <ol><li>表示 <var>year</var> 和 <var>month</var> 的 <a href=#valid-month-string id=日期:valid-month-string>合法的月字符串</a><li>一个 U+002D HYPHEN-MINUS 字符（-）<li>表示 <var>day</var> 的两个 <a href=https://infra.spec.whatwg.org/#ascii-digit id=日期:ascii-digits data-x-internal=ascii-digits>ASCII 数字</a>，
   处于范围 1 ≤ <var>day</var> ≤ <var>maxday</var> 内，其中
   <var>maxday</var> 为 <a href=#number-of-days-in-month-month-of-year-year id=日期:number-of-days-in-month-month-of-year-year><var>year</var> 年 <var>month</var> 月的天数</a></ol>

  

  <p><dfn id=parse-a-date-string>解析日期字符串</dfn> 的规则如下。将会返回一个日期或者什么都不返回。
  如果算法的任何一个点说它 "失败了"，这意味着它在那一点退出并什么都不返回。</p>

  <ol><li><p>令<var>input</var> 为待解析字符串。<li><p>令<var>position</var> 为 <var>input</var> 内的指针初始指向字符串开始。<li><p><a href=#parse-a-date-component id=日期:parse-a-date-component>解析日期部分</a> 来获得 <var>year</var>，<var>month</var> 和 <var>day</var>。
   如果它没有返回，则失败。</p>

   <li><p>如果 <var>position</var> <em>没有</em> 超出 <var>input</var> 的结尾，则失败。<li><p>令<var>date</var> 的年月日分别为 <var>year</var>，<var>month</var>，<var>day</var>。<li><p>返回 <var>date</var>。</ol>

  <p>给定 <var>input</var> 字符串和位置 <var>position</var>，
  <dfn id=parse-a-date-component>解析日期部分</dfn> 的规则如下。
  将返回年、月、日，或者什么都不返回。
  如果算法的任何一个点说它 "失败了"，这意味着它在那一点退出并什么都不返回。</p>

  <ol><li><p><a href=#parse-a-month-component id=日期:parse-a-month-component>解析月的部分</a> 来获得 <var>year</var> 和 <var>month</var>
   如果它没有返回，则失败。<li><p>令<var>maxday</var> 为 <a href=#number-of-days-in-month-month-of-year-year id=日期:number-of-days-in-month-month-of-year-year-2><var>year</var> 年 <var>month</var> 月的天数</a>。<li><p>如果 <var>position</var> 超出了 <var>input</var> 的末尾或者
   <var>position</var> 处的字符不是 U+002D HYPHEN-MINUS 字符，则失败。
   否则将 <var>position</var> 前进一个字符。<li><p>从 <var>input</var> 中给定的位置 <var>position</var>
   <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=日期:collect-a-sequence-of-code-points data-x-internal=collect-a-sequence-of-code-points>收集</a> <a href=https://infra.spec.whatwg.org/#ascii-digit id=日期:ascii-digits-2 data-x-internal=ascii-digits>ASCII 数字</a>
   组成的代码点序列。 如果收集到的序列不是恰好 2 个字符则失败。
   否则将结果序列解释为 10 进制整数。令那个数为 <var>day</var>。<li><p>如果 <var>day</var> 不是 1 ≤ <var>day</var> ≤ <var>maxday</var> 范围内的数字就失败。<li><p>返回 <var>year</var>，<var>month</var> 和 <var>day</var>。</ol>

  



  <h5 id=无年的日期><span class=secno>2.4.5.3</span> 无年的日期<a href=#无年的日期 class=self-link></a></h5>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/common-microsyntaxes/dates-and-times/yearless-dates.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/common-microsyntaxes/dates-and-times/yearless-dates.en.html></div>

  <p>一个
  <dfn id=concept-yearless-date> 无年的日期 </dfn>
  由一个格里历月和该月内的一天组成，但没有关联的年份。<a href=references.html#refsGREGORIAN>[GREGORIAN]</a></p>

  <p>表示 <var>month</var> 月 <var>day</var> 日的
  <dfn id=valid-yearless-date-string>合法的无年日期</dfn> 包含如下有序的部分：</p>

  <ol><li>可选地，两个 U+002D HYPHEN-MINUS 字符 （-）<li>表示 <var>month</var> 月的两个 <a href=https://infra.spec.whatwg.org/#ascii-digit id=无年的日期:ascii-digits data-x-internal=ascii-digits>ASCII 数字</a>，在范围
   1 ≤ <var>month</var> ≤ 12 之内<li>一个 U+002D HYPHEN-MINUS 字符 （-）<li>表示 <var>day</var> 的两个 <a href=https://infra.spec.whatwg.org/#ascii-digit id=无年的日期:ascii-digits-2 data-x-internal=ascii-digits>ASCII 数字</a>，
   处于范围 1 ≤ <var>day</var> ≤ <var>maxday</var> 内，其中
   <var>maxday</var> 为 <a href=#number-of-days-in-month-month-of-year-year id=无年的日期:number-of-days-in-month-month-of-year-year>
   任意闰年（例如 4 或 2000）的 <var>month</var> 月的天数</a></ol>

  <p class=note>换句话说，如果 <var>month</var> 为 "<code>02</code>"（二月），
  那么可以是 29 日，把这一年当做闰年。</p>

  

  <p><dfn id=parse-a-yearless-date-string>解析无年的日期字符串</dfn> 的规则如下。
  将会返回月和日，或者什么都不返回。
  如果算法的任何一个点说它 "失败了"，这意味着它在那一点退出并什么都不返回。</p>

  <ol><li><p>令<var>input</var> 为待解析字符串。<li><p>令<var>position</var> 为 <var>input</var> 内的指针初始指向字符串开始。<li><p><a href=#parse-a-yearless-date-component id=无年的日期:parse-a-yearless-date-component>解析无年的日期部分</a>
   来获得 <var>month</var> 和 <var>day</var>。
   如果它没有返回，则失败。</p>

   <li><p>如果 <var>position</var> <em>没有</em> 超出 <var>input</var> 的结尾，则失败。<li><p>返回 <var>month</var> 和 <var>day</var>。</ol>

  <p>给定 <var>input</var> 字符串和位置 <var>position</var>，
  <dfn id=parse-a-yearless-date-component>解析无年的日期部分</dfn> 的规则如下。
  将返回月和日，或者什么都不返回。
  如果算法的任何一个步说它 "失败了"，这意味着它在那一步退出并什么都不返回。</p>

  <ol><li><p>从 <var>input</var> 中给定的位置 <var>position</var>
   <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=无年的日期:collect-a-sequence-of-code-points data-x-internal=collect-a-sequence-of-code-points>收集</a>
   U+002D HYPHEN-MINUS 字符 （-）组成的代码点序列。
   如果收集到的序列长度不是 0 或 2，就失败。<li><p>从 <var>input</var> 中给定的位置 <var>position</var>
   <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=无年的日期:collect-a-sequence-of-code-points-2 data-x-internal=collect-a-sequence-of-code-points>收集</a> <a href=https://infra.spec.whatwg.org/#ascii-digit id=无年的日期:ascii-digits-3 data-x-internal=ascii-digits>ASCII 数字</a>
   组成的代码点序列。 如果收集到的序列长度不是 2 就失败。
   否则将结果序列解释为 10 进制整数。令那个数为 <var>month</var>。<li><p>如果 <var>month</var> 不是 1 ≤ <var>month</var> ≤ 12 范围内的数字就失败。<li><p>令 <var>maxday</var> 为 <a href=#number-of-days-in-month-month-of-year-year id=无年的日期:number-of-days-in-month-month-of-year-year-2>
   任意闰年（例如 4 或 2000）的 <var>month</var> 月的天数</a>。<li><p>如果 <var>position</var> 超出了 <var>input</var> 的末尾或者
   <var>position</var> 处的字符不是 U+002D HYPHEN-MINUS 字符，则失败。
   否则将 <var>position</var> 前进一个字符。<li><p>从 <var>input</var> 中给定的位置 <var>position</var>
   <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=无年的日期:collect-a-sequence-of-code-points-3 data-x-internal=collect-a-sequence-of-code-points>收集</a> <a href=https://infra.spec.whatwg.org/#ascii-digit id=无年的日期:ascii-digits-4 data-x-internal=ascii-digits>ASCII 数字</a>
   组成的代码点序列。 如果收集到的序列不是恰好 2 个字符则失败。
   否则将结果序列解释为 10 进制整数。令那个数为 <var>day</var>。<li><p>如果 <var>day</var> 不是 1 ≤ <var>day</var> ≤ <var>maxday</var> 范围内的数字就失败。<li><p>返回 <var>month</var> 和 <var>day</var>。</ol>

  



  <h5 id=时间><span class=secno>2.4.5.4</span> 时间<a href=#时间 class=self-link></a></h5>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/common-microsyntaxes/dates-and-times/times.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/common-microsyntaxes/dates-and-times/times.en.html></div>

  <p><dfn id=concept-time>时间</dfn> 由一个没有时区信息的特定时间组成。
  包含小时、分钟、秒，以及秒的小数。</p>

  <p>
  <var>hour</var> 时 <var>minute</var> 分 <var>second</var> 秒的
  <dfn id=valid-time-string>合法的时间字符串</dfn>
  由以下有序的几部分组成：</p>

  <ol><li>表示 <var>hour</var> 的两个 <a href=https://infra.spec.whatwg.org/#ascii-digit id=时间:ascii-digits data-x-internal=ascii-digits>ASCII 数字</a>，
   在 0 ≤ <var>hour</var> ≤ 23 范围内<li>一个 U+003A COLON 字符 （:）<li>表示 <var>minute</var> 的两个 <a href=https://infra.spec.whatwg.org/#ascii-digit id=时间:ascii-digits-2 data-x-internal=ascii-digits>ASCII 数字</a>，
   在 0 ≤ <var>minute</var> ≤ 59 范围内<li>如果 <var>second</var> 不是零（是零也合法）：

    <ol><li>一个 U+003A COLON 字符（:）<li>表示 <var>second</var> 的两个 <a href=https://infra.spec.whatwg.org/#ascii-digit id=时间:ascii-digits-3 data-x-internal=ascii-digits>ASCII 数字</a>，
     在 0 ≤ <var>second</var> ≤ 59 范围内<li>如果 <var>second</var> 不是整数（是整数也合法）：

      <ol><li>一个 U+002E FULL STOP 字符（.）<li>表示 <var>second</var> 的一到三个 <a href=https://infra.spec.whatwg.org/#ascii-digit id=时间:ascii-digits-4 data-x-internal=ascii-digits>ASCII 数字</a></ol>

     </ol>

   </ol>

  <p class=note><var>second</var> 部分不可以是 60 或 61；闰秒无法表示。</p>

  

  <p><dfn id=parse-a-time-string>解析时间字符串</dfn> 的规则如下。将会返回一个时间或者什么都不返回。
  如果算法的任何一个点说它 "失败了"，这意味着它在那一点退出并什么都不返回。</p>

  <ol><li><p>令<var>input</var> 为待解析字符串。<li><p>令<var>position</var> 为 <var>input</var> 内的指针初始指向字符串开始。<li><p><a href=#parse-a-time-component id=时间:parse-a-time-component>解析时间部分</a> 来获得 <var>hour</var>，<var>minute</var> 和 <var>second</var>。
   如果它没有返回，则失败。</p>

   <li><p>如果 <var>position</var> <em>没有</em> 超出 <var>input</var> 的结尾，则失败。<li><p>令<var>time</var> 的时分秒分别为 <var>hour</var>，<var>minute</var>，<var>second</var>。<li><p>返回 <var>time</var>。</ol>

  <p>给定 <var>input</var> 字符串和位置 <var>position</var>，
  <dfn id=parse-a-time-component>解析时间部分</dfn> 的规则如下。
  将返回时、分、秒，或者什么都不返回。
  如果算法的任何一个点说它 "失败了"，这意味着它在那一点退出并什么都不返回。</p>

  <ol><li><p>从 <var>input</var> 中给定的位置 <var>position</var>
   <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=时间:collect-a-sequence-of-code-points data-x-internal=collect-a-sequence-of-code-points>收集</a> <a href=https://infra.spec.whatwg.org/#ascii-digit id=时间:ascii-digits-5 data-x-internal=ascii-digits>ASCII 数字</a>
   组成的代码点序列。 如果收集到的序列不是恰好 2 个字符则失败。
   否则将结果序列解释为 10 进制整数。令那个数为 <var>hour</var>。<li><p>如果 <var>hour</var> 不是 0 ≤ <var>hour</var> ≤ 23 范围内的数字就失败。<li><p>如果 <var>position</var> 超出了 <var>input</var> 的末尾或者
   <var>position</var> 处的字符不是 U+003A COLON 字符，则失败。
   否则将 <var>position</var> 前进一个字符。<li><p>从 <var>input</var> 中给定的位置 <var>position</var>
   <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=时间:collect-a-sequence-of-code-points-2 data-x-internal=collect-a-sequence-of-code-points>收集</a> <a href=https://infra.spec.whatwg.org/#ascii-digit id=时间:ascii-digits-6 data-x-internal=ascii-digits>ASCII 数字</a>
   组成的代码点序列。 如果收集到的序列不是恰好 2 个字符则失败。
   否则将结果序列解释为 10 进制整数。令那个数为 <var>minute</var>。<li><p>如果 <var>minute</var> 不是 0 ≤ <var>minute</var> ≤ 59 范围内的数字就失败。<li><p>令<var>second</var> 为 0。<li>

    <p>如果 <var>position</var> 没有超出 <var>input</var> 的末尾并且
    <var>position</var> 处的字符是 U+003A（:），则：

    <ol><li><p>将 <var>position</var> 前进一个字符。<li><p>如果 <var>position</var> 恰好位于或者超出了 <var>input</var> 的末尾，
     或者 <var>input</var> 中从 <var>position</var> 开始的 <em>两个</em> 字符不都是
     <a href=https://infra.spec.whatwg.org/#ascii-digit id=时间:ascii-digits-7 data-x-internal=ascii-digits>ASCII 数字</a>，则失败。<li><p>从 <var>input</var> 中给定的位置 <var>position</var>
     <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=时间:collect-a-sequence-of-code-points-3 data-x-internal=collect-a-sequence-of-code-points>收集</a>
     <a href=https://infra.spec.whatwg.org/#ascii-digit id=时间:ascii-digits-8 data-x-internal=ascii-digits>ASCII 数字</a> 或 U+002E FULL STOP 字符
     组成的代码点序列。 如果收集到的序列长度为 3，
     或者长度大于 3 且第 3 个字符不是 U+002E FULL STOP 字符，
     或者有多于一个的 U+002E FULL STOP 字符，则失败。
     否则将结果序列解释为 10 进制数（可能有小数部分）。
     将 <var>second</var> 设置为那个数字。<li><p>如果 <var>second</var> 不是
     0 ≤ <var>second</var> &lt; 60 范围内的数字就失败。</ol>

   <li><p>返回 <var>hour</var>，<var>minute</var> 和 <var>second</var>。</ol>

  



  <h5 id=本地日期和时间><span class=secno>2.4.5.5</span> 本地日期和时间<a href=#本地日期和时间 class=self-link></a></h5>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/common-microsyntaxes/dates-and-times/local-dates-and-times.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/common-microsyntaxes/dates-and-times/local-dates-and-times.en.html></div>

  <p><dfn id=concept-datetime-local>本地日期和时间</dfn> 由一个特定的
  <a href=#proleptic-gregorian-date id=本地日期和时间:proleptic-gregorian-date>外推格里历日期</a>（包含年、月、日）
  和时间（包含时、分、秒，以及秒的小数），但没有时区。<a href=references.html#refsGREGORIAN>[GREGORIAN]</a></p>

  <p>表示日期和时间的
  <dfn id=valid-local-date-and-time-string>合法的本地日期和时间字符串</dfn>
  由以下有序的部分组成：</p>

  <ol><li>表示日期的 <a href=#valid-date-string id=本地日期和时间:valid-date-string>合法的日期字符串</a><li>一个 U+0054 LATIN CAPITAL LETTER T 字符（T）或者 U+0020 SPACE 字符<li>表示时间的 <a href=#valid-time-string id=本地日期和时间:valid-time-string>合法的时间字符串</a></ol>

  <p>表示日期和时间的 <dfn id=valid-normalised-local-date-and-time-string>
  合法的正则化的本地日期和时间字符串</dfn> 由以下有序的几部分组成：</p>

  <ol><li>表示日期的 <a href=#valid-date-string id=本地日期和时间:valid-date-string-2>合法的日期字符串</a><li>一个 U+0054 LATIN CAPITAL LETTER T 字符 （T）<li>表示时间的 <a href=#valid-time-string id=本地日期和时间:valid-time-string-2>合法的时间字符串</a>，
   按给定时间的最短可能的字符串表示。（例如如果秒是 0 的话忽略秒的部分）</ol>

  

  <p><dfn id=parse-a-local-date-and-time-string>解析本地日期和时间字符串</dfn> 的规则如下。
  将会返回一个日期或者什么都不返回。
  如果算法的任何一个点说它 "失败了"，这意味着它在那一点退出并什么都不返回。</p>

  <ol><li><p>令<var>input</var> 为待解析字符串。<li><p>令<var>position</var> 为 <var>input</var> 内的指针初始指向字符串开始。<li><p><a href=#parse-a-date-component id=本地日期和时间:parse-a-date-component>解析日期部分</a> 来获得 <var>year</var>，<var>month</var> 和 <var>day</var>。
   如果它没有返回，则失败。</p>

   <li><p>如果 <var>position</var> 超出了 <var>input</var> 的末尾或者
   <var>position</var> 处的字符是 U+0054 LATIN CAPITAL LETTER T 字符（T）
   或 U+0020 SPACE 字符，则失败。否则将 <var>position</var> 前进一个字符。<li><p><a href=#parse-a-time-component id=本地日期和时间:parse-a-time-component>解析时间部分</a> 来获得 <var>hour</var>，<var>minute</var> 和 <var>second</var>。
   如果它没有返回，则失败。</p>

   <li><p>如果 <var>position</var> <em>没有</em> 超出 <var>input</var> 的结尾，则失败。<li><p>令<var>date</var> 的年月日分别为 <var>year</var>，<var>month</var>，<var>day</var>。<li><p>令<var>time</var> 的时分秒分别为 <var>hour</var>，<var>minute</var>，<var>second</var>。<li><p>返回 <var>date</var> 和 <var>time</var>。</ol>

  



  <h5 id=时区><span class=secno>2.4.5.6</span> 时区<a href=#时区 class=self-link></a></h5>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/common-microsyntaxes/dates-and-times/time-zones.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/common-microsyntaxes/dates-and-times/time-zones.en.html></div>

  <p><dfn id=concept-timezone>时区</dfn> 由一个小时和分钟的有符号数字组成。</p>

  <p>表示时区的 <dfn id=valid-time-zone-offset-string>合法的时区字符串</dfn>
  包含下列之一：</p>


  <ul><li><p>一个 U+005A LATIN CAPITAL LETTER Z 字符 （Z），只有时区为 UTC 时才允许<li>

    <p>或者下列有序的几部分：</p>

    <ol><li>一个 U+002B PLUS SIGN 字符 （+） 或者（如果时区不为零的话）U+002D
     HYPHEN-MINUS 字符（-），表示时区偏移的符号<li>两个 <a href=https://infra.spec.whatwg.org/#ascii-digit id=时区:ascii-digits data-x-internal=ascii-digits>ASCII 数字</a>，
     表示时区偏移的小时 <var>hour</var>，
     必须在 0 ≤ <var>hour</var> ≤ 23 范围内<li>可选地，一个 U+003A COLON 字符 （:）<li>两个 <a href=https://infra.spec.whatwg.org/#ascii-digit id=时区:ascii-digits-2 data-x-internal=ascii-digits>ASCII 数字</a>，
     表示时区偏移的分钟 <var>minute</var>，
     必须在 0 ≤ <var>minute</var> ≤ 59 范围内</ol>

   </ul>

  <p class=note>此格式允许从-23:59到+23:59的时区偏移。
  现在，实际时区的偏移范围是-12:00到+14:00，分钟分量始终是 00，30 或 45。
  但不能保证情况永远是这样的，因为时区被用作政治足球，受到异想天开的政策的支配。</p>

  <p class=note>另请参阅下面的
  <a href=#concept-datetime id=时区:concept-datetime>全球日期和时间</a>
  部分的使用说明和示例，具体了解如何在正式的时区形成之前的历史时间上使用时区偏移。</p>

  

  <p><dfn id=parse-a-time-zone-offset-string>解析时区偏移字符串</dfn> 的规则如下。
  将会返回一个时区偏移或者什么都不返回。
  如果算法的任何一个点说它 "失败了"，这意味着它在那一点退出并什么都不返回。</p>

  <ol><li><p>令<var>input</var> 为待解析字符串。<li><p>令<var>position</var> 为 <var>input</var> 内的指针初始指向字符串开始。<li><p><a href=#parse-a-time-zone-offset-component id=时区:parse-a-time-zone-offset-component>解析时区偏移部分</a> 来获得
   <var>timezone<sub>hours</sub></var> 和 <var>timezone<sub>minutes</sub></var>。
   如果它没有返回，则失败。</p>

   <li><p>如果 <var>position</var> <em>没有</em> 超出 <var>input</var> 的结尾，则失败。<li><p>返回距离 UTC <var>timezone<sub>hours</sub></var> 小时
   <var>timezone<sub>minutes</sub></var> 分钟的时区偏移。</ol>

  <p>给定 <var>input</var> 字符串和位置 <var>position</var>，
  <dfn id=parse-a-time-zone-offset-component>解析时区偏移部分</dfn> 的规则如下。
  将会返回一个时区偏移的小时和分钟，或者什么都不返回。
  如果算法的任何一个点说它 "失败了"，这意味着它在那一点退出并什么都不返回。</p>

  <ol><li>

    <p>如果 <var>position</var> 处的字符是一个 U+005A LATIN CAPITAL LETTER Z 字符（Z），则：</p>

    <ol><li><p>令<var>timezone<sub>hours</sub></var> 为 0。<li><p>令<var>timezone<sub>minutes</sub></var> 为 0。<li><p>将 <var>position</var> 前进到 <var>input</var> 的下一个字符。</ol>

    <p>否则，如果 <var>position</var> 是 U+002B PLUS SIGN （+）或 U+002D HYPHEN-MINUS （-），则：</p>

    <ol><li><p>如果 <var>position</var> 处的字符是一个 U+002B PLUS SIGN （+），令 <var>sign</var> 为 "正"。
     如果它是一个 U+002D HYPHEN-MINUS （-），则令 <var>sign</var> 为 "负"。<li><p>将 <var>position</var> 前进到 <var>input</var> 的下一个字符。<li><p>从 <var>input</var> 中给定的位置 <var>position</var>
     <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=时区:collect-a-sequence-of-code-points data-x-internal=collect-a-sequence-of-code-points>收集</a> <a href=https://infra.spec.whatwg.org/#ascii-digit id=时区:ascii-digits-3 data-x-internal=ascii-digits>ASCII 数字</a>
     组成的代码点序列。令 <var>s</var> 为收集到的序列。<li>

      <p>如果 <var>s</var> 恰好是两个字符长度，则：</p>

      <ol><li><p>将 <var>s</var> 解释为10进制整数，并赋值给 <var>timezone<sub>hours</sub></var>。<li><p>如果 <var>position</var> 超出了 <var>input</var> 的末尾或者 <var>position</var> 处的字符不是 U+003A COLON  则失败。
       否则将 <var>position</var> 前进一个字符。<li><p>从 <var>input</var> 中给定的位置 <var>position</var>
       <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=时区:collect-a-sequence-of-code-points-2 data-x-internal=collect-a-sequence-of-code-points>收集</a> <a href=https://infra.spec.whatwg.org/#ascii-digit id=时区:ascii-digits-4 data-x-internal=ascii-digits>ASCII 数字</a>
       组成的代码点序列。 如果收集到的序列不是恰好 2 个字符则失败。
       否则将结果序列解释为 10 进制整数。令那个数为 <var>timezone<sub>minutes</sub></var>。</ol>

      <p>如果 <var>s</var> 恰好是 4 个字符长度，则：</p>

      <ol><li><p>将 <var>s</var> 的前两个字解释为 10 进制整数，并赋值给 <var>timezone<sub>hours</sub></var>。<li><p>将 <var>s</var> 的后两个字解释为 10 进制整数，并赋值给 <var>timezone<sub>minutes</sub></var>。</ol>

      <p>其他情况失败。</p>

     <li>如果 <var>timezone<sub>hours</sub></var> 不在
     0 ≤ <var>timezone<sub>hours</sub></var> ≤ 23 范围内则失败。<li>如果 <var>sign</var> 为 "负"，则对 <var>timezone<sub>hours</sub></var> 求反。<li>如果 <var>timezone<sub>minutes</sub></var> 不在
     0 ≤ <var>timezone<sub>minutes</sub></var> ≤ 59 范围内则失败。<li>如果 <var>sign</var> 为 "负"，则对 <var>timezone<sub>minutes</sub></var> 求反。</ol>

    <p>其他情况失败。</p>

   <li><p>返回 <var>timezone<sub>hours</sub></var> 和 <var>timezone<sub>minutes</sub></var>。</ol>

  



  <h5 id=全球日期和时间><span class=secno>2.4.5.7</span> 全球日期和时间<a href=#全球日期和时间 class=self-link></a></h5>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/common-microsyntaxes/dates-and-times/global-dates-and-times.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/common-microsyntaxes/dates-and-times/global-dates-and-times.en.html></div>

  <p><dfn id=concept-datetime>全球日期和时间</dfn> 由一个特定的
  <a href=#proleptic-gregorian-date id=全球日期和时间:proleptic-gregorian-date>外推格里历日期</a>（包含年、月、日）
  和时间（包含时、分、秒，以及秒的小数），以及附加的时区信息，一个包括小时和分钟的有符号数。<a href=references.html#refsGREGORIAN>[GREGORIAN]</a></p>

  <p>表示日期、时间和时区的的
  <dfn id=valid-global-date-and-time-string>合法的全球日期和时间字符串</dfn>
  由以下有序的部分组成：</p>

  <ol><li>表示日期的 <a href=#valid-date-string id=全球日期和时间:valid-date-string>合法的日期字符串</a><li>一个 U+0054 LATIN CAPITAL LETTER T 字符（T）或者 U+0020 SPACE 字符<li>表示时间的 <a href=#valid-time-string id=全球日期和时间:valid-time-string>合法的时间字符串</a><li>表示时区的 <a href=#valid-time-zone-offset-string id=全球日期和时间:valid-time-zone-offset-string>合法的时区偏移字符串</a></ol>

  <p>在 20 世纪中叶 UTC 形成之前的时间必须按照 UT1（0° 经度处的太阳时）而不是 UTC（
  UT1 的近似，按照 SI 制秒增长）表示和解析。时区形成前的时间必须按照 UT1 时间表示和解析，
  且带有明确的时区信息，以此来近似适当的本地时间和伦敦格林尼治观测到的时间差。</p>

  <div class=example>

   <p>下面是按照 <a href=#valid-global-date-and-time-string id=全球日期和时间:valid-global-date-and-time-string>合法的全球日期和时间字符串</a> 编写的日期示例。</p>

   <dl><dt>"<code>0037-12-13 00:00Z</code>"<dd>使用伦敦时间的地区的午夜，罗马皇帝 Nero 的生日。关于实际对应的日期见下文的进一步讨论。<dt>"<code>1979-10-14T12:00:00.001-04:00</code>"<dd>美国东海岸夏令时的 1979 年 10 月 14 日正午之后的一毫秒。<dt>"<code>8592-01-01T02:09+02:09</code>"<dd>UTC 时间 8592 年 1 月 1 日午夜。其时区是快于 UTC 的 2 小时 9 分钟，
    目前还没有这个时区，尽管如此，它是允许的。</dl>

   <p>关于这些日期，值得一提的是：</p>

   <ul><li>少于四位数字的年份必须用零填充，即 "37-12-13" 不是合法的日期。<li>"<code>T</code>" 只能被一个空格代替。
    字符串 "<code>2001-12-21  12:00Z</code>"（两部分之间有两个空格）
    不能成功解析。<li>为了无歧义地表示引入格里历（只要能无歧义地标识 UTC 形成之前的时刻）之前的时刻，
    必须首先将日期从当时使用的日历（例如儒略历）转换为格里历。Nero 出生的日期是儒略历的 37 年 12 月 15 日，
    在 <a href=#proleptic-gregorian-date id=全球日期和时间:proleptic-gregorian-date-2>外推格里历日期</a> 中是 37 年 12 月 13 日。<li>事件和时区偏移部分不是可选的。<li>第 1 年之前的日期在本版本的 HTML 中不能表示为日期时间格式。<li>古代特定事件的时代最多只是近似的，因为当时的时间并没有得到很好的协调和测量，直到最近几十年。<li>时间偏移会受夏令时的影响。</ul>

  </div>

  

  <p><dfn id=parse-a-global-date-and-time-string>解析全球日期和时间字符串</dfn> 的规则如下。
  将会返回一个带有时区信息（为了能够往返转换或显示等用途）的 UTC 时间，或者什么都不返回。
  如果算法的任何一个点说它 "失败了"，这意味着它在那一点退出并什么都不返回。</p>

  <ol><li><p>令<var>input</var> 为待解析字符串。<li><p>令<var>position</var> 为 <var>input</var> 内的指针初始指向字符串开始。<li><p><a href=#parse-a-date-component id=全球日期和时间:parse-a-date-component>解析日期部分</a> 来获得 <var>year</var>，<var>month</var> 和 <var>day</var>。
   如果它没有返回，则失败。</p>

   <li><p>如果 <var>position</var> 超出了 <var>input</var> 的末尾或者
   <var>position</var> 处的字符是 U+0054 LATIN CAPITAL LETTER T 字符（T）
   或 U+0020 SPACE 字符，则失败。否则将 <var>position</var> 前进一个字符。<li><p><a href=#parse-a-time-component id=全球日期和时间:parse-a-time-component>解析时间部分</a> 来获得 <var>hour</var>，<var>minute</var> 和 <var>second</var>。
   如果它没有返回，则失败。</p>

   <li><p>如果 <var>position</var> 超出了 <var>input</var> 的结尾，则失败。<li><p><a href=#parse-a-time-zone-offset-component id=全球日期和时间:parse-a-time-zone-offset-component>解析时区偏移部分</a> 来获得
   <var>timezone<sub>hours</sub></var> 和 <var>timezone<sub>minutes</sub></var>。 如果它没有返回，则失败。</p>

   <li><p>如果 <var>position</var> <em>没有</em> 越过 <var>input</var> 的结尾，则失败。<li><p>令时刻 <var>time</var> 的年月日时分秒分别为 <var>year</var>，<var>month</var>，<var>day</var>，
   <var>hour</var>，<var>minute</var>，<var>second</var>，减去
   <var>timezone<sub>hours</sub></var> 小时 <var>timezone<sub>minutes</sub></var> 分钟。
   该时刻的时区为 UTC 时区。<li><p>令<var>timezone</var> 为距 UTC <var>timezone<sub>hours</sub></var> 小时
   <var>timezone<sub>minutes</sub></var> 分钟的时区偏移。<li><p>返回 <var>time</var> 和 <var>timezone</var>。</ol>

  



  <h5 id=星期><span class=secno>2.4.5.8</span> 星期<a href=#星期 class=self-link></a></h5>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/common-microsyntaxes/dates-and-times/weeks.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/common-microsyntaxes/dates-and-times/weeks.en.html></div>

  <p><dfn id=concept-week>星期</dfn> 由一个表示年的数字（星期年）和一个表示星期的数字（周号）组成，表示从周一开始的 7 天时间段。
  在这个日历系统中，每个星期年有 52 或 53 个这样的 7 天，定义如下。这样的 7 天周期从格里历 1969 年 12 月 29 日（1969-12-29）开始，
  这一周被定义为 1970 年的第 1 周。后续的星期都依次进行编号。一个星期年的第一周之前是上一个星期年的最后一周，反之亦反。
  <a href=references.html#refsGREGORIAN>[GREGORIAN]</a></p>

  <p>如果编号为 <var>year</var> 的星期年对应的 <a href=#proleptic-gregorian-calendar id=星期:proleptic-gregorian-calendar>外推格里历</a> 年 <var>year</var>
  第一天（1月1日）是周二，或者这一天是周三且 <var>year</var> 可被 400 整除或可被 4 整除但不可被 100 整除，
  那么这一星期年有 53 周。其他所有星期年都有 52 周。</p>

  <p>有 53 周的星期年的 <dfn id=week-number-of-the-last-day>最后一天的周号</dfn> 是 53；
  有 52 周的星期年的最后一天的周号是 52。</p>

  <p class=note>特定日期的星期年的编号可能与包含这一天的
  <a href=#proleptic-gregorian-calendar id=星期:proleptic-gregorian-calendar-2>外推格里历</a>
  年不同。 星期年 <var>y</var> 的第一周为包含第一个周二的格里历年 <var>y</var>。</p>

  <p class=note>为了现代目的，这里定义的 <a href=#concept-week id=星期:concept-week>星期</a>
  等价于定义在 ISO 8601 中的 ISO 星期。 <a href=references.html#refsISO8601>[ISO8601]</a></p>

  <p>表示星期年 <var>year</var> 和周号 <var>week</var> 的
  <dfn id=valid-week-string>合法的星期字符串</dfn> 有下列几个有序的组成部分：</p>

  <ol><li>表示 <var>year</var> 的 4 个或更多 <a href=https://infra.spec.whatwg.org/#ascii-digit id=星期:ascii-digits data-x-internal=ascii-digits>ASCII 数字</a>，其中 <var>year</var> > 0<li>一个 U+002D HYPHEN-MINUS 字符 （-）<li>一个 U+0057 LATIN CAPITAL LETTER W 字符 （W）<li>表示周号 <var>week</var> 的两个 <a href=https://infra.spec.whatwg.org/#ascii-digit id=星期:ascii-digits-2 data-x-internal=ascii-digits>ASCII 数字</a>，其中
   1 ≤ <var>week</var> ≤ <var>maxweek</var>。
   <var>maxweek</var> 为星期年 <var>year</var> <a href=#week-number-of-the-last-day id=星期:week-number-of-the-last-day>最后一天的周号</a>。</ol>

  

  <p><dfn id=parse-a-week-string>解析星期字符串</dfn> 的规则如下。将会返回星期年和周号两个数字，或者什么都不返回。
  如果算法的任何一个点说它 "失败了"，这意味着它在那一点退出并什么都不返回。</p>

  <ol><li><p>令<var>input</var> 为待解析字符串。<li><p>令<var>position</var> 为 <var>input</var> 内的指针初始指向字符串开始。<li><p>从 <var>input</var> 中给定的位置 <var>position</var>
   <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=星期:collect-a-sequence-of-code-points data-x-internal=collect-a-sequence-of-code-points>收集</a> <a href=https://infra.spec.whatwg.org/#ascii-digit id=星期:ascii-digits-3 data-x-internal=ascii-digits>ASCII 数字</a>
   组成的代码点序列。 如果收集到的序列长度小于 4 个字符长度则失败。
   否则将结果序列解释为 10 进制整数。令那个数为 <var>year</var>。<li><p>如果 <var>year</var> 小于等于零则失败。<li><p>如果 <var>position</var> 超出了 <var>input</var> 的末尾或者
   <var>position</var> 处的字符不是 U+002D HYPHEN-MINUS 字符则失败。
   否则将 <var>position</var> 前进一个字符。<li><p>如果 <var>position</var> 超出了 <var>input</var> 的末尾或者
   <var>position</var> 处的字符不是 U+0057 LATIN CAPITAL LETTER W 字符（W）则失败。
   否则将 <var>position</var> 前进一个字符。<li><p>从 <var>input</var> 中给定的位置 <var>position</var>
   <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=星期:collect-a-sequence-of-code-points-2 data-x-internal=collect-a-sequence-of-code-points>收集</a> <a href=https://infra.spec.whatwg.org/#ascii-digit id=星期:ascii-digits-4 data-x-internal=ascii-digits>ASCII 数字</a>
   组成的代码点序列。 如果收集到的序列不是恰好 2 个字符长度则失败。
   否则将结果序列解释为 10 进制整数。令那个数为 <var>week</var>。<li><p>令<var>maxweek</var> 为 <var>year</var> 年 <a href=#week-number-of-the-last-day id=星期:week-number-of-the-last-day-2>最后一天的周号</a>。<li><p>如果 <var>week</var> 不是在 1 ≤ <var>week</var> ≤ <var>maxweek</var> 范围内的数字就失败。<li><p>如果 <var>position</var> <em>没有</em> 超出 <var>input</var> 末尾，则失败。<li><p>返回星期年 <var>year</var> 和周号 <var>week</var>。</ol>

  



  <h5 id=时间间隔><span class=secno>2.4.5.9</span> 时间间隔<a href=#时间间隔 class=self-link></a></h5>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/common-microsyntaxes/dates-and-times/durations.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/common-microsyntaxes/dates-and-times/durations.en.html></div>

  

  <p><dfn id=concept-duration>时间间隔</dfn> 由  秒数构成。</p>

  <p class=note>由于月和秒是不可比较的（一月没有精确的秒数，
  它的长度取决于究竟从哪天算起），本标准中定义的 <a href=#concept-duration id=时间间隔:concept-duration>时间间隔</a>
  不允许包含  月（或者年，它等于12个月）。
  时间间隔只能描述秒数。</p>

  <p>表示 <a href=#concept-duration id=时间间隔:concept-duration-2>时间间隔</a> <var>t</var> 的
  <dfn id=valid-duration-string>合法的时间间隔字符串</dfn> 的组成方式可以是下列任何一种：</p>

  <ul><li>

    

    

    <p>字面量 U+0050 LATIN CAPITAL LETTER P 字符加一个或更多下列有序的子组件，
    其中 天、小时、分钟和秒的数量对应
    <var>t</var> 中同样数量的秒：</p>

    <ol><li><p>一个或更多 <a href=https://infra.spec.whatwg.org/#ascii-digit id=时间间隔:ascii-digits data-x-internal=ascii-digits>ASCII 数字</a> 加 U+0044 LATIN CAPITAL LETTER D
     字符，表示天数。<li>

      <p>一个 U+0054 LATIN CAPITAL LETTER T 字符加一个或更多下列子组件，按照给定的顺序：</p>

      <ol><li><p>一个或更多 <a href=https://infra.spec.whatwg.org/#ascii-digit id=时间间隔:ascii-digits-2 data-x-internal=ascii-digits>ASCII 数字</a> 加一个 U+0048 LATIN CAPITAL LETTER H 字符，表示小时数。<li><p>一个或更多 <a href=https://infra.spec.whatwg.org/#ascii-digit id=时间间隔:ascii-digits-3 data-x-internal=ascii-digits>ASCII 数字</a> 加一个 U+004D LATIN CAPITAL LETTER M 字符，表示分钟数。<li>

        <p>下列组件：</p>

        <ol><li><p>一个或更多 <a href=https://infra.spec.whatwg.org/#ascii-digit id=时间间隔:ascii-digits-4 data-x-internal=ascii-digits>ASCII 数字</a>，表示秒数。<li><p>可选地，一个 U+002E FULL STOP 字符（.） 加一个、两个或三个 <a href=https://infra.spec.whatwg.org/#ascii-digit id=时间间隔:ascii-digits-5 data-x-internal=ascii-digits>ASCII 数字</a>，
         表示秒的小数组件。<li><p>一个 U+0053 LATIN CAPITAL LETTER S 字符。</ol>

       </ol>

     </ol>

    <p class=note>和本标准中定义的其他时间日期相关的微语法一样，时间间隔也基于 ISO 8601 中定义的一种格式。 <a href=references.html#refsISO8601>[ISO8601]</a></p>

   <li>

    <p>一个或更多任意顺序的 <a href=#duration-time-component id=时间间隔:duration-time-component>时间间隔组件</a>，
    每个都有不同的 <a href=#duration-time-component-scale id=时间间隔:duration-time-component-scale>时间间隔</a>；
    它们表示的描述之和等于 <var>t</var> 中的秒数。</p>

    <p><dfn id=duration-time-component>时间间隔组件</dfn> 是一个包含下列组件的字符串：</p>

    <ol><li><p>零个或更多 <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=时间间隔:space-characters data-x-internal=space-characters>ASCII 空格</a>。<li><p>一个或更多 <a href=https://infra.spec.whatwg.org/#ascii-digit id=时间间隔:ascii-digits-6 data-x-internal=ascii-digits>ASCII 数字</a>，在
     <a href=#duration-time-component-scale id=时间间隔:duration-time-component-scale-2>单位倍数</a>（见下文）下的秒的数量。<li><p>如果 <a href=#duration-time-component-scale id=时间间隔:duration-time-component-scale-3>倍数</a> 为 1 （即单位是秒），
     则可以有一个 U+002E FULL STOP 字符（.）接着一个、两个或三个 <a href=https://infra.spec.whatwg.org/#ascii-digit id=时间间隔:ascii-digits-7 data-x-internal=ascii-digits>ASCII 数字</a>，
     表示秒的小数组件。<li><p>零个或更多 <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=时间间隔:space-characters-2 data-x-internal=space-characters>ASCII 空白</a>。<li>

      <p>下面的字符之一，表示 <a href=#duration-time-component id=时间间隔:duration-time-component-2>时间间隔组件</a>
      的数字部分使用的时间单位的 <dfn id=duration-time-component-scale>倍数</dfn>：</p>

      <dl><dt>U+0057 LATIN CAPITAL LETTER W 字符<dt>U+0077 LATIN SMALL LETTER W 字符<dd>星期。倍数是 604800。<dt>U+0044 LATIN CAPITAL LETTER D 字符<dt>U+0064 LATIN SMALL LETTER D 字符<dd>天。倍数是 86400。<dt>U+0048 LATIN CAPITAL LETTER H 字符<dt>U+0068 LATIN SMALL LETTER H 字符<dd>小时。倍数是 3600。<dt>U+004D LATIN CAPITAL LETTER M 字符<dt>U+006D LATIN SMALL LETTER M 字符<dd>分钟。倍数是 60。<dt>U+0053 LATIN CAPITAL LETTER S 字符<dt>U+0073 LATIN SMALL LETTER S 字符<dd>秒。倍数是 1。</dl>

     <li><p>零个或更多 <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=时间间隔:space-characters-3 data-x-internal=space-characters>ASCII 空格</a>。</ol>

    <p class=note>这并不基于 ISO 8601 中的任何格式。这是为了提出一种比 ISO 8601 时间间隔格式更加人类可读的选择。</p>

   </ul>

  

  <p><dfn id=parse-a-duration-string>解析时间间隔字符串</dfn> 的规则如下。将会返回一个
  <a href=#concept-duration id=时间间隔:concept-duration-3>时间间隔</a> 或者什么都不返回。
  如果算法的任何一个点说它 "失败了"，这意味着它在那一点退出并什么都不返回。</p>

  <ol><li><p>令<var>input</var> 为待解析字符串。<li><p>令<var>position</var> 为 <var>input</var> 内的指针初始指向字符串开始。<li><p>令<var>months</var>，<var>seconds</var>，和 <var>component count</var> 均为零。<li>

    <p>令<var>M-disambiguator</var> 为 <i>minutes</i>。</p>

    
    <p class=note>该标志的另一个值是 <i>months</i>。它用来消除 ISO8601 时间间隔中 "M" 单位的歧义，
    在 ISO8601 中月和分钟都使用这个单位。虽然月是不允许的，但为了向前兼容，
    以及避免误解 ISO8601 时间间隔（在其他上下文中仍然是合法的），
    仍然对月进行了解析。</p>

   <li><p>从 <var>position</var> 开始 <a href=https://infra.spec.whatwg.org/#skip-ascii-whitespace id=时间间隔:skip-ascii-whitespace data-x-internal=skip-ascii-whitespace>跳过</a> <var>input</var> 中的 ASCII 空格。<li><p>如果 <var>position</var> 越过了 <var>input</var> 的结尾，则失败。<li><p>如果 <var>position</var> 处的字符是一个 U+0050 LATIN CAPITAL LETTER P 字符，
   则将 <var>position</var> 前进一个字符。将 <var>M-disambiguator</var> 设置为 <i>months</i>，
   并从 <var>position</var> 开始 <a href=https://infra.spec.whatwg.org/#skip-ascii-whitespace id=时间间隔:skip-ascii-whitespace-2 data-x-internal=skip-ascii-whitespace>跳过</a> <var>input</var> 中的 ASCII 空格。<li>

    <p>while true:</p>

    <ol><li><p>令<var>units</var> 为 undefined。它的值可能是：
     <i>years</i>，<i>months</i>，<i>weeks</i>，<i>days</i>，<i>hours</i>，<i>minutes</i>，或 <i>seconds</i>。<li><p>令<var>next character</var> 为 undefined。用来从 <var>input</var> 中处理字符。<li><p>如果 <var>position</var> 越过了 <var>input</var> 的结尾，则 break。<li><p>如果 <var>position</var> 处的字符是一个 U+0050 LATIN CAPITAL LETTER T 字符，
     则将 <var>position</var> 前进一个字符。将 <var>M-disambiguator</var> 设置为 <i>minutes</i>，
     并从 <var>position</var> 开始 <a href=https://infra.spec.whatwg.org/#skip-ascii-whitespace id=时间间隔:skip-ascii-whitespace-3 data-x-internal=skip-ascii-whitespace>跳过</a> <var>input</var> 中的 ASCII 空格。<li><p>将 <var>next character</var> 设置为 <var>input</var> 中 <var>position</var> 处的字符。<li>

      <p>如果 <var>next character</var> 为一个 U+002E FULL STOP 字符 （.），则令 <var>N</var> 等于 0。
      （不要前进 <var>position</var>。下面会处理它。）</p>

      <p>否则，如果 <var>next character</var> 是一个 <a href=https://infra.spec.whatwg.org/#ascii-digit id=时间间隔:ascii-digits-8 data-x-internal=ascii-digits>ASCII 数字</a>，则从
      <var>input</var> 中给定的位置 <var>position</var>
      <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=时间间隔:collect-a-sequence-of-code-points data-x-internal=collect-a-sequence-of-code-points>收集</a> <a href=https://infra.spec.whatwg.org/#ascii-digit id=时间间隔:ascii-digits-9 data-x-internal=ascii-digits>ASCII 数字</a>
      组成的代码点序列。将结果序列解释为 10 进制整数。令 <var>N</var> 为那个数字。</p>

      <p>否则如果 <var>next character</var> 不是数字，则失败。</p>

     <li><p>如果 <var>position</var> 越过了 <var>input</var> 的结尾，则 break。<li><p>将 <var>next character</var> 设置为 <var>input</var> 中 <var>position</var> 处的字符，
     这次将 <var>position</var> 前进到下一字符。
     （如果 <var>next character</var> 刚才是一个 U+002E FULL STOP 字符（.），它将仍然是那个字符。）<li>

      <p>如果 <var>next character</var> 是 U+002E （.），则：</p>

      <ol><li><p>从 <var>input</var> 中给定的位置 <var>position</var>
       <a href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points id=时间间隔:collect-a-sequence-of-code-points-2 data-x-internal=collect-a-sequence-of-code-points>收集</a> <a href=https://infra.spec.whatwg.org/#ascii-digit id=时间间隔:ascii-digits-10 data-x-internal=ascii-digits>ASCII 数字</a>
       组成的代码点序列。令 <var>day</var> 为结果序列。<li><p>如果 <var>s</var> 是空字符串则失败。<li><p>令<var>length</var> 为 <var>s</var> 中的字符数。<li><p>令<var>fraction</var> 为将 <var>s</var> 解释为10进制数的结果，
       把这个数除以 <span>10<sup><var>length</var></sup></span>。<li><p>将 <var>N</var> 增加 <var>fraction</var>。<li><p>从 <var>position</var> 开始 <a href=https://infra.spec.whatwg.org/#skip-ascii-whitespace id=时间间隔:skip-ascii-whitespace-4 data-x-internal=skip-ascii-whitespace>跳过</a> <var>input</var> 中的 ASCII 空格。<li><p>如果 <var>position</var> 越过了 <var>input</var> 的结尾，则失败。<li><p>将 <var>next character</var> 设为 <var>input</var> 中 <var>position</var> 指向的字符，
       并将 <var>position</var> 前进到下一字符。<li><p>如果 <var>next character</var> 既不是 U+0053 LATIN CAPITAL LETTER S
       字符也不是 U+0073 LATIN SMALL LETTER S 字符，则失败。<li><p>将 <var>units</var> 设为 <i>seconds</i>。</ol>

      <p>否则：</p>

      <ol><li><p>如果 <var>next character</var> 是 <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=时间间隔:space-characters-4 data-x-internal=space-characters>ASCII 空格</a>，
       那么从 <var>position</var> 开始 <a href=https://infra.spec.whatwg.org/#skip-ascii-whitespace id=时间间隔:skip-ascii-whitespace-5 data-x-internal=skip-ascii-whitespace>跳过</a> <var>input</var> 中的 ASCII 空格。
       将 <var>next character</var> 设为 <var>input</var> 中 <var>position</var> 指向的字符，
       并将 <var>position</var> 前进到下一字符。<li>

        

        <p>如果 <var>next character</var> 是一个 U+0059 LATIN CAPITAL LETTER Y 字符或
        U+0079 LATIN SMALL LETTER Y 字符，将 <var>units</var> 设置为 <i>years</i> 并将
        <var>M-disambiguator</var> 设置为 <i>months</i>。</p>

        <p>如果 <var>next character</var> 是一个 U+004D LATIN CAPITAL LETTER M 字符或
        U+006D LATIN SMALL LETTER M 字符，且 <var>M-disambiguator</var> 是
        <i>months</i>，则将 <var>units</var> 设置为 <i>months</i>。</p>

        <p>如果 <var>next character</var> 是一个 U+0057 LATIN CAPITAL LETTER W 或
        U+0077 LATIN SMALL LETTER W 字符，将 <var>units</var> 设置为 <i>weeks</i> 并将
        <var>M-disambiguator</var> 设置为 <i>minutes</i>。</p>

        <p>如果 <var>next character</var> 是一个 U+0044 LATIN CAPITAL LETTER D 或
        U+0064 LATIN SMALL LETTER D 字符，将 <var>units</var> 设置为 <i>days</i> 并将
        <var>M-disambiguator</var> 设置为 <i>minutes</i>。</p>

        <p>如果 <var>next character</var> 是一个 U+0048 LATIN CAPITAL LETTER H 或
        U+0068 LATIN SMALL LETTER H 字符，将 <var>units</var> 设置为 <i>hours</i> 并将
        <var>M-disambiguator</var> 设置为 <i>minutes</i>。</p>

        <p>如果 <var>next character</var> 是一个 U+004D LATIN CAPITAL LETTER M 字符或
        U+006D LATIN SMALL LETTER M 字符，且 <var>M-disambiguator</var> 是
        <i>minutes</i>，则将 <var>units</var> 设置为 <i>minutes</i>。</p>

        <p>如果 <var>next character</var> 是一个 U+0053 LATIN CAPITAL LETTER S 或
        U+0073 LATIN SMALL LETTER S 字符，将 <var>units</var> 设置为 <i>seconds</i> 并将
        <var>M-disambiguator</var> 设置为 <i>minutes</i>。</p>

        <p>否则如果 <var>next character</var> 不是上述任何字符，则失败。</p>

       </ol>

     <li><p>递增 <var>component count</var>。<li><p>令<var>multiplier</var> 为 1。<li><p>如果 <var>units</var> 为 <i>years</i>，将 <var>multiplier</var> 乘以 12 并设置
     <var>units</var> 为 <i>months</i>。<li>

      <p>如果 <var>units</var> 为 <i>months</i>，把 <var>N</var> 与 <var>multiplier</var> 的乘积加到 <var>months</var> 上。</p>

      <p>否则：</p>

      <ol><li><p>如果 <var>units</var> 为 <i>weeks</i>，将 <var>multiplier</var> 乘以 7 并设置 <var>units</var> 为 <i>days</i>。<li><p>如果 <var>units</var> 为 <i>days</i>，将 <var>multiplier</var> 乘以 24 并设置 <var>units</var> 为 <i>hours</i>。<li><p>如果 <var>units</var> 为 <i>hours</i>，将 <var>multiplier</var> 乘以 60 并设置 <var>units</var> 为 <i>minutes</i>。<li><p>如果 <var>units</var> 为 <i>minutes</i>，将 <var>multiplier</var> 乘以 60 并设置 <var>units</var> 为 <i>seconds</i>。<li><p>否则 <var>units</var> 只能是 <i>seconds</i> 了。 将 <var>N</var> 与 <var>multiplier</var> 的乘积加到 <var>seconds</var> 上。</ol>

     <li><p>从 <var>position</var> 开始 <a href=https://infra.spec.whatwg.org/#skip-ascii-whitespace id=时间间隔:skip-ascii-whitespace-6 data-x-internal=skip-ascii-whitespace>跳过</a> <var>input</var> 中的 ASCII 空格。</ol>

   <li><p>如果 <var>component count</var> 为零，则失败。<li><p>如果 <var>months</var> 不为零，则失败。<li><p>返回包含 <var>seconds</var> 秒的 <a href=#concept-duration id=时间间隔:concept-duration-4>时间间隔</a>。</ol>

  



  <h5 id=模糊的时间><span class=secno>2.4.5.10</span> 模糊的时间<a href=#模糊的时间 class=self-link></a></h5>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/common-microsyntaxes/dates-and-times/vaguer-moments-in-time.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/common-microsyntaxes/dates-and-times/vaguer-moments-in-time.en.html></div>

  <p><dfn id=valid-date-string-with-optional-time>合法的可选时间的日期字符串</dfn>
  是下列中的一种：</p>

  <ul><li><a href=#valid-date-string id=模糊的时间:valid-date-string>合法的日期字符串</a><li><a href=#valid-global-date-and-time-string id=模糊的时间:valid-global-date-and-time-string>合法的全球日期与时间字符串</a></ul>

  

  <hr>

  <p><dfn id=parse-a-date-or-time-string>解析日期或时间字符串</dfn> 的规则如下。
  该算法将会返回一个 <a href=#concept-date id=模糊的时间:concept-date>date</a>，<a href=#concept-time id=模糊的时间:concept-time>time</a>，或 <a href=#concept-datetime id=模糊的时间:concept-datetime>全球日期和时间</a> 或者什么都不返回。
  如果算法的任何一个点说它 "失败了"，这意味着它在那一点退出并什么都不返回。</p>

  <ol><li><p>令<var>input</var> 为待解析字符串。<li><p>令<var>position</var> 为 <var>input</var> 内的指针初始指向字符串开始。<li><p>将 <var>start position</var> 设置为 <var>position</var>。<li><p>将 <var>date present</var> 和 <var>time present</var> 标志设置为 true。<li><p><a href=#parse-a-date-component id=模糊的时间:parse-a-date-component>解析日期部分</a> 来获得 <var>year</var>，<var>month</var> 和 <var>day</var>。
   如果它没有返回，设置 <var>date present</var> 为 false。</p>

   <li>

    <p>如果 <var>date present</var> 为 true，且 <var>position</var> 没有越过 <var>input</var> 的末尾，
    且 <var>position</var> 处的字符是 U+0054 LATIN CAPITAL LETTER T 字符 （T）或 U+0020 SPACE 字符，
    将 <var>position</var> 前进到 <var>input</var> 的下一个字符。</p>

    <p>否则，如果 <var>date present</var> 为 true，并且 <var>position</var> 越过了 <var>input</var> 的末尾或
    <var>position</var> 处的字符既不是 U+0054 LATIN CAPITAL LETTER T 字符 （T）也不是 U+0020 SPACE 字符，
    则设置 <var>time present</var> 为 false。</p>

    <p>否则，如果 <var>date present</var> 为 false，将 <var>position</var> 设置回 <var>start position</var>。</p>

   <li><p>如果 <var>time present</var> 为 true，则 <a href=#parse-a-time-component id=模糊的时间:parse-a-time-component>解析时间部分</a>
   来获得 <var>hour</var>，<var>minute</var> 和 <var>second</var>。 如果它没有返回，则失败。</p>

   <li><p>如果 <var>date present</var> 和 <var>time present</var> 标志都是 true，
   但 <var>position</var> 越过了 <var>input</var> 的末尾，则失败。<li><p>如果 <var>date present</var> 和 <var>time present</var> 标志都是 true，
   <a href=#parse-a-time-zone-offset-component id=模糊的时间:parse-a-time-zone-offset-component>解析时区偏移部分</a> 来获得
   <var>timezone<sub>hours</sub></var> 和 <var>timezone<sub>minutes</sub></var>。如果它没有返回则失败。</p>

   <li><p>如果 <var>position</var> <em>没有</em> 越过 <var>input</var> 的结尾，则失败。<li>

    <p>如果 <var>date present</var> 标志为 true 且 <var>time present</var> 标志为 false，
    则令 <var>date</var> 为年与日分别为 <var>year</var>，<var>month</var>，<var>day</var> 的日期并返回 <var>date</var>。</p>
    <p>否则，如果 <var>time present</var> 标志为 true 且 <var>date present</var> 标志为 false，
    则令 <var>time</var> 为时分秒分别为 <var>hour</var>，<var>minute</var>，<var>second</var> 的时间并返回 <var>time</var>。</p>

    <p>否则，令 <var>time</var> 为 <var>year</var> 年 <var>month</var> 月 <var>day</var> 日 <var>hour</var> 时m<var>minute</var> 分 <var>second</var> 秒，
    减去 <var>timezone<sub>hours</sub></var> 小时 <var>timezone<sub>minutes</sub></var>分钟，这一时刻是 UTC 时区的时间；
    令 <var>timezone</var> 距离 UTC <var>timezone<sub>hours</sub></var> 小时 <var>timezone<sub>minutes</sub></var> 分钟；
    返回 <var>time</var> 和 <var>timezone</var>。</p>

   </ol>

  



  <h4 id=colours><span class=secno>2.4.6</span> 颜色<a href=#colours class=self-link></a></h4>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/common-microsyntaxes/colors.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/common-microsyntaxes/colors.en.html></div>

  <p><dfn id=simple-colour>简单颜色</dfn>
  由三个在 0..255 范围的 8 位数字组成。
  分别表示 sRGB 色彩空间的颜色的红、绿、蓝分量。 <a href=references.html#refsSRGB>[SRGB]</a></p>

  <p><dfn id=valid-simple-colour>合法的简单颜色</dfn>
  字符串应恰好包含 7 个字符长度，
  第一个字符是 U+0023 NUMBER SIGN 字符（#），剩下的 6 个都是 <a href=https://infra.spec.whatwg.org/#ascii-hex-digit id=colours:ascii-hex-digits data-x-internal=ascii-hex-digits>ASCII 十六进制数</a>，
  其中前两个表示红色分量，中间两个表示绿色分量，最后两个表示蓝色分量，均为 16 进制。</p>

  <p><dfn id=valid-lowercase-simple-colour>
  合法的小写简单颜色</dfn> 字符串是
  不使用任何 U+0041 LATIN CAPITAL LETTER A 到 U+0046 LATIN CAPITAL LETTER F 字符的 <a href=#valid-simple-colour id=colours:valid-simple-colour>合法的简单颜色</a>。</p>

  

  <p><dfn id=rules-for-parsing-simple-colour-values>解析简单色值的规则</dfn> 由下列算法给出。
  被调用时必须依次执行这些步骤，在第一个有返回值的步骤中止。该算法将会返回一个 <a href=#simple-colour id=colours:simple-colour>简单颜色</a> 或者错误。</p>

  <ol><li><p>令<var>input</var> 为待解析字符串。<li><p>如果 <var>input</var> 不是恰好 7 个字符则返回一个错误。<li><p>如果 <var>input</var> 的首字符不是 U+0023 NUMBER SIGN 字符（#），则返回一个错误。<li><p>如果 <var>input</var> 的后面 6 个字符不都是 <a href=https://infra.spec.whatwg.org/#ascii-hex-digit id=colours:ascii-hex-digits-2 data-x-internal=ascii-hex-digits>ASCII 十六进制数字</a>，则返回一个错误。<li><p>令<var>result</var> 为一个 <a href=#simple-colour id=colours:simple-colour-2>简单颜色</a>。</p>

   <li><p>将第2、3个字符解释为 16 进制数，令该结果为 <var>result</var> 的红色分量。</p>
   <li><p>将第4、5个字符解释为 16 进制数，令该结果为 <var>result</var> 的绿色分量。</p>
   <li><p>将第6、7个字符解释为 16 进制数，令该结果为 <var>result</var> 的蓝色分量。</p>

   <li><p>返回 <var>result</var>。</p>

  </ol>

  <p>给定 <a href=#simple-colour id=colours:simple-colour-3>简单颜色</a>
  <dfn id=rules-for-serialising-simple-colour-values>序列化简单色值的规则</dfn>
  在下列算法中给出：</p>

  <ol><li><p>令<var>result</var> 为包含一个 U+0023 NUMBER SIGN 字符（#）的字符串。<li><p>将红、绿、蓝分量依次转换为两位 16 进制数字，并使用 <a href=https://infra.spec.whatwg.org/#ascii-lower-hex-digit id=colours:lowercase-ascii-hex-digits data-x-internal=lowercase-ascii-hex-digits>ASCII 小写十六进制数字</a>，
   需要的话填充零。将这些数字按照红绿蓝的顺序追加到 <var>result</var>。</p>

   <li><p>返回 <var>result</var>，它将是一个 <a href=#valid-lowercase-simple-colour id=colours:valid-lowercase-simple-colour>合法的小写简单颜色</a>。</ol>

  <hr>

  <p>有些废弃的遗留属性以更复杂的方式解析颜色，它们使用
  <dfn id=rules-for-parsing-a-legacy-colour-value>解析遗留色值的规则</dfn>，由以下算法给出。
  被调用时必须依次执行这些步骤，在第一个有返回值的步骤中止。该算法将会返回一个 <a href=#simple-colour id=colours:simple-colour-4>简单颜色</a> 或者错误。</p>

  <ol><li><p>令<var>input</var> 为待解析字符串。<li><p>如果 <var>input</var> 位空字符串则返回一个错误。<li><p>从 <var>input</var> 中 <a href=https://infra.spec.whatwg.org/#strip-leading-and-trailing-ascii-whitespace id=colours:strip-leading-and-trailing-ascii-whitespace data-x-internal=strip-leading-and-trailing-ascii-whitespace>移除前后的 ASCII 空白</a>。<li><p>如果 <var>input</var> <a href=https://infra.spec.whatwg.org/#ascii-case-insensitive id=colours:ascii-case-insensitive data-x-internal=ascii-case-insensitive>ASCII 大小写不敏感地</a> 匹配
   字符串 "<code>transparent</code>"，则返回一个错误。<li>

    <p>如果 <var>input</var> <a href=https://infra.spec.whatwg.org/#ascii-case-insensitive id=colours:ascii-case-insensitive-2 data-x-internal=ascii-case-insensitive>ASCII 大小写不敏感地</a> 匹配
    <a href=https://drafts.csswg.org/css-color/#named-color id=colours:named-color data-x-internal=named-color>命名颜色</a>，则返回该关键字对应的 <a href=#simple-colour id=colours:simple-colour-5>简单颜色</a>。 <a href=references.html#refsCSSCOLOR>[CSSCOLOR]</a></p>

    <p class=note>没有识别 <a href=https://www.w3.org/TR/css3-color/#css2-system>CSS2 System Colors</a>。</p>

   <li>

    <p>如果 <var>input</var> 是 4 个字符长度，且 <var>input</var> 的第一个字符是 U+0023（#），
    且 <var>input</var> 后面的 3 个字符都是 <a href=https://infra.spec.whatwg.org/#ascii-hex-digit id=colours:ascii-hex-digits-3 data-x-internal=ascii-hex-digits>ASCII 十六进制数字</a>，则：</p>

    <ol><li><p>令<var>result</var> 为一个 <a href=#simple-colour id=colours:simple-colour-6>简单颜色</a>。</p>

     <li><p>将 <var>input</var> 第二个字符解释为十六进制数字；令 <var>result</var> 的红色分量为得到的数字乘以 17。</p>

     <li><p>将 <var>input</var> 第三个字符解释为十六进制数字；令 <var>result</var> 的绿色分量为得到的数字乘以 17。</p>

     <li><p>将 <var>input</var> 第四个字符解释为十六进制数字；令 <var>result</var> 的蓝色分量为得到的数字乘以 17。</p>

     <li><p>返回 <var>result</var>。</p>

    </ol>

   <li><p>将 <var>input</var> 中任何代码点大于 U+FFFF 的字符（即任何不在基本多文种平面的字符）替换为两个字符的字符串 "<code>00</code>"。<li><p>如果 <var>input</var> 字符长度大于 128，把 <var>input</var> 截断到只有 128 个字符。<li><p>如果 <var>input</var> 中第一个字符是 U+0023 NUMBER SIGN 字符（#），移除它。<li><p>将 <var>input</var> 中任何非 <a href=https://infra.spec.whatwg.org/#ascii-hex-digit id=colours:ascii-hex-digits-4 data-x-internal=ascii-hex-digits>ASCII 十六进制数字</a> 的字符替换为 U+0030 DIGIT ZERO（0）。<li><p>While <var>input</var> 长度为零或者不是 3 的倍数，添加一个 U+0030 DIGIT ZERO （0）字符到 <var>input</var>。<li><p>将 <var>input</var> 分割成三个等长字符来获得三个分量。
   令<var>length</var> 为这三个分量的长度（<var>input</var> 长度的三分之一）。<li><p>如果 <var>length</var> 大于 8，移除每个分量中前面的 <span><var>length</var>-8</span> 个字符，并且令 <var>length</var> 为 8。<li><p>While <var>length</var> 大于 2 并且每个分量的第一个字符是 U+0030 DIGIT ZERO （0）字符，移除该字符并将 <var>length</var> 减一。<li><p>如果 <var>length</var> <em>仍然</em> 大于 2，截断每个分量，分别只保留前两个字符。<li><p>令<var>result</var> 为一个 <a href=#simple-colour id=colours:simple-colour-7>简单颜色</a>。</p>

   <li><p>将第一个分量解释为十六进制数字；令 <var>result</var> 的红色分量为得到的数字。<li><p>将第二个分量解释为十六进制数字；令 <var>result</var> 的绿色分量为得到的数字。<li><p>将第三个分量解释为十六进制数字；令 <var>result</var> 的蓝色分量为得到的数字。<li><p>返回 <var>result</var>。</p>

  </ol>

  

  <hr>

  <p class=note><a href=canvas.html#canvas-context-2d id=colours:canvas-context-2d>2D 图形上下文</a> 有单独的颜色语法，还处理了不透明度。</p>




  <h4 id=空格分隔的令牌><span class=secno>2.4.7</span> 空格分隔的令牌<a href=#空格分隔的令牌 class=self-link></a></h4>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/common-microsyntaxes/space-separated-tokens.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/common-microsyntaxes/space-separated-tokens.en.html></div>

  <p><dfn id=set-of-space-separated-tokens>空格分隔的令牌集合</dfn>
  是包含零个或更多词（称为令牌）的字符串，它们以一个或更多
  <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=空格分隔的令牌:space-characters data-x-internal=space-characters>ASCII 空白</a> 分隔，
  其中的词是由一个或更多的除 <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=空格分隔的令牌:space-characters-2 data-x-internal=space-characters>ASCII 空白</a>
  之外的字符组成的任何字符串。</p>

  <p>包含 <a href=#set-of-space-separated-tokens id=空格分隔的令牌:set-of-space-separated-tokens>空格分隔的令牌集合</a>
  的字符串前后都可能有 <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=空格分隔的令牌:space-characters-3 data-x-internal=space-characters>ASCII 空白</a>。</p>

  <p><dfn id=unordered-set-of-unique-space-separated-tokens>空格分隔的无序不重复令牌集合</dfn>
  是一个没有令牌重复的
  <a href=#set-of-space-separated-tokens id=空格分隔的令牌:set-of-space-separated-tokens-2>空格分隔的令牌集合</a>。</p>

  <p><dfn id=ordered-set-of-unique-space-separated-tokens>空格分隔的有序不重复令牌集合</dfn>
  是一个没有令牌重复但令牌顺序有意义的
  <a href=#set-of-space-separated-tokens id=空格分隔的令牌:set-of-space-separated-tokens-3>空格分隔的令牌集合</a>。</p>

  <p><a href=#set-of-space-separated-tokens id=空格分隔的令牌:set-of-space-separated-tokens-4>空格分隔的令牌集合</a> 有时定义有允许值的集合。
  当定义了允许值的集合时，集合中的令牌必须都从那个允许的列表中来；其他值是不合规范的。
  如果没有提供允许值的集合，那么所有值都是符合规范的。</p>

  <p class=note>在 <a href=#set-of-space-separated-tokens id=空格分隔的令牌:set-of-space-separated-tokens-5>set of space-separated tokens</a> 中的令牌如何进行比较
  （例如是否大小写敏感) 由各自集合定义。</p>




  <h4 id=逗号分隔的字符集><span class=secno>2.4.8</span> 逗号分隔的字符集<a href=#逗号分隔的字符集 class=self-link></a></h4>
<div data-zh-date="Tue Jun 08 2021 03:21:28 GMT+0000 (UTC)" data-en-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/common-microsyntaxes/comma-separated-tokens.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/common-microsyntaxes/comma-separated-tokens.en.html></div>

  <p><dfn id=set-of-comma-separated-tokens>逗号分隔的字符集</dfn> is a string containing zero or more tokens each separated from the next by a single U+002C COMMA character (,), where tokens consist of any string of zero or more characters, neither beginning nor ending with <a id=逗号分隔的字符集:space-characters href=https://infra.spec.whatwg.org/#ascii-whitespace data-x-internal=space-characters>ASCII whitespace</a>, nor containing any U+002C COMMA characters (,), and optionally surrounded by <a id=逗号分隔的字符集:space-characters-2 href=https://infra.spec.whatwg.org/#ascii-whitespace data-x-internal=space-characters>ASCII whitespace</a>.</p>

  <p>是包含零个或多个字符的字符串，它们以一个 U+002C COMMA 字符（,）分隔，其中的字符是由一个或更多的字符组成的任意字符串，首尾不包括 <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=逗号分隔的字符集:space-characters-3 data-x-internal=space-characters>ASCII 空白</a>也不能包含 U+002C COMMA 字符（,），但前后可以有 <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=逗号分隔的字符集:space-characters-4 data-x-internal=space-characters>ASCII 空白</a>。</p>

  <p class=example>例如字符串"<code> a ,b,,d d </code>"由四个字符组成："a", "b", 空字符串和 "d d"。每个字符的前后空白不计入字符，空字符串可以是一个字符。</p>

  <p>有时<a href=#set-of-comma-separated-tokens id=逗号分隔的字符集:set-of-comma-separated-tokens>逗号分隔的字符集</a>对合法字符的构成还有额外限制。如果定义了那些限制，字符就必须完全遵守；其他值都是不符合规范的。如果没定义其他限制，所有值都是符合规范的。</p>




  <h4 id=syntax-references><span class=secno>2.4.9</span> 引用<a href=#syntax-references class=self-link></a></h4>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/common-microsyntaxes/references.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/common-microsyntaxes/references.en.html></div>

  <p><var>type</var> 类型的元素的 <dfn id=valid-hash-name-reference>合法的哈希名引用</dfn>
  字符串由一个 U+0023 NUMBER SIGN 字符（#）和完全匹配
  同一个 <a href=https://dom.spec.whatwg.org/#concept-tree id=syntax-references:tree data-x-internal=tree>树</a> 中的 <var>type</var> 元素的 <code>name</code> 属性的字符串构成。</p>

  

  <p>给定上下文节点 <var>scope</var>，<dfn id=rules-for-parsing-a-hash-name-reference>解析对
  <var>type</var> 类型的元素的哈希名引用的规则</dfn> 如下：</p>

  <ol><li><p>如果被解析字符串不包含 U+0023 NUMBER SIGN 字符，或者第一个这样的字符是字符串的最后一个字符，
   则返回 null 并中止这些步骤。<li><p>令<var>s</var> 为从紧接着第一个 U+0023 NUMBER SIGN 字符之后的字符开始，直到待解析字符串结尾的字符串。<li>
    <p>返回 <var>scope</var> 的 <a href=https://dom.spec.whatwg.org/#concept-tree id=syntax-references:tree-2 data-x-internal=tree>树</a> 中，按照 <a href=https://dom.spec.whatwg.org/#concept-tree-order id=syntax-references:tree-order data-x-internal=tree-order>树序</a> 的第一个
    <code id=syntax-references:the-id-attribute><a href=dom.html#the-id-attribute>id</a></code> 或 <code>name</code> 属性的值是 <var>s</var>
    的类型为 <var>type</var> 的元素。如果没有这样的元素就返回 null。</p>

    <p class=note>虽然解析时用到了 <code id=syntax-references:the-id-attribute-2><a href=dom.html#the-id-attribute>id</a></code> 属性，
    但它不用于决定一个值是否是 <a href=#valid-hash-name-reference id=syntax-references:valid-hash-name-reference><em>合法的</em> 哈希名引用</a>。
    也就是说，一个基于 <code id=syntax-references:the-id-attribute-3><a href=dom.html#the-id-attribute>id</a></code> 引用元素的哈希名引用是符合性错误。
    （除非那个元素也有一个具有相同值的 <code>name</code> 属性）。</p>
   </ol>

  



  <h4 id=mq><span class=secno>2.4.10</span> 媒体查询<a href=#mq class=self-link></a></h4>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/common-microsyntaxes/media-queries.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/common-microsyntaxes/media-queries.en.html></div>

  <p><dfn id=valid-media-query-list>合法的媒体查询列表</dfn> 是一个匹配
  Media Queries 标准中的 <code>&lt;media-query-list></code> 生成式的字符串。<a href=references.html#refsMQ>[MQ]</a></p>

  <p><dfn id=matches-the-environment>匹配用户环境</dfn> 的字符串可以是空字符串、只包含
  <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=mq:space-characters data-x-internal=space-characters>ASCII 空白</a> 的字符串，
  或者根据 Media Queries 标准给出的定义匹配用户环境的媒体查询列表。<a href=references.html#refsMQ>[MQ]</a></p>





  <h3 id=url-2><span class=secno>2.5</span> URL<a href=#url-2 class=self-link></a></h3>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/urls/index.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/urls/index.en.html></div>


  <h4 id=术语-2><span class=secno>2.5.1</span> 术语<a href=#术语-2 class=self-link></a></h4>
<div data-zh-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/urls/terminology.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/urls/terminology.en.html></div>

  <p>一个字符串如果是<a href=https://url.spec.whatwg.org/#valid-url-string id=术语-2:valid-url-string data-x-internal=valid-url-string>合法 URL 字符串</a>，同时是非空字符串，
  那么它就是 <dfn id=valid-non-empty-url>合法的非空 URL</dfn>。</p>

  <p>如果
  <a href=https://infra.spec.whatwg.org/#strip-leading-and-trailing-ascii-whitespace id=术语-2:strip-leading-and-trailing-ascii-whitespace data-x-internal=strip-leading-and-trailing-ascii-whitespace>去掉前后 ASCII 空白</a>
  后是一个 <a href=https://url.spec.whatwg.org/#valid-url-string id=术语-2:valid-url-string-2 data-x-internal=valid-url-string>合法 URL 字符串</a>，
  那么它就是一个
  <dfn id=valid-url-potentially-surrounded-by-spaces>可能由空格包裹的合法 URL</dfn>。</p>

  <p>如果
  <a href=https://infra.spec.whatwg.org/#strip-leading-and-trailing-ascii-whitespace id=术语-2:strip-leading-and-trailing-ascii-whitespace-2 data-x-internal=strip-leading-and-trailing-ascii-whitespace>去掉前后 ASCII 空白</a>
  后是一个 <a href=#valid-non-empty-url id=术语-2:valid-non-empty-url>合法的非空 URL</a>，
  那么它就是一个
  <dfn id=valid-non-empty-url-potentially-surrounded-by-spaces>可能由空格包裹的合法的非空 URL</dfn>。</p>

  <p>本标准将 <dfn id=about:legacy-compat><code>about:legacy-compat</code></dfn> 定义为保留 URL。
  因为 <code id=术语-2:about-protocol><a data-x-internal=about-protocol href=https://tools.ietf.org/html/rfc6694#section-2>about:</a></code> URL 不可解析，当需要兼容 XML 工具时，
  用在 <a href=https://dom.spec.whatwg.org/#html-document id=术语-2:html-documents data-x-internal=html-documents>HTML 文档</a> 的 <a href=syntax.html#syntax-doctype id=术语-2:syntax-doctype>DOCTYPE</a> 中。<a href=references.html#refsABOUT>[ABOUT]</a></p>

  <p>本标准将 <dfn id=about:html-kind><code>about:html-kind</code></dfn> 定义为保留 URL。
  因为 <code id=术语-2:about-protocol-2><a data-x-internal=about-protocol href=https://tools.ietf.org/html/rfc6694#section-2>about:</a></code> URL 不可解析，可用于媒体轨道的类型标识。<a href=references.html#refsABOUT>[ABOUT]</a></p>

  <p>本标准将 <dfn id=about:srcdoc><code>about:srcdoc</code></dfn> 定义为保留 URL。
  因为 <code id=术语-2:about-protocol-3><a data-x-internal=about-protocol href=https://tools.ietf.org/html/rfc6694#section-2>about:</a></code> URL 不可解析，
  被用于 <a href=iframe-embed-object.html#an-iframe-srcdoc-document id=术语-2:an-iframe-srcdoc-document><code>iframe</code> <code>srcdoc</code> 文档</a>
  的 <a href=https://dom.spec.whatwg.org/#concept-document-url id=术语-2:the-document的-address data-x-internal=the-document的-address>URL</a> <a href=references.html#refsABOUT>[ABOUT]</a></p>

  <p><code id=术语-2:document><a href=dom.html#document>Document</a></code> 对象 <var>document</var> 的 <dfn id=fallback-base-url>后备基 URL</dfn>
  是通过执行这些步骤获得的 <a href=https://url.spec.whatwg.org/#concept-url id=术语-2:url-record data-x-internal=url-record>URL 记录</a>：</p>

  <ol><li><p>如果 <var>document</var> 是 <a href=iframe-embed-object.html#an-iframe-srcdoc-document id=术语-2:an-iframe-srcdoc-document-2>
   <code>iframe</code> <code>srcdoc</code> 文档</a>，
   则返回
   <var>document</var> 的 <a href=browsers.html#concept-document-bc id=术语-2:concept-document-bc>浏览环境</a> 的
   <a href=browsers.html#bc-container-document id=术语-2:bc-container-document>容器文档</a> 的
   <a href=#document-base-url id=术语-2:document-base-url>文档基 URL</a>。<li>

    

    

    <p>如果 <var>document</var> 的 <a href=https://dom.spec.whatwg.org/#concept-document-url id=术语-2:the-document的-address-2 data-x-internal=the-document的-address>URL</a> 为 <code id=术语-2:about:blank><a href=#about:blank>about:blank</a></code>，
    且 <var>document</var> 的 <a href=browsers.html#concept-document-bc id=术语-2:concept-document-bc-2>浏览环境</a> 的
    <a href=browsers.html#creator-base-url id=术语-2:creator-base-url>创建者的 base URL</a> 是非空，那么返回该
    <a href=browsers.html#creator-base-url id=术语-2:creator-base-url-2>创建者的 base URL</a>。</p>

   <li><p>返回 <var>document</var> 的 <a href=https://dom.spec.whatwg.org/#concept-document-url id=术语-2:the-document的-address-3 data-x-internal=the-document的-address>URL</a>。</ol>

  <p><code id=术语-2:document-2><a href=dom.html#document>Document</a></code> 对象的 <dfn id=document-base-url data-export="">文档基 URL</dfn> 是通过执行这些步骤获得的
  <a href=https://url.spec.whatwg.org/#syntax-url-absolute id=术语-2:absolute-url data-x-internal=absolute-url>绝对 URL</a>：</p>

  <ol><li><p>如果 <code id=术语-2:document-3><a href=dom.html#document>Document</a></code> 中不存在拥有 <code id=术语-2:attr-base-href><a href=semantics.html#attr-base-href>href</a></code>
   属性的 <code id=术语-2:base-元素><a href=semantics.html#base-元素>base</a></code> 元素，那么 <a href=#document-base-url id=术语-2:document-base-url-2>文档基 URL</a> 为
   <code id=术语-2:document-4><a href=dom.html#document>Document</a></code> 的 <a href=#fallback-base-url id=术语-2:fallback-base-url>后备基 URL</a>；中止这些步骤。<li><p>否则，<a href=#document-base-url id=术语-2:document-base-url-3>文档基 URL</a> 为
   <code id=术语-2:document-5><a href=dom.html#document>Document</a></code> 中按照 <a href=https://dom.spec.whatwg.org/#concept-tree-order id=术语-2:tree-order data-x-internal=tree-order>树序</a> 的
   第一个有 <code id=术语-2:attr-base-href-2><a href=semantics.html#attr-base-href>href</a></code> 属性的
   <code id=术语-2:base-元素-2><a href=semantics.html#base-元素>base</a></code> 元素的 <a href=semantics.html#frozen-base-url id=术语-2:frozen-base-url>冻结的基 URL</a>。</ol>


  


  <h4 id=resolving-urls><span class=secno>2.5.2</span> 解析 URL<a href=#resolving-urls class=self-link></a></h4>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/urls/parsing-urls.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/urls/parsing-urls.en.html></div>

  <p>解析 URL 是从字符串中获取它表示的 <a href=https://url.spec.whatwg.org/#concept-url id=resolving-urls:url-record data-x-internal=url-record>URL 记录</a> 的过程。
  虽然这一过程定义在 WHATWG URL 标准中，但方便起见 HTML 标准也定义了一个包装过的版本。 <a href=references.html#refsURL>[URL]</a></p>

  <p class=note>这一包装只用于出于历史原因当 URL 解析器的字符编码必须匹配文档或环境设置对象时。
  除此之外可以直接使用 <a href=https://url.spec.whatwg.org/#concept-url-parser id=resolving-urls:url-parser data-x-internal=url-parser>URL 解析器</a>。</p>

  <p id=resolve-a-url>
  相对于一个 <var>document</var> 或 <var>environment settings object</var>
  <dfn id=parse-a-url>解析 URL</dfn> <var>url</var>，
  用户代理必须使用下列步骤。
  解析 URL 的结果可能是失败，也可能是 <a href=#resulting-url-string id=resolving-urls:resulting-url-string>结果 URL 字符串</a>
  和 <a href=#resulting-url-record id=resolving-urls:resulting-url-record>结果 URL 记录</a>。</p>

  <ol><li><p>如果指定了 <var>document</var>，
   令 <var>encoding</var> 为 <var>document</var> 的
   <a href=https://dom.spec.whatwg.org/#concept-document-encoding id="resolving-urls:document's-character-encoding" data-x-internal="document's-character-encoding">字符编码</a>，
   否则令它为 <var>environment settings object</var> 的
   <a href=webappapis.html#api-url-character-encoding id=resolving-urls:api-url-character-encoding>API URL 字符编码</a>。<li><p>如果指定了 <var>document</var>，
   令 <var>baseURL</var> 为 <var>document</var> 的
   <a href=#document-base-url id=resolving-urls:document-base-url>基 URL</a>，
   否则令它为 <var>environment settings object</var> 的
   <a href=webappapis.html#api-base-url id=resolving-urls:api-base-url>API 基 URL</a>。<li><p>令 <var>urlRecord</var> 为
   使用 <var>baseURL</var> 和 <var>encoding</var>，在 <var>url</var>
   上应用 <a href=https://url.spec.whatwg.org/#concept-url-parser id=resolving-urls:url-parser-2 data-x-internal=url-parser>URL 解析器</a> 的结果。<li><p>如果 <var>urlRecord</var> 解析失败，中止这些步骤并产生一个错误。<li><p>令<var>urlString</var> 为在 <var>urlRecord</var> 上应用
   <a href=https://url.spec.whatwg.org/#concept-url-serializer id=resolving-urls:concept-url-serializer data-x-internal=concept-url-serializer>URL 序列化</a> 的结果。<li><p>将 <var>urlString</var> 作为 <dfn id=resulting-url-string>结果 URL 字符串</dfn>，
   <var>urlRecord</var> 作为 <dfn id=resulting-url-record>结果 URL 记录</dfn> 返回。</ol>

  



  


  <h4 id=基-url-的动态变化><span class=secno>2.5.3</span> 基 URL 的动态变化<a href=#基-url-的动态变化 class=self-link></a></h4>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/urls/dynamic-changes-to-base-urls.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/urls/dynamic-changes-to-base-urls.en.html></div>

  <p>当一个文档的 <a href=#document-base-url id=基-url-的动态变化:document-base-url>文档基 URL</a> 变化时，该文档中所有元素多
  <a href=#affected-by-a-base-url-change id=基-url-的动态变化:affected-by-a-base-url-change>受基 URL 变化的影响</a>。</p>

  <p>当一个元素 <a href=#affected-by-a-base-url-change id=基-url-的动态变化:affected-by-a-base-url-change-2>受基 URL 变化影响</a> 时执行下面的
  <a href=#base-url-change-steps id=基-url-的动态变化:base-url-change-steps>基 URL 变化步骤</a>（定义在 DOM 标准中）：</p>

  <dl class=switch><dt>如果该元素创建了 <a href=links.html#hyperlink id=基-url-的动态变化:hyperlink>超链接</a><dd>

    <p>如果该超链接标识的 <a id=基-url-的动态变化:url href=https://url.spec.whatwg.org/#concept-url data-x-internal=url>URL</a> 正在展现给用户，
    或任何从该 <a id=基-url-的动态变化:url-2 href=https://url.spec.whatwg.org/#concept-url data-x-internal=url>URL</a> 来的数据正在影响显示，那么应该相对于该元素的
    <a href=https://dom.spec.whatwg.org/#concept-node-document id=基-url-的动态变化:node-document data-x-internal=node-document>节点文档</a>
    <a href=#parse-a-url id=基-url-的动态变化:parse-a-url>重新解析</a>
    <code id=基-url-的动态变化:attr-hyperlink-href><a href=links.html#attr-hyperlink-href>href</a></code> 属性并适当地更新 UI。</p>

    <p class=example>例如 CSS <code id=基-url-的动态变化:selector-link><a href=semantics-other.html#selector-link>:link</a></code>/<code id=基-url-的动态变化:selector-visited><a href=semantics-other.html#selector-visited>:visited</a></code>
    <a href=https://drafts.csswg.org/selectors/#pseudo-class id=基-url-的动态变化:pseudo-class data-x-internal=pseudo-class>伪类</a> 可能不受影响。</p>

    <p>如果该超链接有 <code id=基-url-的动态变化:ping><a href=links.html#ping>ping</a></code> 属性
    且它的 <a id=基-url-的动态变化:url-3 href=https://url.spec.whatwg.org/#concept-url data-x-internal=url>URL</a> 正在展现给用户，那么应该相对于该元素的
    <a href=https://dom.spec.whatwg.org/#concept-node-document id=基-url-的动态变化:node-document-2 data-x-internal=node-document>节点文档</a>
    <a href=#parse-a-url id=基-url-的动态变化:parse-a-url-2>重新解析</a>
    <code id=基-url-的动态变化:ping-2><a href=links.html#ping>ping</a></code> 属性的令牌并适当地更新 UI。</p>

   <dt>如果该属性是有 <code>cite</code> 属性的 <code id=基-url-的动态变化:the-q-element><a href=text-level-semantics.html#the-q-element>q</a></code>，<code id=基-url-的动态变化:the-blockquote-element><a href=grouping-content.html#the-blockquote-element>blockquote</a></code>，
   <code id=基-url-的动态变化:the-ins-element><a href=edits.html#the-ins-element>ins</a></code>，或 <code id=基-url-的动态变化:the-del-element><a href=edits.html#the-del-element>del</a></code> 元素<dd>

    <p>如果 <code>cite</code> 属性标识的 <a id=基-url-的动态变化:url-4 href=https://url.spec.whatwg.org/#concept-url data-x-internal=url>URL</a> 正在展现给用户，
    或任何从该 <a id=基-url-的动态变化:url-5 href=https://url.spec.whatwg.org/#concept-url data-x-internal=url>URL</a> 来的数据正在影响显示，那么应该相对于该元素的
    <a href=https://dom.spec.whatwg.org/#concept-node-document id=基-url-的动态变化:node-document-3 data-x-internal=node-document>节点文档</a>
    <a href=#parse-a-url id=基-url-的动态变化:parse-a-url-3>重新解析</a>
    <code id=基-url-的动态变化:attr-hyperlink-href-2><a href=links.html#attr-hyperlink-href>href</a></code> 属性并适当地更新 UI。</p>

   <dt>否则<dd>

    <p>该元素不直接受影响。</p>

    <p class=example>例如更改基 URL 不影响 <code id=基-url-的动态变化:the-img-element><a href=embedded-content.html#the-img-element>img</a></code> 元素显示的图片，
    尽管脚本中后续对 <code id=基-url-的动态变化:dom-img-src><a href=embedded-content.html#dom-img-src>src</a></code> IDL 属性的访问将返回新的
    <a href=https://url.spec.whatwg.org/#syntax-url-absolute id=基-url-的动态变化:absolute-url data-x-internal=absolute-url>绝对 URL</a>，可能不再对应于正在显示的图片。</p>

   </dl>

  


  


  <h3 id=fetching-resources><span class=secno>2.6</span> 获取资源<a href=#fetching-resources class=self-link></a></h3>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/fetching-resources/index.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/fetching-resources/index.en.html></div>


  <h4 id=术语-3><span class=secno>2.6.1</span> 术语<a href=#术语-3 class=self-link></a></h4>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/fetching-resources/terminology.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/fetching-resources/terminology.en.html></div>

  <p><a href=https://fetch.spec.whatwg.org/#concept-response-type id=术语-3:concept-response-type data-x-internal=concept-response-type>类型</a> 为 "<code>basic</code>"，
  "<code>cors</code>"，或 "<code>default</code>" 的
  <a href=https://fetch.spec.whatwg.org/#concept-response id=术语-3:concept-response data-x-internal=concept-response>响应</a> 称为 <dfn id=cors-same-origin>CORS-same-origin</dfn>。 <a href=references.html#refsFETCH>[FETCH]</a></p>

  <p><a href=https://fetch.spec.whatwg.org/#concept-response-type id=术语-3:concept-response-type-2 data-x-internal=concept-response-type>类型</a> 为
  "<code>opaque</code>" 或 "<code>opaqueredirect</code>" 的
  <a href=https://fetch.spec.whatwg.org/#concept-response id=术语-3:concept-response-2 data-x-internal=concept-response>响应</a> 称为 <dfn id=cors-cross-origin>CORS-cross-origin</dfn>。</p>

  <p><a href=https://fetch.spec.whatwg.org/#concept-response id=术语-3:concept-response-3 data-x-internal=concept-response>响应</a> 的 <dfn id=unsafe-response data-export="">不安全响应</dfn>
  是它的 <a href=https://fetch.spec.whatwg.org/#concept-internal-response id=术语-3:concept-internal-response data-x-internal=concept-internal-response>内部响应</a>（如果有的话），否则就是
  <a href=https://fetch.spec.whatwg.org/#concept-response id=术语-3:concept-response-4 data-x-internal=concept-response>响应</a> 自己。</p>

  <p>给定 <var>url</var>，<var>destination</var>， <var>corsAttributeState</var>，以及可能有的 <i>same-origin fallback 标志</i>，
  <dfn id=create-a-potential-cors-request>创建一个可能 CORS 的请求</dfn> 应该执行以下步骤：</p>

  <ol><li><p>如果 <var>corsAttributeState</var> 是 <a href=#attr-crossorigin-none id=术语-3:attr-crossorigin-none>No CORS</a>，
   令 <var>mode</var> 为 "<code>no-cors</code>" ，否则令 <var>mode</var> 为 "<code>cors</code>"。<li><p>如果设置了 <i>same-origin fallback 标志</i> 且 <var>mode</var> 为
   "<code>no-cors</code>"，则将 <var>mode</var> 设置为 "<code>same-origin</code>"。<li><p>令 <var>credentialsMode</var> 为 "<code>include</code>"。<li><p>如果 <var>corsAttributeState</var> 为 <a href=#attr-crossorigin-anonymous id=术语-3:attr-crossorigin-anonymous>Anonymous</a>，
   将 <var>credentialsMode</var> 设为 "<code>same-origin</code>"。<li><p>令 <var>request</var> 为一个新的 <a href=https://fetch.spec.whatwg.org/#concept-request id=术语-3:concept-request data-x-internal=concept-request>request</a>，
   其 <a href=https://fetch.spec.whatwg.org/#concept-request-url id=术语-3:concept-request-url data-x-internal=concept-request-url>url</a> 为 <var>url</var>，
   <a href=https://fetch.spec.whatwg.org/#concept-request-destination id=术语-3:concept-request-destination data-x-internal=concept-request-destination>目标地址</a> 为 <var>destination</var>，
   <a href=https://fetch.spec.whatwg.org/#concept-request-mode id=术语-3:concept-request-mode data-x-internal=concept-request-mode>模式</a> 为 <var>mode</var>，
   <a href=https://fetch.spec.whatwg.org/#concept-request-credentials-mode id=术语-3:concept-request-credentials-mode data-x-internal=concept-request-credentials-mode>credentials 模式</a> 为 <var>credentialsMode</var>，
   且设置了 <a href=https://fetch.spec.whatwg.org/#concept-request-use-url-credentials-flag id=术语-3:use-url-credentials-flag data-x-internal=use-url-credentials-flag>use-URL-credentials 标志</a>。</ol>



  <h4 id=content-type-sniffing><span class=secno>2.6.2</span> 确定响应类型<a href=#content-type-sniffing class=self-link></a></h4>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/fetching-resources/determining-the-type-of-a-resource.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/fetching-resources/determining-the-type-of-a-resource.en.html></div>

  <p>必须获取响应的 <dfn id=content-type>Content-Type 元数据</dfn>
  并按照 WHATWG MIME Sniffing 标准的要求解释。<a href=references.html#refsMIMESNIFF>[MIMESNIFF]</a></p>

  <p>必须按照 WHATWG MIME Sniffing 标准的要求找到资源的 <dfn id=content-type-sniffing-2><a href=https://mimesniff.spec.whatwg.org/#computed-mime-type>计算后的 MIME 类型</a></dfn>。
  <a href=references.html#refsMIMESNIFF>[MIMESNIFF]</a></p>

  <p><dfn id=content-type-sniffing:-image><a href=https://mimesniff.spec.whatwg.org/#rules-for-sniffing-images-specifically>
  嗅探图片 Content-Type 的规则</a></dfn>，
  <dfn id=content-type-sniffing:-text-or-binary><a href=https://mimesniff.spec.whatwg.org/#rules-for-text-or-binary>
  区分资源是文本还是二进制的规则</a></dfn>，以及
  <dfn id=content-type-sniffing:-video><a href=https://mimesniff.spec.whatwg.org/#rules-for-sniffing-audio-and-video-specifically>
  嗅探音频和视频的规则</a></dfn> 也定义在 WHATWG MIME Sniffing 标准中。
  这些规则返回的结果是一个 <a href=https://mimesniff.spec.whatwg.org/#mime-type id=content-type-sniffing:mime-type data-x-internal=mime-type>MIME 类型</a>。 <a href=references.html#refsMIMESNIFF>[MIMESNIFF]</a></p>

  <p class=warning>WHATWG MIME Sniffing 标准中的规则必须严格遵守。 当用户代理使用与服务器所期望的内容类型检测不同的启发式方法时，可能会发生安全问题。 有关更多详细信息，请参阅 WHATWG MIME Sniffing 标准。 <a href=references.html#refsMIMESNIFF>[MIMESNIFF]</a></p>



  <h4 id=从-meta-元素提取字符编码><span class=secno>2.6.3</span> 从 <code id=从-meta-元素提取字符编码:the-meta-element><a href=semantics.html#the-meta-element>meta</a></code> 元素提取字符编码<a href=#从-meta-元素提取字符编码 class=self-link></a></h4>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/fetching-resources/extracting-character-encodings-from-meta-elements.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/fetching-resources/extracting-character-encodings-from-meta-elements.en.html></div>

  <p>给定字符串 <var>s</var>，<dfn id=algorithm-for-extracting-a-character-encoding-from-a-meta-element>
  从一个 <code>meta</code> 元素提起字符编码的算法</dfn> 如下。
  它或者返回一个字符编码，或者什么都不返回。</p>

  <ol><li><p>令 <var>position</var> 为 <var>s</var> 中的指针初始指向字符串开始。<li><p><i>Loop</i>：在 <var>s</var> 中找到 <var>position</var> 后面
   <a href=https://infra.spec.whatwg.org/#ascii-case-insensitive id=从-meta-元素提取字符编码:ascii-case-insensitive data-x-internal=ascii-case-insensitive>ASCII 大小写不敏感地</a> 匹配 "<code>charset</code>"
   的前 7 个字符。 如果没有找到这样的匹配，什么都不返回并中止这些步骤。<li><p>跳过所有紧接着 "<code>charset</code>" 后面的
   <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=从-meta-元素提取字符编码:space-characters data-x-internal=space-characters>ASCII 空白</a>（也可能没有）。<li><p>如果下一个字符不是 U+003D EQUALS SIGN （=），让 <var>position</var> 指向下一个字符之前，
   跳回到标记为 <i>loop</i> 的步骤。<li><p>跳过所有紧接着等号后面的
   <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=从-meta-元素提取字符编码:space-characters-2 data-x-internal=space-characters>ASCII 空白</a>（也可能没有）。<li>

    <p>处理下一个字符：</p>

    <dl class=switch><dt>如果它是一个 U+0022 QUOTATION MARK 字符（"）且 <var>s</var> 中后面还有一个
     U+0022 QUOTATION MARK 字符 （"）<dt>如果它是一个 U+0027 APOSTROPHE 字符 （'）且 <var>s</var> 中后面还有一个
     U+0027 APOSTROPHE 字符 （'）<dd>返回从当前字符到当前字符的下一次出现的子字符串
     <a href=https://encoding.spec.whatwg.org/#concept-encoding-get id=从-meta-元素提取字符编码:getting-an-encoding data-x-internal=getting-an-encoding>获取编码</a> 的结果。<dt>如果它是一个没有闭合的 U+0022 QUOTATION MARK 字符 （"）<dt>如果它是一个没有闭合的 U+0027 APOSTROPHE 字符 （'）<dt>如果没有下一个字符<dd>什么都不返回。<dt>否则<dd>返回从当前字符到（不包含）第一个
     <a href=https://infra.spec.whatwg.org/#ascii-whitespace id=从-meta-元素提取字符编码:space-characters-3 data-x-internal=space-characters>ASCII 空白</a> 或 U+003B SEMICOLON 字符（;）
     或 <var>s</var> 的末尾（取决于哪一个先出现）
     构成的子字符串中 <a href=https://encoding.spec.whatwg.org/#concept-encoding-get id=从-meta-元素提取字符编码:getting-an-encoding-2 data-x-internal=getting-an-encoding>获取编码</a> 的结果。</dl>

   </ol>

  <p class=note>该算法与 HTTP 规范中的算法不同
  （例如，HTTP 不允许使用单引号，并且需要支持该算法不支持的反斜线转义机制）。
  
  虽然在历史上本算法用于 HTTP 相关的上下文，但不同的实现支持的语法前段时间就不一样了。<a href=references.html#refsHTTP>[HTTP]</a></p>

  



  <h4 id=cors-设置属性><span class=secno>2.6.4</span> CORS 设置属性<a href=#cors-设置属性 class=self-link></a></h4>
<div data-zh-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/fetching-resources/cors-settings-attributes.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/fetching-resources/cors-settings-attributes.en.html></div>

  <p><dfn id=cors-settings-attribute>CORS 设置属性</dfn> 是一个
  <a href=#enumerated-attribute id=cors-设置属性:enumerated-attribute>枚举属性</a>。下表列出了关键字以及属性状态
  — 每行中第一列给出了那一行的关键字映射到的状态。</p>

  <table><thead><tr><th> 状态
     <th> 关键字
     <th> 简要介绍
   <tbody><tr><td rowspan=2><dfn id=attr-crossorigin-anonymous>Anonymous</dfn>
     <td><dfn id=attr-crossorigin-anonymous-keyword><code>anonymous</code></dfn>
     <td rowspan=2><a href=https://fetch.spec.whatwg.org/#concept-request id=cors-设置属性:concept-request data-x-internal=concept-request>Requests</a> for the element will have their
     <a href=https://fetch.spec.whatwg.org/#concept-request-mode id=cors-设置属性:concept-request-mode data-x-internal=concept-request-mode>mode</a> set to "<code>cors</code>" and their
     <a href=https://fetch.spec.whatwg.org/#concept-request-credentials-mode id=cors-设置属性:concept-request-credentials-mode data-x-internal=concept-request-credentials-mode>credentials mode</a> set to "<code>same-origin</code>"。
    <tr><td>(the empty string)
    <tr><td><dfn id=attr-crossorigin-use-credentials>使用 Credentials</dfn>
     <td><dfn id=attr-crossorigin-use-credentials-keyword><code>use-credentials</code></dfn>
     <td>该元素的 <a href=https://fetch.spec.whatwg.org/#concept-request id=cors-设置属性:concept-request-2 data-x-internal=concept-request>请求</a> 会把 <a href=https://fetch.spec.whatwg.org/#concept-request-mode id=cors-设置属性:concept-request-mode-2 data-x-internal=concept-request-mode>模式</a> 设置为 "<code>cors</code>"
     把 <a href=https://fetch.spec.whatwg.org/#concept-request-credentials-mode id=cors-设置属性:concept-request-credentials-mode-2 data-x-internal=concept-request-credentials-mode>credentials 模式</a> 设置为
     "<code>include</code>"。
  </table>

  <p>属性的 <i id=cors-设置属性:invalid-value-default><a href=#invalid-value-default>非法值默认</a></i> 是 <a href=#attr-crossorigin-anonymous id=cors-设置属性:attr-crossorigin-anonymous>Anonymous</a> 状态，它的 <i id=cors-设置属性:missing-value-default><a href=#missing-value-default>缺失值默认</a></i> 是 <dfn id=attr-crossorigin-none>No CORS</dfn> 状态。
  用于 <a href=#reflect id=cors-设置属性:reflect>反射</a> 时，
  <a href=#attr-crossorigin-anonymous id=cors-设置属性:attr-crossorigin-anonymous-2>Anonymous</a> 状态的
  <a href=#canonical-keyword id=cors-设置属性:canonical-keyword>标准关键字</a> 为 <code id=cors-设置属性:attr-crossorigin-anonymous-keyword><a href=#attr-crossorigin-anonymous-keyword>anonymous</a></code>。</p>

  <p><a href=#cors-settings-attribute id=cors-设置属性:cors-settings-attribute>CORS 设置属性</a> 控制的多数请求都是通过
  <a href=#create-a-potential-cors-request id=cors-设置属性:create-a-potential-cors-request>创建一个可能 CORS 的请求</a> 算法来完成的。</p>

  <p id=module-script-credentials-mode>对于更先进的特行，比如请求的
  <a href=https://fetch.spec.whatwg.org/#concept-request-mode id=cors-设置属性:concept-request-mode-3 data-x-internal=concept-request-mode>mode</a> 总是 "<code>cors</code>"，
  某些 <a href=#cors-settings-attribute id=cors-设置属性:cors-settings-attribute-2>CORS 设置属性</a> 用于其他语义，
  不过还是只对 <a href=https://fetch.spec.whatwg.org/#concept-request id=cors-设置属性:concept-request-3 data-x-internal=concept-request>请求</a> 的 <a href=https://fetch.spec.whatwg.org/#concept-request-credentials-mode id=cors-设置属性:concept-request-credentials-mode-3 data-x-internal=concept-request-credentials-mode>credentials 模式</a> 起作用。
  为了执行这个转换，定义了 <dfn id=cors-settings-attribute-credentials-mode>CORS 设置属性 credentials 模式</dfn>
  来通过属性状态确定 <a href=#cors-settings-attribute id=cors-设置属性:cors-settings-attribute-3>CORS 设置属性</a>：</p>

  <dl class=switch><dt><a href=#attr-crossorigin-none id=cors-设置属性:attr-crossorigin-none>No CORS</a><dt><a href=#attr-crossorigin-anonymous id=cors-设置属性:attr-crossorigin-anonymous-3>Anonymous</a><dd>"<code>same-origin</code>"<dt><a href=#attr-crossorigin-none id=cors-设置属性:attr-crossorigin-none-2>Use Credentials</a><dd>"<code>include</code>"</dl>



  <h4 id=引荐来源策略属性><span class=secno>2.6.5</span> 引荐来源策略属性<a href=#引荐来源策略属性 class=self-link></a></h4>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/fetching-resources/referrer-policy-attributes.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/fetching-resources/referrer-policy-attributes.en.html></div>

  <p><dfn id=referrer-policy-attribute data-export="">引荐来源策略属性</dfn>
  是一个 <a href=#enumerated-attribute id=引荐来源策略属性:enumerated-attribute>枚举属性</a>。
  每个 <a href=https://w3c.github.io/webappsec-referrer-policy/#referrer-policy id=引荐来源策略属性:referrer-policy data-x-internal=referrer-policy>引荐来源策略</a>包括空字符串都是该属性的关键字，
  都映射到一个同名的状态。</p>

  <p>该属性的 <i id=引荐来源策略属性:invalid-value-default><a href=#invalid-value-default>非法值的默认</a></i> 和 <i id=引荐来源策略属性:missing-value-default><a href=#missing-value-default>缺失值的默认</a></i> 都是空字符串状态。</p>

  <p>这些状态对各种 <a href=https://fetch.spec.whatwg.org/#concept-fetch id=引荐来源策略属性:concept-fetch data-x-internal=concept-fetch>获取</a> 处理模型的影响详细地定义在
  本标准中，WHATWG Fetch 标准中，以及 <cite>Referrer Policy</cite> 中。 <a href=references.html#refsFETCH>[FETCH]</a> <a href=references.html#refsREFERRERPOLICY>[REFERRERPOLICY]</a></p>

  <div class=note>
   <p>对给定的 <a href=https://fetch.spec.whatwg.org/#concept-fetch id=引荐来源策略属性:concept-fetch-2 data-x-internal=concept-fetch>获取</a> 使用哪个处理模型取决于多个信号；
   引荐来源策略属性只是其中之一。一般来说，这些信号的处理顺序是：</p>

   <ol><li><p>首先，是否出现一个 <code id=引荐来源策略属性:link-type-noreferrer><a href=links.html#link-type-noreferrer>noreferrer</a></code> 超链接类型；<li><p>然后，<a href=#referrer-policy-attribute id=引荐来源策略属性:referrer-policy-attribute>引荐来源策略属性</a> 的值；<li><p>然后，是否出现任何 <code id=引荐来源策略属性:attr-meta-name><a href=semantics.html#attr-meta-name>name</a></code> 属性设为
    <code id=引荐来源策略属性:meta-referrer><a href=semantics.html#meta-referrer>referrer</a></code> 的 <code id=引荐来源策略属性:the-meta-element><a href=semantics.html#the-meta-element>meta</a></code> 元素。<li><p>最后，`<code id=引荐来源策略属性:http-referrer-policy><a data-x-internal=http-referrer-policy href=https://w3c.github.io/webappsec-referrer-policy/#referrer-policy-header-dfn>Referrer-Policy</a></code>` HTTP 头。</ol>
  </div>



  <h4 id=nonce-attributes><span class=secno>2.6.6</span> Nonce attributes<a href=#nonce-attributes class=self-link></a></h4>
<div data-zh-date="" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file="https://github.com/whatwg-cn/html/new/master/src/common-infrastructure/fetching-resources/nonce-attributes.zh.html?filename=nonce-attributes.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fcommon-infrastructure%2Ffetching-resources%2Fnonce-attributes.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/fetching-resources/nonce-attributes.en.html></div>

  <div class="mdn-anno wrapped before"><button onclick=toggleStatus(this) class=mdn-anno-btn><b title="Support in all current engines." class=all-engines-flag>✔</b><span>MDN</span></button><div class=feature><p><a href=https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/nonce title="The nonce global attribute is a content attribute defining a cryptographic nonce (&quot;number used once&quot;) which can be used by Content Security Policy to determine whether or not a given fetch will be allowed to proceed for a given element.">Global_attributes/nonce</a><p class=all-engines-text>Support in all current engines.<div class=support><span class="firefox yes"><span>Firefox</span><span>31+</span></span><span class="safari yes"><span>Safari</span><span>Yes</span></span><span class="chrome yes"><span>Chrome</span><span>Yes</span></span><hr><span class="opera yes"><span>Opera</span><span>Yes</span></span><span class="edge_blink yes"><span>Edge</span><span>Yes</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>Yes</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>31+</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>Yes</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>Yes</span></span><span class="webview_android yes"><span>WebView Android</span><span>Yes</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>Yes</span></span><span class="opera_android yes"><span>Opera Android</span><span>Yes</span></span></div></div></div><p>A <dfn data-dfn-for=htmlsvg-global id=attr-nonce data-dfn-type=element-attr><code>nonce</code></dfn> content
  attribute represents a cryptographic nonce ("number used once") which can be used by <cite>Content
  Security Policy</cite> to determine whether or not a given fetch will be allowed to proceed. The
  value is text. <a href=references.html#refsCSP>[CSP]</a></p>

  <p>Elements that have a <code id=nonce-attributes:attr-nonce><a href=#attr-nonce>nonce</a></code> content attribute ensure that the
  crytographic nonce is only exposed to script (and not to side-channels like CSS attribute
  selectors) by taking the value from the content attribute, moving it into an internal slot
  named <dfn data-dfn-for=HTMLOrSVGElement id=cryptographicnonce data-dfn-type=attribute>[[CryptographicNonce]]</dfn>, exposing it to script
  via the <code id=nonce-attributes:htmlorsvgelement><a href=dom.html#htmlorsvgelement>HTMLOrSVGElement</a></code> interface mixin, and setting the content attribute to the
  empty string. Unless otherwise specified, the slot's value is the empty string.</p>

  <dl class=domintro><dt><var>element</var> . <code>nonce</code><dd>
    <p>Returns the value of the element's <a href=#cryptographicnonce id=nonce-attributes:cryptographicnonce>[[CryptographicNonce]]</a> internal slot.</p>
    <p>Can be set, to update that slot's value.</p>
   </dl>

  <div class="mdn-anno wrapped before"><button onclick=toggleStatus(this) class=mdn-anno-btn><span>MDN</span></button><div class=feature><p><a href=https://developer.mozilla.org/en-US/docs/Web/API/HTMLOrForeignElement/nonce title="The nonce property of the HTMLOrForeignElement mixin returns the cryptographic number used once that is used by Content Security Policy to determine whether a given fetch will be allowed to proceed.">HTMLOrForeignElement/nonce</a><div class=support><span class="firefox yes"><span>Firefox</span><span>75+</span></span><span class="safari yes"><span>Safari</span><span title="Partial implementation.">🔰 10+</span></span><span class="chrome yes"><span>Chrome</span><span>61+</span></span><hr><span class="opera yes"><span>Opera</span><span>48+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge no"><span>Edge (Legacy)</span><span>No</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>79+</span></span><span class="safari_ios yes"><span>Safari iOS</span><span title="Partial implementation.">🔰 10+</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>61+</span></span><span class="webview_android yes"><span>WebView Android</span><span>61+</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>8.0+</span></span><span class="opera_android yes"><span>Opera Android</span><span>45+</span></span></div></div></div><p>The <dfn data-dfn-for=HTMLOrSVGElement id=dom-noncedelement-nonce data-dfn-type=attribute><code>nonce</code></dfn> IDL attribute must, on getting, return the
  value of this element's <a href=#cryptographicnonce id=nonce-attributes:cryptographicnonce-2>[[CryptographicNonce]]</a>; and on setting, set this element's
  <a href=#cryptographicnonce id=nonce-attributes:cryptographicnonce-3>[[CryptographicNonce]]</a> to the given value.</p>

  <p id=nonce-does-not-update-dom class=note>Note how the setter for the <code id=nonce-attributes:dom-noncedelement-nonce><a href=#dom-noncedelement-nonce>nonce</a></code> IDL attribute does not update the corresponding
  content attribute. This, as well as the below setting of the <code id=nonce-attributes:attr-nonce-2><a href=#attr-nonce>nonce</a></code> content attribute to the empty string when an element
  <a href=#becomes-browsing-context-connected id=nonce-attributes:becomes-browsing-context-connected>becomes browsing-context connected</a>, is meant to prevent exfiltration of the nonce
  value through mechanisms that can easily read content attributes, such as selectors. Learn more in
  <a href=https://github.com/whatwg/html/issues/2369>issue #2369</a>, where this behavior was
  introduced.</p>

  <p>The following <a href=https://dom.spec.whatwg.org/#concept-element-attributes-change-ext id=nonce-attributes:concept-element-attributes-change-ext data-x-internal=concept-element-attributes-change-ext>attribute change
  steps</a> are used for the <code id=nonce-attributes:attr-nonce-3><a href=#attr-nonce>nonce</a></code> content attribute:

  <ol><li><p>If <var>element</var> does not <a id=nonce-attributes:include href=https://heycam.github.io/webidl/#include data-x-internal=include>include</a> <code id=nonce-attributes:htmlorsvgelement-2><a href=dom.html#htmlorsvgelement>HTMLOrSVGElement</a></code>, then
   return.<li><p>If <var>localName</var> is not <code id=nonce-attributes:attr-nonce-4><a href=#attr-nonce>nonce</a></code> or
   <var>namespace</var> is not null, then return.<li><p>If <var>value</var> is null, then set <var>element</var>'s
   <a href=#cryptographicnonce id=nonce-attributes:cryptographicnonce-4>[[CryptographicNonce]]</a> to the empty string.<li><p>Otherwise, set <var>element</var>'s <a href=#cryptographicnonce id=nonce-attributes:cryptographicnonce-5>[[CryptographicNonce]]</a> to
   <var>value</var>.</ol>

  <p>Whenever an element <a href=https://heycam.github.io/webidl/#include id=nonce-attributes:include-2 data-x-internal=include>including</a> <code id=nonce-attributes:htmlorsvgelement-3><a href=dom.html#htmlorsvgelement>HTMLOrSVGElement</a></code>
  <a href=#becomes-browsing-context-connected id=nonce-attributes:becomes-browsing-context-connected-2>becomes browsing-context connected</a>, the user agent must execute the following steps
  on the <var>element</var>:</p>

  <ol><li><p>Let <var>CSP list</var> be <var>element</var>'s <a href=https://dom.spec.whatwg.org/#concept-shadow-including-root id=nonce-attributes:shadow-including-root data-x-internal=shadow-including-root>shadow-including root</a>'s <a href=dom.html#concept-document-csp-list id=nonce-attributes:concept-document-csp-list>CSP
   list</a>.<li>
    <p>If <var>CSP list</var> <a id=nonce-attributes:contains-a-header-delivered-content-security-policy href=https://w3c.github.io/webappsec-csp/#contains-a-header-delivered-content-security-policy data-x-internal=contains-a-header-delivered-content-security-policy>contains a header-delivered Content Security Policy</a>, and
    <var>element</var> has a <code id=nonce-attributes:attr-nonce-5><a href=#attr-nonce>nonce</a></code> content attribute
    <var>attr</var> whose value is not the empty string, then:</p>

    <ol><li><p>Let <var>nonce</var> be <var>element</var>'s
     <a href=#cryptographicnonce id=nonce-attributes:cryptographicnonce-6>[[CryptographicNonce]]</a>.<li><p><a href=https://dom.spec.whatwg.org/#concept-element-attributes-set-value id=nonce-attributes:concept-element-attributes-set-value data-x-internal=concept-element-attributes-set-value>Set an attribute value</a> for
     <var>element</var> using "<code id=nonce-attributes:attr-nonce-6><a href=#attr-nonce>nonce</a></code>" and the empty
     string.<li><p>Set <var>element</var>'s <a href=#cryptographicnonce id=nonce-attributes:cryptographicnonce-7>[[CryptographicNonce]]</a> to
     <var>nonce</var>.</ol>

    <p class=note>If <var>element</var>'s <a href=#cryptographicnonce id=nonce-attributes:cryptographicnonce-8>[[CryptographicNonce]]</a> were not restored it
    would be the empty string at this point.</p>
   </ol>

  <p class=note>As each <code id=nonce-attributes:document><a href=dom.html#document>Document</a></code>'s <a href=dom.html#concept-document-csp-list id=nonce-attributes:concept-document-csp-list-2>CSP
  list</a> is append-only, user agents can optimize away the <a id=nonce-attributes:contains-a-header-delivered-content-security-policy-2 href=https://w3c.github.io/webappsec-csp/#contains-a-header-delivered-content-security-policy data-x-internal=contains-a-header-delivered-content-security-policy>contains a header-delivered
  Content Security Policy</a> check by, for example, holding a flag on the <code id=nonce-attributes:document-2><a href=dom.html#document>Document</a></code>,
  set during <a href=browsing-the-web.html#initialise-the-document-object id=nonce-attributes:initialise-the-document-object><code>Document</code>
  creation and initialization</a>.</p>

  <p>The <a href=https://dom.spec.whatwg.org/#concept-node-clone-ext id=nonce-attributes:concept-node-clone-ext data-x-internal=concept-node-clone-ext>cloning steps</a> for elements that
  <a id=nonce-attributes:include-3 href=https://heycam.github.io/webidl/#include data-x-internal=include>include</a> <code id=nonce-attributes:htmlorsvgelement-4><a href=dom.html#htmlorsvgelement>HTMLOrSVGElement</a></code> must set the
  <a href=#cryptographicnonce id=nonce-attributes:cryptographicnonce-9>[[CryptographicNonce]]</a> slot on the copy to the value of the slot on the element being
  cloned.</p>


  <h4 id=lazy-loading-attributes><span class=secno>2.6.7</span> Lazy loading attributes<a href=#lazy-loading-attributes class=self-link></a></h4><div class="mdn-anno wrapped"><button onclick=toggleStatus(this) class=mdn-anno-btn><span>MDN</span></button><div class=feature><p><a href=https://developer.mozilla.org/en-US/docs/Web/Performance/Lazy_loading title="Lazy loading is a strategy to identify resources as non-blocking (non-critical) and load these only when needed. It's a way to shorten the length of the critical rendering path, which translates into reduced page load times.">Lazy_loading</a><div class=support><span class="firefox yes"><span>Firefox</span><span>75+</span></span><span class="safari no"><span>Safari</span><span>No</span></span><span class="chrome yes"><span>Chrome</span><span>77+</span></span><hr><span class="opera yes"><span>Opera</span><span>64+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge no"><span>Edge (Legacy)</span><span>No</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android no"><span>Firefox Android</span><span>No</span></span><span class="safari_ios no"><span>Safari iOS</span><span>No</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>77+</span></span><span class="webview_android yes"><span>WebView Android</span><span>77+</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>12.0+</span></span><span class="opera_android yes"><span>Opera Android</span><span>55+</span></span></div></div></div>
<div data-zh-date="" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file="https://github.com/whatwg-cn/html/new/master/src/common-infrastructure/fetching-resources/lazy-loading-attributes.zh.html?filename=lazy-loading-attributes.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fcommon-infrastructure%2Ffetching-resources%2Flazy-loading-attributes.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/fetching-resources/lazy-loading-attributes.en.html></div>

  <p>A <dfn id=lazy-loading-attribute>lazy loading attribute</dfn> is an <a href=#enumerated-attribute id=lazy-loading-attributes:enumerated-attribute>enumerated attribute</a>. The following
  table lists the keywords and states for the attribute — the keywords in the left column map
  to the states in the cell in the second column on the same row as the keyword.</p>

  <p>The attribute directs the user agent to fetch a resource immediately or to defer fetching until
  some conditions associated with the element are met, according to the attribute's current
  state.</p>

  <table><thead><tr><th>Keyword
     <th>State
     <th>Description
   <tbody><tr><td><dfn id=attr-loading-lazy><code>lazy</code></dfn>
     <td><dfn id=attr-loading-lazy-state>Lazy</dfn>
     <td>Used to defer fetching a resource until some conditions are met.
    <tr><td><dfn id=attr-loading-eager><code>eager</code></dfn>
     <td><dfn id=attr-loading-eager-state>Eager</dfn>
     <td>Used to fetch a resource immediately; the default state.
  </table>

  <p>The attribute's <i id=lazy-loading-attributes:missing-value-default><a href=#missing-value-default>missing value default</a></i> and <i id=lazy-loading-attributes:invalid-value-default><a href=#invalid-value-default>invalid value default</a></i> are both the <a href=#attr-loading-eager-state id=lazy-loading-attributes:attr-loading-eager-state>Eager</a> state.</p>

  <hr>

  <p>The <dfn id=will-lazy-load-element-steps>will lazy load element steps</dfn>, given an element <var>element</var>,
  are as follows:</p>

  <ol><li>
    <p>If <a href=webappapis.html#concept-n-noscript id=lazy-loading-attributes:concept-n-noscript>scripting is disabled</a> for <var>element</var>,
    then return false.</p>

    <p class=note>This is an anti-tracking measure, because if a user agent supported lazy loading
    when scripting is disabled, it would still be possible for a site to track a user's approximate
    scroll position throughout a session, by strategically placing images in a page's markup such
    that a server can track how many images are requested and when.</p>
   <li><p>If <var>element</var>'s <a href=#lazy-loading-attribute id=lazy-loading-attributes:lazy-loading-attribute>lazy loading attribute</a> is in the <a href=#attr-loading-lazy-state id=lazy-loading-attributes:attr-loading-lazy-state>Lazy</a> state, then return true.<li><p>Return false.</ol>

  <p>Each <code id=lazy-loading-attributes:the-img-element><a href=embedded-content.html#the-img-element>img</a></code> and <code id=lazy-loading-attributes:the-iframe-element><a href=iframe-embed-object.html#the-iframe-element>iframe</a></code> element has associated <dfn id=lazy-load-resumption-steps>lazy load resumption
  steps</dfn>, initially null.</p>

  <p class=note>For <code id=lazy-loading-attributes:the-img-element-2><a href=embedded-content.html#the-img-element>img</a></code> and <code id=lazy-loading-attributes:the-iframe-element-2><a href=iframe-embed-object.html#the-iframe-element>iframe</a></code> elements that <a href=#will-lazy-load-element-steps id=lazy-loading-attributes:will-lazy-load-element-steps>will lazy load</a>, these steps are run from the <a href=#lazy-load-intersection-observer id=lazy-loading-attributes:lazy-load-intersection-observer>lazy load
  intersection observer</a>'s callback or when their <a href=#lazy-loading-attribute id=lazy-loading-attributes:lazy-loading-attribute-2>lazy loading attribute</a> is set
  to the <a href=#attr-loading-eager-state id=lazy-loading-attributes:attr-loading-eager-state-2>Eager</a> state. This causes the element to
  continue loading.</p>

  <p>Each <code id=lazy-loading-attributes:document><a href=dom.html#document>Document</a></code> has a <dfn id=lazy-load-intersection-observer>lazy load intersection observer</dfn>, initially set to
  null but can be set to an <code id=lazy-loading-attributes:intersectionobserver><a data-x-internal=intersectionobserver href=https://w3c.github.io/IntersectionObserver/#intersectionobserver>IntersectionObserver</a></code> instance.</p>

  <p>To <dfn id=start-intersection-observing-a-lazy-loading-element>start intersection-observing a lazy loading element</dfn> <var>element</var>, run these
  steps:</p>

  <ol><li><p>Let <var>doc</var> be <var>element</var>'s <a id=lazy-loading-attributes:node-document href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a>.<li>
    <p>If <var>doc</var>'s <a href=#lazy-load-intersection-observer id=lazy-loading-attributes:lazy-load-intersection-observer-2>lazy load intersection observer</a> is null, set it to a new
    <code id=lazy-loading-attributes:intersectionobserver-2><a data-x-internal=intersectionobserver href=https://w3c.github.io/IntersectionObserver/#intersectionobserver>IntersectionObserver</a></code> instance, initialized as follows:</p>

    <p class=XXX>The intention is to use the original value of the
    <code id=lazy-loading-attributes:intersectionobserver-3><a data-x-internal=intersectionobserver href=https://w3c.github.io/IntersectionObserver/#intersectionobserver>IntersectionObserver</a></code> constructor. However, we're forced to use the
    JavaScript-exposed constructor in this specification, until <cite>Intersection Observer</cite>
    exposes low-level hooks for use in specifications. See bug <a href=https://github.com/w3c/IntersectionObserver/issues/427>w3c/IntersectionObserver#427</a>
    which tracks this. <a href=references.html#refsINTERSECTIONOBSERVER>[INTERSECTIONOBSERVER]</a></p>

    <ul><li>
      <p>The <var>callback</var> is these steps, with arguments <var>entries</var> and
      <var>observer</var>:</p>

      <ol><li>
        <p>For each <var>entry</var> in <var>entries</var> <span class=XXX>using a method of
        iteration which does not trigger developer-modifiable array accessors or
        iteration hooks</span>:</p>

        <ol><li><p>Let <var>resumptionSteps</var> be null.<li><p>If <var>entry</var>.<code id=lazy-loading-attributes:dom-intersectionobserverentry-isintersecting><a data-x-internal=dom-intersectionobserverentry-isintersecting href=https://w3c.github.io/IntersectionObserver/#dom-intersectionobserverentry-isintersecting>isIntersecting</a></code> is true, then
         set <var>resumptionSteps</var> to <var>entry</var>.<code id=lazy-loading-attributes:dom-intersectionobserverentry-target><a data-x-internal=dom-intersectionobserverentry-target href=https://w3c.github.io/IntersectionObserver/#dom-intersectionobserverentry-target>target</a></code>'s
         <a href=#lazy-load-resumption-steps id=lazy-loading-attributes:lazy-load-resumption-steps>lazy load resumption steps</a>.<li><p>If <var>resumptionSteps</var> is null, then return.<li><p><a href=#stop-intersection-observing-a-lazy-loading-element id=lazy-loading-attributes:stop-intersection-observing-a-lazy-loading-element>Stop intersection-observing a lazy loading element</a> for
         <var>entry</var>.<code id=lazy-loading-attributes:dom-intersectionobserverentry-target-2><a data-x-internal=dom-intersectionobserverentry-target href=https://w3c.github.io/IntersectionObserver/#dom-intersectionobserverentry-target>target</a></code>.<li><p>Set <var>entry</var>.<code id=lazy-loading-attributes:dom-intersectionobserverentry-target-3><a data-x-internal=dom-intersectionobserverentry-target href=https://w3c.github.io/IntersectionObserver/#dom-intersectionobserverentry-target>target</a></code>'s <a href=#lazy-load-resumption-steps id=lazy-loading-attributes:lazy-load-resumption-steps-2>lazy load resumption
         steps</a> to null.<li><p>Invoke <var>resumptionSteps</var>.</ol>

        <p class=XXX>The intention is to use the original value of the
        <code id=lazy-loading-attributes:dom-intersectionobserverentry-isintersecting-2><a data-x-internal=dom-intersectionobserverentry-isintersecting href=https://w3c.github.io/IntersectionObserver/#dom-intersectionobserverentry-isintersecting>isIntersecting</a></code> and
        <code id=lazy-loading-attributes:dom-intersectionobserverentry-target-4><a data-x-internal=dom-intersectionobserverentry-target href=https://w3c.github.io/IntersectionObserver/#dom-intersectionobserverentry-target>target</a></code> getters. See <a href=https://github.com/w3c/IntersectionObserver/issues/427>w3c/IntersectionObserver#427</a>.
        <a href=references.html#refsINTERSECTIONOBSERVER>[INTERSECTIONOBSERVER]</a></p>
       </ol>
     <li>
      <p>The <var>options</var> is an <code id=lazy-loading-attributes:intersectionobserverinit><a data-x-internal=intersectionobserverinit href=https://w3c.github.io/IntersectionObserver/#dictdef-intersectionobserverinit>IntersectionObserverInit</a></code> dictionary with the
      following dictionary members: «[ "<code>rootMargin</code>" → <a href=#lazy-load-root-margin id=lazy-loading-attributes:lazy-load-root-margin>lazy load root
      margin</a> ]»</p>

      <p class=note>This allows for fetching the image during scrolling, when it does not yet —
      but is about to — intersect the viewport.</p>

      <p class=XXX>The <a href=#lazy-load-root-margin id=lazy-loading-attributes:lazy-load-root-margin-2>lazy load root margin</a> suggestions imply dynamic changes to the
      value, but the <code id=lazy-loading-attributes:intersectionobserver-4><a data-x-internal=intersectionobserver href=https://w3c.github.io/IntersectionObserver/#intersectionobserver>IntersectionObserver</a></code> API does not support changing the root
      margin. See issue <a href=https://github.com/w3c/IntersectionObserver/issues/428>w3c/IntersectionObserver#428</a>.</p>
     </ul>
   <li>
    <p>Call <var>doc</var>'s <a href=#lazy-load-intersection-observer id=lazy-loading-attributes:lazy-load-intersection-observer-3>lazy load intersection observer</a>'s <code id=lazy-loading-attributes:dom-intersectionobserver-observe><a data-x-internal=dom-intersectionobserver-observe href=https://w3c.github.io/IntersectionObserver/#dom-intersectionobserver-observe>observe</a></code> method with <var>element</var> as the
    argument.</p>

    <p class=XXX>The intention is to use the original value of the <code id=lazy-loading-attributes:dom-intersectionobserver-observe-2><a data-x-internal=dom-intersectionobserver-observe href=https://w3c.github.io/IntersectionObserver/#dom-intersectionobserver-observe>observe</a></code> method. See <a href=https://github.com/w3c/IntersectionObserver/issues/427>w3c/IntersectionObserver#427</a>.
    <a href=references.html#refsINTERSECTIONOBSERVER>[INTERSECTIONOBSERVER]</a></p>
   </ol>

  <p>To <dfn id=stop-intersection-observing-a-lazy-loading-element>stop intersection-observing a lazy loading element</dfn> <var>element</var>, run these
  steps:</p>

  <ol><li><p>Let <var>doc</var> be <var>element</var>'s <a id=lazy-loading-attributes:node-document-2 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a>.<li><p>Assert: <var>doc</var>'s <a href=#lazy-load-intersection-observer id=lazy-loading-attributes:lazy-load-intersection-observer-4>lazy load intersection observer</a> is not
   null.<li>
    <p>Call <var>doc</var>'s <a href=#lazy-load-intersection-observer id=lazy-loading-attributes:lazy-load-intersection-observer-5>lazy load intersection observer</a> <code id=lazy-loading-attributes:dom-intersectionobserver-unobserve><a data-x-internal=dom-intersectionobserver-unobserve href=https://w3c.github.io/IntersectionObserver/#dom-intersectionobserver-unobserve>unobserve</a></code> method with <var>element</var> as
    the argument.</p>

    <p class=XXX>The intention is to use the original value of the <code id=lazy-loading-attributes:dom-intersectionobserver-unobserve-2><a data-x-internal=dom-intersectionobserver-unobserve href=https://w3c.github.io/IntersectionObserver/#dom-intersectionobserver-unobserve>unobserve</a></code> method. See <a href=https://github.com/w3c/IntersectionObserver/issues/427>w3c/IntersectionObserver#427</a>.
    <a href=references.html#refsINTERSECTIONOBSERVER>[INTERSECTIONOBSERVER]</a></p>
   </ol>

  <p>
  <a id=lazy-loading-attributes:tracking-vector title="There is a tracking vector here." href=https://infra.spec.whatwg.org/#tracking-vector class=tracking-vector data-x-internal=tracking-vector><img width=46 alt="(This is a tracking vector.)" crossorigin="" src=https://resources.whatwg.org/tracking-vector.svg height=64></a>
  The <dfn id=lazy-load-root-margin>lazy load root margin</dfn> is an <a id=lazy-loading-attributes:implementation-defined href=https://infra.spec.whatwg.org/#implementation-defined data-x-internal=implementation-defined>implementation-defined</a> value, but with
  the following suggestions to consider:</p>

  <ul><li><p>Set a minimum value that most often results in the resources being loaded before they
   intersect the viewport under normal usage patterns for the given device.<li><p>The typical scrolling speed: increase the value for devices with faster typical scrolling
   speeds.<li><p>The current scrolling speed or momentum: the UA can attempt to predict where the scrolling
   will likely stop, and adjust the value accordingly.<li><p>The network quality: increase the value for slow or high-latency connections.<li><p>User preferences can influence the value.</ul>

  <p class=note>It is important <a href=https://infra.spec.whatwg.org/#tracking-vector id=lazy-loading-attributes:tracking-vector-2 class=no-backref data-x-internal=tracking-vector>for
  privacy</a> that the <a href=#lazy-load-root-margin id=lazy-loading-attributes:lazy-load-root-margin-3>lazy load root margin</a> not leak additional information. For
  example, the typical scrolling speed on the current device could be imprecise so as to not
  introduce a new fingerprinting vector.</p>


  <h3 id=通用-dom-接口><span class=secno>2.7</span> 通用 DOM 接口<a href=#通用-dom-接口 class=self-link></a></h3>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/common-dom-interfaces/index.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/common-dom-interfaces/index.en.html></div>


  <h4 id=在-idl-属性中反映内容属性><span class=secno>2.7.1</span> 在 IDL 属性中反映内容属性<a href=#在-idl-属性中反映内容属性 class=self-link></a></h4>
<div data-zh-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/common-dom-interfaces/reflecting-content-attributes-in-idl-attributes.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/common-dom-interfaces/reflecting-content-attributes-in-idl-attributes.en.html></div>

  <p>定义有些 IDL 属性是为了 <dfn id=reflect>反映</dfn> 特定的内容属性。
  这意味着在获取 IDL 属性时返回的是内容属性的当前值，
  在设置 IDL 属性时将内容属性更改为给定的值。</p>

  

  <p>通常，当获取 IDL 属性时如果内容属性不存在，IDL 属性必须表现为该内容属性的值为空字符串；
  当设置时，如果内容属性的值不存在，则必须首先添加它。</p>

  <p>如果反映内容属性的 IDL 属性是<code id=在-idl-属性中反映内容属性:idl-usvstring><a data-x-internal=idl-usvstring href=https://heycam.github.io/webidl/#idl-USVString>USVString</a></code>属性，
  且它的内容属性定义为包含一个 URL。那么在获取时如果内容属性不存在，那么 IDL 属性必须返回空字符串。
  否则，IDL 属性必须相对于元素的<a href=https://dom.spec.whatwg.org/#concept-node-document id=在-idl-属性中反映内容属性:node-document data-x-internal=node-document>节点文档</a>
  <a href=#parse-a-url id=在-idl-属性中反映内容属性:parse-a-url>解析</a>内容属性的值，如果解析成功则返回
  <a href=#resulting-url-string id=在-idl-属性中反映内容属性:resulting-url-string>结果 URL 字符串</a>。
  如果解析失败，则必须将内容属性的值<a href=https://heycam.github.io/webidl/#es-type-mapping id=在-idl-属性中反映内容属性:concept-idl-convert data-x-internal=concept-idl-convert>转换</a>
  为 <code id=在-idl-属性中反映内容属性:idl-usvstring-2><a data-x-internal=idl-usvstring href=https://heycam.github.io/webidl/#idl-USVString>USVString</a></code> 并返回。
  在设置时，必须设置内容属性的值为新值。</p>

  <p>如果反映内容属性的 IDL 属性是 <code id=在-idl-属性中反映内容属性:idl-domstring><a data-x-internal=idl-domstring href=https://heycam.github.io/webidl/#idl-DOMString>DOMString</a></code>属性，
  且它的内容属性是 <a href=#enumerated-attribute id=在-idl-属性中反映内容属性:enumerated-attribute>枚举属性</a>，
  且该 IDL 属性 <dfn id=limited-to-only-known-values>只限于已知的一些值</dfn>，
  那么当获取时必须返回与属性所处状态关联的关键字值（如果有的话），或者空字符串
  （如果没有关联的关键字值，或属性不在任何已定义的状态。比如属性缺失且没有 <i id=在-idl-属性中反映内容属性:missing-value-default><a href=#missing-value-default>缺失默认值</a></i>）。
  该状态有如果有多个关键字值，则返回匹配的那个。
  如果有多个匹配的关键字值，则指定一个作为 <dfn id=canonical-keyword>标准关键字</dfn> 并选择它。
  在设置时，内容属性必须设置为指定的新值。</p>

  <p>如果反映内容属性的 IDL 属性是可为空的 <code id=在-idl-属性中反映内容属性:idl-domstring-2><a data-x-internal=idl-domstring href=https://heycam.github.io/webidl/#idl-DOMString>DOMString</a></code>  属性，
  且它的内容属性是一个 <a href=#enumerated-attribute id=在-idl-属性中反映内容属性:enumerated-attribute-2>枚举属性</a>，那么当获取时，
  如果对应的内容属性在 <i id=在-idl-属性中反映内容属性:missing-value-default-2><a href=#missing-value-default>缺失默认值</a></i> 状态，则 IDL 属性必须返回 null；
  否则 IDL 属性必须返回属性所属状态对应的关键字值。如果有多个关键字值，返回匹配的那个。
  如果有多个匹配的 If there are multiple conforming keyword values, then one will be
  如果有多个匹配的关键字值，则指定一个作为 <a href=#canonical-keyword id=在-idl-属性中反映内容属性:canonical-keyword>标准关键字</a> 并选择它。
  在设置时，如果新值为 null 则内容属性必须被移除；否则内容属性必须设置为指定的新值。</p>

  <p>如果反映内容属性的 IDL 属性是 <code id=在-idl-属性中反映内容属性:idl-domstring-3><a data-x-internal=idl-domstring href=https://heycam.github.io/webidl/#idl-DOMString>DOMString</a></code> 或 <code id=在-idl-属性中反映内容属性:idl-usvstring-3><a data-x-internal=idl-usvstring href=https://heycam.github.io/webidl/#idl-USVString>USVString</a></code> 属性但不归于上述类别中，
  那么获取和设置必须透明地，保持大小写地进行。</p>

  <p>如果反映内容属性的 IDL 属性是 <code id=在-idl-属性中反映内容属性:idl-boolean><a data-x-internal=idl-boolean href=https://heycam.github.io/webidl/#idl-boolean>布尔</a></code> 属性，
  当获取该 IDL 属性时，如果设置了该内容属性则必须返回 true，
  如果不存在则返回 false。当设置时，如果该 IDL 属性被设为 false 则必须移除该内容属性。
  如果该 IDL 属性被设为 true 则必须将内容属性设为空字符串。
  （这与<a href=#boolean-attribute id=在-idl-属性中反映内容属性:boolean-attribute>布尔内容属性</a>的规则对应。）</p>

  <p>如果反映内容属性的 IDL 属性是有符号整数类型 （<code id=在-idl-属性中反映内容属性:idl-long><a data-x-internal=idl-long href=https://heycam.github.io/webidl/#idl-long>long</a></code>），
  那么当获取时，必须根据<a href=#rules-for-parsing-integers id=在-idl-属性中反映内容属性:rules-for-parsing-integers>解析有符号整数的规则</a>
  解析内容属性，如果解析成功且值在该 IDL 属性的类型的取值范围内，则必须返回结果值。
  如果解析失败或返回了范围外的值，或者该属性不存在，则必须返回默认值，如果没有默认值则返回0。
  当设置时，必须将给定的值转换为可以将该数字表示为<a href=#valid-integer id=在-idl-属性中反映内容属性:valid-integer>合法整数</a>
  的可能的最短字符串，然后该字符串必须被用作新的内容属性值。</p>

  <p>如果反映内容属性的 IDL 属性是有符号整数类型 （<code id=在-idl-属性中反映内容属性:idl-long-2><a data-x-internal=idl-long href=https://heycam.github.io/webidl/#idl-long>long</a></code>）
  且 <dfn id=limited-to-only-non-negative-numbers>仅限为非负数字</dfn>，那么当获取时，
  该内容属性必须根据<a href=#rules-for-parsing-non-negative-integers id=在-idl-属性中反映内容属性:rules-for-parsing-non-negative-integers>解析非负整数的规则</a>
  解析，如果解析成功且值在该 IDL 属性类型的取值范围内，必须返回结果值。
  如果解析失败或返回了范围外的值，或者该属性不存在，则必须返回默认值，
  如果没有默认值则返回 −1。
  当设置时，如果值为负用户代理必须抛出
  <a id=在-idl-属性中反映内容属性:indexsizeerror href=https://heycam.github.io/webidl/#indexsizeerror data-x-internal=indexsizeerror>"<code>IndexSizeError</code>"</a> <code id=在-idl-属性中反映内容属性:domexception><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>。
  否则必须将给定的值转换为可以将该数字表示为
  <a href=#valid-non-negative-integer id=在-idl-属性中反映内容属性:valid-non-negative-integer>合法非负整数</a> 的可能的最短字符串，
  然后该字符串必须被用作新的内容属性值。</p>

  <p>如果反映内容属性的 IDL 属性是 <em>无符号</em> 整数类型 （<code id=在-idl-属性中反映内容属性:idl-unsigned-long><a data-x-internal=idl-unsigned-long href=https://heycam.github.io/webidl/#idl-unsigned-long>unsigned long</a></code>） ，那么当获取时，必须根据
  <a href=#rules-for-parsing-non-negative-integers id=在-idl-属性中反映内容属性:rules-for-parsing-non-negative-integers-2>解析非负整数的规则</a>
  解析内容属性，如果解析成功且值在 0 到 2147483647 范围内（含），
  必须返回结果值。 如果解析失败或返回了范围外的值，或者该属性不存在，必须返回默认值，
  如果没有默认值则返回 0。当设置时，如果新值处于 0 到 2147483647 范围内，
  则令 <var>n</var> 为这个新值，否则令<var>n</var> 为默认值（如果没有默认值则为0）；
  然后必须将 <var>n</var> 转换为可将该数字表示为
  <a href=#valid-non-negative-integer id=在-idl-属性中反映内容属性:valid-non-negative-integer-2>合法非负整数</a>
  的可能的最短字符串，然后该字符串必须被用作新的内容属性值。</p>
  

  <p>如果反映内容属性的 IDL 属性是无符号整数类型（<code id=在-idl-属性中反映内容属性:idl-unsigned-long-2><a data-x-internal=idl-unsigned-long href=https://heycam.github.io/webidl/#idl-unsigned-long>unsigned long</a></code>） 且
  <dfn id=limited-to-only-non-negative-numbers-greater-than-zero>仅限于大于零的非负整数
  </dfn>，那么行为与上一种情形类似，但零是不允许的。
  当获取时，首先必须根据 <a href=#rules-for-parsing-non-negative-integers id=在-idl-属性中反映内容属性:rules-for-parsing-non-negative-integers-3>解析非负整数的规则
  </a>解析内容属性， 如果解析成功且值在 1 到 2147483647 范围内（含），则必须返回结果值。
  如果解析失败或返回了范围外的值，或者该属性不存在， 则必须返回默认值（没有默认值则为1）。
  当设置时，如果值为0，用户代理必须抛出 <a id=在-idl-属性中反映内容属性:indexsizeerror-2 href=https://heycam.github.io/webidl/#indexsizeerror data-x-internal=indexsizeerror>"<code>IndexSizeError</code>"</a> <code id=在-idl-属性中反映内容属性:domexception-2><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>。否则，
  如果新值在 1 到 2147483647 范围内，那么令 <var>n</var> 为这个新值。
  否则令 <var>n</var> 为默认值（ 如果没有默认值则为 1）；
  然后必须将<var>n</var> 转换为可将该数字表示为
  <a href=#valid-non-negative-integer id=在-idl-属性中反映内容属性:valid-non-negative-integer-3>合法非负整数</a>
  的可能的最短字符串，然后该字符串必须被用作新的内容属性值。</p> 

  <p>如果反映内容属性的 IDL 属性是无符号整数类型（<code id=在-idl-属性中反映内容属性:idl-unsigned-long-3><a data-x-internal=idl-unsigned-long href=https://heycam.github.io/webidl/#idl-unsigned-long>unsigned long</a></code>） 且
  <dfn id=limited-to-only-non-negative-numbers-greater-than-zero-with-fallback>
  仅限于有fallback 的大于0的非负整数</dfn>，则行为与前一种情形类似，但不允许的值将被转换为默认值。
  当获取时， 首先必须根据<a href=#rules-for-parsing-non-negative-integers id=在-idl-属性中反映内容属性:rules-for-parsing-non-negative-integers-4>解析非负整数的规则
  </a> 解析内容属性，如果解析成功且值在 1 到 2147483647 范围内（含），则必须返回结果值。
  如果解析失败或返回了范围外的值，或者该属性不存在，则必须返回默认值。
  当设置时，如果新值在 1 到 2147483647 范围内，则令 <var>n</var> 为这个新值，
  否则令 <var>n</var> 为默认值；然后必须将 <var>n</var> 转换为可将该数字表示为
  <a href=#valid-non-negative-integer id=在-idl-属性中反映内容属性:valid-non-negative-integer-4>合法非负整数</a>
  的可能的最短字符串，然后该字符串必须被用作新的内容属性值。</p> 

  <p>如果反映内容属性的 IDL 属性是<dfn id=clamped-to-the-range>固定范围</dfn>
  到 [<var>min</var>, <var>max</var>] 的无符号整数类型（<code id=在-idl-属性中反映内容属性:idl-unsigned-long-4><a data-x-internal=idl-unsigned-long href=https://heycam.github.io/webidl/#idl-unsigned-long>unsigned long</a></code>），
  当获取时，必须先根据 <a href=#rules-for-parsing-non-negative-integers id=在-idl-属性中反映内容属性:rules-for-parsing-non-negative-integers-5>解析非负整数的规则</a>
  解析内容属性，如果解析成功且值在 <var>min</var> 和 <var>max</var> 之间（包含），
  必须返回该结果值。如果失败，必须返回默认值。如果解析成功但值小于 <var>min</var>，必须返回 <var>min</var>。
  如果解析成功但值大于 <var>max</var>，必须返回 <var>max</var>。当设置时，其行为与设置普通无符号整数一样。</p>

  <p>如果反映内容属性的 IDL 属性是浮点数类型（<code id=在-idl-属性中反映内容属性:idl-double><a data-x-internal=idl-double href=https://heycam.github.io/webidl/#idl-double>double</a></code> 或
  <code id=在-idl-属性中反映内容属性:idl-unrestricted-double><a data-x-internal=idl-unrestricted-double href=https://heycam.github.io/webidl/#idl-unrestricted-double>unrestricted double</a></code>），那么当获取时，
  必须根据 <a href=#rules-for-parsing-floating-point-number-values id=在-idl-属性中反映内容属性:rules-for-parsing-floating-point-number-values>
  解析浮点数值的规则</a> 解析内容属性，如果解析成功则必须返回结果值。
  如果解析失败或该属性不存在，则必须返回默认值（如果没有默认值则为0）。 当设置时，
  必须将给定的值转换为 <a href=#best-representation-of-the-number-as-a-floating-point-number id=在-idl-属性中反映内容属性:best-representation-of-the-number-as-a-floating-point-number>
  浮点数的最佳表示</a>，然后该字符串必须被用作新的内容属性值。</p>

  <p>如果反映内容属性的 IDL 属性是浮点数类型（<code id=在-idl-属性中反映内容属性:idl-double-2><a data-x-internal=idl-double href=https://heycam.github.io/webidl/#idl-double>double</a></code> 或 <code id=在-idl-属性中反映内容属性:idl-unrestricted-double-2><a data-x-internal=idl-unrestricted-double href=https://heycam.github.io/webidl/#idl-unrestricted-double>unrestricted
  double</a></code>）且 <dfn id=limited-to-numbers-greater-than-zero>
  仅限于大于零的数字</dfn>，那么行为与上一种情形类似但不允许零和负值。当获取时，必须根据
  <a href=#rules-for-parsing-floating-point-number-values id=在-idl-属性中反映内容属性:rules-for-parsing-floating-point-number-values-2>
  解析浮点数值的规则</a>解析内容属性，如果解析成功且值大于 0.0，则必须返回结果值。
  否则如果解析失败或返回了范围外的值，或者该属性不存在，则必须返回默认值（如果没有默认值则为0）。
  当设置时，如果新值小于等于0，那么必须忽略该值。
  否则，必须将给定的值转换为
  <a href=#best-representation-of-the-number-as-a-floating-point-number id=在-idl-属性中反映内容属性:best-representation-of-the-number-as-a-floating-point-number-2>
  浮点数的最佳表示</a>，然后该字符串必须被用作新的内容属性值。</p>

  <p class=note>当设置 Infinity 和 Not-a-Number （NaN）这些值时会抛出异常。
  定义在 <cite>Web IDL</cite> 中。 <a href=references.html#refsWEBIDL>[WEBIDL]</a></p>

  <p>如果反映内容属性的 IDL 属性的类型为 <code id=在-idl-属性中反映内容属性:domtokenlist><a data-x-internal=domtokenlist href=https://dom.spec.whatwg.org/#interface-domtokenlist>DOMTokenList</a></code>，那么当获取时，
  必须返回 <code id=在-idl-属性中反映内容属性:domtokenlist-2><a data-x-internal=domtokenlist href=https://dom.spec.whatwg.org/#interface-domtokenlist>DOMTokenList</a></code> 对象，与它关联的元素为被查询的元素，
  与它关联的属性的本地名称为被查询的属性名。</p>

  <p>如果反映内容属性的 IDL 属性为 <code id=在-idl-属性中反映内容属性:htmlelement><a href=dom.html#htmlelement>HTMLElement</a></code> 类型，
  或者依赖于 <code id=在-idl-属性中反映内容属性:htmlelement-2><a href=dom.html#htmlelement>HTMLElement</a></code> 的接口，那么当获取时，
  它必须运行下列算法（在第一个返回值的地方停机）：</p>

  <ol><li>如果对应的内容属性不存在，那么 IDL 属性必须返回 null。<li>令 <var>candidate</var> 为：以对应的内容属性的当前值为参数，
   在内容属性的元素的 <a href=https://dom.spec.whatwg.org/#concept-node-document id=在-idl-属性中反映内容属性:node-document-2 data-x-internal=node-document>节点文档</a> 上调用
   <code id=在-idl-属性中反映内容属性:dom-document-getelementbyid><a data-x-internal=dom-document-getelementbyid href=https://dom.spec.whatwg.org/#dom-nonelementparentnode-getelementbyid>document.getElementById()</a></code>
   方法将会找到的元素。<li>如果 <var>candidate</var> 是 null，或者它与 IDL 属性类型不兼容，
   那么该 IDL 属性必须返回 null。<li>否则，它必须返回 <var>candidate</var>。</ol>

  <p>当设置时，如果给定的元素有 <code id=在-idl-属性中反映内容属性:the-id-attribute><a href=dom.html#the-id-attribute>id</a></code> 属性，
  且与被设置属性的元素有同样的 <a href=https://dom.spec.whatwg.org/#concept-tree id=在-idl-属性中反映内容属性:tree data-x-internal=tree>树</a>，
  且给定的元素是该 <a href=https://dom.spec.whatwg.org/#concept-tree id=在-idl-属性中反映内容属性:tree-2 data-x-internal=tree>树</a> 中 <a href=https://dom.spec.whatwg.org/#concept-id id=在-idl-属性中反映内容属性:concept-id data-x-internal=concept-id>ID</a>
  为该 <code id=在-idl-属性中反映内容属性:the-id-attribute-2><a href=dom.html#the-id-attribute>id</a></code> 属性值的第一个元素，则必须将内容属性设置为
  该 <code id=在-idl-属性中反映内容属性:the-id-attribute-3><a href=dom.html#the-id-attribute>id</a></code> 属性的值。否则，必须设置该内容属性为空字符串。</p>

  





  <h4 id=集合><span class=secno>2.7.2</span> 集合<a href=#集合 class=self-link></a></h4>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/common-dom-interfaces/collections/index.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/common-dom-interfaces/collections/index.en.html></div>

  <p><code id=集合:htmlformcontrolscollection><a href=#htmlformcontrolscollection>HTMLFormControlsCollection</a></code> 和 <code id=集合:htmloptionscollection><a href=#htmloptionscollection>HTMLOptionsCollection</a></code> 接口是
  从 <code id=集合:htmlcollection><a data-x-internal=htmlcollection href=https://dom.spec.whatwg.org/#interface-htmlcollection>HTMLCollection</a></code> 接口派生出来的 <a href=https://dom.spec.whatwg.org/#concept-collection id=集合:concept-collection data-x-internal=concept-collection>集合</a> 。
  <code id=集合:htmlallcollection><a href=#htmlallcollection>HTMLAllCollection</a></code> 接口是 <a href=https://dom.spec.whatwg.org/#concept-collection id=集合:concept-collection-2 data-x-internal=concept-collection>集合</a>，
  但它不派生自 <code id=集合:htmlcollection-2><a data-x-internal=htmlcollection href=https://dom.spec.whatwg.org/#interface-htmlcollection>HTMLCollection</a></code>。</p>



  <h5 id=the-htmlallcollection-interface><span class=secno>2.7.2.1</span> The <code id=the-htmlallcollection-interface:htmlallcollection><a href=#htmlallcollection>HTMLAllCollection</a></code> interface<a href=#the-htmlallcollection-interface class=self-link></a></h5>
<div data-zh-date="" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file="https://github.com/whatwg-cn/html/new/master/src/common-infrastructure/common-dom-interfaces/collections/the-htmlallcollection-interface/index.zh.html?filename=index.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fcommon-infrastructure%2Fcommon-dom-interfaces%2Fcollections%2Fthe-htmlallcollection-interface%2Findex.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/common-dom-interfaces/collections/the-htmlallcollection-interface/index.en.html></div>

  <p>The <code id=the-htmlallcollection-interface:htmlallcollection-2><a href=#htmlallcollection>HTMLAllCollection</a></code> interface is used for the legacy <code id=the-htmlallcollection-interface:dom-document-all><a href=obsolete.html#dom-document-all>document.all</a></code> attribute. It operates similarly to
  <code id=the-htmlallcollection-interface:htmlcollection><a data-x-internal=htmlcollection href=https://dom.spec.whatwg.org/#interface-htmlcollection>HTMLCollection</a></code>; the main differences are that it allows a staggering variety of
  different (ab)uses of its methods to all end up returning something, and that it can be called as
  a function as an alternative to property access.</p>

  <p class=note>All <code id=the-htmlallcollection-interface:htmlallcollection-3><a href=#htmlallcollection>HTMLAllCollection</a></code> objects are rooted at a <code id=the-htmlallcollection-interface:document><a href=dom.html#document>Document</a></code>
  and have a filter that matches all elements, so the elements <a id=the-htmlallcollection-interface:represented-by-the-collection href=https://dom.spec.whatwg.org/#represented-by-the-collection data-x-internal=represented-by-the-collection>represented by the
  collection</a> of an <code id=the-htmlallcollection-interface:htmlallcollection-4><a href=#htmlallcollection>HTMLAllCollection</a></code> object consist of all the descendant
  elements of the root <code id=the-htmlallcollection-interface:document-2><a href=dom.html#document>Document</a></code>.</p>

  <p>Objects that implement the <code id=the-htmlallcollection-interface:htmlallcollection-5><a href=#htmlallcollection>HTMLAllCollection</a></code> interface are <a href=https://heycam.github.io/webidl/#dfn-legacy-platform-object id=the-htmlallcollection-interface:legacy-platform-object data-x-internal=legacy-platform-object>legacy platform objects</a> with an additonal [[Call]] internal
  method described in the <a href=#HTMLAllCollection-call>section below</a>. They also have an
  <a id=the-htmlallcollection-interface:ishtmldda href=https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot data-x-internal=ishtmldda>[[IsHTMLDDA]]</a> internal slot.</p>

  <div class=note>
   <p>Objects that implement the <code id=the-htmlallcollection-interface:htmlallcollection-6><a href=#htmlallcollection>HTMLAllCollection</a></code> interface have several unusual
   behaviors, due of the fact that they have an <a id=the-htmlallcollection-interface:ishtmldda-2 href=https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot data-x-internal=ishtmldda>[[IsHTMLDDA]]</a> internal slot:</p>

   <ul><li><p>The <a href=https://tc39.es/ecma262/#sec-toboolean id=the-htmlallcollection-interface:js-toboolean data-x-internal=js-toboolean>ToBoolean</a> abstract operation in JavaScript returns
    false when given objects implementing the <code id=the-htmlallcollection-interface:htmlallcollection-7><a href=#htmlallcollection>HTMLAllCollection</a></code> interface.<li><p>The <a href=https://tc39.es/ecma262/#sec-abstract-equality-comparison id=the-htmlallcollection-interface:js-abstract-equality data-x-internal=js-abstract-equality>Abstract Equality Comparison</a> algorithm,
    when given objects implementing the <code id=the-htmlallcollection-interface:htmlallcollection-8><a href=#htmlallcollection>HTMLAllCollection</a></code> interface, returns true when
    compared to the <code>undefined</code> and <code>null</code> values.
    (Comparisons using the <a href=https://tc39.es/ecma262/#sec-strict-equality-comparison id=the-htmlallcollection-interface:js-strict-equality data-x-internal=js-strict-equality>Strict Equality Comparison</a>
    algorithm, and Abstract Equality comparisons to other values such as strings or objects, are
    unaffected.)<li><p>The <code id=the-htmlallcollection-interface:js-typeof><a data-x-internal=js-typeof href=https://tc39.es/ecma262/#sec-typeof-operator>typeof</a></code> operator in JavaScript returns the string
    <code>"undefined"</code> when applied to objects implementing the
    <code id=the-htmlallcollection-interface:htmlallcollection-9><a href=#htmlallcollection>HTMLAllCollection</a></code> interface.</ul>

   <p>These special behaviors are motivated by a desire for compatibility with two classes of legacy
   content: one that uses the presence of <code id=the-htmlallcollection-interface:dom-document-all-2><a href=obsolete.html#dom-document-all>document.all</a></code> as a
   way to detect legacy user agents, and one that only supports those legacy user agents and uses
   the <code id=the-htmlallcollection-interface:dom-document-all-3><a href=obsolete.html#dom-document-all>document.all</a></code> object without testing for its presence
   first. <a href=references.html#refsJAVASCRIPT>[JAVASCRIPT]</a></p>
  </div>

  <pre><code class=idl>[Exposed=Window,
 LegacyUnenumerableNamedProperties]
interface <dfn id=htmlallcollection>HTMLAllCollection</dfn> {
  readonly attribute unsigned long <a href=#dom-htmlallcollection-length id=the-htmlallcollection-interface:dom-htmlallcollection-length>length</a>;
  getter <a id=the-htmlallcollection-interface:element href=https://dom.spec.whatwg.org/#interface-element data-x-internal=element>Element</a> (unsigned long index);
  getter (<a id=the-htmlallcollection-interface:htmlcollection-2 href=https://dom.spec.whatwg.org/#interface-htmlcollection data-x-internal=htmlcollection>HTMLCollection</a> or <a id=the-htmlallcollection-interface:element-2 href=https://dom.spec.whatwg.org/#interface-element data-x-internal=element>Element</a>)? <a href=#dom-htmlallcollection-nameditem id=the-htmlallcollection-interface:dom-htmlallcollection-nameditem>namedItem</a>(DOMString name);
  (<a id=the-htmlallcollection-interface:htmlcollection-3 href=https://dom.spec.whatwg.org/#interface-htmlcollection data-x-internal=htmlcollection>HTMLCollection</a> or <a id=the-htmlallcollection-interface:element-3 href=https://dom.spec.whatwg.org/#interface-element data-x-internal=element>Element</a>)? <a href=#dom-htmlallcollection-item id=the-htmlallcollection-interface:dom-htmlallcollection-item>item</a>(optional DOMString nameOrIndex);

  // Note: HTMLAllCollection objects have a <a href=#HTMLAllCollection-call>custom [[Call]] internal method</a> and an <a id=the-htmlallcollection-interface:ishtmldda-3 href=https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot data-x-internal=ishtmldda>[[IsHTMLDDA]]</a> internal slot.
};</code></pre>

  <dl class=domintro><dt><var>collection</var> . <code id=dom-htmlallcollection-length-dev><a href=#dom-htmlallcollection-length>length</a></code><dd>
    <p>Returns the number of elements in the collection.</p>
   <dt><var>element</var> = <var>collection</var> . <code id=dom-htmlallcollection-item-dev><a href=#dom-htmlallcollection-item>item</a></code>(<var>index</var>)<dt><var>element</var> = <var>collection</var>(<var>index</var>)<dt><var>element</var> = <var>collection</var>[<var>index</var>]<dd>
    <p>Returns the item with index <var>index</var> from the collection (determined by <a id=the-htmlallcollection-interface:tree-order href=https://dom.spec.whatwg.org/#concept-tree-order data-x-internal=tree-order>tree order</a>).</p>
   <dt><var>element</var> = <var>collection</var> . <code id=the-htmlallcollection-interface:dom-htmlallcollection-item-2><a href=#dom-htmlallcollection-item>item</a></code>(<var>name</var>)<dt><var>collection</var> = <var>collection</var> . <code id=the-htmlallcollection-interface:dom-htmlallcollection-item-3><a href=#dom-htmlallcollection-item>item</a></code>(<var>name</var>)<dt><var>element</var> = <var>collection</var> . <code id=dom-htmlallcollection-nameditem-dev><a href=#dom-htmlallcollection-nameditem>namedItem</a></code>(<var>name</var>)<dt><var>collection</var> = <var>collection</var> . <code id=the-htmlallcollection-interface:dom-htmlallcollection-nameditem-2><a href=#dom-htmlallcollection-nameditem>namedItem</a></code>(<var>name</var>)<dt><var>element</var> = <var>collection</var>(<var>name</var>)<dt><var>collection</var> = <var>collection</var>(<var>name</var>)<dt><var>element</var> = <var>collection</var>[<var>name</var>]<dt><var>collection</var> = <var>collection</var>[<var>name</var>]<dd>
    <p>Returns the item with <a href=https://dom.spec.whatwg.org/#concept-id id=the-htmlallcollection-interface:concept-id data-x-internal=concept-id>ID</a> or name <var>name</var> from the collection.</p>
    <p>If there are multiple matching items, then an <code id=the-htmlallcollection-interface:htmlcollection-4><a data-x-internal=htmlcollection href=https://dom.spec.whatwg.org/#interface-htmlcollection>HTMLCollection</a></code> object containing all those elements is returned.</p>
    
    <p>Only <code id=the-htmlallcollection-interface:the-button-element><a href=form-elements.html#the-button-element>button</a></code>, <code id=the-htmlallcollection-interface:the-form-element><a href=forms.html#the-form-element>form</a></code>, <code id=the-htmlallcollection-interface:the-iframe-element><a href=iframe-embed-object.html#the-iframe-element>iframe</a></code>,
    <code id=the-htmlallcollection-interface:the-input-element><a href=input.html#the-input-element>input</a></code>, <code id=the-htmlallcollection-interface:the-map-element><a href=image-maps.html#the-map-element>map</a></code>, <code id=the-htmlallcollection-interface:the-meta-element><a href=semantics.html#the-meta-element>meta</a></code>, <code id=the-htmlallcollection-interface:the-object-element><a href=iframe-embed-object.html#the-object-element>object</a></code>,
    <code id=the-htmlallcollection-interface:the-select-element><a href=form-elements.html#the-select-element>select</a></code>, and <code id=the-htmlallcollection-interface:the-textarea-element><a href=form-elements.html#the-textarea-element>textarea</a></code> elements can have a name for the purpose of this
    method; their name is given by the value of their <code>name</code> attribute.</p>
   </dl>

  

  <p>The object's <a id=the-htmlallcollection-interface:supported-property-indices href=https://heycam.github.io/webidl/#dfn-supported-property-indices data-x-internal=supported-property-indices>supported property indices</a> are as defined for
  <code id=the-htmlallcollection-interface:htmlcollection-5><a data-x-internal=htmlcollection href=https://dom.spec.whatwg.org/#interface-htmlcollection>HTMLCollection</a></code> objects.</p>

  <p>The <a id=the-htmlallcollection-interface:supported-property-names href=https://heycam.github.io/webidl/#dfn-supported-property-names data-x-internal=supported-property-names>supported property names</a> consist of the non-empty values of all the <code id=the-htmlallcollection-interface:the-id-attribute><a href=dom.html#the-id-attribute>id</a></code> attributes of all the elements <a id=the-htmlallcollection-interface:represented-by-the-collection-2 href=https://dom.spec.whatwg.org/#represented-by-the-collection data-x-internal=represented-by-the-collection>represented by the
  collection</a>, and the non-empty values of all the <code>name</code> attributes of
  all the <a href=#all-named-elements id=the-htmlallcollection-interface:all-named-elements>"all"-named elements</a> <a id=the-htmlallcollection-interface:represented-by-the-collection-3 href=https://dom.spec.whatwg.org/#represented-by-the-collection data-x-internal=represented-by-the-collection>represented by the collection</a>, in
  <a id=the-htmlallcollection-interface:tree-order-2 href=https://dom.spec.whatwg.org/#concept-tree-order data-x-internal=tree-order>tree order</a>, ignoring later duplicates, with the <code id=the-htmlallcollection-interface:the-id-attribute-2><a href=dom.html#the-id-attribute>id</a></code> of
  an element preceding its <code>name</code> if it contributes both, they differ from each
  other, and neither is the duplicate of an earlier entry.</p>

  <p>On getting, the <dfn id=dom-htmlallcollection-length><code>length</code></dfn>
  attribute must return the number of nodes <a id=the-htmlallcollection-interface:represented-by-the-collection-4 href=https://dom.spec.whatwg.org/#represented-by-the-collection data-x-internal=represented-by-the-collection>represented by the collection</a>.</p>

  <p>The indexed property getter must return the result of <a href=#concept-get-all-indexed id=the-htmlallcollection-interface:concept-get-all-indexed>getting the "all"-indexed element</a> from this
  <code id=the-htmlallcollection-interface:htmlallcollection-10><a href=#htmlallcollection>HTMLAllCollection</a></code> given the passed index.</p>

  <p>The <dfn id=dom-htmlallcollection-nameditem><code>namedItem(<var>name</var>)</code></dfn>
  method must return the result of <a href=#concept-get-all-named id=the-htmlallcollection-interface:concept-get-all-named>getting the "all"-named
  element(s)</a> from this <code id=the-htmlallcollection-interface:htmlallcollection-11><a href=#htmlallcollection>HTMLAllCollection</a></code> given <var>name</var>.</p>

  <p>The <dfn id=dom-htmlallcollection-item><code>item(<var>nameOrIndex</var>)</code></dfn>
  method must perform the following steps:</p>

  <ol><li><p>If <var>nameOrIndex</var> was not provided, return null.<li><p>Return the result of <a href=#concept-get-all-indexed-or-named id=the-htmlallcollection-interface:concept-get-all-indexed-or-named>getting the
   "all"-indexed or named element(s)</a> from this <code id=the-htmlallcollection-interface:htmlallcollection-12><a href=#htmlallcollection>HTMLAllCollection</a></code>, given
   <var>nameOrIndex</var>.</ol>

  <hr>

  
  <p>The following elements are <dfn id=all-named-elements>"all"-named elements</dfn>:
   <code id=the-htmlallcollection-interface:the-a-element><a href=text-level-semantics.html#the-a-element>a</a></code>, 
   <code id=the-htmlallcollection-interface:the-button-element-2><a href=form-elements.html#the-button-element>button</a></code>, 
   <code id=the-htmlallcollection-interface:the-embed-element><a href=iframe-embed-object.html#the-embed-element>embed</a></code>,
   <code id=the-htmlallcollection-interface:the-form-element-2><a href=forms.html#the-form-element>form</a></code>,
   <code id=the-htmlallcollection-interface:frame><a href=obsolete.html#frame>frame</a></code>,
   <code id=the-htmlallcollection-interface:frameset><a href=obsolete.html#frameset>frameset</a></code>,
   <code id=the-htmlallcollection-interface:the-iframe-element-2><a href=iframe-embed-object.html#the-iframe-element>iframe</a></code>, 
   <code id=the-htmlallcollection-interface:the-img-element><a href=embedded-content.html#the-img-element>img</a></code>,
   <code id=the-htmlallcollection-interface:the-input-element-2><a href=input.html#the-input-element>input</a></code>,
   
   <code id=the-htmlallcollection-interface:the-map-element-2><a href=image-maps.html#the-map-element>map</a></code>, 
   <code id=the-htmlallcollection-interface:the-meta-element-2><a href=semantics.html#the-meta-element>meta</a></code>, 
   <code id=the-htmlallcollection-interface:the-object-element-2><a href=iframe-embed-object.html#the-object-element>object</a></code>,
   <code id=the-htmlallcollection-interface:the-select-element-2><a href=form-elements.html#the-select-element>select</a></code>, and
   <code id=the-htmlallcollection-interface:the-textarea-element-2><a href=form-elements.html#the-textarea-element>textarea</a></code> 
  </p>

  <p>To <dfn id=concept-get-all-indexed>get the "all"-indexed element</dfn> from an
  <code id=the-htmlallcollection-interface:htmlallcollection-13><a href=#htmlallcollection>HTMLAllCollection</a></code> <var>collection</var> given an index <var>index</var>, return the
  <var>index</var><sup>th</sup> element in <var>collection</var>, or null if there is no such
  <var>index</var><sup>th</sup> element.</p>

  <p>To <dfn id=concept-get-all-named>get the "all"-named element(s)</dfn> from an
  <code id=the-htmlallcollection-interface:htmlallcollection-14><a href=#htmlallcollection>HTMLAllCollection</a></code> <var>collection</var> given a name <var>name</var>, perform the
  following steps:</p>

  <ol><li><p>If <var>name</var> is the empty string, return null.<li>
    <p>Let <var>subCollection</var> be an <code id=the-htmlallcollection-interface:htmlcollection-6><a data-x-internal=htmlcollection href=https://dom.spec.whatwg.org/#interface-htmlcollection>HTMLCollection</a></code> object rooted at the same
    <code id=the-htmlallcollection-interface:document-3><a href=dom.html#document>Document</a></code> as <var>collection</var>, whose filter matches only elements that are
    either:</p>

    <ul><li><p><a href=#all-named-elements id=the-htmlallcollection-interface:all-named-elements-2>"all"-named elements</a> with a <code>name</code> attribute equal to
     <var>name</var>, or,<li><p>elements with an <a href=https://dom.spec.whatwg.org/#concept-id id=the-htmlallcollection-interface:concept-id-2 data-x-internal=concept-id>ID</a> equal to <var>name</var>.</ul>
   <li><p>If there is exactly one element in <var>subCollection</var>, then return that
   element.<li><p>Otherwise, if <var>subCollection</var> is empty, return null.<li><p>Otherwise, return <var>subCollection</var>.</ol>

  <p>To <dfn id=concept-get-all-indexed-or-named>get the "all"-indexed or named
  element(s)</dfn> from an <code id=the-htmlallcollection-interface:htmlallcollection-15><a href=#htmlallcollection>HTMLAllCollection</a></code> <var>collection</var> given
  <var>nameOrIndex</var>:

  <ol><li><p>If <var>nameOrIndex</var>, <a href=https://heycam.github.io/webidl/#es-type-mapping id=the-htmlallcollection-interface:concept-idl-convert data-x-internal=concept-idl-convert>converted</a> to a
   JavaScript String value, is an <a id=the-htmlallcollection-interface:array-index-property-name href=https://heycam.github.io/webidl/#dfn-array-index-property-name data-x-internal=array-index-property-name>array index property name</a>, return the result of <a href=#concept-get-all-indexed id=the-htmlallcollection-interface:concept-get-all-indexed-2>getting the "all"-indexed element</a> from this
   <code id=the-htmlallcollection-interface:htmlallcollection-16><a href=#htmlallcollection>HTMLAllCollection</a></code> given the number represented by <var>nameOrIndex</var>.<li><p>Return the result of <a href=#concept-get-all-named id=the-htmlallcollection-interface:concept-get-all-named-2>getting the "all"-named
   element(s)</a> from this <code id=the-htmlallcollection-interface:htmlallcollection-17><a href=#htmlallcollection>HTMLAllCollection</a></code> given
   <var>nameOrIndex</var>.</ol>


  <h6 id=HTMLAllCollection-call><span class=secno>2.7.2.1.1</span> [[Call]] ( <var>thisArgument</var>,  <var>argumentsList</var> )<a href=#HTMLAllCollection-call class=self-link></a></h6>
<div data-zh-date="" data-en-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" class=translate-info data-zh-file="https://github.com/whatwg-cn/html/new/master/src/common-infrastructure/common-dom-interfaces/collections/the-htmlallcollection-interface/call-thisargument-argumentslist.zh.html?filename=call-thisargument-argumentslist.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fcommon-infrastructure%2Fcommon-dom-interfaces%2Fcollections%2Fthe-htmlallcollection-interface%2Fcall-thisargument-argumentslist.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/common-dom-interfaces/collections/the-htmlallcollection-interface/call-thisargument-argumentslist.en.html></div>

  <ol><li><p>If <var>argumentsList</var>'s <a href=https://infra.spec.whatwg.org/#list-size id=HTMLAllCollection-call:list-size data-x-internal=list-size>size</a> is zero, or if
   <var>argumentsList</var>[0] is undefined, return null.<li><p>Let <var>nameOrIndex</var> be the result of <a href=https://heycam.github.io/webidl/#es-type-mapping id=HTMLAllCollection-call:concept-idl-convert data-x-internal=concept-idl-convert>converting</a> <var>argumentsList</var>[0] to a <code id=HTMLAllCollection-call:idl-domstring><a data-x-internal=idl-domstring href=https://heycam.github.io/webidl/#idl-DOMString>DOMString</a></code>.<li><p>Let <var>result</var> be the result of <a href=#concept-get-all-indexed-or-named id=HTMLAllCollection-call:concept-get-all-indexed-or-named>getting the "all"-indexed or named element(s)</a>
   from this <code id=HTMLAllCollection-call:htmlallcollection><a href=#htmlallcollection>HTMLAllCollection</a></code> given <var>nameOrIndex</var>.<li><p>Return the result of <a href=https://heycam.github.io/webidl/#es-type-mapping id=HTMLAllCollection-call:concept-idl-convert-2 data-x-internal=concept-idl-convert>converting</a>
   <var>result</var> to an ECMAScript value.</ol>

  <p class=note>The <var>thisArgument</var> is ignored, and thus code such as <code>Function.prototype.call.call(document.all, null, "x")</code> will still search for
  elements. (<code>document.all.call</code> does not exist, since <code>document.all</code> does not inherit from <code>Function.prototype</code>.)</p>

  



  <h5 id=htmlformcontrolscollection-接口><span class=secno>2.7.2.2</span> <code id=htmlformcontrolscollection-接口:htmlformcontrolscollection><a href=#htmlformcontrolscollection>HTMLFormControlsCollection</a></code> 接口<a href=#htmlformcontrolscollection-接口 class=self-link></a></h5>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/common-dom-interfaces/collections/the-htmlformcontrolscollection-interface.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/common-dom-interfaces/collections/the-htmlformcontrolscollection-interface.en.html></div>

  <p><code id=htmlformcontrolscollection-接口:htmlformcontrolscollection-2><a href=#htmlformcontrolscollection>HTMLFormControlsCollection</a></code> 接口用于
  <code id=htmlformcontrolscollection-接口:the-form-element><a href=forms.html#the-form-element>form</a></code> 元素中 <a href=forms.html#category-listed id=htmlformcontrolscollection-接口:category-listed>列出的元素</a>
  的 <a href=https://dom.spec.whatwg.org/#concept-collection id=htmlformcontrolscollection-接口:concept-collection data-x-internal=concept-collection>集合</a>。</p>

  <div class="mdn-anno wrapped before"><button onclick=toggleStatus(this) class=mdn-anno-btn><b title="Support in all current engines." class=all-engines-flag>✔</b><span>MDN</span></button><div class=feature><p><a href=https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormControlsCollection title="The HTMLFormControlsCollection interface represents a collection of HTML form control elements. ">HTMLFormControlsCollection</a><p class=all-engines-text>Support in all current engines.<div class=support><span class="firefox yes"><span>Firefox</span><span>27+</span></span><span class="safari yes"><span>Safari</span><span>6.1+</span></span><span class="chrome yes"><span>Chrome</span><span>25+</span></span><hr><span class="opera yes"><span>Opera</span><span>15+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge no"><span>Edge (Legacy)</span><span>No</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>27+</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>7+</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>25+</span></span><span class="webview_android yes"><span>WebView Android</span><span>37+</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>1.5+</span></span><span class="opera_android yes"><span>Opera Android</span><span>14+</span></span></div></div><div class=feature><p><a href=https://developer.mozilla.org/en-US/docs/Web/API/RadioNodeList title="The RadioNodeList interface represents a collection of radio elements in a <form> or a <fieldset> element.">RadioNodeList</a><p class=all-engines-text>Support in all current engines.<div class=support><span class="firefox yes"><span>Firefox</span><span>33+</span></span><span class="safari yes"><span>Safari</span><span>10+</span></span><span class="chrome yes"><span>Chrome</span><span>34+</span></span><hr><span class="opera yes"><span>Opera</span><span>Yes</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>Yes</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>33+</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>9+</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>Yes</span></span><span class="webview_android yes"><span>WebView Android</span><span>37+</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>Yes</span></span><span class="opera_android yes"><span>Opera Android</span><span>Yes</span></span></div></div></div><pre class=idl>interface <dfn id=htmlformcontrolscollection>HTMLFormControlsCollection</dfn> : <a id=htmlformcontrolscollection-接口:htmlcollection href=https://dom.spec.whatwg.org/#interface-htmlcollection data-x-internal=htmlcollection>HTMLCollection</a> {
  // inherits <a href=https://dom.spec.whatwg.org/#dom-htmlcollection-length id=htmlformcontrolscollection-接口:dom-htmlcollection-length data-x-internal=dom-htmlcollection-length>length</a> and <a href=https://dom.spec.whatwg.org/#dom-htmlcollection-item id=htmlformcontrolscollection-接口:dom-htmlcollection-item data-x-internal=dom-htmlcollection-item>item</a>()
  getter (<a href=#radionodelist id=htmlformcontrolscollection-接口:radionodelist>RadioNodeList</a> or <a id=htmlformcontrolscollection-接口:element href=https://dom.spec.whatwg.org/#interface-element data-x-internal=element>Element</a>)? <a href=#dom-htmlformcontrolscollection-nameditem id=htmlformcontrolscollection-接口:dom-htmlformcontrolscollection-nameditem>namedItem</a>(DOMString name); // shadows inherited <a href=https://dom.spec.whatwg.org/#dom-htmlcollection-nameditem id=htmlformcontrolscollection-接口:dom-htmlcollection-nameditem data-x-internal=dom-htmlcollection-nameditem>namedItem()</a>
};

interface <dfn id=radionodelist>RadioNodeList</dfn> : <a id=htmlformcontrolscollection-接口:nodelist href=https://dom.spec.whatwg.org/#interface-nodelist data-x-internal=nodelist>NodeList</a> {
  attribute DOMString <a href=#dom-radionodelist-value id=htmlformcontrolscollection-接口:dom-radionodelist-value>value</a>;
};</pre>

  <dl class=domintro><dt><var>collection</var> . <code id=htmlformcontrolscollection-接口:dom-htmlcollection-length-2><a data-x-internal=dom-htmlcollection-length href=https://dom.spec.whatwg.org/#dom-htmlcollection-length>length</a></code><dd>
    <p>返回集合中元素的数目。</p>
   <dt><var>element</var> = <var>collection</var> . <code id=htmlformcontrolscollection-接口:dom-htmlcollection-item-2><a data-x-internal=dom-htmlcollection-item href=https://dom.spec.whatwg.org/#dom-htmlcollection-item>item</a></code>(<var>index</var>)<dt><var>element</var> = <var>collection</var>[<var>index</var>]<dd>
    <p>从集合中返回下标为 <var>index</var> 的项目。
    这些项目以 <span data="tree order">树序</span> 排序。</p>
   <dt><var>element</var> = <var>collection</var> . <code id=dom-htmlformcontrolscollection-nameditem-dev><a href=#dom-htmlformcontrolscollection-nameditem>namedItem</a></code>(<var>name</var>)<div class="mdn-anno wrapped before"><button onclick=toggleStatus(this) class=mdn-anno-btn><b title="Support in all current engines." class=all-engines-flag>✔</b><span>MDN</span></button><div class=feature><p><a href=https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormControlsCollection/namedItem title="The HTMLFormControlsCollection.namedItem() method returns the RadioNodeList or the Element in the collection whose name or id match the specified name, or null if no node matches.">HTMLFormControlsCollection/namedItem</a><p class=all-engines-text>Support in all current engines.<div class=support><span class="firefox yes"><span>Firefox</span><span>33+</span></span><span class="safari yes"><span>Safari</span><span>6.1+</span></span><span class="chrome yes"><span>Chrome</span><span>25+</span></span><hr><span class="opera yes"><span>Opera</span><span>15+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge no"><span>Edge (Legacy)</span><span>No</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>33+</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>7+</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>25+</span></span><span class="webview_android yes"><span>WebView Android</span><span>37+</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>1.5+</span></span><span class="opera_android yes"><span>Opera Android</span><span>14+</span></span></div></div></div><dt><var>radioNodeList</var> = <var>collection</var> . <code id=htmlformcontrolscollection-接口:dom-htmlformcontrolscollection-nameditem-2><a href=#dom-htmlformcontrolscollection-nameditem>namedItem</a></code>(<var>name</var>)<dt><var>element</var> = <var>collection</var>[<var>name</var>]<dt><var>radioNodeList</var> = <var>collection</var>[<var>name</var>]<dd>
    <p>从集合中返回 <a href=https://dom.spec.whatwg.org/#concept-id id=htmlformcontrolscollection-接口:concept-id data-x-internal=concept-id>ID</a> 或 <code id=htmlformcontrolscollection-接口:attr-fe-name><a href=form-control-infrastructure.html#attr-fe-name>name</a></code>
    为 <var>name</var> 的项目。</p>
    <p>如果有多个匹配的项目，则返回一个包含所有那些元素的 <code id=htmlformcontrolscollection-接口:radionodelist-2><a href=#radionodelist>RadioNodeList</a></code> 对象。</p>
   <dt><var>radioNodeList</var> . <var>value</var> [ = <var>value</var> ]<dd>
    <p>返回该对象表示的首个选中的单选按钮的值。</p>
    <p>可以被设置，此时选中第一个值为该对象表示的值的单选按钮。</p>
   </dl>

  

  <p>该对象 <a href=https://heycam.github.io/webidl/#dfn-supported-property-indices id=htmlformcontrolscollection-接口:supported-property-indices data-x-internal=supported-property-indices>支持的属性下标</a>
  与 <code id=htmlformcontrolscollection-接口:htmlcollection-2><a data-x-internal=htmlcollection href=https://dom.spec.whatwg.org/#interface-htmlcollection>HTMLCollection</a></code> 中定义的相同。</p>

  <p><a href=https://heycam.github.io/webidl/#dfn-supported-property-names id=htmlformcontrolscollection-接口:supported-property-names data-x-internal=supported-property-names>支持的属性名</a> 由
  <a href=https://dom.spec.whatwg.org/#represented-by-the-collection id=htmlformcontrolscollection-接口:represented-by-the-collection data-x-internal=represented-by-the-collection>该集合表示的</a> 所有元素的所有
  <code id=htmlformcontrolscollection-接口:the-id-attribute><a href=dom.html#the-id-attribute>id</a></code> 和 <code id=htmlformcontrolscollection-接口:attr-fe-name-2><a href=form-control-infrastructure.html#attr-fe-name>name</a></code> 属性的非空值组成。
  这些值以 <a href=https://dom.spec.whatwg.org/#concept-tree-order id=htmlformcontrolscollection-接口:tree-order data-x-internal=tree-order>树序</a> 排列，
  忽略后面的重复项，元素的 <code id=htmlformcontrolscollection-接口:the-id-attribute-2><a href=dom.html#the-id-attribute>id</a></code> 在 <code>name</code> 之前
  （如果都存在的话），它们是互不相同的也互不为重复项。</p>

  <p><dfn id=dom-htmlformcontrolscollection-nameditem><code>namedItem(<var>name</var>)</code></dfn>
  方法必须根据下列算法操作：</p>

  <ol><li>如果 <var>name</var> 为空字符串，返回 null 并停止算法。<li>该方法被调用时，如果该集合中只有一个节点的 <code id=htmlformcontrolscollection-接口:the-id-attribute-3><a href=dom.html#the-id-attribute>id</a></code> 属性或
   <code id=htmlformcontrolscollection-接口:attr-fe-name-3><a href=form-control-infrastructure.html#attr-fe-name>name</a></code> 属性等于 <var>name</var>，则返回该节点并停止算法。<li>否则，如果集合中没有一个节点的 <code id=htmlformcontrolscollection-接口:the-id-attribute-4><a href=dom.html#the-id-attribute>id</a></code> 属性或
   <code id=htmlformcontrolscollection-接口:attr-fe-name-4><a href=form-control-infrastructure.html#attr-fe-name>name</a></code> 属性等于 <var>name</var>，则返回 null 并停止该算法。<li>否则，创建一个新的 <code id=htmlformcontrolscollection-接口:radionodelist-3><a href=#radionodelist>RadioNodeList</a></code> 对象，
   表示该 <code id=htmlformcontrolscollection-接口:htmlformcontrolscollection-3><a href=#htmlformcontrolscollection>HTMLFormControlsCollection</a></code> 对象的一个 <a href=#live id=htmlformcontrolscollection-接口:live>实时</a> 视图，
   且 <code id=htmlformcontrolscollection-接口:radionodelist-4><a href=#radionodelist>RadioNodeList</a></code> 对象中只包含
   <code id=htmlformcontrolscollection-接口:the-id-attribute-5><a href=dom.html#the-id-attribute>id</a></code> 属性或 <code id=htmlformcontrolscollection-接口:attr-fe-name-5><a href=form-control-infrastructure.html#attr-fe-name>name</a></code> 属性等于
   <var>name</var> 的节点。<code id=htmlformcontrolscollection-接口:radionodelist-5><a href=#radionodelist>RadioNodeList</a></code> 对象中的节点必须以
   <a href=https://dom.spec.whatwg.org/#concept-tree-order id=htmlformcontrolscollection-接口:tree-order-2 data-x-internal=tree-order>树序</a> 排序。<li>返回该 <code id=htmlformcontrolscollection-接口:radionodelist-6><a href=#radionodelist>RadioNodeList</a></code> 对象。</ol>

  <hr>

  <p>继承自 <code id=htmlformcontrolscollection-接口:nodelist-2><a data-x-internal=nodelist href=https://dom.spec.whatwg.org/#interface-nodelist>NodeList</a></code> 接口的 <code id=htmlformcontrolscollection-接口:radionodelist-7><a href=#radionodelist>RadioNodeList</a></code> 接口的成员
  必须与 <code id=htmlformcontrolscollection-接口:nodelist-3><a data-x-internal=nodelist href=https://dom.spec.whatwg.org/#interface-nodelist>NodeList</a></code> 对象上的表现一致。</p>

  <div class="mdn-anno wrapped before"><button onclick=toggleStatus(this) class=mdn-anno-btn><b title="Support in all current engines." class=all-engines-flag>✔</b><span>MDN</span></button><div class=feature><p><a href=https://developer.mozilla.org/en-US/docs/Web/API/RadioNodeList/value title="If the underlying element collection contains radio buttons, the RadioNodeList.value property represents the checked radio button. On retrieving the value property, the value of the currently checked radio button is returned as a string. If the collection does not contain any radio buttons or none of the radio buttons in the collection is in checked state, the empty string is returned. On setting the value property, the first radio button input element whose value property is equal to the new value will be set to checked.">RadioNodeList/value</a><p class=all-engines-text>Support in all current engines.<div class=support><span class="firefox yes"><span>Firefox</span><span>33+</span></span><span class="safari yes"><span>Safari</span><span>10+</span></span><span class="chrome yes"><span>Chrome</span><span>34+</span></span><hr><span class="opera yes"><span>Opera</span><span>Yes</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>18</span></span><span class="ie yes"><span>Internet Explorer</span><span>Yes</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>33+</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>9+</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>Yes</span></span><span class="webview_android yes"><span>WebView Android</span><span>37+</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>Yes</span></span><span class="opera_android yes"><span>Opera Android</span><span>Yes</span></span></div></div></div><p>在获取<code id=htmlformcontrolscollection-接口:radionodelist-8><a href=#radionodelist>RadioNodeList</a></code> 对象上的
  <dfn id=dom-radionodelist-value><code>value</code></dfn> IDL 属性时，
  必须返回运行下列步骤的返回值：</p>

  <ol><li><p>令 <var>element</var> 为 <code id=htmlformcontrolscollection-接口:radionodelist-9><a href=#radionodelist>RadioNodeList</a></code> 对象表示的第一个
   （<a href=https://dom.spec.whatwg.org/#concept-tree-order id=htmlformcontrolscollection-接口:tree-order-3 data-x-internal=tree-order>树序</a>）
   <code id=htmlformcontrolscollection-接口:attr-input-type><a href=input.html#attr-input-type>type</a></code> 属性处于
   <a href="input.html#radio-button-state-(type=radio)" id="htmlformcontrolscollection-接口:radio-button-state-(type=radio)">单选按钮</a> 状态且
   <a href=form-control-infrastructure.html#concept-fe-checked id=htmlformcontrolscollection-接口:concept-fe-checked>选中状态</a> 为真的 <code id=htmlformcontrolscollection-接口:the-input-element><a href=input.html#the-input-element>input</a></code> 元素。
   如果这样的元素不存在，令它为 null。<li><p>如果 <var>element</var> 为 null，返回空字符串。<li><p>如果 <var>element</var> 为没有 <code id=htmlformcontrolscollection-接口:attr-input-value><a href=input.html#attr-input-value>value</a></code> 属性的元素，
   返回“<code>on</code>” 字符串。<li><p>否则返回该 <var id=htmlformcontrolscollection-接口:element-2><a data-x-internal=element href=https://dom.spec.whatwg.org/#interface-element>元素</a></var> 的
   <code id=htmlformcontrolscollection-接口:attr-input-value-2><a href=input.html#attr-input-value>value</a></code> 属性的值。</ol>

  <p>当设置时，<code id=htmlformcontrolscollection-接口:dom-radionodelist-value-2><a href=#dom-radionodelist-value>value</a></code> IDL 属性必须执行下列步骤：</p>

  <ol><li><p>如果新的值是字符串“<code>on</code>”：令 <var>element</var> 为
   <code id=htmlformcontrolscollection-接口:radionodelist-10><a href=#radionodelist>RadioNodeList</a></code> 对象表示的第一个（<a href=https://dom.spec.whatwg.org/#concept-tree-order id=htmlformcontrolscollection-接口:tree-order-4 data-x-internal=tree-order>树序</a>）
   <code id=htmlformcontrolscollection-接口:attr-input-type-2><a href=input.html#attr-input-type>type</a></code> 属性处于
   <a href="input.html#radio-button-state-(type=radio)" id="htmlformcontrolscollection-接口:radio-button-state-(type=radio)-2">单选按钮</a> 状态且
   <code id=htmlformcontrolscollection-接口:attr-input-value-3><a href=input.html#attr-input-value>value</a></code> 内容属性缺失，
   或存在且等于新的值（如果有新值的话）的 <code id=htmlformcontrolscollection-接口:the-input-element-2><a href=input.html#the-input-element>input</a></code> 元素。
   如果这样的元素不存在，令 <var>element</var> 为 null。</p>

   <p>除此之外：令 <var>element</var> 为
   <code id=htmlformcontrolscollection-接口:radionodelist-11><a href=#radionodelist>RadioNodeList</a></code> 对象表示的第一个（<a href=https://dom.spec.whatwg.org/#concept-tree-order id=htmlformcontrolscollection-接口:tree-order-5 data-x-internal=tree-order>树序</a>）
   <code id=htmlformcontrolscollection-接口:attr-input-type-3><a href=input.html#attr-input-type>type</a></code> 属性处于
   <a href="input.html#radio-button-state-(type=radio)" id="htmlformcontrolscollection-接口:radio-button-state-(type=radio)-3">单选按钮</a> 状态且
   <code id=htmlformcontrolscollection-接口:attr-input-value-4><a href=input.html#attr-input-value>value</a></code> 内容属性存在且等于新值（如果有的话）
   的 <code id=htmlformcontrolscollection-接口:the-input-element-3><a href=input.html#the-input-element>input</a></code> 元素。
   如果这样的元素不存在，令 <var>element</var> 为 null。<li><p>如果 <var>element</var> 不是 null， 则设置它的 <a href=form-control-infrastructure.html#concept-fe-checked id=htmlformcontrolscollection-接口:concept-fe-checked-2>选中状态</a> 为真。</p>

  </ol>



  



  <h5 id=htmloptionscollection-接口><span class=secno>2.7.2.3</span> <code id=htmloptionscollection-接口:htmloptionscollection><a href=#htmloptionscollection>HTMLOptionsCollection</a></code> 接口<a href=#htmloptionscollection-接口 class=self-link></a></h5>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/common-dom-interfaces/collections/the-htmloptionscollection-interface.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/common-dom-interfaces/collections/the-htmloptionscollection-interface.en.html></div>

  <p><code id=htmloptionscollection-接口:htmloptionscollection-2><a href=#htmloptionscollection>HTMLOptionsCollection</a></code> 接口用于 <code id=htmloptionscollection-接口:the-option-element><a href=form-elements.html#the-option-element>option</a></code> 元素的 <a href=https://dom.spec.whatwg.org/#concept-collection id=htmloptionscollection-接口:concept-collection data-x-internal=concept-collection>集合</a>。它经常以 <code id=htmloptionscollection-接口:the-select-element><a href=form-elements.html#the-select-element>select</a></code> 元素为根，
  且拥有操作其后代属性和方法。</p>

  <pre class=idl>interface <dfn id=htmloptionscollection>HTMLOptionsCollection</dfn> : <a id=htmloptionscollection-接口:htmlcollection href=https://dom.spec.whatwg.org/#interface-htmlcollection data-x-internal=htmlcollection>HTMLCollection</a> {
  // inherits <a href=https://dom.spec.whatwg.org/#dom-htmlcollection-item id=htmloptionscollection-接口:dom-htmlcollection-item data-x-internal=dom-htmlcollection-item>item</a>(), <a href=https://dom.spec.whatwg.org/#dom-htmlcollection-nameditem id=htmloptionscollection-接口:dom-htmlcollection-nameditem data-x-internal=dom-htmlcollection-nameditem>namedItem</a>()
  [<a id=htmloptionscollection-接口:cereactions href=custom-elements.html#cereactions>CEReactions</a>] attribute unsigned long <a href=#dom-htmloptionscollection-length id=htmloptionscollection-接口:dom-htmloptionscollection-length>length</a>; // shadows inherited <a href=https://dom.spec.whatwg.org/#dom-htmlcollection-length id=htmloptionscollection-接口:dom-htmlcollection-length data-x-internal=dom-htmlcollection-length>length</a>
  [<a id=htmloptionscollection-接口:cereactions-2 href=custom-elements.html#cereactions>CEReactions</a>] <a href=#dom-htmloptionscollection-setter>setter</a> void (unsigned long index, <a id=htmloptionscollection-接口:htmloptionelement href=form-elements.html#htmloptionelement>HTMLOptionElement</a>? option);
  [<a id=htmloptionscollection-接口:cereactions-3 href=custom-elements.html#cereactions>CEReactions</a>] void <a href=#dom-htmloptionscollection-add id=htmloptionscollection-接口:dom-htmloptionscollection-add>add</a>((<a id=htmloptionscollection-接口:htmloptionelement-2 href=form-elements.html#htmloptionelement>HTMLOptionElement</a> or <a id=htmloptionscollection-接口:htmloptgroupelement href=form-elements.html#htmloptgroupelement>HTMLOptGroupElement</a>) element, optional (<a id=htmloptionscollection-接口:htmlelement href=dom.html#htmlelement>HTMLElement</a> or long)? before = null);
  [<a id=htmloptionscollection-接口:cereactions-4 href=custom-elements.html#cereactions>CEReactions</a>] void <a href=#dom-htmloptionscollection-remove id=htmloptionscollection-接口:dom-htmloptionscollection-remove>remove</a>(long index);
  attribute long <a href=#dom-htmloptionscollection-selectedindex id=htmloptionscollection-接口:dom-htmloptionscollection-selectedindex>selectedIndex</a>;
};</pre>

  <dl class=domintro><dt><var>collection</var> . <code id=dom-htmloptionscollection-length-dev><a href=#dom-htmloptionscollection-length>length</a></code> [ = <var>value</var> ]<dd>
    <p>返回集合中元素的数目。</p>
    <p>当设置为较小的数字时，截断相应容器中 <code id=htmloptionscollection-接口:the-option-element-2><a href=form-elements.html#the-option-element>option</a></code> 元素的数目。</p>
    <p>当设置为较大的数字时，在容器中新增空白的 <code id=htmloptionscollection-接口:the-option-element-3><a href=form-elements.html#the-option-element>option</a></code> 元素。</p>
   <dt><var>element</var> = <var>collection</var> . <code id=htmloptionscollection-接口:dom-htmlcollection-item-2><a data-x-internal=dom-htmlcollection-item href=https://dom.spec.whatwg.org/#dom-htmlcollection-item>item</a></code>(<var>index</var>)<dt><var>element</var> = <var>collection</var>[<var>index</var>]<dd>
    <p>返回集合中下标为 <var>index</var> 的项目。项目以 <a href=https://dom.spec.whatwg.org/#concept-tree-order id=htmloptionscollection-接口:tree-order data-x-internal=tree-order>树序</a> 排序。</p>
   <dt><var>collection</var>[<var>index</var>] = <var>element</var><dd>
    <p>当 <var>index</var> 比集合中项目的数目大时，在相应容器中新增空白 <code id=htmloptionscollection-接口:the-option-element-4><a href=form-elements.html#the-option-element>option</a></code> 元素。
    <p>当设为 null 时，从集合中移除在下标 <var>index</var> 处的项目。</p>
    <p>当设为一个 <code id=htmloptionscollection-接口:the-option-element-5><a href=form-elements.html#the-option-element>option</a></code> 元素时，在下标 <var>index</var> 处新增或替换为该元素。</p>
   <dt><var>element</var> = <var>collection</var> . <code id=dom-htmlcollection-nameditem-dev><a data-x-internal=dom-htmlcollection-nameditem href=https://dom.spec.whatwg.org/#dom-htmlcollection-nameditem>namedItem</a></code>(<var>name</var>)<dt><var>element</var> = <var>collection</var>[<var>name</var>]<dd>
    <p>从集合中返回 <a href=https://dom.spec.whatwg.org/#concept-id id=htmloptionscollection-接口:concept-id data-x-internal=concept-id>ID</a> 或 <code id=htmloptionscollection-接口:attr-option-name><a href=obsolete.html#attr-option-name>name</a></code>
    为 <var>name</var> 的元素。</p>
    <p>如果有多个匹配项则返回第一个。</p>
   <dt><var>collection</var> . <code id=dom-htmloptionscollection-add-dev><a href=#dom-htmloptionscollection-add>add</a></code>(<var>element</var> [, <var>before</var> ] )<dd>
    <p>在 <var>before</var> 节点前插入 <var>element</var>。</p>
    <p><var>before</var> 参数是数字时，在该数字处的项前插入 <var>element</var>；
    是集合中的元素时，在该元素前插入 <var>element</var>。</p>
    <p>如果 <var>before</var> 被省略或者为 null， 或者是一个溢出的数字，
    就在列表尾部插入 <var>element</var>。</p>
    <p>如果 <var>element</var> 是被插入元素的祖先，
    该方法将会抛出 <a id=htmloptionscollection-接口:hierarchyrequesterror href=https://heycam.github.io/webidl/#hierarchyrequesterror data-x-internal=hierarchyrequesterror>"<code>HierarchyRequestError</code>"</a> <code id=htmloptionscollection-接口:domexception><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>。</p>
   <dt><var>collection</var> . <code id=dom-htmloptionscollection-remove-dev><a href=#dom-htmloptionscollection-remove>remove</a></code>(<var>index</var>)<dd>
    <p>从集合中移除下标为 <var>index</var> 的元素。</p>
   <dt><var>collection</var> . <code id=dom-htmloptionscollection-selectedindex-dev><a href=#dom-htmloptionscollection-selectedindex>selectedIndex</a></code> [ = <var>value</var> ]<dd>

    <p>返回第一个项的下标（如果有的话），否则，如果没有选中项则返回 −1。</p>

    <p>可以被设置，来改变选中项。</p>

   </dl>

  

  <p>该对象 <a href=https://heycam.github.io/webidl/#dfn-supported-property-indices id=htmloptionscollection-接口:supported-property-indices data-x-internal=supported-property-indices>支持的属性下标</a>
  与 <code id=htmloptionscollection-接口:htmlcollection-2><a data-x-internal=htmlcollection href=https://dom.spec.whatwg.org/#interface-htmlcollection>HTMLCollection</a></code> 对象中定义的相同。</p>

  <p>当获取时，<dfn id=dom-htmloptionscollection-length><code>length</code></dfn>
  属性必须返回 <a href=https://dom.spec.whatwg.org/#represented-by-the-collection id=htmloptionscollection-接口:represented-by-the-collection data-x-internal=represented-by-the-collection>集合表示的</a> 节点的数目。</p>

  <p>当设置时，其行为取决于新的值等于、大于或小于
  当时 <a href=https://dom.spec.whatwg.org/#represented-by-the-collection id=htmloptionscollection-接口:represented-by-the-collection-2 data-x-internal=represented-by-the-collection>集合表示的</a> 节点的数目。
  如果等于，则设置该属性不应做任何事情。如果大于，则必须将 <var>n</var> 个新的、
  没有属性和子节点的 <code id=htmloptionscollection-接口:the-option-element-6><a href=form-elements.html#the-option-element>option</a></code> 元素追加到 <code id=htmloptionscollection-接口:htmloptionscollection-3><a href=#htmloptionscollection>HTMLOptionsCollection</a></code>
  的根 <code id=htmloptionscollection-接口:the-select-element-2><a href=form-elements.html#the-select-element>select</a></code> 元素上。其中 <var>n</var> 为这两个数字之差（新的值减去旧的值）。
  同时必须触发 Mutation 事件，如同插入了包含这些 <code id=htmloptionscollection-接口:the-option-element-7><a href=form-elements.html#the-option-element>option</a></code> 元素的
  <code id=htmloptionscollection-接口:documentfragment><a data-x-internal=documentfragment href=https://dom.spec.whatwg.org/#interface-documentfragment>DocumentFragment</a></code> 一样。如果新的值更小，则必须从父节点中移除集合中最后的
  <var>n</var> 个节点，其中 <var>n</var> 为这两个数之差（旧的值减去新的值）。</p>

  <p class=note>设置 <code id=htmloptionscollection-接口:dom-htmloptionscollection-length-2><a href=#dom-htmloptionscollection-length>length</a></code>
  不会移除或增加任何 <code id=htmloptionscollection-接口:the-optgroup-element><a href=form-elements.html#the-optgroup-element>optgroup</a></code> 元素，也不会给既有的 <code id=htmloptionscollection-接口:the-optgroup-element-2><a href=form-elements.html#the-optgroup-element>optgroup</a></code> 元素增加子节点。
  （虽然可以从中移除子节点）。</p>

  <p><a href=https://heycam.github.io/webidl/#dfn-supported-property-names id=htmloptionscollection-接口:supported-property-names data-x-internal=supported-property-names>支持的属性名</a> 由
  所有 <a href=https://dom.spec.whatwg.org/#represented-by-the-collection id=htmloptionscollection-接口:represented-by-the-collection-3 data-x-internal=represented-by-the-collection>集合表示的</a> 元素的
  所有<code id=htmloptionscollection-接口:the-id-attribute><a href=dom.html#the-id-attribute>id</a></code> 和 <code id=htmloptionscollection-接口:attr-option-name-2><a href=obsolete.html#attr-option-name>name</a></code>属性的非空值构成。
  这些值以 <a href=https://dom.spec.whatwg.org/#concept-tree-order id=htmloptionscollection-接口:tree-order-2 data-x-internal=tree-order>树序</a> 排列，
  忽略后面的重复项，元素的 <code id=htmloptionscollection-接口:the-id-attribute-2><a href=dom.html#the-id-attribute>id</a></code> 在
  <code id=htmloptionscollection-接口:attr-option-name-3><a href=obsolete.html#attr-option-name>name</a></code> 之前（如果都存在的话），它们互不相同也互不为重复项。</p>

  <p id=dom-htmloptionscollection-setter>当用户代理
  <a href=https://heycam.github.io/webidl/#dfn-set-the-value-of-a-new-indexed-property id=htmloptionscollection-接口:set-the-value-of-a-new-indexed-property data-x-internal=set-the-value-of-a-new-indexed-property>设置一个新的索引属性的值</a>
  或 <a href=https://heycam.github.io/webidl/#dfn-set-the-value-of-an-existing-indexed-property id=htmloptionscollection-接口:set-the-value-of-an-existing-indexed-property data-x-internal=set-the-value-of-an-existing-indexed-property>设置已存在的索引属性的值</a> 时，
  设属性下标为 <var>index</var>，新的值为 <var>value</var>，它必须运行下列算法：</p>

  <ol><li><p>如果 <var>value</var> 为 null，以  <var>index</var> 为参数运行 <code id=htmloptionscollection-接口:dom-htmloptionscollection-remove-2><a href=#dom-htmloptionscollection-remove>remove</a></code> 方法的步骤，并终止本步骤。<li><p>令 <var>length</var> 为 <a href=https://dom.spec.whatwg.org/#represented-by-the-collection id=htmloptionscollection-接口:represented-by-the-collection-4 data-x-internal=represented-by-the-collection>集合表示的</a>
   节点的数目。<li><p>令 <var>n</var> 为 <var>index</var> 减 <var>length</var>。<li><p>如果 <var>n</var> 大于0，则 <a href=https://dom.spec.whatwg.org/#concept-node-append id=htmloptionscollection-接口:concept-node-append data-x-internal=concept-node-append>追加</a>
   一个由 <span><var>n</var>-1</span> 个新的、 没有属性和子元素的 <code id=htmloptionscollection-接口:the-option-element-8><a href=form-elements.html#the-option-element>option</a></code> 元素组成的
   <code id=htmloptionscollection-接口:documentfragment-2><a data-x-internal=documentfragment href=https://dom.spec.whatwg.org/#interface-documentfragment>DocumentFragment</a></code> 到 <code id=htmloptionscollection-接口:htmloptionscollection-4><a href=#htmloptionscollection>HTMLOptionsCollection</a></code> 所在的根 <code id=htmloptionscollection-接口:the-select-element-3><a href=form-elements.html#the-select-element>select</a></code> 元素。<li><p>如果 <var>n</var> 大于等于0，<a href=https://dom.spec.whatwg.org/#concept-node-append id=htmloptionscollection-接口:concept-node-append-2 data-x-internal=concept-node-append>追加</a>
   <var>value</var> 到 <code id=htmloptionscollection-接口:the-select-element-4><a href=form-elements.html#the-select-element>select</a></code> 元素。否则，以 <var>value</var>
   <a href=https://dom.spec.whatwg.org/#concept-node-replace id=htmloptionscollection-接口:concept-node-replace data-x-internal=concept-node-replace>替换</a> 集合中第 <var>index</var> 个元素。</ol>

  <p><dfn id=dom-htmloptionscollection-add><code>add(<var>element</var>, <var>before</var>)</code></dfn> 方法必须按照下列算法执行：</p>

  <ol><li><p>如果 <var>element</var> 为 <code id=htmloptionscollection-接口:htmloptionscollection-5><a href=#htmloptionscollection>HTMLOptionsCollection</a></code> 所在的根
   <code id=htmloptionscollection-接口:the-select-element-5><a href=form-elements.html#the-select-element>select</a></code> 元素的祖先节点，则抛出一个
   <a id=htmloptionscollection-接口:hierarchyrequesterror-2 href=https://heycam.github.io/webidl/#hierarchyrequesterror data-x-internal=hierarchyrequesterror>"<code>HierarchyRequestError</code>"</a> <code id=htmloptionscollection-接口:domexception-2><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code> 并终止这些步骤。<li><p>如果 <var>before</var> 为一个元素，但它并非 <code id=htmloptionscollection-接口:htmloptionscollection-6><a href=#htmloptionscollection>HTMLOptionsCollection</a></code> 所在的根
   <code id=htmloptionscollection-接口:the-select-element-6><a href=form-elements.html#the-select-element>select</a></code> 元素的后代，则抛出一个
   <a id=htmloptionscollection-接口:notfounderror href=https://heycam.github.io/webidl/#notfounderror data-x-internal=notfounderror>"<code>NotFoundError</code>"</a> <code id=htmloptionscollection-接口:domexception-3><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code> 并终止这些步骤。<li><p>如果 <var>element</var> 和 <var>before</var> 为同一元素，则返回并终止这些步骤。<li><p>如果 <var>before</var> 为一个节点，那么令 <var>reference</var> 为该节点。
   否则如果 <var>before</var> 为整数且集合中存在第 <var>before</var> 个节点，令 <var>reference</var>
   为该节点。否则令 <var>reference</var> 为 null。<li><p>如果 <var>reference</var> 不为 null，令 <var>parent</var> 为 <var>reference</var>
   的父节点。否则令 <var>parent</var> 为 <code id=htmloptionscollection-接口:htmloptionscollection-7><a href=#htmloptionscollection>HTMLOptionsCollection</a></code> 所在的根
   <code id=htmloptionscollection-接口:the-select-element-7><a href=form-elements.html#the-select-element>select</a></code> 元素。<li><p>在<var>reference</var><a href=https://dom.spec.whatwg.org/#concept-node-pre-insert id=htmloptionscollection-接口:pre-insert data-x-internal=pre-insert>之前插入</a>
   <var>element</var> 到 <var>parent</var> 节点中。</p>

  </ol>

  <p><dfn id=dom-htmloptionscollection-remove><code>remove(<var>index</var>)</code></dfn> 方法
  必须按照下列算法执行：</p>

  <ol><li><p>如果 <a href=https://dom.spec.whatwg.org/#represented-by-the-collection id=htmloptionscollection-接口:represented-by-the-collection-5 data-x-internal=represented-by-the-collection>集合表示的</a> 元素数目为0，
  终止这些步骤。<li><p>如果 <var>index</var> 小于零，或小于 <a href=https://dom.spec.whatwg.org/#represented-by-the-collection id=htmloptionscollection-接口:represented-by-the-collection-6 data-x-internal=represented-by-the-collection>
   集合表示的</a> 节点数目，终止这些步骤。<li><p>令 <var>element</var> 为集合中第 <var>index</var> 个元素。<li><p>将 <var>element</var> 从它的父节点移除。</ol>

  <p><dfn id=dom-htmloptionscollection-selectedindex><code>selectedIndex</code></dfn> IDL
  属性必须像 <code id=htmloptionscollection-接口:htmloptionscollection-8><a href=#htmloptionscollection>HTMLOptionsCollection</a></code> 所在的根 <code id=htmloptionscollection-接口:the-select-element-8><a href=form-elements.html#the-select-element>select</a></code> 元素上的同名属性一样操作。</p>

  

  



  <h4 id=domstringlist-接口><span class=secno>2.7.3</span> <code id=domstringlist-接口:domstringlist><a href=#domstringlist>DOMStringList</a></code> 接口<a href=#domstringlist-接口 class=self-link></a></h4>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/common-dom-interfaces/the-domstringlist-interface.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/common-dom-interfaces/the-domstringlist-interface.en.html></div>

  <p><code id=domstringlist-接口:domstringlist-2><a href=#domstringlist>DOMStringList</a></code> 接口是表示字符串列表的一种毫不时髦的复古的方式。</p>

  <pre class=idl>[Exposed=(Window,Worker)]
interface <dfn id=domstringlist>DOMStringList</dfn> {
  readonly attribute unsigned long <a href=#dom-domstringlist-length id=domstringlist-接口:dom-domstringlist-length>length</a>;
  getter DOMString? <a href=#dom-domstringlist-item id=domstringlist-接口:dom-domstringlist-item>item</a>(unsigned long index);
  boolean <a href=#dom-domstringlist-contains id=domstringlist-接口:dom-domstringlist-contains>contains</a>(DOMString string);
};</pre>

  <p class=warning>新 API 必须使用 <code>sequence&lt;DOMString></code> 或
  其他等价的接口，而不是 <code id=domstringlist-接口:domstringlist-3><a href=#domstringlist>DOMStringList</a></code>。</p>

  <dl class=domintro><dt><var>strings</var> . <code id=dom-domstringlist-length-dev><a href=#dom-domstringlist-length>length</a></code><dd><p>返回 <var>strings</var> 中字符串的个数。<dt><var>strings</var>[<var>index</var>]<dt><var>strings</var> . <code id=dom-domstringlist-item-dev><a href=#dom-domstringlist-item>item</a></code>(<var>index</var>)<dd><p>返回 <var>strings</var> 中下标为 <var>index</var> 的字符串。<dt><var>strings</var> . <code id=dom-domstringlist-contains-dev><a href=#dom-domstringlist-contains>contains</a></code>(<var>string</var>)<dd><p>如果 <var>strings</var> 包含 <var>string</var> 则返回 true，否则返回 false。</dl>

  

  <p>每个 <code id=domstringlist-接口:domstringlist-4><a href=#domstringlist>DOMStringList</a></code> 对象有一个与之关联的 <a href=https://infra.spec.whatwg.org/#list id=domstringlist-接口:list data-x-internal=list>列表</a>。</p>

  <p><code id=domstringlist-接口:domstringlist-5><a href=#domstringlist>DOMStringList</a></code> 对象 <a href=https://heycam.github.io/webidl/#dfn-supported-property-indices id=domstringlist-接口:supported-property-indices data-x-internal=supported-property-indices>支持的属性下标</a>
  为 0 到关联列表的 <a href=https://infra.spec.whatwg.org/#list-size id=domstringlist-接口:list-size data-x-internal=list-size>大小</a> 减 1。如果与它关联的列表
  <a href=https://infra.spec.whatwg.org/#list-is-empty id=domstringlist-接口:list-is-empty data-x-internal=list-is-empty>为空</a>，它就没有
  <a href=https://heycam.github.io/webidl/#dfn-supported-property-indices id=domstringlist-接口:supported-property-indices-2 data-x-internal=supported-property-indices>支持的属性下标</a>。</p>

  <p><dfn id=dom-domstringlist-length><code>length</code></dfn> 属性的读取方法必须返回
  与该 <code id=domstringlist-接口:domstringlist-6><a href=#domstringlist>DOMStringList</a></code> 对象关联的列表的 <a href=https://infra.spec.whatwg.org/#list-size id=domstringlist-接口:list-size-2 data-x-internal=list-size>大小</a>。</p>

  <p><dfn id=dom-domstringlist-item><code>item(<var>index</var>)</code></dfn> 方法被调用时，
  必须返回该 <code id=domstringlist-接口:domstringlist-7><a href=#domstringlist>DOMStringList</a></code> 对象的关联列表中第 <var>index</var> 个项目，
  如果 <var>index</var> 加一大于该 <code id=domstringlist-接口:domstringlist-8><a href=#domstringlist>DOMStringList</a></code> 对象的关联列表的 <a href=https://infra.spec.whatwg.org/#list-size id=domstringlist-接口:list-size-3 data-x-internal=list-size>大小</a>。</p>

  <p><dfn id=dom-domstringlist-contains><code>contains(<var>string</var>)</code></dfn>
  方法被调用时，如果该 <code id=domstringlist-接口:domstringlist-9><a href=#domstringlist>DOMStringList</a></code> 对象的关联列表
  <a href=https://infra.spec.whatwg.org/#list-contain id=domstringlist-接口:list-contains data-x-internal=list-contains>包含</a> <var>string</var>，则必须返回 true，
  否则必须返回 false。</p>

  


  


  <h3 id=安全地传递结构化数据><span class=secno>2.8</span> 安全地传递结构化数据<a href=#安全地传递结构化数据 class=self-link></a></h3>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/safe-passing-of-structured-data/index.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/safe-passing-of-structured-data/index.en.html></div>

  <p>本节使用 JavaScript 标准的术语和排版惯例。 <a href=references.html#refsJAVASCRIPT>[JAVASCRIPT]</a></p>


  <h4 id=可序列化对象><span class=secno>2.8.1</span> <dfn>可序列化对象</dfn><a href=#可序列化对象 class=self-link></a></h4>
<div data-zh-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/safe-passing-of-structured-data/serializable-objects.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/safe-passing-of-structured-data/serializable-objects.en.html></div>

  <p><a href=#可序列化对象 id=可序列化对象:可序列化对象>可序列化对象</a> 支持被序列化以及之后反序列化，
  且这一过程与给定的 <a href=https://tc39.es/ecma262/#sec-code-realms id=可序列化对象:javascript-realm data-x-internal=javascript-realm>JavaScript 领域</a> 无关。
  这允许它们存储在磁盘中用于后续恢复，或者在文档和 worker 的边界上克隆
  （包括不同 <a href=origin.html#concept-origin id=可序列化对象:concept-origin>域</a> 的文档之间，
  或者不同的 <a href=webappapis.html#event-loop id=可序列化对象:event-loop>事件循环</a> 之间）。</p>

  <p>并非所有对象都是 <a href=#可序列化对象 id=可序列化对象:可序列化对象-2>可序列化对象</a>，也并不是
  <a href=#可序列化对象 id=可序列化对象:可序列化对象-3>可克隆的对象</a> 的所有方面都需要在序列化时保留。</p>

  <p><a href=https://heycam.github.io/webidl/#dfn-platform-object id=可序列化对象:platform-object data-x-internal=platform-object>平台对象</a> 可以是
  <a href=#可序列化对象 id=可序列化对象:可序列化对象-4>可序列化对象</a>
  只要它们实现了用 <dfn id=serializable data-dfn-type=extended-attribute data-lt=Serializable><code>[Serializable]</code></dfn>
  IDL <a href=https://heycam.github.io/webidl/#dfn-extended-attribute id=可序列化对象:extended-attribute data-x-internal=extended-attribute>扩展属性</a> 标注的接口。
  这样的接口必须定义下面的算法：</p>

  <dl><dt><dfn id=serialization-steps data-export="">序列化步骤</dfn>，
   接受一个 <a href=https://heycam.github.io/webidl/#dfn-platform-object id=可序列化对象:platform-object-2 data-x-internal=platform-object>平台对象</a> <var>value</var>，
   一个 <a href=https://tc39.es/ecma262/#sec-list-and-record-specification-type id=可序列化对象:record data-x-internal=record>记录</a> <var>serialized</var>，
   和一个布尔值 <var>forStorage</var><dd>
   <p>把 <var>value</var> 中的数据序列化为 <var>serialized</var> 字段的一系列步骤。
   序列化到 <var>serialized</var> 中的结果数据必须独立于任何 <a href=https://tc39.es/ecma262/#sec-code-realms id=可序列化对象:javascript-realm-2 data-x-internal=javascript-realm>JavaScript 领域</a>。</p>

    <p>如果不可能序列化，这些步骤会抛出异常。</p>

    <p>这些步骤可能会执行一个 <a href=#sub-serialization id=可序列化对象:sub-serialization>子序列化</a> 来序列化嵌套的数据结构。
    它们不应直接调用 <a href=#structuredserialize id=可序列化对象:structuredserialize>StructuredSerialize</a>，因为这样做会忽略
    一个重要的 <var>memory</var> 参数。</p>

    <p>引入这些步骤，如果与该算法无关，则不应该提及 <var>forStorage</var> 参数。</p>
   <dt><dfn id=deserialization-steps data-export="">反序列化步骤</dfn>，
   接受一个 <a href=https://tc39.es/ecma262/#sec-list-and-record-specification-type id=可序列化对象:record-2 data-x-internal=record>记录</a> <var>serialized</var>
   和一个 <a href=https://heycam.github.io/webidl/#dfn-platform-object id=可序列化对象:platform-object-3 data-x-internal=platform-object>平台对象</a> <var>value</var><dd>
    <p>把 <var>serialized</var> 中的数据反序列化的一系列步骤，用它适当地建立 <var>value</var>。
    <var>value</var> 将会是一个新创建的相应 <a href=https://heycam.github.io/webidl/#dfn-platform-object id=可序列化对象:platform-object-4 data-x-internal=platform-object>平台对象</a> 类型的实例，
    它的内部数据还未建立；这一工作交给这些步骤：</p>

    <p>如果不可能反序列化这些步骤会抛出一个异常。</p>

    <p>这些步骤可能会执行一个 <a href=#sub-deserialization id=可序列化对象:sub-deserialization>子反序列化</a>
    来反序列化嵌套的数据结构。
    它们不能直接调用 <a href=#structureddeserialize id=可序列化对象:structureddeserialize>StructuredDeserialize</a>，一文这样做会忽略
    重要的 <var>targetRealm</var> 和 <var>memory</var> 参数。</p>
   </dl>

  <p>由平台对象的定义决定哪些数据被这些步骤序列化和反序列化。通常这些步骤是非常对称的。</p>

  <p><code id=可序列化对象:serializable><a href=#serializable>[Serializable]</a></code> 扩展属性不允许有任何参数，
  并且不能出现任何不是接口的地方。在一个接口上它必须只出现一次。它不能用在回调接口上。
  如果它出现在部分接口（partial interface）上，或者一个混入接口（mixin）上，
  那么它必须也出现在原始（original）或被混入（mixed-in-to）接口上，
  并且部分接口或混入提供任何的 <a href=#serialization-steps id=可序列化对象:serialization-steps>序列化步骤</a> 和
  <a href=#deserialization-steps id=可序列化对象:deserialization-steps>反序列化步骤</a> 应该理解为
  增加到原始或被混入接口的对应步骤上。</p>

  <div class=example>
   <p>加入我们在定义一个平台对象 <code>Person</code>，它与两部分数据相关联：</p>

   <ul class=brief><li>一个名字值，是一个字符串；<li>最好朋友的值，是另一个 <code>Person</code> 实例或 null</ul>

   <p>接着，我们使用 <code id=可序列化对象:serializable-2><a href=#serializable>[Serializable]</a></code>
   <a href=https://heycam.github.io/webidl/#dfn-extended-attribute id=可序列化对象:extended-attribute-2 data-x-internal=extended-attribute>扩展属性</a>
   标注 <code>Person</code> 接口，可以把 <code>Person</code> 实例定义为
   <a href=#可序列化对象 id=可序列化对象:可序列化对象-5>可序列化对象</a>，同时定义下列算法：</p>

   <dl><dt><a href=#serialization-steps id=可序列化对象:serialization-steps-2>序列化步骤</a><dd>
     <ol><li><p>设置 <var>serialized</var>.[[Name]] 为 <var>value</var> 关联的名字值。<li><p>令 <var>serializedBestFriend</var> 为 <var>value</var> 关联的最好朋友的值的
      <a href=#sub-serialization id=可序列化对象:sub-serialization-2>子序列化</a>。<li><p>设置 <var>serialized</var>.[[BestFriend]] 为 <var>serializedBestFriend</var>。</ol>
    <dt><a href=#deserialization-steps id=可序列化对象:deserialization-steps-2>反序列化步骤</a><dd>
     <ol><li><p>设置 <var>value</var> 关联的名字值为 <var>serialized</var>.[[Name]]。<li><p>令 <var>deserializedBestFriend</var> 为 <var>serialized</var>.[[BestFriend]] 的
      <a href=#sub-deserialization id=可序列化对象:sub-deserialization-2>子反序列化</a>。<li><p>设置 <var>value</var> 关联的最好朋友值为 <var>deserializedBestFriend</var>。</ol>
    </dl>
  </div>

  <p>在 JavaScript 规范中定义的对象直接由 <a href=#structuredserialize id=可序列化对象:structuredserialize-2>StructuredSerialize</a> 抽象操作处理。</p>

  <p id=cloneable-objects class=note>最初，本规范定义了“克隆对象”的概念，
  可以从一个 <a href=https://tc39.es/ecma262/#sec-code-realms id=可序列化对象:javascript-realm-3 data-x-internal=javascript-realm>JavaScript 领域</a> 克隆到另一个。
  但为了更好地指定某些更复杂的情况的行为，更新了模型来显示地进行序列化和反序列化。</p>


  <h4 id=可传输对象 data-lt="transferable object" data-export=""><span class=secno>2.8.2</span> <dfn>可传输对象</dfn><a href=#可传输对象 class=self-link></a></h4>
<div data-zh-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/safe-passing-of-structured-data/transferable-objects.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/safe-passing-of-structured-data/transferable-objects.en.html></div>

  <p><a href=#可传输对象 id=可传输对象:可传输对象>可传输对象</a> 支持在 <a href=webappapis.html#event-loop id=可传输对象:event-loop>事件循环</a> 之间传输。传输其实就是有效地重新创建对象并共享对底层数据的引用，然后将被传输的对象分离。
  在转让昂贵资源的所有权时很有用。并非所有对象都是 <a href=#可传输对象 id=可传输对象:可传输对象-2>可传输对象</a>，
  也并非 <a href=#可传输对象 id=可传输对象:可传输对象-3>可传输对象</a> 的所有方面都会在传输时被保留。</p>

  <p class=note>传输是不可逆转的、不幂等的操作。对象一旦被传输就不可再次传输或使用。</p>

  <p><a href=https://heycam.github.io/webidl/#dfn-platform-object id=可传输对象:platform-object data-x-internal=platform-object>平台对象</a> 可以是
  <a href=#可传输对象 id=可传输对象:可传输对象-4>可传输对象</a>，
  只要它们实现了以 <dfn id=transferable data-dfn-type=extended-attribute data-lt=Transferable><code>[Transferable]</code></dfn> IDL
  <a href=https://heycam.github.io/webidl/#dfn-extended-attribute id=可传输对象:extended-attribute data-x-internal=extended-attribute>扩展属性</a> 注解的接口。
  这样的接口必须定义下列算法：</p>

  <dl><dt><dfn id=transfer-steps data-export="">传输步骤</dfn>，
   接受一个 <a href=https://heycam.github.io/webidl/#dfn-platform-object id=可传输对象:platform-object-2 data-x-internal=platform-object>平台对象</a> <var>value</var>
   和一个 <a href=https://tc39.es/ecma262/#sec-list-and-record-specification-type id=可传输对象:record data-x-internal=record>记录</a> <var>dataHolder</var><dd>
     <p>把 <var>value</var> 中的数据传输到 <var>dataHolder</var> 字段的一系列步骤。
     <var>dataHolder</var> 中的结果数据必须独立于任何 <a href=https://tc39.es/ecma262/#sec-code-realms id=可传输对象:javascript-realm data-x-internal=javascript-realm>JavaScript 领域</a>。</p>

    <p>如果不可能传输，这些步骤会抛出异常。</p>
   <dt><dfn id=transfer-receiving-steps data-export="">接收步骤</dfn>，
   接收一个 <a href=https://tc39.es/ecma262/#sec-list-and-record-specification-type id=可传输对象:record-2 data-x-internal=record>记录</a> <var>dataHolder</var>
   和一个 <a href=https://heycam.github.io/webidl/#dfn-platform-object id=可传输对象:platform-object-3 data-x-internal=platform-object>平台对象</a> <var>value</var><dd>
    <p>接收 <var>dataHolder</var> 中的数据并用它适当地建立 <var>value</var> 的一系列步骤。
    <var>value</var> 将会是一个新创建的相应 <a href=https://heycam.github.io/webidl/#dfn-platform-object id=可传输对象:platform-object-4 data-x-internal=platform-object>平台对象</a> 类型的实例，
    它的内部数据还未建立；这一工作交给这些步骤：</p>

    <p>如果不可能接收这次传输，这些步骤会抛出异常。</p>
   </dl>

  <p>由平台对象的定义决定哪些数据被这些步骤传输。通常这些步骤是非常对称的。</p>

  <p><code id=可传输对象:transferable><a href=#transferable>[Transferable]</a></code> 扩展属性不允许有任何参数，
  并且不能出现任何不是接口的地方。在一个接口上它必须只出现一次。它不能用在回调接口上。
  如果它出现在部分接口（partial interface）上，或者一个混入接口（mixin）上，
  那么它必须也出现在原始（original）或被混入（mixed-in-to）接口上，
  并且部分接口或混入提供任何的 <a href=#transfer-steps id=可传输对象:transfer-steps>传输步骤</a> 和
  <a href=#transfer-receiving-steps id=可传输对象:transfer-receiving-steps>接收步骤</a> 应该理解为
  增加到原始或被混入接口的对应步骤上。</p>

  <p>是 <a href=#可传输对象 id=可传输对象:可传输对象-5>可传输对象</a>
  的 <a href=https://heycam.github.io/webidl/#dfn-platform-object id=可传输对象:platform-object-5 data-x-internal=platform-object>平台对象</a> 有一个
  <dfn data-dfn-for="platform object" id=detached data-dfn-type=attribute>[[Detached]]</dfn> 内部槽。
  用于确保一旦平台对象已经被传输，它不能被再次传输。</p>

  <p>JavaScript 标准中定义的对象直接交由 <a href=#structuredserializewithtransfer id=可传输对象:structuredserializewithtransfer>StructuredSerializeWithTransfer</a> 抽象操作处理。</p>


  <h4 id=structuredserializeinternal data-dfn-type=abstract-op data-noexport="" data-lt=StructuredSerializeInternal><span class=secno>2.8.3</span> <dfn>StructuredSerializeInternal</dfn> ( <var>value</var>, <var>forStorage</var> [ ,
  <var>memory</var> ] )<a href=#structuredserializeinternal class=self-link></a></h4>
<div data-zh-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/safe-passing-of-structured-data/structuredserializeinternal-value-forstorage-memory.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/safe-passing-of-structured-data/structuredserializeinternal-value-forstorage-memory.en.html></div>

  <p><a href=#structuredserializeinternal id=structuredserializeinternal:structuredserializeinternal>StructuredSerializeInternal</a> 抽象操作接受一个 JavaScript 值 <var>value</var> 作为输入，
  把它序列化为一个 <a href=https://tc39.es/ecma262/#sec-code-realms id=structuredserializeinternal:javascript-realm data-x-internal=javascript-realm>领域</a> 无关的形式，在这里表示为一个
  <a href=https://tc39.es/ecma262/#sec-list-and-record-specification-type id=structuredserializeinternal:record data-x-internal=record>记录</a>。这一序列化的形式有着后续反序列化到不同领域的新
  JavaScript 值需要的所有必要信息。</p>

  <p>这一过程可能会抛出一个异常，例如当尝试序列化不可序列化对象时。</p>

  <ol><li>
    <p>如果没有提供 <var>memory</var>，令 <var>memory</var> 为一个空的 <a href=https://infra.spec.whatwg.org/#ordered-map id=structuredserializeinternal:ordered-map data-x-internal=ordered-map>映射</a>。</p>

    <p class=note><var>memory</var> 映射是为了避免把对象序列化两次。
    最终会用于保持环状结构以及标识图中的重复对象。</p>
   <li><p>如果 <var>memory</var>[<var>value</var>] <a href=https://infra.spec.whatwg.org/#map-exists id=structuredserializeinternal:map-exists data-x-internal=map-exists>存在</a>，则
   返回 <var>memory</var>[<var>value</var>]。<li><p>令<var>deep</var> 为 false。<li><p>如果 <a href=https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values id=structuredserializeinternal:js-type data-x-internal=js-type>Type</a>(<var>value</var>) 为 Undefined，Null，Boolean，
   Number，BigInt 或 String，则返回 { [[Type]]: "primitive"，[[Value]]: <var>value</var> }。<li><p>如果 <a href=https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values id=structuredserializeinternal:js-type-2 data-x-internal=js-type>Type</a>(<var>value</var>) 为 Symbol，则抛出一个
   <a id=structuredserializeinternal:datacloneerror href=https://heycam.github.io/webidl/#datacloneerror data-x-internal=datacloneerror>"<code>DataCloneError</code>"</a> <code id=structuredserializeinternal:domexception><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>。<li><p>令<var>serialized</var> 为一个未初始化的值。<li><p>如果 <var>value</var> 有一个 [[BooleanData]] 内部槽，则把 <var>serialized</var> 设置为
   { [[Type]]: "Boolean",[[BooleanData]]: <var>value</var>.[[BooleanData]] }。<li><p>否则，如果 <var>value</var> 有一个 [[NumberData]] 内部槽，则把
   <var>serialized</var> 设置为 { [[Type]]: "Number",[[NumberData]]: <var>value</var>.[[NumberData]]
   }。<li><p>否则，如果 <var>value</var> 有一个 [[BigIntData]] 内部槽，则把
   <var>serialized</var> 设置为 { [[Type]]: "BigInt", [[BigIntData]]: <var>value</var>.[[BigIntData]] }。<li><p>否则，如果 <var>value</var> 有一个 [[StringData]] 内部槽，则把
   <var>serialized</var> 设置为 { [[Type]]: "String",[[StringData]]: <var>value</var>.[[StringData]]
   }。<li><p>否则，如果 <var>value</var> 有一个 [[DateValue]] 内部槽，则把
   <var>serialized</var> 设置为 { [[Type]]: "Date",[[DateValue]]: <var>value</var>.[[DateValue]]
   }。<li><p>否则，如果 <var>value</var> 有一个 [[RegExpMatcher]] 内部槽，则把
   <var>serialized</var> 设置为 { [[Type]]: "RegExp",[[RegExpMatcher]]:
   <var>value</var>.[[RegExpMatcher]]，[[OriginalSource]]: <var>value</var>.[[OriginalSource]]，
   [[OriginalFlags]]: <var>value</var>.[[OriginalFlags]] }。<li>
    <p>否则，如果 <var>value</var> 有一个 [[ArrayBufferData]] 内部槽，则：</p>

    <ol><li><p>令<var>size</var> 为 <var>value</var>.[[ArrayBufferByteLength]]。<li>
      <p>如果 ! <a id=structuredserializeinternal:issharedarraybuffer href=https://tc39.es/ecma262/#sec-issharedarraybuffer data-x-internal=issharedarraybuffer>IsSharedArrayBuffer</a>(<var>value</var>) 为 true，则：

      <ol><li><p>令 <var>agentCluster</var> 为 <a id=structuredserializeinternal:surrounding-agent href=https://tc39.es/ecma262/#surrounding-agent data-x-internal=surrounding-agent>surrounding agent</a> 的
       <a id=structuredserializeinternal:agent-cluster href=https://tc39.es/ecma262/#sec-agent-clusters data-x-internal=agent-cluster>agent cluster</a>。<li>
        <p>如果 <var>agentCluster</var> 的 <a href=webappapis.html#cross-origin-isolated id=structuredserializeinternal:cross-origin-isolated>跨域隔离</a> 为 false，则抛出一个
        <a id=structuredserializeinternal:datacloneerror-2 href=https://heycam.github.io/webidl/#datacloneerror data-x-internal=datacloneerror>"<code>DataCloneError</code>"</a> <code id=structuredserializeinternal:domexception-2><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>。</p>

        <p class=note>该检查只在序列化时需要（反序列化时不需要）。因为
        <a href=webappapis.html#cross-origin-isolated id=structuredserializeinternal:cross-origin-isolated-2>跨域隔离</a> 不会随着时间改变，而且
        <code id=structuredserializeinternal:sharedarraybuffer><a data-x-internal=sharedarraybuffer href=https://tc39.es/ecma262/#sec-sharedarraybuffer-objects>SharedArrayBuffer</a></code> 不能离开 <a id=structuredserializeinternal:agent-cluster-2 href=https://tc39.es/ecma262/#sec-agent-clusters data-x-internal=agent-cluster>agent cluster</a>。</p>
       <li><p>如果 <var>forStorage</var> 为 true，则抛出一个
       <a id=structuredserializeinternal:datacloneerror-3 href=https://heycam.github.io/webidl/#datacloneerror data-x-internal=datacloneerror>"<code>DataCloneError</code>"</a> <code id=structuredserializeinternal:domexception-3><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>。<li><p>把 <var>serialized</var> 设置为 { [[Type]]: "SharedArrayBuffer",[[ArrayBufferData]]:
       <var>value</var>.[[ArrayBufferData]],[[ArrayBufferByteLength]]: <var>size</var>,
       [[AgentCluster]]: <var>agentCluster</var> }。</ol>
     <li>
      <p>否则：</p>

      <ol><li><p>如果 ! <a id=structuredserializeinternal:isdetachedbuffer href=https://tc39.es/ecma262/#sec-isdetachedbuffer data-x-internal=isdetachedbuffer>IsDetachedBuffer</a>(<var>value</var>) 为 true，则抛出一个
       <a id=structuredserializeinternal:datacloneerror-4 href=https://heycam.github.io/webidl/#datacloneerror data-x-internal=datacloneerror>"<code>DataCloneError</code>"</a> <code id=structuredserializeinternal:domexception-4><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>。<li>
        <p>令<var>dataCopy</var> 为 ? <a id=structuredserializeinternal:createbytedatablock href=https://tc39.es/ecma262/#sec-createbytedatablock data-x-internal=createbytedatablock>CreateByteDataBlock</a>(<var>size</var>)。</p>

        <p class=note>在分配地址失败时可能会抛出一个 <code id=structuredserializeinternal:js-rangeerror><a data-x-internal=js-rangeerror href=https://tc39.es/ecma262/#sec-native-error-types-used-in-this-standard-rangeerror>RangeError</a></code> 异常。</p>
       <li><p>执行 ! <a id=structuredserializeinternal:copydatablockbytes href=https://tc39.es/ecma262/#sec-copydatablockbytes data-x-internal=copydatablockbytes>CopyDataBlockBytes</a>(<var>dataCopy</var>,0,<var>value</var>.[[ArrayBufferData]],0,<var>size</var>)。<li><p>把 <var>serialized</var> 设置为 { [[Type]]: "ArrayBuffer",[[ArrayBufferData]]:
       <var>dataCopy</var>,[[ArrayBufferByteLength]]: <var>size</var> }。</ol>
     </ol>
   <li>
    <p>否则，如果 <var>value</var> 有一个 [[ViewedArrayBuffer]] 内部槽，则：</p>

    <ol><li><p>令 <var>buffer</var> 为 <var>value</var> 的 [[ViewedArrayBuffer]] 内部槽的值。<li><p>令 <var>bufferSerialized</var> 为 ?
     <a href=#structuredserializeinternal id=structuredserializeinternal:structuredserializeinternal-2>StructuredSerializeInternal</a>(<var>buffer</var>,<var>forStorage</var>,
     <var>memory</var>)。<li><p>断言： <var>bufferSerialized</var>.[[Type]] 是 "ArrayBuffer"。<li><p>如果 <var>value</var> 有一个 [[DataView]] 内部槽，则把 <var>serialized</var> 设置为
     { [[Type]]: "ArrayBufferView",[[Constructor]]: "DataView",[[ArrayBufferSerialized]]:
     <var>bufferSerialized</var>,[[ByteLength]]: <var>value</var>.[[ByteLength]],[[ByteOffset]]:
     <var>value</var>.[[ByteOffset]] }。<li>
      <p>否则：</p>

      <ol><li><p>断言： <var>value</var> 有一个 [[TypedArrayName]] 内部槽。<li><p>把 <var>serialized</var> 设置为 { [[Type]]: "ArrayBufferView",[[Constructor]]:
       <var>value</var>.[[TypedArrayName]],[[ArrayBufferSerialized]]: <var>bufferSerialized</var>,
       [[ByteLength]]: <var>value</var>.[[ByteLength]],[[ByteOffset]]:
       <var>value</var>.[[ByteOffset]],[[ArrayLength]]: <var>value</var>.[[ArrayLength]] }。</ol>
     </ol>
   <li>
    <p>否则，如果 <var>value</var> 有 [[MapData]] 内部槽，则：</p>

    <ol><li><p>设置<var>serialized</var> 为 { [[Type]]: "Map",[[MapData]]: 一个新的空 <a href=https://tc39.es/ecma262/#sec-list-and-record-specification-type id=structuredserializeinternal:js-list data-x-internal=js-list>列表</a> }。<li><p>设置<var>deep</var> 为 true。</ol>
   <li>
    <p>否则，if <var>value</var> 有 [[SetData]] 内部槽，则：</p>

    <ol><li><p>设置 <var>serialized</var> 为 { [[Type]]: "Set",[[SetData]]: 一个新的空 <a href=https://tc39.es/ecma262/#sec-list-and-record-specification-type id=structuredserializeinternal:js-list-2 data-x-internal=js-list>列表</a> }。<li><p>设置 <var>deep</var> 为 true。</ol>
   <li>
    <p>否则，如果 <var>value</var> 有 [[ErrorData]] 内部槽且 <var>value</var> 不是 <a href=https://heycam.github.io/webidl/#dfn-platform-object id=structuredserializeinternal:platform-object data-x-internal=platform-object>平台对象</a>，那么：</p>
    

    <ol><li><p>令 <var>name</var> 为 ? <a href=https://tc39.es/ecma262/#sec-get-o-p id=structuredserializeinternal:js-get data-x-internal=js-get>Get</a>(<var>value</var>,
     "name")。<li><p>如果 <var>name</var> 不是 "Error", "EvalError", "RangeError", "ReferenceError",
     "SyntaxError", "TypeError" 或 "URIError"，则设置 <var>name</var> 为 "Error"。<li><p>令 <var>valueMessageDesc</var> 为 ? <var>value</var>.[[GetOwnProperty]]("<code>message</code>")。<li><p>如果 <a id=structuredserializeinternal:isdatadescriptor href=https://tc39.es/ecma262/#sec-isdatadescriptor data-x-internal=isdatadescriptor>IsDataDescriptor</a>(<var>valueMessageDesc</var>) 为 false，
     令 <var>message</var> 为 undefined，否则为 ? <a id=structuredserializeinternal:tostring href=https://tc39.es/ecma262/#sec-tostring data-x-internal=tostring>ToString</a>(<var>valueMessageDesc</var>.[[Value]])。<li><p>设置 <var>serialized</var> 为 { [[Type]]: "Error", [[Name]]: <var>name</var>,
     [[Message]]: <var>message</var> }。<li>
      <p>用户代理应该把任何有用的还没标准化的附加数据都加到序列化表示 <var>serialized</var> 里，尤其是
      <code>stack</code> 属性。</p>

      <p class=note>该数据正在标准化，见 <cite>Error Stacks</cite> 提案。<a href=references.html#refsJSERRORSTACKS>[JSERRORSTACKS]</a></p>
     </ol>
   <li>
    <p>否则，如果 <var>value</var> 是一个外来 Array 对象，那么：</p>
    

    <ol><li><p>令<var>valueLenDescriptor</var> 为 ?
     <a id=structuredserializeinternal:ordinarygetownproperty href=https://tc39.es/ecma262/#sec-ordinarygetownproperty data-x-internal=ordinarygetownproperty>OrdinaryGetOwnProperty</a>(<var>value</var>，"<code>length</code>")。<li><p>令<var>valueLen</var> 为 <var>valueLenDescriptor</var>.[[Value]]。<li><p>设置<var>serialized</var> 为 { [[Type]]: "Array",[[Length]]: <var>valueLen</var>,
     [[Properties]]: 一个新的空 <a href=https://tc39.es/ecma262/#sec-list-and-record-specification-type id=structuredserializeinternal:js-list-3 data-x-internal=js-list>列表</a> }。<li><p>设置<var>deep</var> 为 true。</ol>
   <li>
    <p>否则，如果 <var>value</var> 是一个 <a href=#可序列化对象 id=structuredserializeinternal:可序列化对象>可序列化的</a>
    <a href=https://heycam.github.io/webidl/#dfn-platform-object id=structuredserializeinternal:platform-object-2 data-x-internal=platform-object>平台对象</a>：</p>

    <ol><li><p>如果 <var>value</var> 有一个 <a href=#detached id=structuredserializeinternal:detached>[[Detached]]</a> 内部槽且值为 true，
     则抛出一个 <a id=structuredserializeinternal:datacloneerror-5 href=https://heycam.github.io/webidl/#datacloneerror data-x-internal=datacloneerror>"<code>DataCloneError</code>"</a> <code id=structuredserializeinternal:domexception-5><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>。<li><p>令<var>typeString</var> 为 <var>value</var> 的
     <a href=https://heycam.github.io/webidl/#dfn-primary-interface id=structuredserializeinternal:primary-interface data-x-internal=primary-interface>主接口</a> 标识。<li><p>设置<var>serialized</var> 为 { [[Type]]: <var>typeString</var> }。<li><p>设置<var>deep</var> 为 true。</ol>
   <li><p>否则，如果 <var>value</var> 是一个 <a href=https://heycam.github.io/webidl/#dfn-platform-object id=structuredserializeinternal:platform-object-3 data-x-internal=platform-object>平台对象</a>，则抛出一个
   <a id=structuredserializeinternal:datacloneerror-6 href=https://heycam.github.io/webidl/#datacloneerror data-x-internal=datacloneerror>"<code>DataCloneError</code>"</a> <code id=structuredserializeinternal:domexception-6><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>。<li><p>否则，如果 <a id=structuredserializeinternal:iscallable href=https://tc39.es/ecma262/#sec-iscallable data-x-internal=iscallable>IsCallable</a>(<var>value</var>) 为 true，则抛出一个
   <a id=structuredserializeinternal:datacloneerror-7 href=https://heycam.github.io/webidl/#datacloneerror data-x-internal=datacloneerror>"<code>DataCloneError</code>"</a> <code id=structuredserializeinternal:domexception-7><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>。<li>
    <p>否则，如果 <var>value</var> 有除了 [[Prototype]] 和 [[Extensible]] 之外的任何内部槽，
    则抛出一个 <a id=structuredserializeinternal:datacloneerror-8 href=https://heycam.github.io/webidl/#datacloneerror data-x-internal=datacloneerror>"<code>DataCloneError</code>"</a> <code id=structuredserializeinternal:domexception-8><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>。</p>

    <p class=example>例如 [[PromiseState]] 或 [[WeakMapData]] 内部槽。</p>
   <li>
    <p>否则，如果 <var>value</var> 是一个外来对象且 <var>value</var> 不是
    关联到任何 <a href=https://tc39.es/ecma262/#sec-code-realms id=structuredserializeinternal:javascript-realm-2 data-x-internal=javascript-realm>JavaScript realm</a> 的 <a id=structuredserializeinternal:object.prototype href=https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object data-x-internal=object.prototype>%Object.prototype%</a> intrinsic 对象，
    则抛出一个 <a id=structuredserializeinternal:datacloneerror-9 href=https://heycam.github.io/webidl/#datacloneerror data-x-internal=datacloneerror>"<code>DataCloneError</code>"</a> <code id=structuredserializeinternal:domexception-9><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>。</p>

    <p class=example>例如代理对象。</p>
   <li>
    <p>否则：</p>

    <ol><li><p>设置<var>serialized</var> 为 { [[Type]]: "Object",[[Properties]]: 一个新的空 <a href=https://tc39.es/ecma262/#sec-list-and-record-specification-type id=structuredserializeinternal:js-list-4 data-x-internal=js-list>列表</a> }。<li><p>设置<var>deep</var> 为 true。</ol>

    <p class=note><a id=structuredserializeinternal:object.prototype-2 href=https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object data-x-internal=object.prototype>%Object.prototype%</a> 最终会被本步骤或后续步骤处理。
    最终结果是它的外来属性被忽略，反序列化后结果将是一个空对象（而不是 <a href=https://tc39.es/ecma262/#immutable-prototype-exotic-object id=structuredserializeinternal:immutable-prototype-exotic-object data-x-internal=immutable-prototype-exotic-object>prototype 外部对象不变量</a>）。
   <li><p><a href=https://infra.spec.whatwg.org/#map-set id=structuredserializeinternal:map-set data-x-internal=map-set>设置</a> <var>memory</var>[<var>value</var>] 为
   <var>serialized</var>。<li>
    <p>如果 <var>deep</var> 为 true，则：</p>

    <ol><li>
      <p>如果 <var>value</var> 有一个 [[MapData]] 内部槽，则：

      <ol><li><p>令 <var>copiedList</var> 为一个新的空 <a href=https://tc39.es/ecma262/#sec-list-and-record-specification-type id=structuredserializeinternal:js-list-5 data-x-internal=js-list>列表</a>。

       <li>
        <p>对 <var>value</var>.[[MapData]] 中的 <a href=https://infra.spec.whatwg.org/#list-iterate id=structuredserializeinternal:list-iterate data-x-internal=list-iterate>每一个</a>
        <a href=https://tc39.es/ecma262/#sec-list-and-record-specification-type id=structuredserializeinternal:record-2 data-x-internal=record>记录</a> { [[Key]]，[[Value]] } <var>entry</var>：</p>

        <ol><li><p>令<var>copiedEntry</var> 为一个新的 <a href=https://tc39.es/ecma262/#sec-list-and-record-specification-type id=structuredserializeinternal:record-3 data-x-internal=record>记录</a>
         { [[Key]]: <var>entry</var>.[[Key]]，[[Value]]: <var>entry</var>.[[Value]] }。<li><p>如果 <var>copiedEntry</var>.[[Key]] 不是特殊值 <i>empty</i>，<a href=https://infra.spec.whatwg.org/#list-append id=structuredserializeinternal:list-append data-x-internal=list-append>追加</a> <var>copiedEntry</var> 到 <var>copiedList</var>。</ol>
       <li>
        <p>对 <var>copiedList</var> 中的 <a href=https://infra.spec.whatwg.org/#list-iterate id=structuredserializeinternal:list-iterate-2 data-x-internal=list-iterate>每一个</a>
        <a href=https://tc39.es/ecma262/#sec-list-and-record-specification-type id=structuredserializeinternal:record-4 data-x-internal=record>记录</a> { [[Key]]，[[Value]] } <var>entry</var>：</p>

        <ol><li><p>令 <var>serializedKey</var> 为 ?
         <a href=#structuredserializeinternal id=structuredserializeinternal:structuredserializeinternal-3>StructuredSerializeInternal</a>(<var>entry</var>.[[Key]],<var>forStorage</var>,
         <var>memory</var>)。<li><p>令 <var>serializedValue</var> 为 ?
         <a href=#structuredserializeinternal id=structuredserializeinternal:structuredserializeinternal-4>StructuredSerializeInternal</a>(<var>entry</var>.[[Value]],<var>forStorage</var>,
         <var>memory</var>)。<li><p><a href=https://infra.spec.whatwg.org/#list-append id=structuredserializeinternal:list-append-2 data-x-internal=list-append>追加</a> { [[Key]]: <var>serializedKey</var>,
         [[Value]]: <var>serializedValue</var> } 到 <var>serialized</var>.[[MapData]]。</ol>
       </ol>
     <li>
      <p>否则，如果 <var>value</var> 有一个 [[SetData]] 内部槽，则：</p>

      <ol><li><p>令<var>copiedList</var> 为一个新的空 <a href=https://tc39.es/ecma262/#sec-list-and-record-specification-type id=structuredserializeinternal:js-list-6 data-x-internal=js-list>列表</a>。

       <li>
        <p>对 <var>value</var>.[[SetData]] 中 <a href=https://infra.spec.whatwg.org/#list-iterate id=structuredserializeinternal:list-iterate-3 data-x-internal=list-iterate>每一个</a>
        <var>entry</var>：</p>

        <ol><li><p>如果 <var>entry</var> 不是特殊值 <i>empty</i>，<a href=https://infra.spec.whatwg.org/#list-append id=structuredserializeinternal:list-append-3 data-x-internal=list-append>追加</a> <var>entry</var> 到 <var>copiedList</var>。</ol>
       <li>
        <p>对 <var>copiedList</var> 中 <a href=https://infra.spec.whatwg.org/#list-iterate id=structuredserializeinternal:list-iterate-4 data-x-internal=list-iterate>每一个</a> <var>entry</var>：</p>

        <ol><li><p>令 <var>serializedEntry</var> 为 ?
         <a href=#structuredserializeinternal id=structuredserializeinternal:structuredserializeinternal-5>StructuredSerializeInternal</a>(<var>entry</var>,<var>forStorage</var>,
         <var>memory</var>)。<li><p><a href=https://infra.spec.whatwg.org/#list-append id=structuredserializeinternal:list-append-4 data-x-internal=list-append>追加</a> <var>serializedEntry</var> 到
         <var>serialized</var>.[[SetData]]。</ol>
       </ol>
     <li>
      <p>否则，如果 <var>value</var> 是一个
      <a href=#可序列化对象 id=structuredserializeinternal:可序列化对象-2>可序列化的</a>
      <a href=https://heycam.github.io/webidl/#dfn-platform-object id=structuredserializeinternal:platform-object-4 data-x-internal=platform-object>平台对象</a>，则给定
      <var>value</var>，<var>serialized</var>，和 <var>forStorage</var>，
      为 <var>value</var> 的 <a id=structuredserializeinternal:primary-interface-2 href=https://heycam.github.io/webidl/#dfn-primary-interface data-x-internal=primary-interface>primary interface</a> 执行
      <a href=#serialization-steps id=structuredserializeinternal:serialization-steps>序列化步骤</a>。</p>

      <p><a href=#serialization-steps id=structuredserializeinternal:serialization-steps-2>序列化步骤</a> 可能需要执行一个 <dfn id=sub-serialization data-export="">字序列化</dfn>。
      该操作接受 <var>subValue</var> 值作为输入，返回 <a href=#structuredserializeinternal id=structuredserializeinternal:structuredserializeinternal-6>StructuredSerializeInternal</a>
      (<var>subValue</var>, <var>forStorage</var>,<var>memory</var>)。
      （换句话说，<a href=#sub-serialization id=structuredserializeinternal:sub-serialization>子序列化</a> 是
      <a href=#structuredserializeinternal id=structuredserializeinternal:structuredserializeinternal-7>StructuredSerializeInternal</a> 的与该调用一致的特化。）</p>
     <li>
      <p>否则，对 ! <a id=structuredserializeinternal:enumerableownpropertynames href=https://tc39.es/ecma262/#sec-enumerableownpropertynames data-x-internal=enumerableownpropertynames>EnumerableOwnPropertyNames</a>(<var>value</var>, <var>key</var>) 里的每个 <var>key</var> ：</p>

      <ol><li>
        <p>如果 ! <a id=structuredserializeinternal:hasownproperty href=https://tc39.es/ecma262/#sec-hasownproperty data-x-internal=hasownproperty>HasOwnProperty</a>(<var>value</var>, <var>key</var>) 为 true，则：</p>

        <ol><li><p>令 <var>inputValue</var> 为 ? <var>value</var>.[[Get]](<var>key</var>, <var>value</var>)。<li><p>令 <var>outputValue</var> 为 ? <a href=#structuredserializeinternal id=structuredserializeinternal:structuredserializeinternal-8>StructuredSerializeInternal</a>(<var>inputValue</var>, <var>forStorage</var>, <var>memory</var>)。<li><p>把 { [[Key]]: <var>key</var>, [[Value]]: <var>outputValue</var> } <a href=https://infra.spec.whatwg.org/#list-append id=structuredserializeinternal:list-append-5 data-x-internal=list-append>加到</a> <var>serialized</var>.[[Properties]]。</ol>
       </ol>
     </ol>
   <li><p>返回 <var>serialized</var>。</ol>

  <div class=example>
   <p>注意 <a href=#structuredserializeinternal id=structuredserializeinternal:structuredserializeinternal-9>StructuredSerializeInternal</a> 产生的 <a href=https://tc39.es/ecma262/#sec-list-and-record-specification-type id=structuredserializeinternal:record-5 data-x-internal=record>记录</a>
   可能包含其他记录的 "指针"，这产生了环装引用。例如当我们传递下面的 JavaScript 对象到
   <a href=#structuredserializeinternal id=structuredserializeinternal:structuredserializeinternal-10>StructuredSerializeInternal</a> 中时：</p>

  <pre>const o = {};
o.myself = o;</pre>

  <p>它产生了下面的结果：</p>

  <pre><samp>{
  [[Type]]: "Object",
  [[Properties]]: «
    {
      [[Key]]: "myself",
      [[Value]]: <i>&lt;a pointer to this whole structure></i>
    }
  »
}</samp></pre>
  </div>



  <h4 id=structuredserialize data-dfn-type=abstract-op data-lt=StructuredSerialize><span class=secno>2.8.4</span> <dfn>StructuredSerialize</dfn> ( <var>value</var> )<a href=#structuredserialize class=self-link></a></h4>
<div data-zh-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/safe-passing-of-structured-data/structuredserialize-value.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/safe-passing-of-structured-data/structuredserialize-value.en.html></div>

  <ol><li><p>返回 ? <a href=#structuredserializeinternal id=structuredserialize:structuredserializeinternal>StructuredSerializeInternal</a>(<var>value</var>, false).</ol>



  <h4 id=structuredserializeforstorage data-dfn-type=abstract-op data-lt=StructuredSerializeForStorage><span class=secno>2.8.5</span> <dfn>StructuredSerializeForStorage</dfn> ( <var>value</var> )<a href=#structuredserializeforstorage class=self-link></a></h4>
<div data-zh-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/safe-passing-of-structured-data/structuredserializeforstorage-value.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/safe-passing-of-structured-data/structuredserializeforstorage-value.en.html></div>

  <ol><li><p>返回 ? <a href=#structuredserializeinternal id=structuredserializeforstorage:structuredserializeinternal>StructuredSerializeInternal</a>(<var>value</var>, true).</ol>



  <h4 id=structureddeserialize data-dfn-type=abstract-op data-lt=StructuredDeserialize><span class=secno>2.8.6</span> <dfn>StructuredDeserialize</dfn> ( <var>serialized</var>, <var>targetRealm</var> [ ,
  <var>memory</var> ] )<a href=#structureddeserialize class=self-link></a></h4>
<div data-zh-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/safe-passing-of-structured-data/structureddeserialize-serialized-targetrealm-memory.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/safe-passing-of-structured-data/structureddeserialize-serialized-targetrealm-memory.en.html></div>

  <p><a href=#structureddeserialize id=structureddeserialize:structureddeserialize>StructuredDeserialize</a> 抽象操作接受一个 <a href=https://tc39.es/ecma262/#sec-list-and-record-specification-type id=structureddeserialize:record data-x-internal=record>记录</a>
  <var>serialized</var> 作为输入，它由之前的 <a href=#structuredserialize id=structureddeserialize:structuredserialize>StructuredSerialize</a> 或
  <a href=#structuredserializeforstorage id=structureddeserialize:structuredserializeforstorage>StructuredSerializeForStorage</a> 产生，把它反序列化到一个新的
  <var>targetRealm</var> 中创建的 JavaScript 值。</p>

  <p>该过程可能抛出一个异常，例如为新的对象尝试分配内存时（尤其是 <code>ArrayBuffer</code> 对象）。</p>

  <ol><li>
    <p>如果没有提供 <var>memory</var>，令 <var>memory</var> 为一个空的 <a href=https://infra.spec.whatwg.org/#ordered-map id=structureddeserialize:ordered-map data-x-internal=ordered-map>映射</a>。</p>

    <p class=note><var>memory</var> 映射是为了避免把对象反序列化两次。
    最终会用于保持环状结构以及标识图中的重复对象。</p>
   <li><p>如果 <var>memory</var>[<var>sirialized</var>] <a href=https://infra.spec.whatwg.org/#map-exists id=structureddeserialize:map-exists data-x-internal=map-exists>存在</a>，则
   返回 <var>memory</var>[<var>serialized</var>]。<li><p>令<var>deep</var> 为 false。<li><p>令<var>value</var> 为一个未初始化的值。<li><p>否则，如果 <var>serialized</var>.[[Type]] 是 "primitive"，则设置 <var>value</var> 为
   <var>serialized</var>.[[Value]]。</p>

   <li><p>否则，如果 <var>serialized</var>.[[Type]] 是 "Boolean"，则设置 <var>value</var>
   为一个 <var>targetRealm</var> 中的新的 Boolean 对象，其 [[BooleanData]] 内部槽值为
   <var>serialized</var>.[[BooleanData]]。<li><p>否则，如果 <var>serialized</var>.[[Type]] 是 "Number"，则设置 <var>value</var>
   为一个 <var>targetRealm</var> 中的新的 Number 对象，其 [[NumberData]] 内部槽值为
   <var>serialized</var>.[[NumberData]]。<li><p>否则，如果 <var>serialized</var>.[[Type]] 是 "BigInt"，则设置 <var>value</var>
   为一个 <var>targetRealm</var> 中的新的 BigInt 对象，其 [[BigIntData]] 内部槽的值为
   <var>serialized</var>.[[BigIntData]]。<li><p>否则，如果 <var>serialized</var>.[[Type]] 是 "String"，则设置 <var>value</var>
   为一个 <var>targetRealm</var> 中的新的 String 对象，其 [[StringData]] 内部槽值为
   <var>serialized</var>.[[StringData]]。<li><p>否则，如果 <var>serialized</var>.[[Type]] 是 "Date"，则设置 <var>value</var>
   为一个 <var>targetRealm</var> 中的新的 Date 对象，其 [[DateValue]] 内部槽值为
   <var>serialized</var>.[[DateValue]]。<li><p>否则，如果 <var>serialized</var>.[[Type]] 是 "RegExp"，则设置 <var>value</var>
   为一个 <var>targetRealm</var> 中的新的 RegExp 对象，其 [[RegExpMatcher]] 内部槽值为
   <var>serialized</var>.[[RegExpMatcher]]，其 [[OriginalSource]] 内部槽值为
   <var>serialized</var>.[[OriginalSource]]，其 [[OriginalFlags]] 内部槽值为
   <var>serialized</var>.[[OriginalFlags]]。<li>
    <p>否则，如果 <var>serialized</var>.[[Type]] 是 "SharedArrayBuffer"，则：</p>

    <ol><li><p>如果 <var>targetRealm</var> 对应的 <a id=structureddeserialize:agent-cluster href=https://tc39.es/ecma262/#sec-agent-clusters data-x-internal=agent-cluster>agent cluster</a> 不是
     <var>serialized</var>.[[AgentCluster]]，则抛出一个
     <a id=structureddeserialize:datacloneerror href=https://heycam.github.io/webidl/#datacloneerror data-x-internal=datacloneerror>"<code>DataCloneError</code>"</a> <code id=structureddeserialize:domexception><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>。<li><p>否则，设置 <var>value</var> 到一个 <var>targetRealm</var> 中的新的 SharedArrayBuffer 对象，
     其 [[ArrayBufferData]] 内部槽值为 <var>serialized</var>.[[ArrayBufferData]]，
     其 [[ArrayBufferByteLength]] 内部槽值是 <var>serialized</var>.[[ArrayBufferByteLength]]。</ol>
   <li>
    <p>否则，如果 <var>serialized</var>.[[Type]] 是 "ArrayBuffer"，则设置 <var>value</var>
    为一个 <var>targetRealm</var> 中新的 ArrayBuffer 对象，其 [[ArrayBufferData]] 内部槽值为
    <var>serialized</var>.[[ArrayBufferData]]，其 [[ArrayBufferByteLength]] 内部槽值为
    <var>serialized</var>.[[ArrayBufferByteLength]]。</p>

    <p>如果这抛出了一个异常，则抛出一个 <a id=structureddeserialize:datacloneerror-2 href=https://heycam.github.io/webidl/#datacloneerror data-x-internal=datacloneerror>"<code>DataCloneError</code>"</a>
    <code id=structureddeserialize:domexception-2><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>。</p>

    <p class=note>如果没有足够的内存来创建这样一个 ArrayBuffer 对象，该步骤可能会抛出异常。</p>
   <li>
    <p>否则，如果 <var>serialized</var>.[[Type]] 是 "ArrayBufferView"，则：</p>

    <ol><li><p>令<var>deserializedArrayBuffer</var> 为 ?
     <a href=#structureddeserialize id=structureddeserialize:structureddeserialize-2>StructuredDeserialize</a>(<var>serialized</var>.[[ArrayBufferSerialized]],
     <var>targetRealm</var>,<var>memory</var>)。<li><p>如果 <var>serialized</var>.[[Constructor]] 是 "DataView"，则设置 <var>value</var> 为
     <var>targetRealm</var> 中的一个新的 DataView 对象，其 [[ViewedArrayBuffer]] 内部槽值为
     <var>deserializedArrayBuffer</var>，其 [[ByteLength]] 内部槽值为
     <var>serialized</var>.[[ByteLength]]，其 [[ByteOffset]] 内部槽值为
     <var>serialized</var>.[[ByteOffset]]。<li><p>否则，设置 <var>value</var> 为一个 <var>targetRealm</var> 中新的有类型数组对象，
     使用 <var>serialized</var>.[[Constructor]] 给出的构造器，其
     [[ViewedArrayBuffer]] 内部槽值为 <var>deserializedArrayBuffer</var>，其
     [[TypedArrayName]] 内部槽值为 <var>serialized</var>.[[Constructor]]，其
     [[ByteLength]] 内部槽值为 <var>serialized</var>.[[ByteLength]]，其
     [[ByteOffset]] 内部槽值为 <var>serialized</var>.[[ByteOffset]]，其
     [[ArrayLength]] 内部槽值为 <var>serialized</var>.[[ArrayLength]]。</ol>
   <li>
    <p>否则，如果 <var>serialized</var>.[[Type]] 是 "Map"，则：</p>

    <ol><li><p>设置<var>value</var> 为 <var>targetRealm</var> 中一个新的 Map 对象，其 [[MapData]]
     内部槽值为一个新的空 <a href=https://tc39.es/ecma262/#sec-list-and-record-specification-type id=structureddeserialize:js-list data-x-internal=js-list>列表</a>。<li><p>设置<var>deep</var> to true。</ol>
   <li>
    <p>否则，如果 <var>serialized</var>.[[Type]] 是 "Set"，则：</p>

    <ol><li><p>设置<var>value</var> 为一个 <var>targetRealm</var> 中新的设置对象，其 [[SetData]]
     内部槽值为一个新的空 <a href=https://tc39.es/ecma262/#sec-list-and-record-specification-type id=structureddeserialize:js-list-2 data-x-internal=js-list>列表</a>。<li><p>设置<var>deep</var> 为 true。</ol>
   <li>
    <p>否则，如果 <var>serialized</var>.[[Type]] 是 "Array"，则：</p>

    <ol><li><p>令<var>outputProto</var> 为 <var>targetRealm</var>.[[Intrinsics]].[[<a id=structureddeserialize:array.prototype href=https://tc39.es/ecma262/#sec-properties-of-the-array-prototype-object data-x-internal=array.prototype>%Array.prototype%</a>]]。<li><p>设置 <var>value</var> 为 ! <a id=structureddeserialize:arraycreate href=https://tc39.es/ecma262/#sec-arraycreate data-x-internal=arraycreate>ArrayCreate</a>(<var>serialized</var>.[[Length]]，
     <var>outputProto</var>)。<li><p>设置<var>deep</var> 为 true。</ol>
   <li>
    <p>否则，如果 <var>serialized</var>.[[Type]] 是 "Object"，则：</p>

    <ol><li><p>设置<var>value</var> 为 <var>targetRealm</var> 中一个新的 Object。<li><p>设置<var>deep</var> 为 true。</ol>
   <li>
    <p>否则，如果 <var>serialized</var>.[[Type]] 是 "Error"，则：</p>

    <ol><li><p>令 <var>prototype</var> 为 <a id=structureddeserialize:error.prototype href=https://tc39.es/ecma262/#sec-properties-of-the-error-prototype-object data-x-internal=error.prototype>%Error.prototype%</a>。<li><p>如果 <var>serialized</var>.[[Name]] 是 "EvalError"，则设置 <var>prototype</var> 为
     <a href=#evalerror.prototype id=structureddeserialize:evalerror.prototype>%EvalError.prototype%</a>。<li><p>如果 <var>serialized</var>.[[Name]] 是 "RangeError"，则设置 <var>prototype</var>
     为 <a href=#rangeerror.prototype id=structureddeserialize:rangeerror.prototype>%RangeError.prototype%</a>。<li><p>如果 <var>serialized</var>.[[Name]] 是 "ReferenceError"，则设置
     <var>prototype</var> 为 <a href=#referenceerror.prototype id=structureddeserialize:referenceerror.prototype>%ReferenceError.prototype%</a>。<li><p>如果 <var>serialized</var>.[[Name]] 是 "SyntaxError"，则设置 <var>prototype</var>
     为 <a href=#syntaxerror.prototype id=structureddeserialize:syntaxerror.prototype>%SyntaxError.prototype%</a>。<li><p>如果 <var>serialized</var>.[[Name]] 是 "TypeError"，则设置 <var>prototype</var> 为
     <a href=#typeerror.prototype id=structureddeserialize:typeerror.prototype>%TypeError.prototype%</a>。<li><p>如果 <var>serialized</var>.[[Name]] 是 "URIError"，则设置 <var>prototype</var> 为
     <a href=#urierror.prototype id=structureddeserialize:urierror.prototype>%URIError.prototype%</a>。<li><p>令 <var>message</var> 为 <var>serialized</var>.[[Message]]。<li><p>设置 <var>value</var> 为 ! <a id=structureddeserialize:objectcreate href=https://tc39.es/ecma262/#sec-objectcreate data-x-internal=objectcreate>ObjectCreate</a>(<var>prototype</var>, «
     [[ErrorData]] »)。<li><p>令 <var>messageDesc</var> 为 <a id=structureddeserialize:propertydescriptor href=https://tc39.es/ecma262/#sec-property-descriptor-specification-type data-x-internal=propertydescriptor>PropertyDescriptor</a>{ [[Value]]:
     <var>message</var>, [[Writable]]: true, [[Enumerable]]: false, [[Configurable]]: true
     }。<li><p>如果 <var>message</var> 不是 undefined，则执行 !
     <a id=structureddeserialize:ordinarydefineownproperty href=https://tc39.es/ecma262/#sec-ordinarydefineownproperty data-x-internal=ordinarydefineownproperty>OrdinaryDefineOwnProperty</a>(<var>value</var>, "<code>message</code>",
     <var>messageDesc</var>)。<li><p><var>serialized</var> 上面任何有用的附加数据都应该反序列化后再附加到<var>value</var> 上。</ol>

   <li>
    <p>否则：</p>

    <ol><li><p>令 <var>interfaceName</var> 为 <var>serialized</var>.[[Type]]。<li><p>如果 <var>interfaceName</var> 标识的接口没有 <a href=https://heycam.github.io/webidl/#dfn-exposed id=structureddeserialize:idl-exposed data-x-internal=idl-exposed>暴露</a> 在
     <var>targetRealm</var> 中，则抛出一个 <a id=structureddeserialize:datacloneerror-3 href=https://heycam.github.io/webidl/#datacloneerror data-x-internal=datacloneerror>"<code>DataCloneError</code>"</a>
     <code id=structureddeserialize:domexception-3><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>。<li><p>设置<var>value</var> 为在 <var>targetRealm</var> 中创建的、
     以 <var>interfaceName</var> 标识的接口的一个新的实例。</p>

     <li><p>设置<var>deep</var> 为 true。</ol>
   <li><p><a href=https://infra.spec.whatwg.org/#map-set id=structureddeserialize:map-set data-x-internal=map-set>设置</a> <var>memory</var>[<var>serialized</var>] 为
   <var>value</var>。<li>
    <p>如果 <var>deep</var> 为 true，则：</p>

    <ol><li>
      <p>如果 <var>serialized</var>.[[Type]] 是 "Map"，则：</p>

      <ol><li>
        <p>对 <var>serialized</var>.[[MapData]] 中的 <a href=https://infra.spec.whatwg.org/#list-iterate id=structureddeserialize:list-iterate data-x-internal=list-iterate>每一个</a>
        <a href=https://tc39.es/ecma262/#sec-list-and-record-specification-type id=structureddeserialize:record-2 data-x-internal=record>记录</a> { [[Key]]，[[Value]] } <var>entry</var>：</p>

        <ol><li><p>令<var>deserializedKey</var> 为 ?
         <a href=#structureddeserialize id=structureddeserialize:structureddeserialize-3>StructuredDeserialize</a>(<var>entry</var>.[[Key]],<var>targetRealm</var>,
         <var>memory</var>)。<li><p>令<var>deserializedValue</var> 为 ?
         <a href=#structureddeserialize id=structureddeserialize:structureddeserialize-4>StructuredDeserialize</a>(<var>entry</var>.[[Value]],<var>targetRealm</var>,
         <var>memory</var>)。<li><p><a href=https://infra.spec.whatwg.org/#list-append id=structureddeserialize:list-append data-x-internal=list-append>追加</a> { [[Key]]: <var>deserializedKey</var>,
         [[Value]]: <var>deserializedValue</var> } 到 <var>value</var>.[[MapData]]。</ol>
       </ol>
     <li>
      <p>否则，如果 <var>serialized</var>.[[Type]] 是 "Set"，则：</p>

      <ol><li>
        <p>对 <var>serialized</var>.[[SetData]] 中 <a href=https://infra.spec.whatwg.org/#list-iterate id=structureddeserialize:list-iterate-2 data-x-internal=list-iterate>每一个</a>
        <var>entry</var>：</p>

        <ol><li><p>令<var>deserializedEntry</var> 为 ?
         <a href=#structureddeserialize id=structureddeserialize:structureddeserialize-5>StructuredDeserialize</a>(<var>entry</var>,<var>targetRealm</var>,
         <var>memory</var>)。<li><p><a href=https://infra.spec.whatwg.org/#list-append id=structureddeserialize:list-append-2 data-x-internal=list-append>追加</a> <var>deserializedEntry</var> 到
         <var>value</var>.[[SetData]]。</ol>
       </ol>
     <li>
      <p>否则，如果 <var>serialized</var>.[[Type]] 是 "Array" 或 "Object"，则：</p>

      <ol><li>
        <p>对 <var>serialized</var>.[[Properties]] 中的 <a href=https://infra.spec.whatwg.org/#list-iterate id=structureddeserialize:list-iterate-3 data-x-internal=list-iterate>每一个</a>
        <a href=https://tc39.es/ecma262/#sec-list-and-record-specification-type id=structureddeserialize:record-3 data-x-internal=record>记录</a> { [[Key]]，[[Value]] } <var>entry</var>：</p>

        <ol><li><p>令<var>deserializedValue</var> 为 ?
         <a href=#structureddeserialize id=structureddeserialize:structureddeserialize-6>StructuredDeserialize</a>(<var>entry</var>.[[Value]],<var>targetRealm</var>,
         <var>memory</var>)。<li><p>令<var>result</var> 为 ! <a id=structureddeserialize:createdataproperty href=https://tc39.es/ecma262/#sec-createdataproperty data-x-internal=createdataproperty>CreateDataProperty</a>(<var>value</var>,
         <var>entry</var>.[[Key]],<var>deserializedValue</var>)。<li><p>断言： <var>result</var> 为 true。</ol>
       </ol>
     <li>
      <p>否则：</p>

      <ol><li>
        <p>给定 <var>serialized</var> 和 <var>value</var>，为 <var>serialized</var>.[[Type]] 标识的接口
        执行适当的 <a href=#deserialization-steps id=structureddeserialize:deserialization-steps>反序列化步骤</a>。</p>

        <p><a href=#deserialization-steps id=structureddeserialize:deserialization-steps-2>反序列化步骤</a> 可能会执行一个 <dfn id=sub-deserialization data-export="">子反序列化</dfn>。该操作接受
        先前序列化后的 <a id=structureddeserialize:record-4 href=https://tc39.es/ecma262/#sec-list-and-record-specification-type data-x-internal=record>Record</a> <var>subSerialized</var> 作为输入，返回
        <a href=#structureddeserialize id=structureddeserialize:structureddeserialize-7>StructuredDeserialize</a>(<var>subSerialized</var>,<var>targetRealm</var>,
        <var>memory</var>)。（换句话说，<a href=#sub-deserialization id=structureddeserialize:sub-deserialization>子反序列化</a> 是
        是 <a href=#structureddeserialize id=structureddeserialize:structureddeserialize-8>StructuredDeserialize</a> 的与该调用一致的特化。）</p>
       </ol>
    </ol>
   <li><p>返回 <var>value</var>。</ol>


  <h4 id=structuredserializewithtransfer data-dfn-type=abstract-op data-lt=StructuredSerializeWithTransfer><span class=secno>2.8.7</span> <dfn>StructuredSerializeWithTransfer</dfn> ( <var>value</var>, <var>transferList</var>
  )<a href=#structuredserializewithtransfer class=self-link></a></h4>
<div data-zh-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/safe-passing-of-structured-data/structuredserializewithtransfer-value-transferlist.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/safe-passing-of-structured-data/structuredserializewithtransfer-value-transferlist.en.html></div>

  <ol><li>
    <p>令<var>memory</var> 为一个空的 <a href=https://infra.spec.whatwg.org/#ordered-map id=structuredserializewithtransfer:ordered-map data-x-internal=ordered-map>映射</a>。</p>

    <p class=note>除了它在 <a href=#structuredserializeinternal id=structuredserializewithtransfer:structuredserializeinternal>StructuredSerializeInternal</a> 中的正常使用外，
    在本算法中 <var>memory</var> 还用来确保 <a href=#structuredserializeinternal id=structuredserializewithtransfer:structuredserializeinternal-2>StructuredSerializeInternal</a>
    忽略了 <var>transferList</var> 中的项目，来让我们做自己的处理。</p>
   <li>
    <p>对 <var>transferList</var> 中的 <a href=https://infra.spec.whatwg.org/#list-iterate id=structuredserializewithtransfer:list-iterate data-x-internal=list-iterate>每一个</a>
    <var>transferable</var>：</p>

    <ol><li><p>如果 <var>transferable</var> 既没有 [[ArrayBufferData]] 内部槽
     又没有 <a href=#detached id=structuredserializewithtransfer:detached>[[Detached]]</a> 内部槽，则抛出一个
     <a id=structuredserializewithtransfer:datacloneerror href=https://heycam.github.io/webidl/#datacloneerror data-x-internal=datacloneerror>"<code>DataCloneError</code>"</a> <code id=structuredserializewithtransfer:domexception><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>。<li><p>如果 <var>transferable</var> 有一个 [[ArrayBufferData]] 内部槽且
     ! <a id=structuredserializewithtransfer:issharedarraybuffer href=https://tc39.es/ecma262/#sec-issharedarraybuffer data-x-internal=issharedarraybuffer>IsSharedArrayBuffer</a>(<var>transferable</var>) 为 true 或
     ! <a id=structuredserializewithtransfer:isdetachedbuffer href=https://tc39.es/ecma262/#sec-isdetachedbuffer data-x-internal=isdetachedbuffer>IsDetachedBuffer</a>(<var>transferable</var>) 为 true，则抛出一个
     <a id=structuredserializewithtransfer:datacloneerror-2 href=https://heycam.github.io/webidl/#datacloneerror data-x-internal=datacloneerror>"<code>DataCloneError</code>"</a> <code id=structuredserializewithtransfer:domexception-2><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>。<li><p>如果 <var>transferable</var> 有一个 <a href=#detached id=structuredserializewithtransfer:detached-2>[[Detached]]</a> 内部槽且
     <var>transferable</var>.<a href=#detached id=structuredserializewithtransfer:detached-3>[[Detached]]</a> 为 true，则抛出一个
     <a id=structuredserializewithtransfer:datacloneerror-3 href=https://heycam.github.io/webidl/#datacloneerror data-x-internal=datacloneerror>"<code>DataCloneError</code>"</a> <code id=structuredserializewithtransfer:domexception-3><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>。<li><p>令<var>placeholder</var> 为一个用户代理定义的占位对象。<li><p><a href=https://infra.spec.whatwg.org/#map-set id=structuredserializewithtransfer:map-set data-x-internal=map-set>设置</a> <var>memory</var>[<var>transferable</var>] 为
     <var>placeholder</var>。</ol>
   <li><p>令<var>serialized</var> 为 ? <a href=#structuredserializeinternal id=structuredserializewithtransfer:structuredserializeinternal-3>StructuredSerializeInternal</a>(<var>value</var>,
   false,<var>memory</var>)。<li><p>令<var>transferDataHolders</var> 为一个新的空 <a href=https://tc39.es/ecma262/#sec-list-and-record-specification-type id=structuredserializewithtransfer:js-list data-x-internal=js-list>列表</a>。<li>
    <p>对 <var>transferList</var> 中的 <a href=https://infra.spec.whatwg.org/#list-iterate id=structuredserializewithtransfer:list-iterate-2 data-x-internal=list-iterate>每一个</a>
    <var>transferable</var>：</p>

    <ol><li><p>令<var>placeholder</var> 为 <var>memory</var>[<var>transferable</var>]。<li><p>令<var>dataHolder</var> 为一个未初始化的值。<li>
      <p>如果 <var>transferable</var> 有一个 [[ArrayBufferData]] 内部槽，则：</p>

      <ol><li><p>设置<var>dataHolder</var> 为 { [[TransferConsumed]]: false,[[Type]]: "ArrayBuffer",
       [[ArrayBufferData]]: <var>transferable</var>.[[ArrayBufferData]],[[ArrayBufferByteLength]]:
       <var>transferable</var>.[[ArrayBufferByteLength]] }。<li><p>执行 ! <a id=structuredserializewithtransfer:detacharraybuffer href=https://tc39.es/ecma262/#sec-detacharraybuffer data-x-internal=detacharraybuffer>DetachArrayBuffer</a>(<var>transferable</var>)。</ol>
     <li>
      <p>否则：</p>

      <ol><li><p>断言： <var>transferable</var> 是一个 <a href=#可传输对象 id=structuredserializewithtransfer:可传输对象>可传输的</a>
       <a href=https://heycam.github.io/webidl/#dfn-platform-object id=structuredserializewithtransfer:platform-object data-x-internal=platform-object>平台对象</a>。<li><p>令<var>interfaceName</var> 为 <var>transferable</var> 的
       <a href=https://heycam.github.io/webidl/#dfn-primary-interface id=structuredserializewithtransfer:primary-interface data-x-internal=primary-interface>主接口</a> 的标识符。<li><p>设置<var>dataHolder</var> 为 { [[TransferConsumed]]: false,[[Type]]:
       <var>interfaceName</var> }。<li><p>指定 <var>transferable</var> 和 <var>dataHolder</var>，
       为 <var>interfaceName</var> 标识的接口执行适当的 <a href=#transfer-steps id=structuredserializewithtransfer:transfer-steps>传输步骤</a>。<li><p>设置<var>transferable</var>.<a href=#detached id=structuredserializewithtransfer:detached-4>[[Detached]]</a> 为 true。</ol>
     <li><p>在 <var>serialized</var> 中，用 <var>dataHolder</var> 替换所有的 <var>placeholder</var> 实例。<li><p><a href=https://infra.spec.whatwg.org/#list-append id=structuredserializewithtransfer:list-append data-x-internal=list-append>追加</a> <var>dataHolder</var> 到
     <var>transferDataHolders</var>。</ol>
   <li><p>返回 { [[Serialized]]: <var>serialized</var>,[[TransferDataHolders]]:
   <var>transferDataHolders</var> }。</ol>


  <h4 id=structureddeserializewithtransfer data-dfn-type=abstract-op data-lt=StructuredDeserializeWithTransfer><span class=secno>2.8.8</span> <dfn>StructuredDeserializeWithTransfer</dfn> ( <var>serializeWithTransferResult</var>,
  <var>targetRealm</var> )<a href=#structureddeserializewithtransfer class=self-link></a></h4>
<div data-zh-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/safe-passing-of-structured-data/structureddeserializewithtransfer-serializewithtransferresult-targetrealm.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/safe-passing-of-structured-data/structureddeserializewithtransfer-serializewithtransferresult-targetrealm.en.html></div>

  <ol><li>
    <p>令 <var>memory</var> 为一个空的 <a href=https://infra.spec.whatwg.org/#ordered-map id=structureddeserializewithtransfer:ordered-map data-x-internal=ordered-map>映射</a>。</p>

    <p class=note>除了它在 <a href=#structureddeserialize id=structureddeserializewithtransfer:structureddeserialize>StructuredDeserialize</a> 中的正常使用外，
    在本算法中 <var>memory</var> 还用来帮助我们确定传输值的列表。</p>
   <li><p>令<var>deserialized</var> 为 ?
   <a href=#structureddeserialize id=structureddeserializewithtransfer:structureddeserialize-2>StructuredDeserialize</a>(<var>serializeWithTransferResult</var>.[[Serialized]],
   <var>targetRealm</var>,<var>memory</var>)。<li><p>令<var>transferredValues</var> 为一个新的空 <a href=https://tc39.es/ecma262/#sec-list-and-record-specification-type id=structureddeserializewithtransfer:js-list data-x-internal=js-list>列表</a>。<li>
    <p>对 <var>serializeWithTransferResult</var>.[[TransferDataHolders]] 中的
    <a href=https://infra.spec.whatwg.org/#list-iterate id=structureddeserializewithtransfer:list-iterate data-x-internal=list-iterate>每一个</a> <var>transferDataHolder</var>：</p>

    <ol><li><p><a href=https://infra.spec.whatwg.org/#list-append id=structureddeserializewithtransfer:list-append data-x-internal=list-append>追加</a>
     <var>memory</var>[<var>transferDataHolder</var>] 到 <var>transferredValues</var>。</ol>
   <li><p>返回 { [[Deserialized]]: <var>deserialized</var>,[[TransferredValues]]:
   <var>transferredValues</var> }。</ol>



  <h4 id=performing-structured-clones-from-other-specifications><span class=secno>2.8.9</span> 在其他规范中执行序列化和传输<a href=#performing-structured-clones-from-other-specifications class=self-link></a></h4>
<div data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/common-infrastructure/safe-passing-of-structured-data/performing-serialization-and-transferring-from-other-specifications.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/common-infrastructure/safe-passing-of-structured-data/performing-serialization-and-transferring-from-other-specifications.en.html></div>

  <p>其他规范可以使用这里定义的抽象操作。下面为每个抽象操作何时比较有用提供了指导以及例子。</p>

  <dl><dt><a href=#structuredserializewithtransfer id=performing-structured-clones-from-other-specifications:structuredserializewithtransfer>StructuredSerializeWithTransfer</a><dt><a href=#structureddeserializewithtransfer id=performing-structured-clones-from-other-specifications:structureddeserializewithtransfer>StructuredDeserializeWithTransfer</a><dd>
    <p>把一个值克隆到另一个 <a href=https://tc39.es/ecma262/#sec-code-realms id=performing-structured-clones-from-other-specifications:javascript-realm data-x-internal=javascript-realm>JavaScript Realm</a>，
    带着传输列表但提前不知道目标领域。
    这一情况下序列化步骤可以立即执行，反序列化步骤延迟到目标 Realm 已知的时候执行。</p>

    <p class=example><code id=performing-structured-clones-from-other-specifications:dom-messageport-postmessage><a href=web-messaging.html#dom-messageport-postmessage>messagePort.postMessage()</a></code>
    使用这一对抽象操作，因为目标 Realm 直到 <code id=performing-structured-clones-from-other-specifications:messageport><a href=web-messaging.html#messageport>MessagePort</a></code>
    <a href=web-messaging.html#has-been-shipped id=performing-structured-clones-from-other-specifications:has-been-shipped>发出</a> 时才知道。</p>
   <dt><a href=#structuredserialize id=performing-structured-clones-from-other-specifications:structuredserialize>StructuredSerialize</a><dt><a href=#structuredserializeforstorage id=performing-structured-clones-from-other-specifications:structuredserializeforstorage>StructuredSerializeForStorage</a><dt><a href=#structureddeserialize id=performing-structured-clones-from-other-specifications:structureddeserialize>StructuredDeserialize</a><dd>
    <p>为给定的值创建一个 <a id=performing-structured-clones-from-other-specifications:javascript-realm-2 href=https://tc39.es/ecma262/#sec-code-realms data-x-internal=javascript-realm>JavaScript Realm</a> 无关的可以保存无限时间的快照，
    然后（可能很多次）具象化回 JavaScript 值。</p>

    <p><a href=#structuredserializeforstorage id=performing-structured-clones-from-other-specifications:structuredserializeforstorage-2>StructuredSerializeForStorage</a> 可以在序列化被用于持久保存值的时候
    （而不是在 Realm 之间传递）使用。当尝试序列化 <code id=performing-structured-clones-from-other-specifications:sharedarraybuffer><a data-x-internal=sharedarraybuffer href=https://tc39.es/ecma262/#sec-sharedarraybuffer-objects>SharedArrayBuffer</a></code> 对象时会抛出异常，
    因为保存共享内存没有意义。类似地，当指定有着定制的
    <a href=#serialization-steps id=performing-structured-clones-from-other-specifications:serialization-steps>序列化步骤</a>
    的 <a href=https://heycam.github.io/webidl/#dfn-platform-object id=performing-structured-clones-from-other-specifications:platform-object data-x-internal=platform-object>平台对象</a>
    且 <var>forStorage</var> 参数为 true 时，也可能抛出异常或者有不同的行为。</p>

    <p class=example><code id=performing-structured-clones-from-other-specifications:dom-history-pushstate><a href=history.html#dom-history-pushstate>history.pushState()</a></code> 和 <code id=performing-structured-clones-from-other-specifications:dom-history-replacestate><a href=history.html#dom-history-replacestate>history.replaceState()</a></code> 在作者提供的状态对象上使用
    <a href=#structuredserializeforstorage id=performing-structured-clones-from-other-specifications:structuredserializeforstorage-3>StructuredSerializeForStorage</a>，把它们存储为
    <a href=history.html#session-history-entry id=performing-structured-clones-from-other-specifications:session-history-entry>会话历史入口</a> 的
    <a href=history.html#serialized-state id=performing-structured-clones-from-other-specifications:serialized-state>序列化状态</a>。
    然后 <code id=performing-structured-clones-from-other-specifications:dom-history-state><a href=history.html#dom-history-state>history.state</a></code> 属性用了
    <a href=#structureddeserialize id=performing-structured-clones-from-other-specifications:structureddeserialize-2>StructuredDeserialize</a> 来返回最初提供的状态对象的一份克隆。</p>

    <p class=example><code id=performing-structured-clones-from-other-specifications:dom-broadcastchannel-postmessage><a href=web-messaging.html#dom-broadcastchannel-postmessage>broadcastChannel.postMessage()</a></code> 对它的输入使用了
    <a href=#structuredserialize id=performing-structured-clones-from-other-specifications:structuredserialize-2>StructuredSerialize</a>，然后对结果多次使用了 <a href=#structureddeserialize id=performing-structured-clones-from-other-specifications:structureddeserialize-3>StructuredDeserialize</a>
    来对每一个广播目标产生新的拷贝。注意在多目标情况下传输没有意义。</p>

    <p class=example>持久化 JavaScript 值到文件系统的 API 可能还会对它的输入使用
    <a href=#structuredserializeforstorage id=performing-structured-clones-from-other-specifications:structuredserializeforstorage-4>StructuredSerializeForStorage</a> 并对它的输出使用 <a href=#structureddeserialize id=performing-structured-clones-from-other-specifications:structureddeserialize-4>StructuredDeserialize</a>。</p>
   </dl>

  <p>一般来说，调用点可能会传递 Web IDL 值而不是 JavaScript 值；
  这将被理解为在调用这些算法之前执行到 JavaScript 值的隐式
  <a href=https://heycam.github.io/webidl/#es-type-mapping id=performing-structured-clones-from-other-specifications:concept-idl-convert data-x-internal=concept-idl-convert>转换</a>。</p>

  <p id=structuredclone class=note><span id=structured-clone></span>
  本规范曾经定义了“结构化克隆”算法和一个 StructuredClone 抽象操作。
  然而在实践中，它的所有已知用途可以更好地通过单独的序列化和反序列化步骤来实现，所以把它删除了。</p>

  <hr>

  <p>如果在任意对象上进行操作，对于非用户代码同步调用到用户代理方法的调用点必须在调用
  <a href=#structuredserialize id=performing-structured-clones-from-other-specifications:structuredserialize-3>StructuredSerialize</a>，<a href=#structuredserializeforstorage id=performing-structured-clones-from-other-specifications:structuredserializeforstorage-5>StructuredSerializeForStorage</a>，
  或 <a href=#structuredserializewithtransfer id=performing-structured-clones-from-other-specifications:structuredserializewithtransfer-2>StructuredSerializeWithTransfer</a> 等抽象操作之前小心地
  <a href=webappapis.html#prepare-to-run-script id=performing-structured-clones-from-other-specifications:prepare-to-run-script>准备执行脚本</a> 以及
  <a href=webappapis.html#prepare-to-run-a-callback id=performing-structured-clones-from-other-specifications:prepare-to-run-a-callback>准备运行 fallback</a>。

  这是必要的，因为序列化过程可能会调用作者定义的访问器作为最终的深度序列化步骤，
  这些访问器调用的操作可能会依赖于
  <a href=webappapis.html#concept-entry-everything id=performing-structured-clones-from-other-specifications:concept-entry-everything>entry</a> 和 <a href=webappapis.html#concept-incumbent-everything id=performing-structured-clones-from-other-specifications:concept-incumbent-everything>incumbent</a> 的概念已经建立好。</p>

  <p class=example><code id=performing-structured-clones-from-other-specifications:dom-window-postmessage><a href=web-messaging.html#dom-window-postmessage>window.postMessage()</a></code> 对它的参数执行
  <a href=#structuredserializewithtransfer id=performing-structured-clones-from-other-specifications:structuredserializewithtransfer-3>StructuredSerializeWithTransfer</a> 操作，但是在算法中的同步部分立即执行这一操作则需要小心。
  因为可能无需 <a href=webappapis.html#prepare-to-run-script id=performing-structured-clones-from-other-specifications:prepare-to-run-script-2>准备执行脚本</a> 和
  <a href=webappapis.html#prepare-to-run-a-callback id=performing-structured-clones-from-other-specifications:prepare-to-run-a-callback-2>准备执行 fallback</a> 就能使用该算法。</p>

  <p class=example>作为对比，假设有个 API 直接通过
  <a href=webappapis.html#event-loop id=performing-structured-clones-from-other-specifications:event-loop>事件循环</a> 的 <a href=webappapis.html#concept-task id=performing-structured-clones-from-other-specifications:concept-task>任务</a>
  来定期地使用 <a href=#structuredserialize id=performing-structured-clones-from-other-specifications:structuredserialize-4>StructuredSerialize</a> 序列化一些作者提供的对象，
  可能需要事先确保它执行了适当的准备工作。现在我们还没见过平台上有这样的 API；
  通常，作为作者代码的同步结果来事先执行序列化更加容易。</p>

  

  <nav><a href=introduction.html>← 1 概述</a> — <a href=./>Table of Contents</a> — <a href=dom.html>3 HTML 文档的语义，结构，与API →</a></nav>
<script src=/html/resources/zh-cn.js></script>
