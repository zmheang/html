<!DOCTYPE html><html class=split lang=en-US-x-hixie><script src=/html/link-fixup.js defer=""></script><meta charset=utf-8><meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name=viewport><title>HTML Standard</title><meta content=#3c790a name=theme-color><link rel=stylesheet href=https://resources.whatwg.org/spec.css crossorigin=""><link rel=stylesheet href=https://resources.whatwg.org/standard.css crossorigin=""><link rel=stylesheet href=https://resources.whatwg.org/standard-shared-with-dev.css crossorigin=""><link rel=icon href=https://resources.whatwg.org/logo.svg crossorigin=""><link rel=stylesheet href=/html/styles.css crossorigin=""><script>
   function toggleStatus(div) {
     div.parentNode.classList.toggle('wrapped');
   }
   function setLinkFragment(link) {
     link.hash = location.hash;
   }
  </script><link rel=stylesheet href=/html/resources/zh-cn.css><body>
  
  <script async="" crossorigin="" src=/html/resources/html-dfn.js></script>
  <script data-file-issue-url=https://github.com/whatwg/html/issues/new async="" crossorigin="" src=https://resources.whatwg.org/file-issue.js></script>
  
  <header id=head class="head with-buttons">
   <a href=https://whatwg.org/ class=logo><img width=100 alt=WHATWG crossorigin="" src=https://resources.whatwg.org/logo.svg height=100></a>
   <hgroup><h1 class=allcaps>HTML</h1><h2 id=living-standard class="no-num no-toc">Living Standard — Last Updated <span class=pubdate>20 June 2021</span></h2><div data-en-date="Sat Aug 11 2018 08:00:56 GMT+0000 (UTC)" class=translate-info data-zh-date="" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/living-standard-mdash-last-updated-date-01-jan-1901.en.html data-zh-file="https://github.com/whatwg-cn/html/new/master/src/living-standard-mdash-last-updated-date-01-jan-1901.zh.html?filename=living-standard-mdash-last-updated-date-01-jan-1901.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fliving-standard-mdash-last-updated-date-01-jan-1901.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91"></div><div data-en-date="Sat Aug 11 2018 08:00:56 GMT+0000 (UTC)" class=translate-info data-zh-date="" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/commit-snapshot-mdash-last-updated-date-01-jan-1901.en.html data-zh-file="https://github.com/whatwg-cn/html/new/master/src/commit-snapshot-mdash-last-updated-date-01-jan-1901.zh.html?filename=commit-snapshot-mdash-last-updated-date-01-jan-1901.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fcommit-snapshot-mdash-last-updated-date-01-jan-1901.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91"></div><div data-en-date="Sat Aug 11 2018 08:00:56 GMT+0000 (UTC)" class=translate-info data-zh-date="" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/review-draft-mdash-published-date-01-jan-1901.en.html data-zh-file="https://github.com/whatwg-cn/html/new/master/src/review-draft-mdash-published-date-01-jan-1901.zh.html?filename=review-draft-mdash-published-date-01-jan-1901.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Freview-draft-mdash-published-date-01-jan-1901.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91"></div></hgroup>
   
   
   <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-91053840-1', 'auto');
      ga('send', 'pageview');
   </script>
  </header>

  

  


  
<div data-en-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" class=translate-info data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/table-of-contents.en.html data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/table-of-contents.zh.html></div>
  


  
<div data-en-date="Sat Aug 11 2018 08:00:56 GMT+0000 (UTC)" class=translate-info data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/full-table-of-contents.en.html data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/full-table-of-contents.zh.html></div>
  

  

  


  <nav><a href=embedded-content.html>← 4.8 嵌入内容</a> — <a href=./>Table of Contents</a> — <a href=iframe-embed-object.html>4.8.5 The
  iframe element →</a></nav><ol class=toc><li id=toc-semantics><ol><li><ol><li><a href=images.html#images><span class=secno>4.8.4</span> 图片</a><ol><li><a href=images.html#introduction-3><span class=secno>4.8.4.1</span> 概述</a><ol><li><a href="images.html#adaptive images"><span class=secno>4.8.4.1.1</span> 自适应图片</a></ol><li><a href=images.html#attributes-common-to-source-and-img-elements><span class=secno>4.8.4.2</span> Attributes common to <code>source</code>,
  <code>img</code>, and <code>link</code> elements</a><ol><li><a href=images.html#srcset-attributes><span class=secno>4.8.4.2.1</span> Srcset attributes</a><li><a href=images.html#sizes-attributes><span class=secno>4.8.4.2.2</span> Sizes attributes</a></ol><li><a href=images.html#images-processing-model><span class=secno>4.8.4.3</span> Processing model</a><ol><li><a href=images.html#when-to-obtain-images><span class=secno>4.8.4.3.1</span> When to obtain images</a><li><a href=images.html#reacting-to-dom-mutations><span class=secno>4.8.4.3.2</span> 响应 DOM 变化</a><li><a href=images.html#the-list-of-available-images><span class=secno>4.8.4.3.3</span> The list of available images</a><li><a href=images.html#decoding-images><span class=secno>4.8.4.3.4</span> Decoding images</a><li><a href=images.html#updating-the-image-data><span class=secno>4.8.4.3.5</span> Updating the image data</a><li><a href=images.html#selecting-an-image-source><span class=secno>4.8.4.3.6</span> Selecting an image source</a><li><a href=images.html#updating-the-source-set><span class=secno>4.8.4.3.7</span> Updating the source set</a><li><a href=images.html#parsing-a-srcset-attribute><span class=secno>4.8.4.3.8</span> Parsing a srcset attribute</a><li><a href=images.html#parsing-a-sizes-attribute><span class=secno>4.8.4.3.9</span> Parsing a sizes attribute</a><li><a href=images.html#normalizing-the-source-densities><span class=secno>4.8.4.3.10</span> 源像素密度规范化</a><li><a href=images.html#reacting-to-environment-changes><span class=secno>4.8.4.3.11</span> Reacting to environment changes</a></ol><li><a href=images.html#alt><span class=secno>4.8.4.4</span> 为图片提供替代文字的要求</a><ol><li><a href=images.html#general-guidelines><span class=secno>4.8.4.4.1</span> 通用指引</a><li><a href=images.html#a-link-or-button-containing-nothing-but-the-image><span class=secno>4.8.4.4.2</span> 只包含图片的链接或按钮</a><li><a href=images.html#a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations><span class=secno>4.8.4.4.3</span> A phrase or paragraph with an alternative graphical representation: charts, diagrams, graphs, maps, illustrations</a><li><a href=images.html#a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos><span class=secno>4.8.4.4.4</span> 带有替代图形表示的短语或标签：图标，徽标</a><li><a href=images.html#text-that-has-been-rendered-to-a-graphic-for-typographical-effect><span class=secno>4.8.4.4.5</span> Text that has been rendered to a graphic for typographical effect</a><li><a href=images.html#a-graphical-representation-of-some-of-the-surrounding-text><span class=secno>4.8.4.4.6</span> A graphical representation of some of the surrounding text</a><li><a href=images.html#ancillary-images><span class=secno>4.8.4.4.7</span> 辅助性图片</a><li><a href="images.html#a-purely-decorative-image-that-doesn't-add-any-information"><span class=secno>4.8.4.4.8</span> 不提供任何信息的纯装饰性图片</a><li><a href=images.html#a-group-of-images-that-form-a-single-larger-picture-with-no-links><span class=secno>4.8.4.4.9</span> 组成但个没有链接的大图的图片组</a><li><a href=images.html#a-group-of-images-that-form-a-single-larger-picture-with-links><span class=secno>4.8.4.4.10</span> 组成单个有链接的大图的图片组</a><li><a href=images.html#a-key-part-of-the-content><span class=secno>4.8.4.4.11</span> 内容的关键部分</a><li><a href=images.html#an-image-not-intended-for-the-user><span class=secno>4.8.4.4.12</span> 不是给用户看的图片</a><li><a href=images.html#an-image-in-an-e-mail-or-private-document-intended-for-a-specific-person-who-is-known-to-be-able-to-view-images><span class=secno>4.8.4.4.13</span> An image in an email or private document intended for a specific person who is known to be able to view images</a><li><a href=images.html#guidance-for-markup-generators><span class=secno>4.8.4.4.14</span> Guidance for markup generators</a><li><a href=images.html#guidance-for-conformance-checkers><span class=secno>4.8.4.4.15</span> 规范检查工具指引</a></ol></ol></ol></ol></ol><h4 id=images><span class=secno>4.8.4</span> 图片<a href=#images class=self-link></a></h4>
<div data-zh-date="Mon May 28 2018 16:16:26 GMT+0000 (UTC)" data-en-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/the-elements-of-html/embedded-content/images/index.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/embedded-content/images/index.en.html></div>


  <h5 id=introduction-3><span class=secno>4.8.4.1</span> 概述<a href=#introduction-3 class=self-link></a></h5>
<div data-zh-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/the-elements-of-html/embedded-content/images/introduction/index.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/embedded-content/images/introduction/index.en.html></div>

  <p><i>This section is non-normative.</i></p>

  <p>在 HTML 中嵌入图片时，如果只有一个图片资源，就使用 <code id=introduction-3:the-img-element><a href=embedded-content.html#the-img-element>img</a></code>
  元素和它的 <code id=introduction-3:attr-img-src><a href=embedded-content.html#attr-img-src>src</a></code> 属性。</p>

  <div class=example>

<pre>&lt;h2>From today's featured article&lt;/h2>
<strong>&lt;img src="/uploads/100-marie-lloyd.jpg" alt="" width="100" height="150"></strong>
&lt;p>&lt;b>&lt;a href="/wiki/Marie_Lloyd">Marie Lloyd&lt;/a>&lt;/b> (1870–1922)
was an English &lt;a href="/wiki/Music_hall">music hall&lt;/a> singer, ...</pre>

  </div>

  <p>但是有些情况下作者希望提供多张图片让用户代理选择：</p>

  <ul><li>

    <p>不同用户可能有不同的环境特征：</p>

    <ul><li>

      <p>用户的物理屏幕大小可能是不一样的。</p>

      <div class=example>
       <p>手机屏幕可能是 4 英寸，但笔记本屏幕可能是 14 英寸。</p>

       <svg font-size=2.5 role=img viewBox="0 0 80 32" font-family=sans-serif height=200 aria-label="The phone's screen is much smaller compared to the laptop's screen.">
        
        <rect width=6 fill=white stroke=black x=6 height=12 y=18 rx=1></rect>
        <text transform="translate(9 24)
        rotate(-60)" text-anchor=middle dominant-baseline=middle>4″</text>
        
        <rect width=40 stroke-width=2 fill=white stroke=black x=30 height=26 y=2 rx=2></rect>
        <line y2=30 stroke-linecap=round stroke-width=2 stroke=black x1=26 y1=30 x2=74></line>
        <text transform="translate(50 15)
        rotate(-30)" text-anchor=middle dominant-baseline=middle>14″</text>
       </svg>
      </div>

      <p class=note>这只在图片渲染大小依赖 <a href=https://drafts.csswg.org/css2/#viewport id=introduction-3:viewport data-x-internal=viewport>视口</a> 大小时有用。</p>

     <li>

      <p>用户的屏幕像素密度可能是不一样的。</p>

      <div class=example>
       <p>手机屏幕之间每英寸的物理像素可能有三倍之差，与物理屏幕大小无关。</p>

       <svg font-size=2.5 role=img viewBox="0 0 56 27" font-family=sans-serif height=170 aria-label="One phone has big pixels, the other has small pixels.">
        <defs>
         <pattern id=img-intro-pixel width=3 patternUnits=userSpaceOnUse stroke-linecap=round x=0 y=0 height=3>
          <rect fill=black width=3 x=0 height=3 y=0></rect>
          <line y2=2.5 stroke=red x1=0.5 x2=0.5 y1=0.5></line>
          <line y2=2.5 stroke=lime x1=1.5 x2=1.5 y1=0.5></line>
          <line y2=2.5 stroke=blue x1=2.5 x2=2.5 y1=0.5></line>
         </pattern>
        </defs>
        
        <rect width=6 fill=white stroke=black x=6 height=12 y=8 rx=1></rect>
        <rect width=6 fill=white stroke=black x=36 height=12 y=8 rx=1></rect>
        
        <line y2=24 stroke-width=3 stroke=brown x1=15 y1=16 x2=22></line>
        <circle cx=10 cy=10 fill=url(#img-intro-pixel) stroke=black r=8></circle>
        <line y2=24 stroke-width=3 stroke=brown x1=45 y1=16 x2=52></line>
        <circle cx=120 transform=scale(0.333333) cy=30 r=24 stroke-width=3 fill=url(#img-intro-pixel) stroke=black></circle>
        
        <text x=20 y=10 dominant-baseline=middle>1x</text>
        <text x=50 y=10 dominant-baseline=middle>3x</text>
       </svg>
      </div>

     <li>

      <p>用户的缩放级别可能是不一样的，同一用户在不同时间也可能不一样。</p>

      <p class=example>用户可能会放大某个图片来查看细节。</p>

      <p>缩放级别和屏幕像素密度（上一点）都会影响单个
      <a href=https://drafts.csswg.org/css-values/#px id="introduction-3:'px'" data-x-internal="'px'">CSS pixel</a> 上的物理屏幕像素。这个比例通常称为
      <dfn id=device-pixel-ratio>设备像素比</dfn>。</p>

     <li>

      <p>用户的屏幕方向也可能不同，同一用户在不同时间也可能不一样。</p>

      <div class=example>
       <p>平板电脑可以直立或旋转 90 度，所以屏幕可能是 "portrait" 或 "landscape"。</p>

       <svg font-size=2.5 role=img viewBox="0 0 60 32" font-family=sans-serif height=200 aria-label="The tablet has two orientations.">
        
        <rect width=14 fill=white stroke=black x=6 height=20 y=5 rx=1></rect>
        <line y2=24 stroke-width=1.1 stroke=black x1=6 y1=24 x2=20></line>
        <text text-anchor=middle x=13 y=14.5 dominant-baseline=middle>Portrait</text>
        <rect width=20 fill=white stroke=black x=30 height=14 y=11 rx=1></rect>
        <line y2=11 stroke-width=1.1 stroke=black x1=31 y1=25 x2=31></line>
        <text text-anchor=middle x=40.5 y=18 dominant-baseline=middle>Landscape</text>
       </svg>
      </div>

     <li>

      <p>用户的网络速度、网络延迟和带宽价格也可能不一样，同一用户不同时间也可能不一样。</p>

      <p class=example>用户可能工作时在一个快速的低延迟的单一价格的连接上，
      在家时在一个低速的低延迟的单一价格的连接上，
      其他地方时在一个速度变化的高延迟的价格变化的连接上。</p>

     </ul>

   <li>

    <p>作者可能要显示同一张图片，但渲染大小根据 <a id=introduction-3:viewport-2 href=https://drafts.csswg.org/css2/#viewport data-x-internal=viewport>viewport</a> 有所不同。
    这通常称为 <dfn id=viewport-based-selection>基于视口的选择</dfn>。</p>

    <div class=example>
     <p>网页上方可能有一个横幅，始终横跨整个 <a href=https://drafts.csswg.org/css2/#viewport id=introduction-3:viewport-3 data-x-internal=viewport>视口</a> 宽度。
     这种情况下，图片的渲染大小取决于屏幕的物理大小（假设浏览器窗口是最大化的）。</p>

     <svg viewBox="0 0 52 25.6" height=160 aria-label="The upright-held phone shows a
     small wolf at the top, and the tablet shows the same image but it is bigger." role=img>
      

      
      <rect width=6 fill=white stroke=black x=6 height=12 y=8 rx=1></rect>
      <rect fill=#716966 x=7 width=4 height=2 y=9></rect>
      <image xlink:href=/html/images/wolf.jpg width=4 x=7 y=9 height=2></image>

      
      <rect width=20 fill=white stroke=black x=25 height=14 y=6 rx=1></rect>
      <line y2=6 stroke-width=1.1 stroke=black x1=26 y1=20 x2=26></line>
      <rect fill=#716966 x=27 width=17 height=8.5 y=7></rect>
      <image xlink:href=/html/images/wolf.jpg width=17 x=27 y=7 height=8.5></image>

     </svg>
    </div>

    <div class=example>
     <p>另一个网页可能会分列显示图片，在物理大小较小的屏幕上显示一列，
     中等物理大小的屏幕上显示两列，在物理大小较大的屏幕上显示三列。
     图片以可变大小渲染来充满 <a href=https://drafts.csswg.org/css2/#viewport id=introduction-3:viewport-4 data-x-internal=viewport>视口</a>。
     这种情况下，单列布局下图片的渲染大小可能比两列布局下 <em>大</em>，虽然屏幕更小。</p>

     <svg font-size=2.5 role=img viewBox="0 0 115 32" font-family=sans-serif height=200 aria-label="The rotated phone shows a top part of an image of a kettlebell swing; the
     upright-held tablet shows a bit smaller images in two columns; the laptop shows images in three
     columns.">
      

      
      <rect width=12 fill=white stroke=black x=6 height=6 y=24 rx=1></rect>
      <rect fill=#987b5a width=10 x=7 height=4.5 y=25></rect>
      <image xlink:href=/html/images/kettlebell.jpg preserveAspectRatio="xMinYMin slice" width=10 x=7 y=25 height=4.5></image>
      <text text-anchor=middle x=12 y=21>Narrow, 1 column</text>

      
      <rect width=14 fill=white stroke=black x=32 height=20 y=10 rx=1></rect>
      <line y2=29 stroke-width=1.1 stroke=black x1=32 y1=29 x2=46></line>
      <rect fill=#987b5a width=5.5 x=33 height=5.5 y=11></rect>
      <image xlink:href=/html/images/kettlebell.jpg width=5.5 x=33 y=11 height=5.5></image>
      <rect fill=burlywood width=5.5 x=39.5 height=5.5 y=11></rect>
      <rect fill=silver width=5.5 x=33 height=5.5 y=17.5></rect>
      <text text-anchor=middle x=39 y=7>Medium, 2 columns</text>

      
      <rect width=40 stroke-width=2 fill=white stroke=black x=65 height=26 y=2 rx=2></rect>
      <line y2=30 stroke-linecap=round stroke-width=2 stroke=black x1=61 y1=30 x2=109></line>
      <rect fill=#987b5a width=10 x=67 height=10 y=4></rect>
      <image xlink:href=/html/images/kettlebell.jpg width=10 x=67 y=4 height=10></image>
      <rect fill=burlywood width=10 x=80 height=10 y=4></rect>
      <rect fill=silver width=10 x=93 height=10 y=4></rect>
      <text text-anchor=middle x=85 y=25>Wide, 3 columns</text>
     </svg>
    </div>

   <li>

    <p>作者可能会根据图片的渲染大小显示不同的图片内容。这通常称为 <dfn id=art-direction>美术设计</dfn>。</p>

    <div class=example>
     <p>当网页在较大的物理像素的屏幕上查看时（假设浏览器窗口最大化了），
     作者可能希望在图片中重要的部分周围包含一些不太相关的部分。
     当同样的网页在较小的物理像素的屏幕上查看时，作者可能希望只显示图片中重要的部分。</p>

     <svg viewBox="0 0 52 25.6" height=160 aria-label="The upright-held phone shows a
     cropped image of a wolf; the rotated tablet shows the uncropped image." role=img>
      

      
      <rect width=6 fill=white stroke=black x=6 height=12 y=8 rx=1></rect>
      <rect fill=#716966 x=7 width=4 height=6 y=9></rect>
      <image xlink:href=/html/images/wolf.jpg preserveAspectRatio="xMidYMid slice" width=4 x=7 y=9 height=6></image>

      
      <rect width=20 fill=white stroke=black x=25 height=14 y=6 rx=1></rect>
      <line y2=6 stroke-width=1.1 stroke=black x1=26 y1=20 x2=26></line>
      <rect fill=#716966 x=27 width=17 height=8.5 y=7></rect>
      <image xlink:href=/html/images/wolf.jpg width=17 x=27 y=7 height=8.5></image>

     </svg>
    </div>

   <li>

    <p>作者可能希望显示同样的图片内容但根据用户代理的支持情况使用不同的图片格式。
    这通常被称为 <dfn id=image-format-based-selection>基于图片格式的选择</dfn>。</p>

    <p class=example>一个网页可能有 JPEG, WebP 和 JPEG XR 等各种格式的图片，
    后面两个相比 JPEG 有更好的压缩能力。由于不同的用户代理可能支持不同的图片格式，
    有些格式提供了更好的压缩比，作者可能希望给支持的浏览器提供这些格式，不支持的用户代理提供 JPEG。</p>

   </ul>

  <p>上述各种情形不是互斥的。例如，结合不同的 <a href=#device-pixel-ratio id=introduction-3:device-pixel-ratio>设备像素比</a>
  和不同的 <a href=#art-direction id=introduction-3:art-direction>美术设计</a> 来提供不同的资源也是合理的。</p>

  <p>虽然可以使用脚本来解决这些问题，但这样会引起一些其他问题：</p>

  <ul><li><p>有些用户代理会先下载 HTML 标签中的图片，之后再执行脚本，这样页面可以更快完成加载。
   如果脚本改变了要下载的图片，用户代理可能会开启两个独立的下载，会导致更坏的页面加载性能。<li><p>如果作者避免在 HTML 标签中指定图片，而是从脚本中发起一个下载来避免上述两个下载的问题，
   那么对于禁用脚本的用户就不会下载任何脚本，预先下载图片的优化也会失效。</ul>

  <p>考虑到这些，本规范引入了一些功能，以声明的方式解决上述问题。</p>

  <dl><dt>当图片的渲染大小固定的情况下，基于 <a href=#device-pixel-ratio id=introduction-3:device-pixel-ratio-2>设备像素比</a> 选择<dd>

    <p>在 <code id=introduction-3:the-img-element-2><a href=embedded-content.html#the-img-element>img</a></code> 元素上可以使用
    <code id=introduction-3:attr-img-src-2><a href=embedded-content.html#attr-img-src>src</a></code> 和 <code id=introduction-3:attr-img-srcset><a href=embedded-content.html#attr-img-srcset>srcset</a></code> 属性，
    使用 <code>x</code> 描述符来提供多个只有大小不同的图片（小图是大图的缩略版）。</p>

    <p class=note>当图片的渲染大小依赖于 <a id=introduction-3:viewport-5 href=https://drafts.csswg.org/css2/#viewport data-x-internal=viewport>viewport</a> 宽度时
    （<a href=#viewport-based-selection id=introduction-3:viewport-based-selection>基于视口的选择</a>），
    使用 <code>x</code> 描述符不合适，
    但该描述符可以与 <a href=#art-direction id=introduction-3:art-direction-2>美术设计</a> 一起使用。</p>

    <div class=example>

<pre>&lt;h2>From today's featured article&lt;/h2>
&lt;img <strong>src="/uploads/100-marie-lloyd.jpg"</strong>
     <strong>srcset="/uploads/150-marie-lloyd.jpg 1.5x, /uploads/200-marie-lloyd.jpg 2x"</strong>
     alt="" width="100" height="150">
&lt;p>&lt;b>&lt;a href="/wiki/Marie_Lloyd">Marie Lloyd&lt;/a>&lt;/b> (1870–1922)
was an English &lt;a href="/wiki/Music_hall">music hall&lt;/a> singer, ...</pre>

     <p>用户代理可以根据用户屏幕像素密度、缩放级别，以及可能的其他因素比如用户的网络条件选择任何一个给出的资源。</p>

     <p>为了向后兼容其他老的不知道 <code id=introduction-3:attr-img-srcset-2><a href=embedded-content.html#attr-img-srcset>srcset</a></code> 属性的用户代理 ，
     其中一个 URL 在 <code id=introduction-3:the-img-element-3><a href=embedded-content.html#the-img-element>img</a></code> 元素的 <code id=introduction-3:attr-img-src-3><a href=embedded-content.html#attr-img-src>src</a></code> 属性上也有指定。
     这样即使在老的用户代理中也能显示一些有用的（虽然可能比用户预期的分辨率低）东西。
     对于新的用户代理，<code id=introduction-3:attr-img-src-4><a href=embedded-content.html#attr-img-src>src</a></code> 属性也会参与资源选择，就像它被写在
     <code id=introduction-3:attr-img-srcset-3><a href=embedded-content.html#attr-img-srcset>srcset</a></code> 中并有一个 <code>1x</code> 描述符一样。</p>

     <p>图片的渲染大小由 <code id=introduction-3:attr-dim-width><a href=embedded-content-other.html#attr-dim-width>width</a></code> 和
     <code id=introduction-3:attr-dim-height><a href=embedded-content-other.html#attr-dim-height>height</a></code> 属性给出，使得用户代理可以在它下载完之前分配空间。</p>

    </div>

   <dt><a href=#viewport-based-selection id=introduction-3:viewport-based-selection-2>基于视口的选择</a><dd>

    <p>可以使用 <code id=introduction-3:attr-img-srcset-4><a href=embedded-content.html#attr-img-srcset>srcset</a></code> 和 <code id=introduction-3:attr-img-sizes><a href=embedded-content.html#attr-img-sizes>sizes</a></code> 属性，使用 <code>w</code> 描述符来提供多个只有大小不同的图片
    （小图是大图的缩略版）。</p>

    <div class=example>

     <p>在这个例子中，有一个横幅（使用适当的 CSS）横跨整个 <a href=https://drafts.csswg.org/css2/#viewport id=introduction-3:viewport-6 data-x-internal=viewport>视口</a> 宽度。</p>


<pre>&lt;h1>&lt;img <strong>sizes="100vw" srcset="wolf-400.jpg 400w, wolf-800.jpg 800w, wolf-1600.jpg 1600w"</strong>
     src="wolf-400.jpg" alt="The rad wolf">&lt;/h1></pre>

     <p>用户代理将会根据指定的 <code>w</code> 描述符和 <code id=introduction-3:attr-img-sizes-2><a href=embedded-content.html#attr-img-sizes>sizes</a></code>
     属性指定的渲染大小为每个图片计算等效像素密度。
     然后它可以根据用户屏幕的像素密度、缩放级别和任何可能的其他因素（比如用户网络状态）选择任何一个资源。</p>

     <p>如果用户屏幕是 320 <a href=https://drafts.csswg.org/css-values/#px id="introduction-3:'px'-2" data-x-internal="'px'">CSS 像素</a> 宽，这等价于指定
     <code>wolf-400.jpg 1.25x, wolf-800.jpg 2.5x, wolf-1600.jpg 5x</code>。
     另一方面，如果用户屏幕是 1200 <a href=https://drafts.csswg.org/css-values/#px id="introduction-3:'px'-3" data-x-internal="'px'">CSS 像素</a> 宽，这等价于指定
     <code>wolf-400.jpg 0.33x, wolf-800.jpg 0.67x, wolf-1600.jpg 1.33x</code>.。
     通过使用 <code>w</code> 描述符和 <code id=introduction-3:attr-img-sizes-3><a href=embedded-content.html#attr-img-sizes>sizes</a></code> 属性，
     不论用户设备有多大用户代理都可以选择下载正确的图片资源。</p>

     <p>为了向后兼容，其中一个 URL 也指定在 <code id=introduction-3:the-img-element-4><a href=embedded-content.html#the-img-element>img</a></code> 元素的
     <code id=introduction-3:attr-img-src-5><a href=embedded-content.html#attr-img-src>src</a></code> 属性上。在新的用户代理中，当
     <code id=introduction-3:attr-img-srcset-5><a href=embedded-content.html#attr-img-srcset>srcset</a></code> 属性使用 <code>w</code> 描述符时，
     <code id=introduction-3:attr-img-src-6><a href=embedded-content.html#attr-img-src>src</a></code> 属性会被忽略。</p>

    </div>

    <div class=example>

     <p>在这个例子中，网页基于 <a href=https://drafts.csswg.org/css2/#viewport id=introduction-3:viewport-7 data-x-internal=viewport>视口</a> 宽度有三个布局。
     窄的布局有一列图片（每个图片宽度大约是 100%），
     中等布局有两列图片（每个图片宽度大约是 50%），
     最宽的布局有三列图片和一些页面边距（每个图片大约是 33%）。
     在 <a href=https://drafts.csswg.org/css2/#viewport id=introduction-3:viewport-8 data-x-internal=viewport>视口</a> 宽度为
     <code>30em</code> 和 <code>50em</code> 时会切换布局。</p>

<pre>&lt;img <strong>sizes="(max-width: 30em) 100vw, (max-width: 50em) 50vw, calc(33vw - 100px)"</strong>
     <strong>srcset="swing-200.jpg 200w, swing-400.jpg 400w, swing-800.jpg 800w, swing-1600.jpg 1600w"</strong>
     src="swing-400.jpg" alt="Kettlebell Swing"></pre>

     <p><code id=introduction-3:attr-img-sizes-4><a href=embedded-content.html#attr-img-sizes>sizes</a></code> 属性设置了布局的切换点为
     <code>30em</code> 和 <code>50em</code>，也声明了在这些切换点之间图片大小为
     <code>100vw</code>, <code>50vw</code>, 或 <code>calc(33vw - 100px)</code>。
     这些大小不一定要精确匹配 CSS 中指定的真正的图片宽度。</p>

     <p>用户代理会从 <code id=introduction-3:attr-img-sizes-5><a href=embedded-content.html#attr-img-sizes>sizes</a></code> 属性中选一个宽度，
     使用第一个 <a id=introduction-3:media-condition href=https://drafts.csswg.org/mediaqueries/#typedef-media-condition data-x-internal=media-condition>&lt;media-condition></a> （括号中的部分）结果为真的大小，
     如果所有结果都为假就使用最后一项（<code>calc(33vw - 100px)</code>）。</p>

     <p>例如，如果 <a href=https://drafts.csswg.org/css2/#viewport id=introduction-3:viewport-9 data-x-internal=viewport>视口</a> 宽度为 <code>29em</code>，那么
     <code>(max-width: 30em)</code> 计算为真，就会使用 <code>100vw</code>，
     所以资源选择后的图片大小就是 <code>29em</code>。如果
     <a href=https://drafts.csswg.org/css2/#viewport id=introduction-3:viewport-10 data-x-internal=viewport>视口</a> 宽度是 <code>32em</code>，那么
     <code>(max-width: 30em)</code> 计算为假，但 <code>(max-width: 50em)</code>
     计算为真，就会使用 <code>50vw</code>，所以资源选择后图片大小就是
     <code>16em</code>（半个 <a href=https://drafts.csswg.org/css2/#viewport id=introduction-3:viewport-11 data-x-internal=viewport>视口</a> 宽度）。
     注意更宽一点的 <a href=https://drafts.csswg.org/css2/#viewport id=introduction-3:viewport-12 data-x-internal=viewport>视口</a> 因为布局不同而导致图片更小。</p>

     <p>用户代理可以计算等效像素密度并选择合适的资源，类似上一个例子那样。</p>

    </div>

   <dt><a href=#art-direction id=introduction-3:art-direction-3>美术设计</a><dd>

    <p>可以使用 <code id=introduction-3:the-picture-element><a href=embedded-content.html#the-picture-element>picture</a></code> 元素和 <code id=introduction-3:the-source-element><a href=embedded-content.html#the-source-element>source</a></code> 元素和
    <code id=introduction-3:attr-source-media><a href=embedded-content.html#attr-source-media>media</a></code> 属性提供多张内容不同的图片
    （例如小的图片是大图的裁剪版）。</p>

    <div class=example>

<pre>&lt;picture>
  &lt;source <strong>media="(min-width: 45em)"</strong> srcset="large.jpg">
  &lt;source <strong>media="(min-width: 32em)"</strong> srcset="med.jpg">
  &lt;img src="small.jpg" alt="The wolf runs through the snow.">
&lt;/picture></pre>

     <p>用户代理会选择 <code id=introduction-3:attr-source-media-2><a href=embedded-content.html#attr-source-media>media</a></code> 属性中的媒体查询匹配的第一个
     <code id=introduction-3:the-source-element-2><a href=embedded-content.html#the-source-element>source</a></code> 元素，然后从它的 <code id=introduction-3:attr-source-srcset><a href=embedded-content.html#attr-source-srcset>srcset</a></code>
     属性中选择一个合适的 URL。</p>

     <p>图片的渲染大小取决于选择了哪张图片。可以使用 CSS 来指定用户代理下载图片之前使用的宽高。</p>

<pre class=css>img { width: 300px; height: 300px }
@media (min-width: 32em) { img { width: 500px; height:300px } }
@media (min-width: 45em) { img { width: 700px; height:400px } }</pre>

    </div>

    <div class=example>

     <p>这个例子结合了 <a href=#art-direction id=introduction-3:art-direction-4>美术设计</a> 和
     基于 <a href=#device-pixel-ratio id=introduction-3:device-pixel-ratio-3>设备像素比</a> 的选择。
     这个占半个 <a href=https://drafts.csswg.org/css2/#viewport id=introduction-3:viewport-13 data-x-internal=viewport>视口</a> 的横幅提供了两个版本，一个用于宽屏一个用于窄屏。</p>

<pre>&lt;h1>
 &lt;picture>
  &lt;source media="(max-width: 500px)" srcset="banner-phone.jpeg, banner-phone-HD.jpeg 2x">
  &lt;img src="banner.jpeg" srcset="banner-HD.jpeg 2x" alt="The Breakfast Combo">
 &lt;/picture>
&lt;/h1></pre>

    </div>

   <dt><a href=#image-format-based-selection id=introduction-3:image-format-based-selection>基于图片格式的选择</a><dd>

    <p>可以使用 <code id=introduction-3:the-source-element-3><a href=embedded-content.html#the-source-element>source</a></code> 元素上的 <code id=introduction-3:attr-source-type><a href=embedded-content.html#attr-source-type>type</a></code>
    属性来提供多种格式的图片。</p>

    <div class=example>

<pre>&lt;h2>From today's featured article&lt;/h2>
&lt;picture>
 &lt;source srcset="/uploads/100-marie-lloyd.webp" <strong>type="image/webp"</strong>>
 &lt;source srcset="/uploads/100-marie-lloyd.jxr" <strong>type="image/vnd.ms-photo"</strong>>
 &lt;img src="/uploads/100-marie-lloyd.jpg" alt="" width="100" height="150">
&lt;/picture>
&lt;p>&lt;b>&lt;a href="/wiki/Marie_Lloyd">Marie Lloyd&lt;/a>&lt;/b> (1870–1922)
was an English &lt;a href="/wiki/Music_hall">music hall&lt;/a> singer, ...</pre>

     <p>在这个例子中，用户代理会选择第一个
     <code id=introduction-3:attr-source-type-2><a href=embedded-content.html#attr-source-type>type</a></code> 属性为支持的 MIME 类型的源。
     如果用户代理支持 WebP 就会选择第一个 <code id=introduction-3:the-source-element-4><a href=embedded-content.html#the-source-element>source</a></code> 元素。
     如果不支持 WebP，但支持 JPEG XR 就会选择第二个 <code id=introduction-3:the-source-element-5><a href=embedded-content.html#the-source-element>source</a></code> 元素。
     如果这两种都不支持，就会选择 <code id=introduction-3:the-img-element-5><a href=embedded-content.html#the-img-element>img</a></code> 元素。</p>

    </div>

   </dl>



  <h6 id="adaptive images"><span class=secno>4.8.4.1.1</span> 自适应图片<a href="#adaptive images" class=self-link></a></h6>
<div data-zh-date="Mon May 28 2018 16:16:26 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/the-elements-of-html/embedded-content/images/introduction/adaptive-images.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/embedded-content/images/introduction/adaptive-images.en.html></div>

  <p><i>This section is non-normative.</i></p>

  <p>可以使用 CSS 和媒体查询来构造动态适应用户环境的页面布局，
  特别是对不同的 <a href=https://drafts.csswg.org/css2/#viewport id="adaptive images:viewport" data-x-internal=viewport>视口</a> 宽高和像素密度。
  但 CSS 无法操作内容；这时可以使用 <code id="adaptive images:the-img-element"><a href=embedded-content.html#the-img-element>img</a></code> 元素的
  <code id="adaptive images:attr-img-srcset"><a href=embedded-content.html#attr-img-srcset>srcset</a></code> 属性和 <code id="adaptive images:the-picture-element"><a href=embedded-content.html#the-picture-element>picture</a></code> 元素。
  本节将介绍一个示例案例，演示如何使用这些功能。</p>

  <p>考虑一个场景，在宽屏（宽于 600 <a href=https://drafts.csswg.org/css-values/#px id="adaptive images:'px'" data-x-internal="'px'">CSS 像素</a>）上要使用一个
  300×150 的图片 <code>a-rectangle.png</code>，
  但在小一点的屏幕上（不大于 600 <a href=https://drafts.csswg.org/css-values/#px id="adaptive images:'px'-2" data-x-internal="'px'">CSS 像素</a>）要使用一个
  100×100 的图片 <code>a-square.png</code>。这样的标记可能像这样：</p>

  <pre>&lt;figure>
 &lt;picture>
  &lt;source srcset="a-square.png" media="(max-width: 600px)">
  &lt;img src="a-rectangle.png" alt="Barney Frank wears a suit and glasses.">
 &lt;/picture>
 &lt;figcaption>Barney Frank, 2011&lt;/figcaption>
&lt;/figure></pre>

  <p class=note>在 <code id="adaptive images:attr-img-alt"><a href=embedded-content.html#attr-img-alt>alt</a></code> 属性中放什么内容，参考
  <a href=#alt>图片替代文本的要求</a> 一节。</p>

  <p>问题在于用户代理在图片加载时不知道使用什么样的宽高。
  为了避免页面加载中布局被重排很多次，可以使用 CSS 和 CSS 媒体查询来提供宽高：</p>

  <pre>&lt;style>
 #a { width: 300px; height: 150px; }
 @media (max-width: 600px) { #a { width: 100px; height: 100px; } }
&lt;/style>
&lt;figure>
 &lt;picture>
  &lt;source srcset="a-square.png" media="(max-width: 600px)">
  &lt;img src="a-rectangle.png" alt="Barney Frank wears a suit and glasses." id="a">
 &lt;/picture>
 &lt;figcaption>Barney Frank, 2011&lt;/figcaption>
&lt;/figure></pre>

  <p>也可以使用 <code id="adaptive images:attr-dim-width"><a href=embedded-content-other.html#attr-dim-width>width</a></code> 和 <code id="adaptive images:attr-dim-height"><a href=embedded-content-other.html#attr-dim-height>height</a></code> 使用来为提供旧的用户代理提供宽高，
  CSS 只用于支持 <code id="adaptive images:the-picture-element-2"><a href=embedded-content.html#the-picture-element>picture</a></code> 的用户代理：</p>

  <pre>&lt;style media="(max-width: 600px)">
 #a { width: 100px; height: 100px; }
&lt;/style>
&lt;figure>
 &lt;picture>
  &lt;source srcset="a-square.png" media="(max-width: 600px)">
  &lt;img src="a-rectangle.png" width="300" height="150"
  alt="Barney Frank wears a suit and glasses." id="a">
 &lt;/picture>
 &lt;figcaption>Barney Frank, 2011&lt;/figcaption>
&lt;/figure></pre>

  <hr>

  <p><code id="adaptive images:the-img-element-2"><a href=embedded-content.html#the-img-element>img</a></code> 元素指定了 <code id="adaptive images:attr-img-src"><a href=embedded-content.html#attr-img-src>src</a></code> 属性，
  它为不支持 <code id="adaptive images:the-picture-element-3"><a href=embedded-content.html#the-picture-element>picture</a></code> 的旧的用户代理给出了图片的 URL。
  这就要讨论 <code id="adaptive images:attr-img-src-2"><a href=embedded-content.html#attr-img-src>src</a></code> 属性应该提供哪个图片的问题了。</p>

  <p>如果作者在旧的用户代理中想要最大的图片，标记可以这样写：</p>

  <pre>&lt;picture>
 &lt;source srcset="pear-mobile.jpeg" media="(max-width: 720px)">
 &lt;source srcset="pear-tablet.jpeg" media="(max-width: 1280px)">
 &lt;img src="pear-desktop.jpeg" alt="The pear is juicy.">
&lt;/picture></pre>

  <p>但如果旧的用户代理更重要，就可以把所有三个图片都列在
  <code id="adaptive images:the-source-element"><a href=embedded-content.html#the-source-element>source</a></code> 元素中，完全重写掉 <code id="adaptive images:attr-img-src-3"><a href=embedded-content.html#attr-img-src>src</a></code> 属性。</p>

  <pre>&lt;picture>
 &lt;source srcset="pear-mobile.jpeg" media="(max-width: 720px)">
 &lt;source srcset="pear-tablet.jpeg" media="(max-width: 1280px)">
 &lt;source srcset="pear-desktop.jpeg">
 &lt;img src="pear-mobile.jpeg" alt="The pear is juicy.">
&lt;/picture></pre>

  <p>因为在这里 <code id="adaptive images:attr-img-src-4"><a href=embedded-content.html#attr-img-src>src</a></code> 属性在支持 <code id="adaptive images:the-picture-element-4"><a href=embedded-content.html#the-picture-element>picture</a></code>
  的用户代理下会被完全忽略，<code id="adaptive images:attr-img-src-5"><a href=embedded-content.html#attr-img-src>src</a></code> 属性可以默认写成任何图片，
  包括既不是最大的也不是最小的那个：</p>

  <pre>&lt;picture>
 &lt;source srcset="pear-mobile.jpeg" media="(max-width: 720px)">
 &lt;source srcset="pear-tablet.jpeg" media="(max-width: 1280px)">
 &lt;source srcset="pear-desktop.jpeg">
 &lt;img src="pear-tablet.jpeg" alt="The pear is juicy.">
&lt;/picture></pre>

  <hr>

  <p>上面用到了 <code>max-width</code> 媒体特性，给出了该图片适用的最大
  （<a href=https://drafts.csswg.org/css2/#viewport id="adaptive images:viewport-2" data-x-internal=viewport>视口</a>）大小。也可以使用 <code>min-width</code>。</p>

  <pre>&lt;picture>
 &lt;source srcset="pear-desktop.jpeg" media="(min-width: 1281px)">
 &lt;source srcset="pear-tablet.jpeg" media="(min-width: 721px)">
 &lt;img src="pear-mobile.jpeg" alt="The pear is juicy.">
&lt;/picture></pre>



  <h5 id=attributes-common-to-source-and-img-elements><span class=secno>4.8.4.2</span> Attributes common to <code id=attributes-common-to-source-and-img-elements:the-source-element><a href=embedded-content.html#the-source-element>source</a></code>,
  <code id=attributes-common-to-source-and-img-elements:the-img-element><a href=embedded-content.html#the-img-element>img</a></code>, and <code id=attributes-common-to-source-and-img-elements:link-元素><a href=semantics.html#link-元素>link</a></code> elements<a href=#attributes-common-to-source-and-img-elements class=self-link></a></h5>
<div data-zh-date="" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/embedded-content/images/attributes-common-to-source-img-and-link-elements/index.zh.html?filename=index.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fembedded-content%2Fimages%2Fattributes-common-to-source-img-and-link-elements%2Findex.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/embedded-content/images/attributes-common-to-source-img-and-link-elements/index.en.html></div>


  <h6 id=srcset-attributes><span class=secno>4.8.4.2.1</span> Srcset attributes<a href=#srcset-attributes class=self-link></a></h6>
<div data-zh-date="" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/embedded-content/images/attributes-common-to-source-img-and-link-elements/srcset-attributes.zh.html?filename=srcset-attributes.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fembedded-content%2Fimages%2Fattributes-common-to-source-img-and-link-elements%2Fsrcset-attributes.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/embedded-content/images/attributes-common-to-source-img-and-link-elements/srcset-attributes.en.html></div>

  <p>A <dfn id=srcset-attribute>srcset attribute</dfn> is an attribute with requirements defined in this section.</p>

  <p>If present, its value must consist of one or more <a href=#image-candidate-string id=srcset-attributes:image-candidate-string>image
  candidate strings</a>, each separated from the next by a U+002C COMMA character (,). If an
  <a href=#image-candidate-string id=srcset-attributes:image-candidate-string-2>image candidate string</a> contains no descriptors and no <a id=srcset-attributes:space-characters href=https://infra.spec.whatwg.org/#ascii-whitespace data-x-internal=space-characters>ASCII whitespace</a>
  after the URL, the following <a href=#image-candidate-string id=srcset-attributes:image-candidate-string-3>image candidate string</a>, if there is one, must begin with
  one or more <a id=srcset-attributes:space-characters-2 href=https://infra.spec.whatwg.org/#ascii-whitespace data-x-internal=space-characters>ASCII whitespace</a>.</p>

  <p>An <dfn id=image-candidate-string>image candidate string</dfn> consists of the following components, in order, with the
  further restrictions described below this list:</p>

  <ol><li><p>Zero or more <a id=srcset-attributes:space-characters-3 href=https://infra.spec.whatwg.org/#ascii-whitespace data-x-internal=space-characters>ASCII whitespace</a>.<li><p>A <a id=srcset-attributes:valid-non-empty-url href=infrastructure.html#valid-non-empty-url>valid non-empty URL</a> that does not start or end with a U+002C COMMA
   character (,), referencing a non-interactive, optionally animated, image resource that is neither
   paged nor scripted.<li><p>Zero or more <a id=srcset-attributes:space-characters-4 href=https://infra.spec.whatwg.org/#ascii-whitespace data-x-internal=space-characters>ASCII whitespace</a>.<li>
    <p>Zero or one of the following:</p>

    <ul><li><p>A <dfn id=width-descriptor>width descriptor</dfn>, consisting of: <a id=srcset-attributes:space-characters-5 href=https://infra.spec.whatwg.org/#ascii-whitespace data-x-internal=space-characters>ASCII whitespace</a>, a
     <a id=srcset-attributes:valid-non-negative-integer href=infrastructure.html#valid-non-negative-integer>valid non-negative integer</a> giving a number greater than zero representing the
     <dfn id=width-descriptor-value>width descriptor value</dfn>, and a U+0077 LATIN SMALL LETTER W character.<li><p>A <dfn id=pixel-density-descriptor>pixel density descriptor</dfn>, consisting of: <a id=srcset-attributes:space-characters-6 href=https://infra.spec.whatwg.org/#ascii-whitespace data-x-internal=space-characters>ASCII whitespace</a>, a
     <a id=srcset-attributes:valid-floating-point-number href=infrastructure.html#valid-floating-point-number>valid floating-point number</a> giving a number greater than zero representing the
     <dfn id=pixel-density-descriptor-value>pixel density descriptor value</dfn>, and a U+0078 LATIN SMALL LETTER X
     character.</ul>
   <li><p>Zero or more <a id=srcset-attributes:space-characters-7 href=https://infra.spec.whatwg.org/#ascii-whitespace data-x-internal=space-characters>ASCII whitespace</a>.</ol>

  <p>There must not be an <a href=#image-candidate-string id=srcset-attributes:image-candidate-string-4>image candidate string</a> for an element that has the same
  <a href=#width-descriptor-value id=srcset-attributes:width-descriptor-value>width descriptor value</a> as another <a href=#image-candidate-string id=srcset-attributes:image-candidate-string-5>image candidate string</a>'s <a href=#width-descriptor-value id=srcset-attributes:width-descriptor-value-2>width
  descriptor value</a> for the same element.</p>

  <p>There must not be an <a href=#image-candidate-string id=srcset-attributes:image-candidate-string-6>image candidate string</a> for an element that has the same
  <a href=#pixel-density-descriptor-value id=srcset-attributes:pixel-density-descriptor-value>pixel density descriptor value</a> as another <a href=#image-candidate-string id=srcset-attributes:image-candidate-string-7>image candidate string</a>'s
  <a href=#pixel-density-descriptor-value id=srcset-attributes:pixel-density-descriptor-value-2>pixel density descriptor value</a> for the same element. For the purpose of this
  requirement, an <a href=#image-candidate-string id=srcset-attributes:image-candidate-string-8>image candidate string</a> with no descriptors is equivalent to an
  <a href=#image-candidate-string id=srcset-attributes:image-candidate-string-9>image candidate string</a> with a <code>1x</code> descriptor.</p>

  <p>If an <a href=#image-candidate-string id=srcset-attributes:image-candidate-string-10>image candidate string</a> for an element has the <a href=#width-descriptor id=srcset-attributes:width-descriptor>width descriptor</a>
  specified, all other <a href=#image-candidate-string id=srcset-attributes:image-candidate-string-11>image candidate strings</a> for that
  element must also have the <a href=#width-descriptor id=srcset-attributes:width-descriptor-2>width descriptor</a> specified.</p>

  <p>The specified width in an <a href=#image-candidate-string id=srcset-attributes:image-candidate-string-12>image candidate string</a>'s <a href=#width-descriptor id=srcset-attributes:width-descriptor-3>width descriptor</a>
  must match the <a id=srcset-attributes:intrinsic-width href=https://drafts.csswg.org/css-images/#intrinsic-width data-x-internal=intrinsic-width>intrinsic width</a> in the resource given by the
  <a href=#image-candidate-string id=srcset-attributes:image-candidate-string-13>image candidate string</a>'s URL, if it has an <a id=srcset-attributes:intrinsic-width-2 href=https://drafts.csswg.org/css-images/#intrinsic-width data-x-internal=intrinsic-width>intrinsic width</a>.</p>

  <p>If an element has a <a href=#sizes-attribute id=srcset-attributes:sizes-attribute>sizes attribute</a> present, all <a href=#image-candidate-string id=srcset-attributes:image-candidate-string-14>image candidate strings</a> for that element must have the <a href=#width-descriptor id=srcset-attributes:width-descriptor-4>width
  descriptor</a> specified.</p>



  <h6 id=sizes-attributes><span class=secno>4.8.4.2.2</span> Sizes attributes<a href=#sizes-attributes class=self-link></a></h6>
<div data-zh-date="" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/embedded-content/images/attributes-common-to-source-img-and-link-elements/sizes-attributes.zh.html?filename=sizes-attributes.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fembedded-content%2Fimages%2Fattributes-common-to-source-img-and-link-elements%2Fsizes-attributes.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/embedded-content/images/attributes-common-to-source-img-and-link-elements/sizes-attributes.en.html></div>

  <p>A <dfn id=sizes-attribute>sizes attribute</dfn> is an attribute with requirements defined in this section.</p>

  <p>If present, the value must be a <a href=#valid-source-size-list id=sizes-attributes:valid-source-size-list>valid source size list</a>.</p>

  <p>A <dfn id=valid-source-size-list>valid source size list</dfn> is a string that matches the following grammar:
  <a href=references.html#refsCSSVALUES>[CSSVALUES]</a> <a href=references.html#refsMQ>[MQ]</a></p>

<pre><code class=html><dfn id=source-size-list>&lt;source-size-list></dfn> = [ <a href=#source-size id=sizes-attributes:source-size>&lt;source-size></a># , ]? <a href=#source-size-value id=sizes-attributes:source-size-value>&lt;source-size-value></a>
<dfn id=source-size>&lt;source-size></dfn> = <a id=sizes-attributes:media-condition href=https://drafts.csswg.org/mediaqueries/#typedef-media-condition data-x-internal=media-condition>&lt;media-condition></a> <a href=#source-size-value id=sizes-attributes:source-size-value-2>&lt;source-size-value></a>
<dfn id=source-size-value>&lt;source-size-value></dfn> = <a id=sizes-attributes:length-2 href=https://drafts.csswg.org/css-values/#lengths data-x-internal=length-2>&lt;length></a></code></pre>

  <p>A <a href=#source-size-value id=sizes-attributes:source-size-value-3>&lt;source-size-value></a> must not be negative, and must not use CSS functions
  other than the <a id=sizes-attributes:math-functions href=https://drafts.csswg.org/css-values/#math-function data-x-internal=math-functions>math functions</a>.</p>

  <p>The <a href=#source-size-value id=sizes-attributes:source-size-value-4>&lt;source-size-value></a> gives the intended layout width of the image. The
  author can specify different widths for different environments with
  <a id=sizes-attributes:media-condition-2 href=https://drafts.csswg.org/mediaqueries/#typedef-media-condition data-x-internal=media-condition>&lt;media-condition></a>s.</p>

  <p class=note>Percentages are not allowed in a <a href=#source-size-value id=sizes-attributes:source-size-value-5>&lt;source-size-value></a>,
  to avoid confusion about what it would be relative to.
  The <a id="sizes-attributes:'vw'" href=https://drafts.csswg.org/css-values/#vw data-x-internal="'vw'">'vw'</a> unit can be used for sizes relative to the <a id=sizes-attributes:viewport href=https://drafts.csswg.org/css2/#viewport data-x-internal=viewport>viewport</a>
  width.</p>


  


  <h5 id=images-processing-model><span class=secno>4.8.4.3</span> Processing model<a href=#images-processing-model class=self-link></a></h5>
<div data-zh-date="" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/embedded-content/images/processing-model/index.zh.html?filename=index.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fembedded-content%2Fimages%2Fprocessing-model%2Findex.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/embedded-content/images/processing-model/index.en.html></div>

  <hr>

  <p>An <code id=images-processing-model:the-img-element><a href=embedded-content.html#the-img-element>img</a></code> element has a <dfn id=current-request>current request</dfn> and a <dfn id=pending-request>pending request</dfn>.
  The <a href=#current-request id=images-processing-model:current-request>current request</a> is initially set to a new <a href=#image-request id=images-processing-model:image-request>image request</a>.
  The <a href=#pending-request id=images-processing-model:pending-request>pending request</a> is initially set to null.</p>

  <p>An <dfn id=image-request>image request</dfn> has a <dfn id=img-req-state>state</dfn>, <dfn id=img-req-url>current URL</dfn>, and <dfn id=img-req-data>image data</dfn>.</p>

  <p>An <a href=#image-request id=images-processing-model:image-request-2>image request</a>'s <a href=#img-req-state id=images-processing-model:img-req-state>state</a> is one of the
  following:</p>

  <dl><dt><dfn id=img-none>Unavailable</dfn><dd>The user agent hasn't obtained any image data,
   or has obtained some or all of the image data but
   hasn't yet decoded enough of the image to get the image dimensions.<dt><dfn id=img-inc>Partially available</dfn><dd>The user agent has obtained some of the image data and at least the image dimensions are
   available.<dt><dfn id=img-all>Completely available</dfn><dd>The user agent has obtained all of the image data and at least the image dimensions are
   available.<dt><dfn id=img-error>Broken</dfn><dd>The user agent has obtained all of the image data that it can, but it cannot even decode the
   image enough to get the image dimensions (e.g. the image is corrupted, or the format is not
   supported, or no data could be obtained).</dl>

  <p>An <a href=#image-request id=images-processing-model:image-request-3>image request</a>'s <a href=#img-req-url id=images-processing-model:img-req-url>current URL</a> is initially the
  empty string.</p>

  <p>An <a href=#image-request id=images-processing-model:image-request-4>image request</a>'s <a href=#img-req-data id=images-processing-model:img-req-data>image data</a> is the decoded
  image data.</p>

  <p>When an <a href=#image-request id=images-processing-model:image-request-5>image request</a>'s <a href=#img-req-state id=images-processing-model:img-req-state-2>state</a> is either <a href=#img-inc id=images-processing-model:img-inc>partially available</a> or <a href=#img-all id=images-processing-model:img-all>completely available</a>,
  the <a href=#image-request id=images-processing-model:image-request-6>image request</a> is said to be <dfn id=img-available>available</dfn>.</p>

  <p>When an <code id=images-processing-model:the-img-element-2><a href=embedded-content.html#the-img-element>img</a></code> element's <a href=#current-request id=images-processing-model:current-request-2>current request</a>'s <a href=#img-req-state id=images-processing-model:img-req-state-3>state</a> is <a href=#img-all id=images-processing-model:img-all-2>completely available</a> and the
  user agent can decode the media data without errors, then the <code id=images-processing-model:the-img-element-3><a href=embedded-content.html#the-img-element>img</a></code> element is said to
  be <dfn id=img-good>fully decodable</dfn>.</p>

  <p>An <a href=#image-request id=images-processing-model:image-request-7>image request</a>'s <a href=#img-req-state id=images-processing-model:img-req-state-4>state</a> is initially <a href=#img-none id=images-processing-model:img-none>unavailable</a>.</p>

  <p>When an <code id=images-processing-model:the-img-element-4><a href=embedded-content.html#the-img-element>img</a></code> element's <a href=#current-request id=images-processing-model:current-request-3>current request</a> is <a href=#img-available id=images-processing-model:img-available>available</a>, the <code id=images-processing-model:the-img-element-5><a href=embedded-content.html#the-img-element>img</a></code> element provides a <a id=images-processing-model:paint-source href=https://drafts.csswg.org/css-images-4/#paint-source data-x-internal=paint-source>paint
  source</a> whose width is the image's <a href=#density-corrected-intrinsic-width-and-height id=images-processing-model:density-corrected-intrinsic-width-and-height>density-corrected intrinsic width</a> (if any), whose height is the image's <a href=#density-corrected-intrinsic-width-and-height id=images-processing-model:density-corrected-intrinsic-width-and-height-2>density-corrected intrinsic height</a>
  (if any), and whose appearance is the intrinsic appearance of the image.</p>

  <hr>

  <p>An <code id=images-processing-model:the-img-element-6><a href=embedded-content.html#the-img-element>img</a></code> element is said to <dfn id=use-srcset-or-picture>use <code>srcset</code> or
  <code>picture</code></dfn> if it has a <code id=images-processing-model:attr-img-srcset><a href=embedded-content.html#attr-img-srcset>srcset</a></code> attribute
  specified or if it has a parent that is a <code id=images-processing-model:the-picture-element><a href=embedded-content.html#the-picture-element>picture</a></code> element.</p>

  <hr>

  <p>Each <code id=images-processing-model:the-img-element-7><a href=embedded-content.html#the-img-element>img</a></code> element has a <dfn id=last-selected-source>last selected source</dfn>, which must initially be
  null.</p>

  <p>Each <a href=#image-request id=images-processing-model:image-request-8>image request</a> has a <dfn id=current-pixel-density>current pixel density</dfn>, which must initially be undefined.</p>

  <p>When an <code id=images-processing-model:the-img-element-8><a href=embedded-content.html#the-img-element>img</a></code> element has a <a href=#current-pixel-density id=images-processing-model:current-pixel-density>current pixel density</a> that is not 1.0, the
  element's image data must be treated as if its resolution, in device pixels per <a href=https://drafts.csswg.org/css-values/#px id="images-processing-model:'px'" data-x-internal="'px'">CSS pixels</a>, was the <a href=#current-pixel-density id=images-processing-model:current-pixel-density-2>current pixel density</a>. The image's
  <dfn id=density-corrected-intrinsic-width-and-height>density-corrected intrinsic width and height</dfn> are the <a href=https://drafts.csswg.org/css-images/#intrinsic-dimensions id=images-processing-model:intrinsic-dimensions data-x-internal=intrinsic-dimensions>intrinsic width and height</a> after taking into account the <a href=#current-pixel-density id=images-processing-model:current-pixel-density-3>current pixel
  density</a>.</p>

  <p class=example>For example, if the <a href=#current-pixel-density id=images-processing-model:current-pixel-density-4>current pixel density</a> is 3.125, that means
  that there are 300 device pixels per <a href=https://drafts.csswg.org/css-values/#in id="images-processing-model:'in'" data-x-internal="'in'">CSS inch</a>, and thus if the image
  data is 300x600, it has <a id=images-processing-model:intrinsic-dimensions-2 href=https://drafts.csswg.org/css-images/#intrinsic-dimensions data-x-internal=intrinsic-dimensions>intrinsic dimensions</a> of 96 <a href=https://drafts.csswg.org/css-values/#px id="images-processing-model:'px'-2" data-x-internal="'px'">CSS
  pixels</a> by 192 <a href=https://drafts.csswg.org/css-values/#px id="images-processing-model:'px'-3" data-x-internal="'px'">CSS pixels</a>.</p>

  <p>All <code id=images-processing-model:the-img-element-9><a href=embedded-content.html#the-img-element>img</a></code> and <code id=images-processing-model:link-元素><a href=semantics.html#link-元素>link</a></code> elements are associated with a <a href=#source-set id=images-processing-model:source-set>source set</a>.</p>

  <p>A <dfn id=source-set>source set</dfn> is an ordered set of zero or more <a href=#image-source id=images-processing-model:image-source>image sources</a>
  and a <a href=#source-size-2 id=images-processing-model:source-size-2>source size</a>.</p>

  <p>An <dfn id=image-source>image source</dfn> is a <a id=images-processing-model:url href=https://url.spec.whatwg.org/#concept-url data-x-internal=url>URL</a>, and optionally either a <a href=#pixel-density-descriptor id=images-processing-model:pixel-density-descriptor>pixel density
  descriptor</a>, or a <a href=#width-descriptor id=images-processing-model:width-descriptor>width descriptor</a>.</p>

  <p>A <dfn id=source-size-2>source size</dfn> is a <a href=#source-size-value id=images-processing-model:source-size-value>&lt;source-size-value></a>.
  When a <a href=#source-size-2 id=images-processing-model:source-size-2-2>source size</a> has a unit relative to the <a id=images-processing-model:viewport href=https://drafts.csswg.org/css2/#viewport data-x-internal=viewport>viewport</a>,
  it must be interpreted relative to the <code id=images-processing-model:the-img-element-10><a href=embedded-content.html#the-img-element>img</a></code> element's <a id=images-processing-model:node-document href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a>'s
  <a id=images-processing-model:viewport-2 href=https://drafts.csswg.org/css2/#viewport data-x-internal=viewport>viewport</a>.
  Other units must be interpreted the same as in Media Queries. <a href=references.html#refsMQ>[MQ]</a></p>

  <hr>

  <p>A <dfn id=concept-microsyntax-parse-error>parse error</dfn> for algorithms in this
  section indicates a non-fatal mismatch between input and requirements. User agents are encouraged
  to expose <a href=#concept-microsyntax-parse-error id=images-processing-model:concept-microsyntax-parse-error>parse error</a>s somehow.</p>

  <hr>

  <p>Whether the image is fetched successfully or not (e.g. whether the response status was an
  <a id=images-processing-model:ok-status href=https://fetch.spec.whatwg.org/#ok-status data-x-internal=ok-status>ok status</a>) must be ignored when determining the image's type and whether it is a
  valid image.</p>

  <p class=note>This allows servers to return images with error responses, and have them
  displayed.</p>

  <p id=img-determine-type>The user agent should apply the <a href=https://mimesniff.spec.whatwg.org/#rules-for-sniffing-images-specifically id=images-processing-model:content-type-sniffing:-image data-x-internal=content-type-sniffing:-image>image sniffing rules</a> to determine the type of the image, with the image's <a href=infrastructure.html#content-type id=images-processing-model:content-type>associated Content-Type headers</a> giving the <var>official
  type</var>. If these rules are not applied, then the type of the image must be the type given by
  the image's <a href=infrastructure.html#content-type id=images-processing-model:content-type-2>associated Content-Type headers</a>.</p>

  <p>User agents must not support non-image resources with the <code id=images-processing-model:the-img-element-11><a href=embedded-content.html#the-img-element>img</a></code> element (e.g. XML
  files whose <a id=images-processing-model:document-element href=https://dom.spec.whatwg.org/#document-element data-x-internal=document-element>document element</a> is an HTML element). User agents must not run executable
  code (e.g. scripts) embedded in the image resource. User agents must only display the first page
  of a multipage resource (e.g. a PDF file). User agents must not allow the resource to act in an
  interactive fashion, but should honour any animation in the resource.</p>

  <p>This specification does not specify which image types are to be supported.</p>



  <h6 id=when-to-obtain-images><span class=secno>4.8.4.3.1</span> When to obtain images<a href=#when-to-obtain-images class=self-link></a></h6>
<div data-zh-date="" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/embedded-content/images/processing-model/when-to-obtain-images.zh.html?filename=when-to-obtain-images.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fembedded-content%2Fimages%2Fprocessing-model%2Fwhen-to-obtain-images.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/embedded-content/images/processing-model/when-to-obtain-images.en.html></div>

  <p>By default, images are obtained immediately. User agents may provide users with the option to
  instead obtain them on-demand. (The on-demand option might be used by bandwidth-constrained users,
  for example.)</p>

  <p>When obtaining images immediately, the user agent must synchronously <a href=#update-the-image-data id=when-to-obtain-images:update-the-image-data>update the image
  data</a> of the <code id=when-to-obtain-images:the-img-element><a href=embedded-content.html#the-img-element>img</a></code> element, with the <i>restart animation</i> flag set if so
  stated, whenever that element is created or has experienced <a href=#relevant-mutations id=when-to-obtain-images:relevant-mutations>relevant mutations</a>.</p>

  <p>When obtaining images on demand, the user agent must <a href=#update-the-image-data id=when-to-obtain-images:update-the-image-data-2>update the image data</a> of an
  <code id=when-to-obtain-images:the-img-element-2><a href=embedded-content.html#the-img-element>img</a></code> element whenever it needs the image data (i.e., on demand), but only if the
  <code id=when-to-obtain-images:the-img-element-3><a href=embedded-content.html#the-img-element>img</a></code> element's <a href=#current-request id=when-to-obtain-images:current-request>current request</a>'s <a href=#img-req-state id=when-to-obtain-images:img-req-state>state</a> is <a href=#img-none id=when-to-obtain-images:img-none>unavailable</a>. When an
  <code id=when-to-obtain-images:the-img-element-4><a href=embedded-content.html#the-img-element>img</a></code> element has experienced <a href=#relevant-mutations id=when-to-obtain-images:relevant-mutations-2>relevant mutations</a>, if the user agent only
  obtains images on demand, the <code id=when-to-obtain-images:the-img-element-5><a href=embedded-content.html#the-img-element>img</a></code> element's <a href=#current-request id=when-to-obtain-images:current-request-2>current request</a>'s <a href=#img-req-state id=when-to-obtain-images:img-req-state-2>state</a> must return to <a href=#img-none id=when-to-obtain-images:img-none-2>unavailable</a>.</p>



  <h6 id=reacting-to-dom-mutations><span class=secno>4.8.4.3.2</span> 响应 DOM 变化<a href=#reacting-to-dom-mutations class=self-link></a></h6>
<div data-zh-date="Thu May 24 2018 01:36:45 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/the-elements-of-html/embedded-content/images/processing-model/reacting-to-dom-mutations.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/embedded-content/images/processing-model/reacting-to-dom-mutations.en.html></div>

  <p><code id=reacting-to-dom-mutations:the-img-element><a href=embedded-content.html#the-img-element>img</a></code> 元素 <dfn id=relevant-mutations>相关的变化</dfn> 包括：</p>

  <ul><li><p>该元素的 <code id=reacting-to-dom-mutations:attr-img-src><a href=embedded-content.html#attr-img-src>src</a></code>， <code id=reacting-to-dom-mutations:attr-img-srcset><a href=embedded-content.html#attr-img-srcset>srcset</a></code>， <code id=reacting-to-dom-mutations:attr-dim-width><a href=embedded-content-other.html#attr-dim-width>width</a></code> 或 <code id=reacting-to-dom-mutations:attr-img-sizes><a href=embedded-content.html#attr-img-sizes>sizes</a></code> 属性的设置、改变或移除。<li><p>该元素的 <code id=reacting-to-dom-mutations:attr-img-src-2><a href=embedded-content.html#attr-img-src>src</a></code> 属性设置为与之前的值一样的值。
   这时必须为 <a href=#update-the-image-data id=reacting-to-dom-mutations:update-the-image-data>更新图片数据</a> 算法设置
   <i>restart animation</i> 标志。<li><p>该元素的 <code id=reacting-to-dom-mutations:attr-img-crossorigin><a href=embedded-content.html#attr-img-crossorigin>crossorigin</a></code> 属性状态变化。<li><p>在 <code id=reacting-to-dom-mutations:the-picture-element><a href=embedded-content.html#the-picture-element>picture</a></code> 父元素 <a href=infrastructure.html#nodes-are-inserted id=reacting-to-dom-mutations:nodes-are-inserted>插入</a> 或
   <a href=infrastructure.html#nodes-are-removed id=reacting-to-dom-mutations:nodes-are-removed>移除</a> 元素。<li><p>该元素的父元素是 <code id=reacting-to-dom-mutations:the-picture-element-2><a href=embedded-content.html#the-picture-element>picture</a></code> 元素且
   <a href=infrastructure.html#nodes-are-inserted id=reacting-to-dom-mutations:nodes-are-inserted-2>插入了</a> <code id=reacting-to-dom-mutations:the-source-element><a href=embedded-content.html#the-source-element>source</a></code> 元素作为前驱节点。<li><p>该元素的父元素是 <code id=reacting-to-dom-mutations:the-picture-element-3><a href=embedded-content.html#the-picture-element>picture</a></code> 元素且
   是前驱节点的 <code id=reacting-to-dom-mutations:the-source-element-2><a href=embedded-content.html#the-source-element>source</a></code> 元素被 <a href=infrastructure.html#nodes-are-removed id=reacting-to-dom-mutations:nodes-are-removed-2>移除</a>。<li><p>该元素的父元素是 <code id=reacting-to-dom-mutations:the-picture-element-4><a href=embedded-content.html#the-picture-element>picture</a></code> 元素且
   是前驱节点的 <code id=reacting-to-dom-mutations:the-source-element-3><a href=embedded-content.html#the-source-element>source</a></code> 元素的 <code id=reacting-to-dom-mutations:attr-source-srcset><a href=embedded-content.html#attr-source-srcset>srcset</a></code>, <code id=reacting-to-dom-mutations:attr-source-sizes><a href=embedded-content.html#attr-source-sizes>sizes</a></code>, <code id=reacting-to-dom-mutations:attr-source-media><a href=embedded-content.html#attr-source-media>media</a></code> 或 <code id=reacting-to-dom-mutations:attr-source-type><a href=embedded-content.html#attr-source-type>type</a></code> 属性被设置、改变和移除。<li><p>执行了该元素的 <a href=https://dom.spec.whatwg.org/#concept-node-adopt-ext id=reacting-to-dom-mutations:concept-node-adopt-ext data-x-internal=concept-node-adopt-ext>adopting steps</a>。</ul>



  <h6 id=the-list-of-available-images><span class=secno>4.8.4.3.3</span> The list of available images<a href=#the-list-of-available-images class=self-link></a></h6>
<div data-zh-date="" data-en-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" class=translate-info data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/embedded-content/images/processing-model/the-list-of-available-images.zh.html?filename=the-list-of-available-images.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fembedded-content%2Fimages%2Fprocessing-model%2Fthe-list-of-available-images.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/embedded-content/images/processing-model/the-list-of-available-images.en.html></div>

  <p>Each <code id=the-list-of-available-images:document><a href=dom.html#document>Document</a></code> object must have a <dfn id=list-of-available-images>list of available images</dfn>. Each image
  in this list is identified by a tuple consisting of an <a id=the-list-of-available-images:absolute-url href=https://url.spec.whatwg.org/#syntax-url-absolute data-x-internal=absolute-url>absolute URL</a>, a <a id=the-list-of-available-images:cors-settings-attribute href=infrastructure.html#cors-settings-attribute>CORS
  settings attribute</a> mode, and, if the mode is not <a href=infrastructure.html#attr-crossorigin-none id=the-list-of-available-images:attr-crossorigin-none>No
  CORS</a>, an <a id=the-list-of-available-images:concept-origin href=origin.html#concept-origin>origin</a>.
  Each image furthermore has an <dfn id=ignore-higher-layer-caching>ignore higher-layer caching</dfn> flag.
  User agents may copy entries from one <code id=the-list-of-available-images:document-2><a href=dom.html#document>Document</a></code>
  object's <a href=#list-of-available-images id=the-list-of-available-images:list-of-available-images>list of available images</a> to another at any time (e.g. when the
  <code id=the-list-of-available-images:document-3><a href=dom.html#document>Document</a></code> is created, user agents can add to it all the images that are loaded in
  other <code id=the-list-of-available-images:document-4><a href=dom.html#document>Document</a></code>s), but must not change the keys of entries copied in this way when
  doing so, and must unset the <a href=#ignore-higher-layer-caching id=the-list-of-available-images:ignore-higher-layer-caching>ignore higher-layer caching</a> flag for the copied entry.
  User agents may also remove images from such lists at any time (e.g. to save
  memory).
  User agents must remove entries in the <a href=#list-of-available-images id=the-list-of-available-images:list-of-available-images-2>list of available images</a> as appropriate
  given higher-layer caching semantics for the resource (e.g. the HTTP `<code id=the-list-of-available-images:http-cache-control><a data-x-internal=http-cache-control href=https://tools.ietf.org/html/rfc7234#section-5.2>Cache-Control</a></code>` response header) when the <a href=#ignore-higher-layer-caching id=the-list-of-available-images:ignore-higher-layer-caching-2>ignore
  higher-layer caching</a> flag is unset.</p>

  <p class=note>The <a href=#list-of-available-images id=the-list-of-available-images:list-of-available-images-3>list of available images</a> is intended to enable synchronous
  switching when changing the <code id=the-list-of-available-images:attr-img-src><a href=embedded-content.html#attr-img-src>src</a></code> attribute to a URL that has
  previously been loaded, and to avoid re-downloading images in the same document even when they
  don't allow caching per HTTP. It is not used to avoid re-downloading the same image while the
  previous image is still loading.</p>

  <p class=note>The user agent can also store the image data separately from the <a href=#list-of-available-images id=the-list-of-available-images:list-of-available-images-4>list of available images</a>.</p>

  <p class=example>For example, if a resource has the HTTP response header
  `<code>Cache-Control: must-revalidate</code>`, and its <a href=#ignore-higher-layer-caching id=the-list-of-available-images:ignore-higher-layer-caching-3>ignore higher-layer
  caching</a> flag is unset, the user agent would remove it from the <a href=#list-of-available-images id=the-list-of-available-images:list-of-available-images-5>list of available
  images</a> but could keep the image data separately, and use that if the server responds with a
  <code>304 Not Modified</code> status.</p>


  <h6 id=decoding-images><span class=secno>4.8.4.3.4</span> Decoding images<a href=#decoding-images class=self-link></a></h6>
<div data-zh-date="" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/embedded-content/images/processing-model/decoding-images.zh.html?filename=decoding-images.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fembedded-content%2Fimages%2Fprocessing-model%2Fdecoding-images.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/embedded-content/images/processing-model/decoding-images.en.html></div>

  <p>Image data is usually encoded in order to reduce file size. This means that in order for the
  user agent to present the image to the screen, the data needs to be decoded.
  <dfn id=img-decoding-process>Decoding</dfn> is the process which converts an image's media
  data into a bitmap form, suitable for presentation to the screen. Note that this process can be
  slow relative to other processes involved in presenting content. Thus, the user agent can choose
  when to perform decoding, in order to create the best user experience.</p>

  <p>Image decoding is said to be synchronous if it prevents presentation of other content until it
  is finished. Typically, this has an effect of atomically presenting the image and any other
  content at the same time. However, this presentation is delayed by the amount of time it takes to
  perform the decode.</p>

  <p>Image decoding is said to be asynchronous if it does not prevent presentation of other content.
  This has an effect of presenting non-image content faster. However, the image content is missing
  on screen until the decode finishes. Once the decode is finished, the screen is updated with the
  image.</p>

  <p>In both synchronous and asynchronous decoding modes, the final content is presented to screen
  after the same amount of time has elapsed. The main difference is whether the user agent presents
  non-image content ahead of presenting the final content.</p>

  <p>In order to aid the user agent in deciding whether to perform synchronous or asynchronous
  decode, the <code id=decoding-images:attr-img-decoding><a href=embedded-content.html#attr-img-decoding>decoding</a></code> attribute can be set on
  <code id=decoding-images:the-img-element><a href=embedded-content.html#the-img-element>img</a></code> elements. The possible values of the <code id=decoding-images:attr-img-decoding-2><a href=embedded-content.html#attr-img-decoding>decoding</a></code> attribute are the following <dfn id=image-decoding-hint>image decoding
  hint</dfn> keywords:</p>

  <table><thead><tr><th>Keyword
     <th>State
     <th>Description
   <tbody><tr><td><dfn id=attr-img-decoding-sync><code>sync</code></dfn>
     <td><dfn id=attr-img-decoding-sync-state>Sync</dfn>
     <td>Indicates a preference to <a href=#img-decoding-process id=decoding-images:img-decoding-process>decode</a> this image
     synchronously for atomic presentation with other content.
    <tr><td><dfn id=attr-img-decoding-async><code>async</code></dfn>
     <td><dfn id=attr-img-decoding-async-state>Async</dfn>
     <td>Indicates a preference to <a href=#img-decoding-process id=decoding-images:img-decoding-process-2>decode</a> this image
     asynchronously to avoid delaying presentation of other content.
    <tr><td><dfn id=attr-img-decoding-auto><code>auto</code></dfn>
     <td><dfn id=attr-img-decoding-auto-state>Auto</dfn>
     <td>Indicates no preference in decoding mode (the default).
  </table>

  <p>When <a href=#img-decoding-process id=decoding-images:img-decoding-process-3>decoding</a> an image, the user agent should
  respect the preference indicated by the <code id=decoding-images:attr-img-decoding-3><a href=embedded-content.html#attr-img-decoding>decoding</a></code>
  attribute's state. If the state indicated is <a href=#attr-img-decoding-auto-state id=decoding-images:attr-img-decoding-auto-state>auto</a>, then the user agent is free to choose any
  decoding behavior.</p>

  <p class=note>It is also possible to control the decoding behavior using the <code id=decoding-images:dom-img-decode><a href=embedded-content.html#dom-img-decode>decode()</a></code> method. Since the <code id=decoding-images:dom-img-decode-2><a href=embedded-content.html#dom-img-decode>decode()</a></code> method performs <a href=#img-decoding-process id=decoding-images:img-decoding-process-4>decoding</a> independently from the process responsible for
  presenting content to screen, it is unaffected by the <code id=decoding-images:attr-img-decoding-4><a href=embedded-content.html#attr-img-decoding>decoding</a></code> attribute.</p>


  <h6 id=updating-the-image-data><span class=secno>4.8.4.3.5</span> Updating the image data<a href=#updating-the-image-data class=self-link></a></h6>
<div data-zh-date="" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/embedded-content/images/processing-model/updating-the-image-data.zh.html?filename=updating-the-image-data.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fembedded-content%2Fimages%2Fprocessing-model%2Fupdating-the-image-data.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/embedded-content/images/processing-model/updating-the-image-data.en.html></div>

  <p class=note>This algorithm cannot be called from steps running <a id=updating-the-image-data:in-parallel href=infrastructure.html#in-parallel>in parallel</a>. If
  a user agent needs to call this algorithm from steps running <a id=updating-the-image-data:in-parallel-2 href=infrastructure.html#in-parallel>in parallel</a>, it needs to
  <a href=webappapis.html#queue-a-task id=updating-the-image-data:queue-a-task>queue</a> a task to do so.</p>

  <p>When the user agent is to <dfn id=update-the-image-data>update the image data</dfn> of an <code id=updating-the-image-data:the-img-element><a href=embedded-content.html#the-img-element>img</a></code> element,
  optionally with the <i>restart animations</i> flag set,
  it must run the following steps:</p>

  <ol><li>
    <p>If the element's <a id=updating-the-image-data:node-document href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a> is not the <a id=updating-the-image-data:active-document href=browsers.html#active-document>active document</a>,
    then:</p>

    <ol><li><p>Continue running this algorithm <a id=updating-the-image-data:in-parallel-3 href=infrastructure.html#in-parallel>in parallel</a>.<li><p>Wait until the element's <a id=updating-the-image-data:node-document-2 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a> is the <a id=updating-the-image-data:active-document-2 href=browsers.html#active-document>active document</a>.<li><p>If another instance of this algorithm for this <code id=updating-the-image-data:the-img-element-2><a href=embedded-content.html#the-img-element>img</a></code> element was started after this instance
     (even if it aborted and is no longer running), then return.<li><p><a id=updating-the-image-data:queue-a-microtask href=webappapis.html#queue-a-microtask>Queue a microtask</a> to continue this algorithm.</ol>
   <li><p>If the user agent cannot support images, or its support for images has been disabled, then
   <a href=#abort-the-image-request id=updating-the-image-data:abort-the-image-request>abort the image request</a> for the <a href=#current-request id=updating-the-image-data:current-request>current request</a> and the <a href=#pending-request id=updating-the-image-data:pending-request>pending
   request</a>, set <a href=#current-request id=updating-the-image-data:current-request-2>current request</a>'s <a href=#img-req-state id=updating-the-image-data:img-req-state>state</a> to
   <a href=#img-none id=updating-the-image-data:img-none>unavailable</a>, set <a href=#pending-request id=updating-the-image-data:pending-request-2>pending request</a> to null, and
   return.<li><p>Let <var>selected source</var> be null and <var>selected pixel density</var> be undefined.

   <li><p>If the element does not <a href=#use-srcset-or-picture id=updating-the-image-data:use-srcset-or-picture>use <code>srcset</code> or <code>picture</code></a> and
   it has a <code id=updating-the-image-data:attr-img-src><a href=embedded-content.html#attr-img-src>src</a></code> attribute specified whose value is not the empty
   string, then set <var>selected source</var> to the value of the element's <code id=updating-the-image-data:attr-img-src-2><a href=embedded-content.html#attr-img-src>src</a></code> attribute and set <var>selected pixel density</var> to
   1.0.<li><p>Set the element's <a href=#last-selected-source id=updating-the-image-data:last-selected-source>last selected source</a> to <var>selected
   source</var>.<li>
    <p>If <var>selected source</var> is not null, then:</p>

    <ol><li><p><a href=infrastructure.html#parse-a-url id=updating-the-image-data:parse-a-url>Parse</a> <var>selected source</var>, relative to the
     element's <a id=updating-the-image-data:node-document-3 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a>. If that is not successful, then abort this inner set of
     steps. Otherwise, let <var>urlString</var> be the <a id=updating-the-image-data:resulting-url-string href=infrastructure.html#resulting-url-string>resulting URL string</a>.<li><p>Let <var>key</var> be a tuple consisting of <var>urlString</var>, the <code id=updating-the-image-data:the-img-element-3><a href=embedded-content.html#the-img-element>img</a></code>
     element's <code id=updating-the-image-data:attr-img-crossorigin><a href=embedded-content.html#attr-img-crossorigin>crossorigin</a></code> attribute's mode, and, if that
     mode is not <a href=infrastructure.html#attr-crossorigin-none id=updating-the-image-data:attr-crossorigin-none>No CORS</a>, the <a id=updating-the-image-data:node-document-4 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node
     document</a>'s <a id=updating-the-image-data:concept-origin href=origin.html#concept-origin>origin</a>.<li>
      <p>If the <a href=#list-of-available-images id=updating-the-image-data:list-of-available-images>list of available images</a> contains an entry for <var>key</var>,
      then:</p>

      <ol><li><p>Set the <a href=#ignore-higher-layer-caching id=updating-the-image-data:ignore-higher-layer-caching>ignore higher-layer caching</a> flag for that entry.<li><p><a href=#abort-the-image-request id=updating-the-image-data:abort-the-image-request-2>Abort the image request</a> for the <a href=#current-request id=updating-the-image-data:current-request-3>current request</a> and the
       <a href=#pending-request id=updating-the-image-data:pending-request-3>pending request</a>.<li><p>Set <a href=#pending-request id=updating-the-image-data:pending-request-4>pending request</a> to null.<li><p>Let <a href=#current-request id=updating-the-image-data:current-request-4>current request</a> be a new <a href=#image-request id=updating-the-image-data:image-request>image request</a> whose <a href=#img-req-data id=updating-the-image-data:img-req-data>image data</a> is that of the entry and whose <a href=#img-req-state id=updating-the-image-data:img-req-state-2>state</a> is <a href=#img-all id=updating-the-image-data:img-all>completely
       available</a>.<li><p>Update the presentation of the image appropriately.<li><p>Set <a href=#current-request id=updating-the-image-data:current-request-5>current request</a>'s <a href=#current-pixel-density id=updating-the-image-data:current-pixel-density>current pixel density</a> to <var>selected
       pixel density</var>.<li>
        <p><a id=updating-the-image-data:queue-an-element-task href=webappapis.html#queue-an-element-task>Queue an element task</a> on the <a id=updating-the-image-data:dom-manipulation-task-source href=webappapis.html#dom-manipulation-task-source>DOM manipulation task source</a>
        given the <code id=updating-the-image-data:the-img-element-4><a href=embedded-content.html#the-img-element>img</a></code> element and following steps:</p>

        <ol><li><p>If <i>restart animation</i> is set, then <a id=updating-the-image-data:restart-the-animation href=rendering.html#restart-the-animation>restart the
         animation</a>.<li><p>Set <a href=#current-request id=updating-the-image-data:current-request-6>current request</a>'s <a href=#img-req-url id=updating-the-image-data:img-req-url>current URL</a> to
         <var>urlString</var>.<li><p><a href=https://dom.spec.whatwg.org/#concept-event-fire id=updating-the-image-data:concept-event-fire data-x-internal=concept-event-fire>Fire an event</a> named <code id=updating-the-image-data:event-load><a href=indices.html#event-load>load</a></code> at the <code id=updating-the-image-data:the-img-element-5><a href=embedded-content.html#the-img-element>img</a></code> element.</ol>
       <li><p>Abort the <a href=#update-the-image-data id=updating-the-image-data:update-the-image-data>update the image data</a> algorithm.</ol>
     </ol>
   <li><p><a id=updating-the-image-data:queue-a-microtask-2 href=webappapis.html#queue-a-microtask>Queue a microtask</a> to perform the rest of this algorithm, allowing the <a href=webappapis.html#concept-task id=updating-the-image-data:concept-task>task</a> that invoked this algorithm to continue.<li>
    <p>If another instance of this algorithm for this <code id=updating-the-image-data:the-img-element-6><a href=embedded-content.html#the-img-element>img</a></code> element was started after
    this instance (even if it aborted and is no longer running), then return.</p>

    <p class=note>Only the last instance takes effect, to avoid multiple requests when, for
    example, the <code id=updating-the-image-data:attr-img-src-3><a href=embedded-content.html#attr-img-src>src</a></code>, <code id=updating-the-image-data:attr-img-srcset><a href=embedded-content.html#attr-img-srcset>srcset</a></code>,
    and <code id=updating-the-image-data:attr-img-crossorigin-2><a href=embedded-content.html#attr-img-crossorigin>crossorigin</a></code> attributes are all set in
    succession.</p>
   <li><p>Let <var>selected source</var> and <var>selected pixel density</var> be the URL and pixel
   density that results from <a href=#select-an-image-source id=updating-the-image-data:select-an-image-source>selecting an image source</a>,
   respectively.<li>
    <p>If <var>selected source</var> is null, then:</p>

    <ol><li><p>Set the <a href=#current-request id=updating-the-image-data:current-request-7>current request</a>'s <a href=#img-req-state id=updating-the-image-data:img-req-state-3>state</a> to
     <a href=#img-error id=updating-the-image-data:img-error>broken</a>, <a href=#abort-the-image-request id=updating-the-image-data:abort-the-image-request-3>abort the image request</a> for the
     <a href=#current-request id=updating-the-image-data:current-request-8>current request</a> and the <a href=#pending-request id=updating-the-image-data:pending-request-5>pending request</a>, and set <a href=#pending-request id=updating-the-image-data:pending-request-6>pending
     request</a> to null.<li>
      <p><a id=updating-the-image-data:queue-an-element-task-2 href=webappapis.html#queue-an-element-task>Queue an element task</a> on the <a id=updating-the-image-data:dom-manipulation-task-source-2 href=webappapis.html#dom-manipulation-task-source>DOM manipulation task source</a> given
      the <code id=updating-the-image-data:the-img-element-7><a href=embedded-content.html#the-img-element>img</a></code> element and the following steps:</p>

      <ol><li><p>Change the <a href=#current-request id=updating-the-image-data:current-request-9>current request</a>'s <a href=#img-req-url id=updating-the-image-data:img-req-url-2>current
       URL</a> to the empty string.<li><p>If the element has a <code id=updating-the-image-data:attr-img-src-4><a href=embedded-content.html#attr-img-src>src</a></code> attribute or it <a href=#use-srcset-or-picture id=updating-the-image-data:use-srcset-or-picture-2>uses <code>srcset</code> or <code>picture</code></a>, <a href=https://dom.spec.whatwg.org/#concept-event-fire id=updating-the-image-data:concept-event-fire-2 data-x-internal=concept-event-fire>fire an event</a> named <code id=updating-the-image-data:event-error><a href=indices.html#event-error>error</a></code> at the <code id=updating-the-image-data:the-img-element-8><a href=embedded-content.html#the-img-element>img</a></code> element.</ol>
     <li><p>Return.</ol>
   <li>
    <p><a href=infrastructure.html#parse-a-url id=updating-the-image-data:parse-a-url-2>Parse</a> <var>selected source</var>, relative to the element's
    <a id=updating-the-image-data:node-document-5 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a>, and let <var>urlString</var> be the <a id=updating-the-image-data:resulting-url-string-2 href=infrastructure.html#resulting-url-string>resulting URL
    string</a>. If that is not successful, then:</p>

    <ol><li><p><a href=#abort-the-image-request id=updating-the-image-data:abort-the-image-request-4>Abort the image request</a> for the <a href=#current-request id=updating-the-image-data:current-request-10>current request</a> and the
     <a href=#pending-request id=updating-the-image-data:pending-request-7>pending request</a>.<li><p>Set the <a href=#current-request id=updating-the-image-data:current-request-11>current request</a>'s <a href=#img-req-state id=updating-the-image-data:img-req-state-4>state</a> to
     <a href=#img-error id=updating-the-image-data:img-error-2>broken</a>.<li><p>Set <a href=#pending-request id=updating-the-image-data:pending-request-8>pending request</a> to null.<li>
      <p><a id=updating-the-image-data:queue-an-element-task-3 href=webappapis.html#queue-an-element-task>Queue an element task</a> on the <a id=updating-the-image-data:dom-manipulation-task-source-3 href=webappapis.html#dom-manipulation-task-source>DOM manipulation task
      source</a> given the <code id=updating-the-image-data:the-img-element-9><a href=embedded-content.html#the-img-element>img</a></code> element and the following steps:</p>

      <ol><li><p>Change the <a href=#current-request id=updating-the-image-data:current-request-12>current request</a>'s <a href=#img-req-url id=updating-the-image-data:img-req-url-3>current
       URL</a> to <var>selected source</var>.<li><p><a href=https://dom.spec.whatwg.org/#concept-event-fire id=updating-the-image-data:concept-event-fire-3 data-x-internal=concept-event-fire>Fire an event</a> named <code id=updating-the-image-data:event-error-2><a href=indices.html#event-error>error</a></code> at the <code id=updating-the-image-data:the-img-element-10><a href=embedded-content.html#the-img-element>img</a></code> element.</ol>
     <li><p>Return.</ol>
   <li><p>If the <a href=#pending-request id=updating-the-image-data:pending-request-9>pending request</a> is not null and <var>urlString</var> is the same as
   the <a href=#pending-request id=updating-the-image-data:pending-request-10>pending request</a>'s <a href=#img-req-url id=updating-the-image-data:img-req-url-4>current URL</a>, then
   return.<li><p>If <var>urlString</var> is the same as the <a href=#current-request id=updating-the-image-data:current-request-13>current request</a>'s <a href=#img-req-url id=updating-the-image-data:img-req-url-5>current URL</a> and <a href=#current-request id=updating-the-image-data:current-request-14>current request</a>'s <a href=#img-req-state id=updating-the-image-data:img-req-state-5>state</a> is <a href=#img-inc id=updating-the-image-data:img-inc>partially available</a>, then
   <a href=#abort-the-image-request id=updating-the-image-data:abort-the-image-request-5>abort the image request</a> for the <a href=#pending-request id=updating-the-image-data:pending-request-11>pending request</a>, <a id=updating-the-image-data:queue-an-element-task-4 href=webappapis.html#queue-an-element-task>queue an element
   task</a> on the <a id=updating-the-image-data:dom-manipulation-task-source-4 href=webappapis.html#dom-manipulation-task-source>DOM manipulation task source</a> given the <code id=updating-the-image-data:the-img-element-11><a href=embedded-content.html#the-img-element>img</a></code> element
   to <a id=updating-the-image-data:restart-the-animation-2 href=rendering.html#restart-the-animation>restart the animation</a> if <i>restart animation</i> is set, and return.<li><p>If the <a href=#pending-request id=updating-the-image-data:pending-request-12>pending request</a> is not null, then <a href=#abort-the-image-request id=updating-the-image-data:abort-the-image-request-6>abort the image request</a>
   for the <a href=#pending-request id=updating-the-image-data:pending-request-13>pending request</a>.<li><p>Set <var>image request</var> to a new <a href=#image-request id=updating-the-image-data:image-request-2>image request</a> whose <a href=#img-req-url id=updating-the-image-data:img-req-url-6>current URL</a> is <var>urlString</var>.<li><p>If <a href=#current-request id=updating-the-image-data:current-request-15>current request</a>'s <a href=#img-req-state id=updating-the-image-data:img-req-state-6>state</a> is <a href=#img-none id=updating-the-image-data:img-none-2>unavailable</a> or <a href=#img-error id=updating-the-image-data:img-error-3>broken</a>, then set the
   <a href=#current-request id=updating-the-image-data:current-request-16>current request</a> to <var>image request</var>. Otherwise, set the <a href=#pending-request id=updating-the-image-data:pending-request-14>pending
   request</a> to <var>image request</var>.<li><p>Let <var>request</var> be the result of <a href=infrastructure.html#create-a-potential-cors-request id=updating-the-image-data:create-a-potential-cors-request>creating a potential-CORS request</a> given <var>urlString</var>, "<code>image</code>", and the current state of the element's <code id=updating-the-image-data:attr-img-crossorigin-3><a href=embedded-content.html#attr-img-crossorigin>crossorigin</a></code> content attribute.<li><p>Set <var>request</var>'s <a href=https://fetch.spec.whatwg.org/#concept-request-client id=updating-the-image-data:concept-request-client data-x-internal=concept-request-client>client</a> to the
   element's <a id=updating-the-image-data:node-document-6 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a>'s <a id=updating-the-image-data:relevant-settings-object href=webappapis.html#relevant-settings-object>relevant settings object</a>.<li><p>If the element <a href=#use-srcset-or-picture id=updating-the-image-data:use-srcset-or-picture-3>uses <code>srcset</code> or
   <code>picture</code></a>, set <var>request</var>'s <a href=https://fetch.spec.whatwg.org/#concept-request-initiator id=updating-the-image-data:concept-request-initiator data-x-internal=concept-request-initiator>initiator</a> to "<code>imageset</code>".<li><p>Set <var>request</var>'s <a href=https://fetch.spec.whatwg.org/#concept-request-referrer-policy id=updating-the-image-data:concept-request-referrer-policy data-x-internal=concept-request-referrer-policy>referrer
   policy</a> to the current state of the element's <code id=updating-the-image-data:attr-img-referrerpolicy><a href=embedded-content.html#attr-img-referrerpolicy>referrerpolicy</a></code> attribute.<li><p>Let <var>delay load event</var> be true if the <code id=updating-the-image-data:the-img-element-12><a href=embedded-content.html#the-img-element>img</a></code>'s <a id=updating-the-image-data:lazy-loading-attribute href=infrastructure.html#lazy-loading-attribute>lazy loading
   attribute</a> is in the <a href=infrastructure.html#attr-loading-eager-state id=updating-the-image-data:attr-loading-eager-state>Eager</a> state, or if
   <a href=webappapis.html#concept-n-noscript id=updating-the-image-data:concept-n-noscript>scripting is disabled</a> for the <code id=updating-the-image-data:the-img-element-13><a href=embedded-content.html#the-img-element>img</a></code>, and
   false otherwise.<li>
    <p>If the <a id=updating-the-image-data:will-lazy-load-element-steps href=infrastructure.html#will-lazy-load-element-steps>will lazy load element steps</a> given the <code id=updating-the-image-data:the-img-element-14><a href=embedded-content.html#the-img-element>img</a></code> return true,
    then:</p>

    <ol><li><p>Set the <code id=updating-the-image-data:the-img-element-15><a href=embedded-content.html#the-img-element>img</a></code>'s <a id=updating-the-image-data:lazy-load-resumption-steps href=infrastructure.html#lazy-load-resumption-steps>lazy load resumption steps</a> to the rest of this
     algorithm starting with the step labeled <i>fetch the image</i>.<li><p><a id=updating-the-image-data:start-intersection-observing-a-lazy-loading-element href=infrastructure.html#start-intersection-observing-a-lazy-loading-element>Start intersection-observing a lazy loading element</a> for the
     <code id=updating-the-image-data:the-img-element-16><a href=embedded-content.html#the-img-element>img</a></code> element.<li><p>Return.</ol>
   <li>
    
    <p><i>Fetch the image</i>: <a href=https://fetch.spec.whatwg.org/#concept-fetch id=updating-the-image-data:concept-fetch data-x-internal=concept-fetch>Fetch</a> <var>request</var>. Let
    this instance of the <a href=https://fetch.spec.whatwg.org/#concept-fetch id=updating-the-image-data:concept-fetch-2 data-x-internal=concept-fetch>fetching</a> algorithm be associated with
    <var>image request</var>.
    </p>

    <p>The resource obtained in this fashion, if any, is <var>image request</var>'s <a href=#img-req-data id=updating-the-image-data:img-req-data-2>image data</a>. It can be either <a id=updating-the-image-data:cors-same-origin href=infrastructure.html#cors-same-origin>CORS-same-origin</a> or
    <a id=updating-the-image-data:cors-cross-origin href=infrastructure.html#cors-cross-origin>CORS-cross-origin</a>; this affects the <a id=updating-the-image-data:concept-origin-2 href=origin.html#concept-origin>origin</a> of the image itself (e.g.
    when used on a <code id=updating-the-image-data:the-canvas-element><a href=canvas.html#the-canvas-element>canvas</a></code>).</p>

    
    <p>When <var>delay load event</var> is true, fetching the image must <a id=updating-the-image-data:delay-the-load-event href=parsing.html#delay-the-load-event>delay the load
    event</a> of the element's <a id=updating-the-image-data:node-document-7 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a> until the <a href=webappapis.html#concept-task id=updating-the-image-data:concept-task-2>task</a> that is <a href=webappapis.html#queue-a-task id=updating-the-image-data:queue-a-task-2>queued</a> by the
    <a id=updating-the-image-data:networking-task-source href=webappapis.html#networking-task-source>networking task source</a> once the resource has been fetched (<a href=#img-load>defined below</a>) has been run.
    </p>

    <p class=warning>This, unfortunately, can be used to perform a rudimentary port scan of the
    user's local network (especially in conjunction with scripting, though scripting isn't actually
    necessary to carry out such an attack). User agents may implement <a href=origin.html#concept-origin id=updating-the-image-data:concept-origin-3>cross-origin</a> access control policies that are stricter than those
    described above to mitigate this attack, but unfortunately such policies are typically not
    compatible with existing web content.</p>
   <li><p>Continue the remaining steps <a id=updating-the-image-data:in-parallel-4 href=infrastructure.html#in-parallel>in parallel</a>, but without missing any data from
   fetching.<li>
    <p>As soon as possible, jump to the first applicable entry from the following list:</p>

    <dl class=switch><dt>If the resource type is <code id=updating-the-image-data:multipart/x-mixed-replace><a href=iana.html#multipart/x-mixed-replace>multipart/x-mixed-replace</a></code><dd>
      <p>The next <a href=webappapis.html#concept-task id=updating-the-image-data:concept-task-3>task</a> that is <a href=webappapis.html#queue-a-task id=updating-the-image-data:queue-a-task-3>queued</a> by the <a id=updating-the-image-data:networking-task-source-2 href=webappapis.html#networking-task-source>networking task source</a> while the image is being
      fetched must run the following steps:</p>

      <ol><li>
        <p>If <var>image request</var> is the <a href=#pending-request id=updating-the-image-data:pending-request-15>pending request</a>
        and at least one body part has been completely decoded,
        <a href=#abort-the-image-request id=updating-the-image-data:abort-the-image-request-7>abort the image request</a> for the <a href=#current-request id=updating-the-image-data:current-request-17>current request</a>,
        <a href=#upgrade-the-pending-request-to-the-current-request id=updating-the-image-data:upgrade-the-pending-request-to-the-current-request>upgrade the pending request to the current request</a>.</p>
       <li><p>Otherwise, if <var>image request</var> is the <a href=#pending-request id=updating-the-image-data:pending-request-16>pending request</a> and the
       user agent is able to determine that <var>image request</var>'s image is corrupted in some
       fatal way such that the image dimensions cannot be obtained, <a href=#abort-the-image-request id=updating-the-image-data:abort-the-image-request-8>abort the image
       request</a> for the <a href=#current-request id=updating-the-image-data:current-request-18>current request</a>, <a href=#upgrade-the-pending-request-to-the-current-request id=updating-the-image-data:upgrade-the-pending-request-to-the-current-request-2>upgrade the pending request to the
       current request</a>, and set the <a href=#current-request id=updating-the-image-data:current-request-19>current request</a>'s <a href=#img-req-state id=updating-the-image-data:img-req-state-7>state</a> to <a href=#img-error id=updating-the-image-data:img-error-4>broken</a>.<li><p>Otherwise, if <var>image request</var> is the <a href=#current-request id=updating-the-image-data:current-request-20>current request</a>, its <a href=#img-req-state id=updating-the-image-data:img-req-state-8>state</a> is <a href=#img-none id=updating-the-image-data:img-none-3>unavailable</a>, and the
       user agent is able to determine <var>image request</var>'s image's width and height, set the
       <a href=#current-request id=updating-the-image-data:current-request-21>current request</a>'s <a href=#img-req-state id=updating-the-image-data:img-req-state-9>state</a> to <a href=#img-inc id=updating-the-image-data:img-inc-2>partially available</a>.<li><p>Otherwise, if <var>image request</var> is the <a href=#current-request id=updating-the-image-data:current-request-22>current request</a>, its <a href=#img-req-state id=updating-the-image-data:img-req-state-10>state</a> is <a href=#img-none id=updating-the-image-data:img-none-4>unavailable</a>, and the
       user agent is able to determine that <var>image request</var>'s image is corrupted in some
       fatal way such that the image dimensions cannot be obtained, set the <a href=#current-request id=updating-the-image-data:current-request-23>current
       request</a>'s <a href=#img-req-state id=updating-the-image-data:img-req-state-11>state</a> to <a href=#img-error id=updating-the-image-data:img-error-5>broken</a>.
       </p>
       </ol>

      <p>Each <a href=webappapis.html#concept-task id=updating-the-image-data:concept-task-4>task</a> that is <a href=webappapis.html#queue-a-task id=updating-the-image-data:queue-a-task-4>queued</a> by the <a id=updating-the-image-data:networking-task-source-3 href=webappapis.html#networking-task-source>networking task source</a> while the image is being
      fetched must update the presentation of the image, but as each new body part comes in, it must
      replace the previous image. Once one body part has been completely decoded, the user agent
      must set the <code id=updating-the-image-data:the-img-element-17><a href=embedded-content.html#the-img-element>img</a></code> element's <a href=#current-request id=updating-the-image-data:current-request-24>current request</a>'s <a href=#img-req-state id=updating-the-image-data:img-req-state-12>state</a> to <a href=#img-all id=updating-the-image-data:img-all-2>completely available</a> and
      <a id=updating-the-image-data:queue-an-element-task-5 href=webappapis.html#queue-an-element-task>queue an element task</a> on the <a id=updating-the-image-data:dom-manipulation-task-source-5 href=webappapis.html#dom-manipulation-task-source>DOM manipulation task source</a> given the
      <code id=updating-the-image-data:the-img-element-18><a href=embedded-content.html#the-img-element>img</a></code> element to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=updating-the-image-data:concept-event-fire-4 data-x-internal=concept-event-fire>fire an event</a> named <code id=updating-the-image-data:event-load-2><a href=indices.html#event-load>load</a></code> at the <code id=updating-the-image-data:the-img-element-19><a href=embedded-content.html#the-img-element>img</a></code> element.</p>
      
     <dt>If the resource type and data corresponds to a supported image format, <a href=#img-determine-type>as described below</a><dd>
      <p>The next <a href=webappapis.html#concept-task id=updating-the-image-data:concept-task-5>task</a> that is <a href=webappapis.html#queue-a-task id=updating-the-image-data:queue-a-task-5>queued</a> by the <a id=updating-the-image-data:networking-task-source-4 href=webappapis.html#networking-task-source>networking task source</a> while the image is being
      fetched must run the following steps:</p>

      <ol><li><p>If the user agent is able to determine <var>image request</var>'s image's width and
       height, and <var>image request</var> is <a href=#pending-request id=updating-the-image-data:pending-request-17>pending request</a>, set <var>image
       request</var>'s <a href=#img-req-state id=updating-the-image-data:img-req-state-13>state</a> to <a href=#img-inc id=updating-the-image-data:img-inc-3>partially
       available</a>.<li><p>Otherwise, if the user agent is able to determine <var>image request</var>'s image's
       width and height, and <var>image request</var> is <a href=#current-request id=updating-the-image-data:current-request-25>current request</a>, update the
       <code id=updating-the-image-data:the-img-element-20><a href=embedded-content.html#the-img-element>img</a></code> element's presentation appropriately and set <var>image request</var>'s
       <a href=#img-req-state id=updating-the-image-data:img-req-state-14>state</a> to <a href=#img-inc id=updating-the-image-data:img-inc-4>partially
       available</a>.<li><p>Otherwise, if the user agent is able to determine that <var>image request</var>'s
       image is corrupted in some fatal way such that the image dimensions cannot be obtained, and
       <var>image request</var> is <a href=#pending-request id=updating-the-image-data:pending-request-18>pending request</a>, <a href=#abort-the-image-request id=updating-the-image-data:abort-the-image-request-9>abort the image
       request</a> for the <a href=#current-request id=updating-the-image-data:current-request-26>current request</a> and the <a href=#pending-request id=updating-the-image-data:pending-request-19>pending request</a>,
       <a href=#upgrade-the-pending-request-to-the-current-request id=updating-the-image-data:upgrade-the-pending-request-to-the-current-request-3>upgrade the pending request to the current request</a>, set <a href=#current-request id=updating-the-image-data:current-request-27>current
       request</a>'s <a href=#img-req-state id=updating-the-image-data:img-req-state-15>state</a> to <a href=#img-error id=updating-the-image-data:img-error-6>broken</a>, and <a href=https://dom.spec.whatwg.org/#concept-event-fire id=updating-the-image-data:concept-event-fire-5 data-x-internal=concept-event-fire>fire an event</a>
       named <code id=updating-the-image-data:event-error-3><a href=indices.html#event-error>error</a></code> at the <code id=updating-the-image-data:the-img-element-21><a href=embedded-content.html#the-img-element>img</a></code> element.<li><p>Otherwise, if the user agent is able to determine that <var>image request</var>'s
       image is corrupted in some fatal way such that the image dimensions cannot be obtained, and
       <var>image request</var> is <a href=#current-request id=updating-the-image-data:current-request-28>current request</a>, <a href=#abort-the-image-request id=updating-the-image-data:abort-the-image-request-10>abort the image
       request</a> for <var>image request</var> and <a href=https://dom.spec.whatwg.org/#concept-event-fire id=updating-the-image-data:concept-event-fire-6 data-x-internal=concept-event-fire>fire an
       event</a> named <code id=updating-the-image-data:event-error-4><a href=indices.html#event-error>error</a></code> at the <code id=updating-the-image-data:the-img-element-22><a href=embedded-content.html#the-img-element>img</a></code>
       element.</ol>

      <p id=img-load>That <a href=webappapis.html#concept-task id=updating-the-image-data:concept-task-6>task</a>, and each subsequent <a href=webappapis.html#concept-task id=updating-the-image-data:concept-task-7>task</a>, that is <a href=webappapis.html#queue-a-task id=updating-the-image-data:queue-a-task-6>queued</a> by the
      <a id=updating-the-image-data:networking-task-source-5 href=webappapis.html#networking-task-source>networking task source</a> while the image is being fetched, if <var>image
      request</var> is the <a href=#current-request id=updating-the-image-data:current-request-29>current request</a>, must update the presentation of the image
      appropriately (e.g., if the image is a progressive JPEG, each packet can improve the
      resolution of the image).</p>

      <p>Furthermore, the last <a href=webappapis.html#concept-task id=updating-the-image-data:concept-task-8>task</a> that is <a href=webappapis.html#queue-a-task id=updating-the-image-data:queue-a-task-7>queued</a> by the <a id=updating-the-image-data:networking-task-source-6 href=webappapis.html#networking-task-source>networking task source</a> once the resource has been
      fetched must additionally run these steps:</p>

      <ol><li><p>If <var>image request</var> is the <a href=#pending-request id=updating-the-image-data:pending-request-20>pending request</a>,
       <a href=#abort-the-image-request id=updating-the-image-data:abort-the-image-request-11>abort the image request</a> for the <a href=#current-request id=updating-the-image-data:current-request-30>current request</a>,
       <a href=#upgrade-the-pending-request-to-the-current-request id=updating-the-image-data:upgrade-the-pending-request-to-the-current-request-4>upgrade the pending request to the current request</a> and
       update the <code id=updating-the-image-data:the-img-element-23><a href=embedded-content.html#the-img-element>img</a></code> element's presentation appropriately.<li><p>Set <var>image request</var> to the <a href=#img-all id=updating-the-image-data:img-all-3>completely
       available</a> state.<li><p>Add the image to the <a href=#list-of-available-images id=updating-the-image-data:list-of-available-images-2>list of available images</a> using the key <var>key</var>, with the <a href=#ignore-higher-layer-caching id=updating-the-image-data:ignore-higher-layer-caching-2>ignore higher-layer caching</a> flag set.<li><p><a href=https://dom.spec.whatwg.org/#concept-event-fire id=updating-the-image-data:concept-event-fire-7 data-x-internal=concept-event-fire>Fire an event</a> named <code id=updating-the-image-data:event-load-3><a href=indices.html#event-load>load</a></code> at the <code id=updating-the-image-data:the-img-element-24><a href=embedded-content.html#the-img-element>img</a></code> element.</ol>
     <dt>Otherwise<dd><p>The image data is not in a supported file format; the user agent must set <var>image
     request</var>'s <a href=#img-req-state id=updating-the-image-data:img-req-state-16>state</a> to <a href=#img-error id=updating-the-image-data:img-error-7>broken</a>, <a href=#abort-the-image-request id=updating-the-image-data:abort-the-image-request-12>abort the image request</a> for the <a href=#current-request id=updating-the-image-data:current-request-31>current
     request</a> and the <a href=#pending-request id=updating-the-image-data:pending-request-21>pending request</a>, <a href=#upgrade-the-pending-request-to-the-current-request id=updating-the-image-data:upgrade-the-pending-request-to-the-current-request-5>upgrade the pending request to the
     current request</a> if <var>image request</var> is the <a href=#pending-request id=updating-the-image-data:pending-request-22>pending request</a>, and
     then <a id=updating-the-image-data:queue-an-element-task-6 href=webappapis.html#queue-an-element-task>queue an element task</a> on the <a id=updating-the-image-data:dom-manipulation-task-source-6 href=webappapis.html#dom-manipulation-task-source>DOM manipulation task source</a> given
     the <code id=updating-the-image-data:the-img-element-25><a href=embedded-content.html#the-img-element>img</a></code> element to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=updating-the-image-data:concept-event-fire-8 data-x-internal=concept-event-fire>fire an event</a> named
     <code id=updating-the-image-data:event-error-5><a href=indices.html#event-error>error</a></code> at the <code id=updating-the-image-data:the-img-element-26><a href=embedded-content.html#the-img-element>img</a></code> element.</dl>
   </ol>

  <p>While a user agent is running the above algorithm for an element <var>x</var>, there must be a
  strong reference from the element's <a id=updating-the-image-data:node-document-8 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a> to the element <var>x</var>, even
  if that element is not <a id=updating-the-image-data:connected href=https://dom.spec.whatwg.org/#connected data-x-internal=connected>connected</a>.</p>

  <p>To <dfn id=abort-the-image-request>abort the image request</dfn> for an <a href=#image-request id=updating-the-image-data:image-request-3>image request</a> <var>image request</var> means to run the following steps:</p>

  <ol><li><p>Forget <var>image request</var>'s <a href=#img-req-data id=updating-the-image-data:img-req-data-3>image data</a>, if any.<li><p>Abort any instance of the <a href=https://fetch.spec.whatwg.org/#concept-fetch id=updating-the-image-data:concept-fetch-3 data-x-internal=concept-fetch>fetching</a> algorithm for
   <var>image request</var>, discarding any pending tasks generated by that algorithm.</ol>

  <p>To <dfn id=upgrade-the-pending-request-to-the-current-request>upgrade the pending request to the current request</dfn> for an <code id=updating-the-image-data:the-img-element-27><a href=embedded-content.html#the-img-element>img</a></code> element means to run the following steps:</p>

  <ol><li><p>Let the <code id=updating-the-image-data:the-img-element-28><a href=embedded-content.html#the-img-element>img</a></code> element's <a href=#current-request id=updating-the-image-data:current-request-32>current request</a> be the <a href=#pending-request id=updating-the-image-data:pending-request-23>pending request</a>.<li><p>Let the <code id=updating-the-image-data:the-img-element-29><a href=embedded-content.html#the-img-element>img</a></code> element's <a href=#pending-request id=updating-the-image-data:pending-request-24>pending request</a> be null.</ol>



  <h6 id=selecting-an-image-source><span class=secno>4.8.4.3.6</span> Selecting an image source<a href=#selecting-an-image-source class=self-link></a></h6>
<div data-zh-date="" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/embedded-content/images/processing-model/selecting-an-image-source.zh.html?filename=selecting-an-image-source.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fembedded-content%2Fimages%2Fprocessing-model%2Fselecting-an-image-source.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/embedded-content/images/processing-model/selecting-an-image-source.en.html></div>

  <p>When asked to <dfn id=select-an-image-source>select an image source</dfn> for a given <code id=selecting-an-image-source:the-img-element><a href=embedded-content.html#the-img-element>img</a></code> or
  <code id=selecting-an-image-source:link-元素><a href=semantics.html#link-元素>link</a></code> element <var>el</var>, user agents must do the following:</p>

  <ol><li><p><a href=#update-the-source-set id=selecting-an-image-source:update-the-source-set>Update the source set</a> for <var>el</var>.<li><p>If <var>el</var>'s <a href=#source-set id=selecting-an-image-source:source-set>source set</a> is empty,
   return null as the URL and undefined as the pixel density.<li><p>Otherwise, take <var>el</var>'s <a href=#source-set id=selecting-an-image-source:source-set-2>source set</a>
   and let it be <var>source set</var>.<li><p>If an entry <var>b</var> in <var>source set</var> has the same associated <a href=#pixel-density-descriptor id=selecting-an-image-source:pixel-density-descriptor>pixel
   density descriptor</a> as an earlier entry <var>a</var> in <var>source set</var>, then remove
   entry <var>b</var>. Repeat this step until none of the entries in <var>source set</var> have the
   same associated <a href=#pixel-density-descriptor id=selecting-an-image-source:pixel-density-descriptor-2>pixel density descriptor</a> as an earlier entry.<li><p>In a user agent-specific manner,
   choose one <a href=#image-source id=selecting-an-image-source:image-source>image source</a> from <var>source set</var>.
   Let this be <var>selected source</var>.<li><p>Return <var>selected source</var> and its associated pixel density.</ol>



  <h6 id=updating-the-source-set><span class=secno>4.8.4.3.7</span> Updating the source set<a href=#updating-the-source-set class=self-link></a></h6>
<div data-zh-date="" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/embedded-content/images/processing-model/updating-the-source-set.zh.html?filename=updating-the-source-set.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fembedded-content%2Fimages%2Fprocessing-model%2Fupdating-the-source-set.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/embedded-content/images/processing-model/updating-the-source-set.en.html></div>

  <p>When asked to <dfn id=update-the-source-set>update the source set</dfn> for a given <code id=updating-the-source-set:the-img-element><a href=embedded-content.html#the-img-element>img</a></code> or
  <code id=updating-the-source-set:link-元素><a href=semantics.html#link-元素>link</a></code> element <var>el</var>, user agents must do the following:</p>

  <ol><li><p>Set <var>el</var>'s <a href=#source-set id=updating-the-source-set:source-set>source set</a> to an empty <a href=#source-set id=updating-the-source-set:source-set-2>source set</a>.<li><p>Let <var>elements</var> be « <var>el</var> ».<li><p>If <var>el</var> is an <code id=updating-the-source-set:the-img-element-2><a href=embedded-content.html#the-img-element>img</a></code> element whose parent node is a
   <code id=updating-the-source-set:the-picture-element><a href=embedded-content.html#the-picture-element>picture</a></code> element, then <a href=https://infra.spec.whatwg.org/#list-remove id=updating-the-source-set:list-replace data-x-internal=list-replace>replace</a> the contents of
   <var>elements</var> with <var>el</var>'s parent node's child elements, retaining relative
   order.<li>
    <p><a href=https://infra.spec.whatwg.org/#list-iterate id=updating-the-source-set:list-iterate data-x-internal=list-iterate>For each</a> <var>child</var> in <var>elements</var>:</p>

    <ol><li>
      <p>If <var>child</var> is <var>el</var>:</p>

      <ol><li><p>Let <var>source set</var> be an empty <a href=#source-set id=updating-the-source-set:source-set-3>source set</a>.<li><p>If <var>child</var> has a <code id=updating-the-source-set:attr-img-srcset><a href=embedded-content.html#attr-img-srcset>srcset</a></code> or <code id=updating-the-source-set:attr-link-imagesrcset><a href=semantics.html#attr-link-imagesrcset>imagesrcset</a></code> attribute, <a href=#parse-a-srcset-attribute id=updating-the-source-set:parse-a-srcset-attribute>parse <var>child</var>'s srcset attribute</a> and set
       <var>source set</var> to the returned <a href=#source-set id=updating-the-source-set:source-set-4>source set</a>.<li><p><a href=#parse-a-sizes-attribute id=updating-the-source-set:parse-a-sizes-attribute>Parse <var>child</var>'s sizes
       attribute</a>, and let <var>source set</var>'s <a href=#source-size-2 id=updating-the-source-set:source-size-2>source size</a> be the returned
       value.<li><p>If <var>child</var> has a <code id=updating-the-source-set:attr-img-src><a href=embedded-content.html#attr-img-src>src</a></code> or <code id=updating-the-source-set:attr-link-href><a href=semantics.html#attr-link-href>href</a></code> attribute whose value is not the empty string and
       <var>source set</var> does not contain an <a href=#image-source id=updating-the-source-set:image-source>image source</a> with a <a href=#pixel-density-descriptor id=updating-the-source-set:pixel-density-descriptor>pixel
       density descriptor</a> value of 1, and no <a href=#image-source id=updating-the-source-set:image-source-2>image source</a> with a <a href=#width-descriptor id=updating-the-source-set:width-descriptor>width
       descriptor</a>, append <var>child</var>'s <code id=updating-the-source-set:attr-img-src-2><a href=embedded-content.html#attr-img-src>src</a></code> or <code id=updating-the-source-set:attr-link-href-2><a href=semantics.html#attr-link-href>href</a></code> attribute value to <var>source set</var>.<li><p><a href=#normalise-the-source-densities id=updating-the-source-set:normalise-the-source-densities>Normalize the source densities</a> of <var>source set</var>.<li><p>Let <var>el</var>'s <a href=#source-set id=updating-the-source-set:source-set-5>source set</a> be <var>source set</var>.<li>
        <p>Return.</p>

        <p class=note>If <var>el</var> is a <code id=updating-the-source-set:link-元素-2><a href=semantics.html#link-元素>link</a></code> element, then <var>elements</var>
        contains only <var>el</var>, so this step will be reached immediately and the rest of the
        algorithm will not run.</p>
       </ol>
     <li><p>Assert: <var>child</var> is not a <code id=updating-the-source-set:link-元素-3><a href=semantics.html#link-元素>link</a></code> element.<li><p>If <var>child</var> is not a <code id=updating-the-source-set:the-source-element><a href=embedded-content.html#the-source-element>source</a></code> element, continue to the next child.
     Otherwise, <var>child</var> is a <code id=updating-the-source-set:the-source-element-2><a href=embedded-content.html#the-source-element>source</a></code> element.<li><p>If <var>child</var> does not have a <code id=updating-the-source-set:attr-source-srcset><a href=embedded-content.html#attr-source-srcset>srcset</a></code>
     attribute, continue to the next child.<li><p><a href=#parse-a-srcset-attribute id=updating-the-source-set:parse-a-srcset-attribute-2>Parse <var>child</var>'s srcset attribute</a> and
     let the returned <a href=#source-set id=updating-the-source-set:source-set-6>source set</a> be <var>source set</var>.<li><p>If <var>source set</var> has zero <a href=#image-source id=updating-the-source-set:image-source-3>image sources</a>,
     continue to the next child.<li><p>If <var>child</var> has a <code id=updating-the-source-set:attr-source-media><a href=embedded-content.html#attr-source-media>media</a></code> attribute, and
     its value does not <a href=infrastructure.html#matches-the-environment id=updating-the-source-set:matches-the-environment>match the environment</a>,
     continue to the next child.<li><p><a href=#parse-a-sizes-attribute id=updating-the-source-set:parse-a-sizes-attribute-2>Parse <var>child</var>'s sizes attribute</a>
     with the fallback width <var>width</var>, and let <var>source set</var>'s <a href=#source-size-2 id=updating-the-source-set:source-size-2-2>source
     size</a> be the returned value.<li><p>If <var>child</var> has a <code id=updating-the-source-set:attr-source-type><a href=embedded-content.html#attr-source-type>type</a></code> attribute, and its
     value is an unknown or unsupported <a id=updating-the-source-set:mime-type href=https://mimesniff.spec.whatwg.org/#mime-type data-x-internal=mime-type>MIME type</a>, continue to the next child.<li><p><a href=#normalise-the-source-densities id=updating-the-source-set:normalise-the-source-densities-2>Normalize the source densities</a> of <var>source set</var>.<li><p>Let <var>el</var>'s <a href=#source-set id=updating-the-source-set:source-set-7>source set</a> be <var>source set</var>.<li><p>Return.</ol>
   </ol>

  <p class=note>Each <code id=updating-the-source-set:the-img-element-3><a href=embedded-content.html#the-img-element>img</a></code> element independently considers its previous sibling
  <code id=updating-the-source-set:the-source-element-3><a href=embedded-content.html#the-source-element>source</a></code> elements plus the <code id=updating-the-source-set:the-img-element-4><a href=embedded-content.html#the-img-element>img</a></code> element itself for selecting an <a href=#image-source id=updating-the-source-set:image-source-4>image
  source</a>, ignoring any other (invalid) elements, including other <code id=updating-the-source-set:the-img-element-5><a href=embedded-content.html#the-img-element>img</a></code> elements in
  the same <code id=updating-the-source-set:the-picture-element-2><a href=embedded-content.html#the-picture-element>picture</a></code> element, or <code id=updating-the-source-set:the-source-element-4><a href=embedded-content.html#the-source-element>source</a></code> elements that are following siblings
  of the relevant <code id=updating-the-source-set:the-img-element-6><a href=embedded-content.html#the-img-element>img</a></code> element.</p>



  <h6 id=parsing-a-srcset-attribute><span class=secno>4.8.4.3.8</span> Parsing a srcset attribute<a href=#parsing-a-srcset-attribute class=self-link></a></h6>
<div data-zh-date="" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/embedded-content/images/processing-model/parsing-a-srcset-attribute.zh.html?filename=parsing-a-srcset-attribute.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fembedded-content%2Fimages%2Fprocessing-model%2Fparsing-a-srcset-attribute.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/embedded-content/images/processing-model/parsing-a-srcset-attribute.en.html></div>

  <p>When asked to <dfn id=parse-a-srcset-attribute>parse a srcset attribute</dfn> from an element, parse the value of the
  element's <a href=#srcset-attribute id=parsing-a-srcset-attribute:srcset-attribute>srcset attribute</a> as follows:</p>

  <ol><li><p>Let <var>input</var> be the value passed to this algorithm.<li><p>Let <var>position</var> be a pointer into <var>input</var>,
   initially pointing at the start of the string.<li><p>Let <var>candidates</var> be an initially empty <a href=#source-set id=parsing-a-srcset-attribute:source-set>source set</a>.<li><p><i>Splitting loop</i>: <a id=parsing-a-srcset-attribute:collect-a-sequence-of-code-points href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points data-x-internal=collect-a-sequence-of-code-points>Collect a sequence of code points</a> that are <a id=parsing-a-srcset-attribute:space-characters href=https://infra.spec.whatwg.org/#ascii-whitespace data-x-internal=space-characters>ASCII
   whitespace</a> or U+002C COMMA characters from <var>input</var> given <var>position</var>. If
   any U+002C COMMA characters were collected, that is a <a href=#concept-microsyntax-parse-error id=parsing-a-srcset-attribute:concept-microsyntax-parse-error>parse error</a>.<li><p>If <var>position</var> is past the end of <var>input</var>,
   return <var>candidates</var>.<li><p><a id=parsing-a-srcset-attribute:collect-a-sequence-of-code-points-2 href=https://infra.spec.whatwg.org/#collect-a-sequence-of-code-points data-x-internal=collect-a-sequence-of-code-points>Collect a sequence of code points</a> that are not <a id=parsing-a-srcset-attribute:space-characters-2 href=https://infra.spec.whatwg.org/#ascii-whitespace data-x-internal=space-characters>ASCII whitespace</a>
   from <var>input</var> given <var>position</var>, and let that be <var>url</var>.<li><p>Let <var>descriptors</var> be a new empty list.<li>
    <p>If <var>url</var> ends with U+002C (,), then:</p>

    <ol><li><p>Remove all trailing U+002C COMMA characters from <var>url</var>.
     If this removed more than one character,
     that is a <a href=#concept-microsyntax-parse-error id=parsing-a-srcset-attribute:concept-microsyntax-parse-error-2>parse error</a>.</ol>

    <p>Otherwise:</p>

    <ol><li><p><i>Descriptor tokenizer</i>: <a id=parsing-a-srcset-attribute:skip-ascii-whitespace href=https://infra.spec.whatwg.org/#skip-ascii-whitespace data-x-internal=skip-ascii-whitespace>Skip ASCII whitespace</a> within <var>input</var>
     given <var>position</var>.<li><p>Let <var>current descriptor</var> be the empty string.<li><p>Let <var>state</var> be <i>in descriptor</i>.<li>
      <p>Let <var>c</var> be the character at <var>position</var>.
      Do the following depending on the value of <var>state</var>.
      For the purpose of this step, "EOF" is a special character representing
      that <var>position</var> is past the end of <var>input</var>.</p>

      <dl class=switch><dt><i>In descriptor</i><dd>
        <p>Do the following, depending on the value of <var>c</var>:</p>

        <dl class=switch><dt><a id=parsing-a-srcset-attribute:space-characters-3 href=https://infra.spec.whatwg.org/#ascii-whitespace data-x-internal=space-characters>ASCII whitespace</a><dd><p>If <var>current descriptor</var> is not empty,
         append <var>current descriptor</var> to <var>descriptors</var>
         and let <var>current descriptor</var> be the empty string.
         Set <var>state</var> to <i>after descriptor</i>.<dt>U+002C COMMA (,)<dd><p>Advance <var>position</var> to the next character in <var>input</var>.
         If <var>current descriptor</var> is not empty,
         append <var>current descriptor</var> to <var>descriptors</var>.
         Jump to the step labeled <i>descriptor parser</i>.<dt>U+0028 LEFT PARENTHESIS (()<dd><p>Append <var>c</var> to <var>current descriptor</var>.
         Set <var>state</var> to <i>in parens</i>.<dt>EOF<dd><p>If <var>current descriptor</var> is not empty,
         append <var>current descriptor</var> to <var>descriptors</var>.
         Jump to the step labeled <i>descriptor parser</i>.<dt>Anything else<dd><p>Append <var>c</var> to <var>current descriptor</var>.</dl>
       <dt><i>In parens</i><dd>
        <p>Do the following, depending on the value of <var>c</var>:</p>

        <dl class=switch><dt>U+0029 RIGHT PARENTHESIS ())<dd><p>Append <var>c</var> to <var>current descriptor</var>.
         Set <var>state</var> to <i>in descriptor</i>.<dt>EOF<dd><p>Append <var>current descriptor</var> to <var>descriptors</var>.
         Jump to the step labeled <i>descriptor parser</i>.<dt>Anything else<dd><p>Append <var>c</var> to <var>current descriptor</var>.</dl>
       <dt><i>After descriptor</i><dd>
        <p>Do the following, depending on the value of <var>c</var>:</p>

        <dl class=switch><dt><a id=parsing-a-srcset-attribute:space-characters-4 href=https://infra.spec.whatwg.org/#ascii-whitespace data-x-internal=space-characters>ASCII whitespace</a><dd><p>Stay in this state.<dt>EOF<dd><p>Jump to the step labeled <i>descriptor parser</i>.<dt>Anything else<dd><p>Set <var>state</var> to <i>in descriptor</i>.
         Set <var>position</var> to the <em>previous</em> character in <var>input</var>.</dl>
       </dl>

      <p>Advance <var>position</var> to the next character in <var>input</var>. Repeat this
      step.</p>

      <p class=note>In order to be compatible with future additions,
      this algorithm supports multiple descriptors and descriptors with parens.</p>
     </ol>
   <li><p><i>Descriptor parser</i>: Let <var>error</var> be <i>no</i>.<li><p>Let <var>width</var> be <i>absent</i>.<li><p>Let <var>density</var> be <i>absent</i>.<li><p>Let <var>future-compat-h</var> be <i>absent</i>.<li>
    <p>For each descriptor in <var>descriptors</var>,
    run the appropriate set of steps from the following list:</p>

    <dl class=switch><dt>If the descriptor consists of a <a id=parsing-a-srcset-attribute:valid-non-negative-integer href=infrastructure.html#valid-non-negative-integer>valid non-negative integer</a>
     followed by a U+0077 LATIN SMALL LETTER W character<dd>
      <ol><li>
        <p>If the user agent does not support the <code id=parsing-a-srcset-attribute:attr-img-sizes><a href=embedded-content.html#attr-img-sizes>sizes</a></code> attribute,
        let <var>error</var> be <i>yes</i>.</p>

        <p class=note>A conforming user agent will support the <code id=parsing-a-srcset-attribute:attr-img-sizes-2><a href=embedded-content.html#attr-img-sizes>sizes</a></code> attribute.
        However, user agents typically implement and ship features in an incremental manner in practice.</p>
       <li><p>If <var>width</var> and <var>density</var>
       are not both <i>absent</i>,
       then let <var>error</var> be <i>yes</i>.<li><p>Apply the <a id=parsing-a-srcset-attribute:rules-for-parsing-non-negative-integers href=infrastructure.html#rules-for-parsing-non-negative-integers>rules for parsing non-negative integers</a> to the descriptor.
       If the result is zero, let <var>error</var> be <i>yes</i>.
       Otherwise, let <var>width</var> be the result.</ol>
     <dt>If the descriptor consists of a <a id=parsing-a-srcset-attribute:valid-floating-point-number href=infrastructure.html#valid-floating-point-number>valid floating-point number</a>
     followed by a U+0078 LATIN SMALL LETTER X character<dd>
      <ol><li><p>If <var>width</var>, <var>density</var> and <var>future-compat-h</var>
       are not all <i>absent</i>,
       then let <var>error</var> be <i>yes</i>.<li>
        <p>Apply the <a id=parsing-a-srcset-attribute:rules-for-parsing-floating-point-number-values href=infrastructure.html#rules-for-parsing-floating-point-number-values>rules for parsing floating-point number values</a> to the descriptor.
        If the result is less than zero, let <var>error</var> be <i>yes</i>.
        Otherwise, let <var>density</var> be the result.</p>

        <p class=note>If <var>density</var> is zero,
        the <a id=parsing-a-srcset-attribute:intrinsic-dimensions href=https://drafts.csswg.org/css-images/#intrinsic-dimensions data-x-internal=intrinsic-dimensions>intrinsic dimensions</a> will be infinite.
        User agents are expected to have limits in how big images can be rendered,
        which is allowed by the <a href=infrastructure.html#hardwareLimitations>hardware limitations</a> clause.</p>
       </ol>
     <dt>If the descriptor consists of a <a id=parsing-a-srcset-attribute:valid-non-negative-integer-2 href=infrastructure.html#valid-non-negative-integer>valid non-negative integer</a>
     followed by a U+0068 LATIN SMALL LETTER H character<dd>
      <p>This is a <a href=#concept-microsyntax-parse-error id=parsing-a-srcset-attribute:concept-microsyntax-parse-error-3>parse error</a>.</p>

      <ol><li><p>If <var>future-compat-h</var> and <var>density</var>
       are not both <i>absent</i>,
       then let <var>error</var> be <i>yes</i>.<li><p>Apply the <a id=parsing-a-srcset-attribute:rules-for-parsing-non-negative-integers-2 href=infrastructure.html#rules-for-parsing-non-negative-integers>rules for parsing non-negative integers</a> to the descriptor.
       If the result is zero, let <var>error</var> be <i>yes</i>.
       Otherwise, let <var>future-compat-h</var> be the result.</ol>
     <dt>Anything else<dd><p>Let <var>error</var> be <i>yes</i>.</dl>
   <li><p>If <var>future-compat-h</var> is not <i>absent</i> and <var>width</var> is <i>absent</i>,
   let <var>error</var> be <i>yes</i>.<li><p>If <var>error</var> is still <i>no</i>,
   then append a new <a href=#image-source id=parsing-a-srcset-attribute:image-source>image source</a> to <var>candidates</var>
   whose URL is <var>url</var>,
   associated with a width <var>width</var> if not <i>absent</i>
   and a pixel density <var>density</var> if not <i>absent</i>.
   Otherwise, there is a <a href=#concept-microsyntax-parse-error id=parsing-a-srcset-attribute:concept-microsyntax-parse-error-4>parse error</a>.<li><p>Return to the step labeled <i>splitting loop</i>.</ol>



  <h6 id=parsing-a-sizes-attribute><span class=secno>4.8.4.3.9</span> Parsing a sizes attribute<a href=#parsing-a-sizes-attribute class=self-link></a></h6>
<div data-zh-date="" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/embedded-content/images/processing-model/parsing-a-sizes-attribute.zh.html?filename=parsing-a-sizes-attribute.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fembedded-content%2Fimages%2Fprocessing-model%2Fparsing-a-sizes-attribute.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/embedded-content/images/processing-model/parsing-a-sizes-attribute.en.html></div>

  <p>When asked to <dfn id=parse-a-sizes-attribute>parse a sizes attribute</dfn> from an element, <a id=parsing-a-sizes-attribute:parse-a-comma-separated-list-of-component-values href=https://drafts.csswg.org/css-syntax/#parse-a-comma-separated-list-of-component-values data-x-internal=parse-a-comma-separated-list-of-component-values>parse a
  comma-separated list of component values</a> from the value of the element's <a href=#sizes-attribute id=parsing-a-sizes-attribute:sizes-attribute>sizes
  attribute</a> (or the empty string, if the attribute is absent), and let <var>unparsed sizes
  list</var> be the result. <a href=references.html#refsCSSSYNTAX>[CSSSYNTAX]</a></p>

  <p>For each <var>unparsed size</var> in <var>unparsed sizes list</var>:</p>

  <ol><li><p>Remove all consecutive <a id=parsing-a-sizes-attribute:whitespace-token href=https://drafts.csswg.org/css-syntax/#typedef-whitespace-token data-x-internal=whitespace-token>&lt;whitespace-token></a>s
   from the end of <var>unparsed size</var>.
   If <var>unparsed size</var> is now empty,
   that is a <a href=#concept-microsyntax-parse-error id=parsing-a-sizes-attribute:concept-microsyntax-parse-error>parse error</a>;
   continue to the next iteration of this algorithm.<li><p>If the last <a id=parsing-a-sizes-attribute:component-value href=https://drafts.csswg.org/css-syntax/#component-value data-x-internal=component-value>component value</a> in <var>unparsed size</var>
   is a valid non-negative <a href=#source-size-value id=parsing-a-sizes-attribute:source-size-value>&lt;source-size-value></a>,
   let <var>size</var> be its value
   and remove the <a id=parsing-a-sizes-attribute:component-value-2 href=https://drafts.csswg.org/css-syntax/#component-value data-x-internal=component-value>component value</a> from <var>unparsed size</var>.
   Any CSS function other than the <a id=parsing-a-sizes-attribute:math-functions href=https://drafts.csswg.org/css-values/#math-function data-x-internal=math-functions>math functions</a> is invalid.
   Otherwise, there is a <a href=#concept-microsyntax-parse-error id=parsing-a-sizes-attribute:concept-microsyntax-parse-error-2>parse error</a>;
   continue to the next iteration of this algorithm.<li><p>Remove all consecutive <a id=parsing-a-sizes-attribute:whitespace-token-2 href=https://drafts.csswg.org/css-syntax/#typedef-whitespace-token data-x-internal=whitespace-token>&lt;whitespace-token></a>s
   from the end of <var>unparsed size</var>.
   If <var>unparsed size</var> is now empty,
   return <var>size</var> and exit this algorithm.
   If this was not the last item in <var>unparsed sizes list</var>,
   that is a <a href=#concept-microsyntax-parse-error id=parsing-a-sizes-attribute:concept-microsyntax-parse-error-3>parse error</a>.<li><p>Parse the remaining <a href=https://drafts.csswg.org/css-syntax/#component-value id=parsing-a-sizes-attribute:component-value-3 data-x-internal=component-value>component values</a> in <var>unparsed size</var>
   as a <a id=parsing-a-sizes-attribute:media-condition href=https://drafts.csswg.org/mediaqueries/#typedef-media-condition data-x-internal=media-condition>&lt;media-condition></a>.
   If it does not parse correctly,
   or it does parse correctly but the <a id=parsing-a-sizes-attribute:media-condition-2 href=https://drafts.csswg.org/mediaqueries/#typedef-media-condition data-x-internal=media-condition>&lt;media-condition></a> evaluates to false,
   continue to the next iteration of this algorithm. <a href=references.html#refsMQ>[MQ]</a><li><p>Return <var>size</var> and exit this algorithm.</ol>

  <p>If the above algorithm exhausts <var>unparsed sizes list</var> without returning a
  <var>size</var> value, then return <code>100vw</code>.</p>

  <p class=note>While a <a href=#valid-source-size-list id=parsing-a-sizes-attribute:valid-source-size-list>valid source size list</a> only contains a bare <a href=#source-size-value id=parsing-a-sizes-attribute:source-size-value-2>&lt;source-size-value></a>
  (without an accompanying <a id=parsing-a-sizes-attribute:media-condition-3 href=https://drafts.csswg.org/mediaqueries/#typedef-media-condition data-x-internal=media-condition>&lt;media-condition></a>)
  as the last entry in the <a href=#source-size-list id=parsing-a-sizes-attribute:source-size-list>&lt;source-size-list></a>,
  the parsing algorithm technically allows such at any point in the list,
  and will accept it immediately as the size
  if the preceding entries in the list weren't used.
  This is to enable future extensions,
  and protect against simple author errors such as a final trailing comma.</p>



  <h6 id=normalizing-the-source-densities><span class=secno>4.8.4.3.10</span> 源像素密度规范化<a href=#normalizing-the-source-densities class=self-link></a></h6>
<div data-zh-date="Thu May 24 2018 01:36:45 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/the-elements-of-html/embedded-content/images/processing-model/normalizing-the-source-densities.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/embedded-content/images/processing-model/normalizing-the-source-densities.en.html></div>

  <p><a href=#image-source id=normalizing-the-source-densities:image-source>image source</a> 除 URL 之外可以有一个
  <a href=#pixel-density-descriptor id=normalizing-the-source-densities:pixel-density-descriptor>像素密度描述符</a>, 一个
  <a href=#width-descriptor id=normalizing-the-source-densities:width-descriptor>宽度描述符</a> 或者什么描述符都没有。
  <a href=#source-set id=normalizing-the-source-densities:source-set>source set</a> 规范化后会给每个 <a href=#image-source id=normalizing-the-source-densities:image-source-2>image source</a> 一个
  <a href=#pixel-density-descriptor id=normalizing-the-source-densities:pixel-density-descriptor-2>像素密度描述符</a>。</p>

  <p>当要求 <dfn id=normalise-the-source-densities>
  规范化</dfn> <a href=#source-set id=normalizing-the-source-densities:source-set-2>source set</a> <var>source set</var> 的源像素密度时，
  用户代理必须执行以下操作：</p>

  <ol><li><p>令 <var>source size</var> 为 <var>source set</var> 的 <a href=#source-size-2 id=normalizing-the-source-densities:source-size-2>source size</a>。<li>

    <p>对 <var>source set</var> 中的每个 <a href=#image-source id=normalizing-the-source-densities:image-source-3>image source</a>：</p>

    <ol><li><p>如果 <a href=#image-source id=normalizing-the-source-densities:image-source-4>image source</a> 有一个 <a href=#pixel-density-descriptor id=normalizing-the-source-densities:pixel-density-descriptor-3>像素密度描述符</a>，
       继续下一个 <a href=#image-source id=normalizing-the-source-densities:image-source-5>image source</a>。<li>

      <p>否则，如果 <a href=#image-source id=normalizing-the-source-densities:image-source-6>image source</a> 有一个 <a href=#width-descriptor id=normalizing-the-source-densities:width-descriptor-2>宽度描述符</a>，
      把 <a href=#width-descriptor id=normalizing-the-source-densities:width-descriptor-3>宽度描述符</a> 替换为
      <a href=#pixel-density-descriptor id=normalizing-the-source-densities:pixel-density-descriptor-4>像素密度描述符</a>，其
      <a href=#pixel-density-descriptor-value id=normalizing-the-source-densities:pixel-density-descriptor-value>值</a> 为
      <a href=#width-descriptor-value id=normalizing-the-source-densities:width-descriptor-value>宽度描述符的值</a> 除以
      <a href=#source-size-2 id=normalizing-the-source-densities:source-size-2-2>源大小</a>，单位是 <code>x</code>。</p>

      <p class=note>如果 <a href=#source-size-2 id=normalizing-the-source-densities:source-size-2-3>源大小</a> 是零，像素密度会是无穷大，
      这会导致 <a href=https://drafts.csswg.org/css-images/#intrinsic-dimensions id=normalizing-the-source-densities:intrinsic-dimensions data-x-internal=intrinsic-dimensions>固有尺寸</a> 为 0 乘以 0。</p>

     <li><p>否则，给出 <a href=#image-source id=normalizing-the-source-densities:image-source-7>image source</a> 的 <a href=#pixel-density-descriptor id=normalizing-the-source-densities:pixel-density-descriptor-5>像素密度描述符</a>
     为 <code>1x</code>。</ol>

   </ol>



  <h6 id=reacting-to-environment-changes><span class=secno>4.8.4.3.11</span> Reacting to environment changes<a href=#reacting-to-environment-changes class=self-link></a></h6>
<div data-zh-date="" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/embedded-content/images/processing-model/reacting-to-environment-changes.zh.html?filename=reacting-to-environment-changes.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fembedded-content%2Fimages%2Fprocessing-model%2Freacting-to-environment-changes.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/embedded-content/images/processing-model/reacting-to-environment-changes.en.html></div>

  <p id=img-environment-changes>The user agent may at any time run the following algorithm to update an <code id=reacting-to-environment-changes:the-img-element><a href=embedded-content.html#the-img-element>img</a></code>
  element's image in order to react to changes in the environment. (User agents are <em>not
  required</em> to ever run this algorithm; for example, if the user is not looking at the page any
  more, the user agent might want to wait until the user has returned to the page before determining
  which image to use, in case the environment changes again in the meantime.)</p>

  <p class=note>User agents are encouraged to run this algorithm in particular when the user changes
  the <a id=reacting-to-environment-changes:viewport href=https://drafts.csswg.org/css2/#viewport data-x-internal=viewport>viewport</a>'s size (e.g. by resizing the window or changing the page zoom), and when
  an <code id=reacting-to-environment-changes:the-img-element-2><a href=embedded-content.html#the-img-element>img</a></code> element is <a href=infrastructure.html#insert-an-element-into-a-document id=reacting-to-environment-changes:insert-an-element-into-a-document>inserted into a
  document</a>, so that the <a href=#density-corrected-intrinsic-width-and-height id=reacting-to-environment-changes:density-corrected-intrinsic-width-and-height>density-corrected intrinsic width and height</a> match the
  new <a id=reacting-to-environment-changes:viewport-2 href=https://drafts.csswg.org/css2/#viewport data-x-internal=viewport>viewport</a>, and so that the correct image is chosen when <a href=#art-direction id=reacting-to-environment-changes:art-direction>art direction</a>
  is involved.</p>

  <ol><li><p><a id=reacting-to-environment-changes:await-a-stable-state href=webappapis.html#await-a-stable-state>Await a stable state</a>. The <a id=reacting-to-environment-changes:synchronous-section href=webappapis.html#synchronous-section>synchronous section</a>
   consists of all the remaining steps of this algorithm until the algorithm says the
   <a id=reacting-to-environment-changes:synchronous-section-2 href=webappapis.html#synchronous-section>synchronous section</a> has ended. (Steps in <a href=webappapis.html#synchronous-section id=reacting-to-environment-changes:synchronous-section-3>synchronous sections</a> are marked with ⌛.)<li><p>⌛ If the <code id=reacting-to-environment-changes:the-img-element-3><a href=embedded-content.html#the-img-element>img</a></code> element does not <a href=#use-srcset-or-picture id=reacting-to-environment-changes:use-srcset-or-picture>use <code>srcset</code> or
   <code>picture</code></a>, its <a id=reacting-to-environment-changes:node-document href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a> is not the <a id=reacting-to-environment-changes:active-document href=browsers.html#active-document>active
   document</a>, has image data whose resource type is <code id=reacting-to-environment-changes:multipart/x-mixed-replace><a href=iana.html#multipart/x-mixed-replace>multipart/x-mixed-replace</a></code>, or
   the <a href=#pending-request id=reacting-to-environment-changes:pending-request>pending request</a> is not null, then return.<li><p>⌛ Let <var>selected source</var> and <var>selected pixel
   density</var> be the URL and pixel density that results from <a href=#select-an-image-source id=reacting-to-environment-changes:select-an-image-source>selecting an image source</a>, respectively.<li><p>⌛ If <var>selected source</var> is null, then return.<li><p>⌛ If <var>selected source</var> and <var>selected pixel
   density</var> are the same as the element's <a href=#last-selected-source id=reacting-to-environment-changes:last-selected-source>last selected source</a> and <a href=#current-pixel-density id=reacting-to-environment-changes:current-pixel-density>current
   pixel density</a>, then return.<li><p>⌛ <a href=infrastructure.html#parse-a-url id=reacting-to-environment-changes:parse-a-url>Parse</a> <var>selected source</var>, relative to
   the element's <a id=reacting-to-environment-changes:node-document-2 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a>, and let <var>urlString</var> be the <a id=reacting-to-environment-changes:resulting-url-string href=infrastructure.html#resulting-url-string>resulting URL
   string</a>. If that is not successful, then return.<li><p>⌛ Let <var>corsAttributeState</var> be the state of the element's <code id=reacting-to-environment-changes:attr-img-crossorigin><a href=embedded-content.html#attr-img-crossorigin>crossorigin</a></code> content attribute.<li><p>⌛ Let <var>origin</var> be the <a id=reacting-to-environment-changes:concept-origin href=origin.html#concept-origin>origin</a> of the <code id=reacting-to-environment-changes:the-img-element-4><a href=embedded-content.html#the-img-element>img</a></code> element's <a id=reacting-to-environment-changes:node-document-3 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a>.<li><p>⌛ Let <var>client</var> be the <code id=reacting-to-environment-changes:the-img-element-5><a href=embedded-content.html#the-img-element>img</a></code> element's <a id=reacting-to-environment-changes:node-document-4 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node
   document</a>'s <a id=reacting-to-environment-changes:relevant-settings-object href=webappapis.html#relevant-settings-object>relevant settings object</a>.<li><p>⌛ Let <var>key</var> be a tuple consisting of <var>urlString</var>,
   <var>corsAttributeState</var>, and, if <var>corsAttributeState</var> is not <a href=infrastructure.html#attr-crossorigin-none id=reacting-to-environment-changes:attr-crossorigin-none>No CORS</a>, <var>origin</var>.<li><p>⌛ Let <var>image request</var> be a new <a href=#image-request id=reacting-to-environment-changes:image-request>image request</a>
   whose <a href=#img-req-url id=reacting-to-environment-changes:img-req-url>current URL</a> is <var>urlString</var><li><p>⌛ Let the element's <a href=#pending-request id=reacting-to-environment-changes:pending-request-2>pending request</a> be <var>image request</var>.<li><p>End the <a id=reacting-to-environment-changes:synchronous-section-4 href=webappapis.html#synchronous-section>synchronous section</a>, continuing the remaining steps
   <a id=reacting-to-environment-changes:in-parallel href=infrastructure.html#in-parallel>in parallel</a>.<li>
    <p>If the <a href=#list-of-available-images id=reacting-to-environment-changes:list-of-available-images>list of available images</a> contains an entry for <var>key</var>,
    then set <var>image request</var>'s <a href=#img-req-data id=reacting-to-environment-changes:img-req-data>image data</a> to that of the entry.
    Continue to the next step.</p>

    <p>Otherwise:</p>

    <ol><li><p>Let <var>request</var> be the result of <a href=infrastructure.html#create-a-potential-cors-request id=reacting-to-environment-changes:create-a-potential-cors-request>creating a potential-CORS request</a> given
     <var>urlString</var>, "<code>image</code>", and
     <var>corsAttributeState</var>.<li><p>Set <var>request</var>'s <a href=https://fetch.spec.whatwg.org/#concept-request-client id=reacting-to-environment-changes:concept-request-client data-x-internal=concept-request-client>client</a> to
     <var>client</var>, <a href=https://fetch.spec.whatwg.org/#concept-request-initiator id=reacting-to-environment-changes:concept-request-initiator data-x-internal=concept-request-initiator>initiator</a> to "<code>imageset</code>", and set <var>request</var>'s <a id=reacting-to-environment-changes:synchronous-flag href=https://fetch.spec.whatwg.org/#synchronous-flag data-x-internal=synchronous-flag>synchronous
     flag</a>.<li><p>Set <var>request</var>'s
     <a href=https://fetch.spec.whatwg.org/#concept-request-referrer-policy id=reacting-to-environment-changes:concept-request-referrer-policy data-x-internal=concept-request-referrer-policy>referrer policy</a> to the current state of
     the element's <code id=reacting-to-environment-changes:attr-img-referrerpolicy><a href=embedded-content.html#attr-img-referrerpolicy>referrerpolicy</a></code> attribute.<li><p>Let <var>response</var> be the result of <a href=https://fetch.spec.whatwg.org/#concept-fetch id=reacting-to-environment-changes:concept-fetch data-x-internal=concept-fetch>fetching</a> <var>request</var>.<li><p>If <var>response</var>'s <a id=reacting-to-environment-changes:unsafe-response href=infrastructure.html#unsafe-response>unsafe response</a> is a <a id=reacting-to-environment-changes:network-error href=https://fetch.spec.whatwg.org/#concept-network-error data-x-internal=network-error>network error</a> or
     if the image format is unsupported (as determined by applying the <a href=https://mimesniff.spec.whatwg.org/#rules-for-sniffing-images-specifically id=reacting-to-environment-changes:content-type-sniffing:-image data-x-internal=content-type-sniffing:-image>image sniffing rules</a>, again as mentioned earlier),
     or if the user agent is able to determine that <var>image request</var>'s image is corrupted in
     some fatal way such that the image dimensions cannot be obtained, or if the resource type is
     <code id=reacting-to-environment-changes:multipart/x-mixed-replace-2><a href=iana.html#multipart/x-mixed-replace>multipart/x-mixed-replace</a></code>, then let <a href=#pending-request id=reacting-to-environment-changes:pending-request-3>pending request</a> be null and abort
     these steps.<li><p>Otherwise, <var>response</var>'s <a id=reacting-to-environment-changes:unsafe-response-2 href=infrastructure.html#unsafe-response>unsafe response</a> is <var>image
     request</var>'s <a href=#img-req-data id=reacting-to-environment-changes:img-req-data-2>image data</a>. It can be either
     <a id=reacting-to-environment-changes:cors-same-origin href=infrastructure.html#cors-same-origin>CORS-same-origin</a> or <a id=reacting-to-environment-changes:cors-cross-origin href=infrastructure.html#cors-cross-origin>CORS-cross-origin</a>; this affects the
     <a id=reacting-to-environment-changes:concept-origin-2 href=origin.html#concept-origin>origin</a> of the image itself (e.g., when used on a <code id=reacting-to-environment-changes:the-canvas-element><a href=canvas.html#the-canvas-element>canvas</a></code>).</ol>
   <li>
    <p><a id=reacting-to-environment-changes:queue-an-element-task href=webappapis.html#queue-an-element-task>Queue an element task</a> on the <a id=reacting-to-environment-changes:dom-manipulation-task-source href=webappapis.html#dom-manipulation-task-source>DOM manipulation task source</a> given
    the <code id=reacting-to-environment-changes:the-img-element-6><a href=embedded-content.html#the-img-element>img</a></code> element and the following steps:</p>

    <ol><li><p>If the <code id=reacting-to-environment-changes:the-img-element-7><a href=embedded-content.html#the-img-element>img</a></code> element has experienced <a href=#relevant-mutations id=reacting-to-environment-changes:relevant-mutations>relevant mutations</a>
     since this algorithm started, then let <a href=#pending-request id=reacting-to-environment-changes:pending-request-4>pending request</a> be null and abort these
     steps.</p>

     <li><p>Let the <code id=reacting-to-environment-changes:the-img-element-8><a href=embedded-content.html#the-img-element>img</a></code> element's <a href=#last-selected-source id=reacting-to-environment-changes:last-selected-source-2>last selected source</a> be <var>selected source</var>
     and the <code id=reacting-to-environment-changes:the-img-element-9><a href=embedded-content.html#the-img-element>img</a></code> element's <a href=#current-pixel-density id=reacting-to-environment-changes:current-pixel-density-2>current pixel density</a> be <var>selected pixel density</var>.<li><p>Set the <var>image request</var>'s <a href=#img-req-state id=reacting-to-environment-changes:img-req-state>state</a> to <a href=#img-all id=reacting-to-environment-changes:img-all>completely available</a>.<li><p>Add the image to the <a href=#list-of-available-images id=reacting-to-environment-changes:list-of-available-images-2>list of available images</a> using the key <var>key</var>,
     with the <a href=#ignore-higher-layer-caching id=reacting-to-environment-changes:ignore-higher-layer-caching>ignore higher-layer caching</a> flag set.<li><p><a href=#upgrade-the-pending-request-to-the-current-request id=reacting-to-environment-changes:upgrade-the-pending-request-to-the-current-request>Upgrade the pending request to the current request</a>.<li><p>Update the <code id=reacting-to-environment-changes:the-img-element-10><a href=embedded-content.html#the-img-element>img</a></code> element's presentation appropriately.<li><p><a href=https://dom.spec.whatwg.org/#concept-event-fire id=reacting-to-environment-changes:concept-event-fire data-x-internal=concept-event-fire>Fire an event</a> named <code id=reacting-to-environment-changes:event-load><a href=indices.html#event-load>load</a></code> at the <code id=reacting-to-environment-changes:the-img-element-11><a href=embedded-content.html#the-img-element>img</a></code> element.</ol>
   </ol>

  



  <h5 id=alt><span class=secno>4.8.4.4</span> 为图片提供替代文字的要求<a href=#alt class=self-link></a></h5>
<div data-zh-date="Sat May 19 2018 09:02:08 GMT+0000 (UTC)" data-en-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/the-elements-of-html/embedded-content/images/requirements-for-providing-text-to-act-as-an-alternative-for-images/index.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/embedded-content/images/requirements-for-providing-text-to-act-as-an-alternative-for-images/index.en.html></div>



  <h6 id=general-guidelines><span class=secno>4.8.4.4.1</span> 通用指引<a href=#general-guidelines class=self-link></a></h6>
<div data-zh-date="Sun May 20 2018 05:18:00 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/the-elements-of-html/embedded-content/images/requirements-for-providing-text-to-act-as-an-alternative-for-images/general-guidelines.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/embedded-content/images/requirements-for-providing-text-to-act-as-an-alternative-for-images/general-guidelines.en.html></div>

  <p>除非另有说明，必须指定 <code id=general-guidelines:attr-img-alt><a href=embedded-content.html#attr-img-alt>alt</a></code>
  属性且它的值不能为空，且必须适合替代图片。
  对 <code id=general-guidelines:attr-img-alt-2><a href=embedded-content.html#attr-img-alt>alt</a></code> 属性具体的要求取决于它要表示什么图片，在下面给出描述。</p>

  <p>编写替代文本时要考虑的最一般规则如下：
  <strong>其目的是用其 <code id=general-guidelines:attr-img-alt-3><a href=embedded-content.html#attr-img-alt>alt</a></code> 属性的文本替换每个图像不会改变页面的含义</strong>。</p>

  <p>所以，通常在编写替代文本时，考虑如果不能包含一个图片时会怎样写。</p>

  <p>基于此的一个推论是 <code id=general-guidelines:attr-img-alt-4><a href=embedded-content.html#attr-img-alt>alt</a></code> 属性的值不应该包含
  图片的 <em>caption</em>, <em>title</em> 或 <em>legend</em> 文本。
  应该包含的替代文本是用于替代图片的；而不是图片的补充。
  用 <code id=general-guidelines:attr-title><a href=dom.html#attr-title>title</a></code> 属性可以提供补充信息。</p>

  <p>另一个推论是 <code id=general-guidelines:attr-img-alt-5><a href=embedded-content.html#attr-img-alt>alt</a></code> 属性的值不应该重复已经由后面的文字提供的信息。</p>

  <p class=note>考虑替代文字的一种方式是，假设你在跟某人打电话，
  这时如何直接读出这个包含图片的页面，而不用提这里有一张图片。
  无论你说什么来替代图像，这通常都是编写替代文本的良好开端。</p>



  <h6 id=a-link-or-button-containing-nothing-but-the-image><span class=secno>4.8.4.4.2</span> 只包含图片的链接或按钮<a href=#a-link-or-button-containing-nothing-but-the-image class=self-link></a></h6>
<div data-zh-date="Tue May 22 2018 13:16:20 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/the-elements-of-html/embedded-content/images/requirements-for-providing-text-to-act-as-an-alternative-for-images/a-link-or-button-containing-nothing-but-the-image.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/embedded-content/images/requirements-for-providing-text-to-act-as-an-alternative-for-images/a-link-or-button-containing-nothing-but-the-image.en.html></div>

  <p>当创建 <a href=links.html#hyperlink id=a-link-or-button-containing-nothing-but-the-image:hyperlink>超链接</a> 的 <a id=a-link-or-button-containing-nothing-but-the-image:the-a-element href=text-level-semantics.html#the-a-element>a</a> 元素或 <code id=a-link-or-button-containing-nothing-but-the-image:the-button-element><a href=form-elements.html#the-button-element>button</a></code> 元素
  没有文本内容只包含一个或更多图片时，<code id=a-link-or-button-containing-nothing-but-the-image:attr-img-alt><a href=embedded-content.html#attr-img-alt>alt</a></code>
  属性必须包含一些文字来传达链接或按钮的用途。</p>

  <div class=example>

   <p>在这个例子中，要求用户从三个颜色中选择一个喜欢的颜色。
   每个颜色由图片给出，但对于用户代理配置为不显示图片的用户会用颜色名来替代：</p>

   <pre>&lt;h1>Pick your color&lt;/h1>
&lt;ul>
 &lt;li>&lt;a href="green.html"><strong>&lt;img src="green.jpeg" alt="Green"></strong>&lt;/a>&lt;/li>
 &lt;li>&lt;a href="blue.html"><strong>&lt;img src="blue.jpeg" alt="Blue"></strong>&lt;/a>&lt;/li>
 &lt;li>&lt;a href="red.html"><strong>&lt;img src="red.jpeg" alt="Red"></strong>&lt;/a>&lt;/li>
&lt;/ul></pre>

  </div>

  <div class=example>

   <p>在这个例子中，每个按钮有很多图片来表示用户想要输出的颜色类型。
   每种情况都用第一个图片提供替代文本。</p>

   <pre>&lt;button name="rgb"><strong>&lt;img src="red" alt="RGB">&lt;img src="green" alt="">&lt;img src="blue" alt=""></strong>&lt;/button>
&lt;button name="cmyk"><strong>&lt;img src="cyan" alt="CMYK">&lt;img src="magenta" alt="">&lt;img src="yellow" alt="">&lt;img src="black" alt=""></strong>&lt;/button></pre>

   <p>由于每个图片表示文字的一部分，也可以写成这样：</p>

   <pre>&lt;button name="rgb"><strong>&lt;img src="red" alt="R">&lt;img src="green" alt="G">&lt;img src="blue" alt="B"></strong>&lt;/button>
&lt;button name="cmyk"><strong>&lt;img src="cyan" alt="C">&lt;img src="magenta" alt="M">&lt;img src="yellow" alt="Y">&lt;img src="black" alt="K"></strong>&lt;/button></pre>

   <p>但是对于其他的替代文本，可能不能这样写，把所有替代文本放到每种情况的一张图片中可能更合理：</p>

   <pre>&lt;button name="rgb"><strong>&lt;img src="red" alt="sRGB profile">&lt;img src="green" alt="">&lt;img src="blue" alt=""></strong>&lt;/button>
&lt;button name="cmyk"><strong>&lt;img src="cyan" alt="CMYK profile">&lt;img src="magenta" alt="">&lt;img src="yellow" alt="">&lt;img src="black" alt=""></strong>&lt;/button></pre>

  </div>




  <h6 id=a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations><span class=secno>4.8.4.4.3</span> A phrase or paragraph with an alternative graphical representation: charts, diagrams, graphs, maps, illustrations<a href=#a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations class=self-link></a></h6>
<div data-zh-date="" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/embedded-content/images/requirements-for-providing-text-to-act-as-an-alternative-for-images/a-phrase-or-paragraph-with-an-alternative-graphical-representation-charts-diagrams-graphs-maps-illustrations.zh.html?filename=a-phrase-or-paragraph-with-an-alternative-graphical-representation-charts-diagrams-graphs-maps-illustrations.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fembedded-content%2Fimages%2Frequirements-for-providing-text-to-act-as-an-alternative-for-images%2Fa-phrase-or-paragraph-with-an-alternative-graphical-representation-charts-diagrams-graphs-maps-illustrations.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/embedded-content/images/requirements-for-providing-text-to-act-as-an-alternative-for-images/a-phrase-or-paragraph-with-an-alternative-graphical-representation-charts-diagrams-graphs-maps-illustrations.en.html></div>

  <p>Sometimes something can be more clearly stated in graphical form, for example as a flowchart, a
  diagram, a graph, or a simple map showing directions. In such cases, an image can be given using
  the <code id=a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations:the-img-element><a href=embedded-content.html#the-img-element>img</a></code> element, but the lesser textual version must still be given, so that users
  who are unable to view the image (e.g. because they have a very slow connection, or because they
  are using a text-only browser, or because they are listening to the page being read out by a
  hands-free automobile voice web browser, or simply because they are blind) are still able to
  understand the message being conveyed.</p>

  <p>The text must be given in the <code id=a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations:attr-img-alt><a href=embedded-content.html#attr-img-alt>alt</a></code> attribute, and must convey
  the same message as the image specified in the <code id=a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations:attr-img-src><a href=embedded-content.html#attr-img-src>src</a></code>
  attribute.</p>

  <p>It is important to realize that the alternative text is a <em>replacement</em> for the image,
  not a description of the image.</p>

  <div class=example>

   <p>In the following example we have <a href=/html/images/parsing-model-overview.svg>a flowchart</a>
   in image form, with text in the <code id=a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations:attr-img-alt-2><a href=embedded-content.html#attr-img-alt>alt</a></code> attribute rephrasing the
   flowchart in prose form:</p>

   <pre><code class=html>&lt;p>In the common case, the data handled by the tokenization stage
comes from the network, but it can also come from script.&lt;/p>
&lt;p><strong>&lt;img src="images/parsing-model-overview.svg" alt="The Network
passes data to the Input Stream Preprocessor, which passes it to the
Tokenizer, which passes it to the Tree Construction stage. From there,
data goes to both the DOM and to Script Execution. Script Execution is
linked to the DOM, and, using document.write(), passes data to the
Tokenizer."></strong>&lt;/p></code></pre>

  </div>

  <div class=example>

   <p>Here's another example, showing a good solution and a bad solution to the problem of including
   an image in a description.</p>

   <p>First, here's the good solution. This sample shows how the alternative text should just be
   what you would have put in the prose if the image had never existed.</p>

   <pre><code class=html>&lt;!-- This is the correct way to do things. -->
&lt;p>
 You are standing in an open field west of a house.
 <strong>&lt;img src="house.jpeg" alt="The house is white, with a boarded front door."></strong>
 There is a small mailbox here.
&lt;/p></code></pre>

   <p>Second, here's the bad solution. In this incorrect way of doing things, the alternative text
   is simply a description of the image, instead of a textual replacement for the image. It's bad
   because when the image isn't shown, the text doesn't flow as well as in the first example.</p>

   <pre class=bad><code class=html>&lt;!-- <em>This is the wrong way to do things.</em> -->
&lt;p>
 You are standing in an open field west of a house.
 &lt;img src="house.jpeg" alt="A white house, with a boarded front door.">
 There is a small mailbox here.
&lt;/p></code></pre>

   <p>Text such as "Photo of white house with boarded door" would be equally bad alternative text
   (though it could be suitable for the <code id=a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations:attr-title><a href=dom.html#attr-title>title</a></code> attribute or in the
   <code id=a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations:the-figcaption-element><a href=grouping-content.html#the-figcaption-element>figcaption</a></code> element of a <code id=a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations:the-figure-element><a href=grouping-content.html#the-figure-element>figure</a></code> with this image).</p>

  </div>



  <h6 id=a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos><span class=secno>4.8.4.4.4</span> 带有替代图形表示的短语或标签：图标，徽标<a href=#a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos class=self-link></a></h6>
<div data-zh-date="Mon May 21 2018 15:10:26 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/the-elements-of-html/embedded-content/images/requirements-for-providing-text-to-act-as-an-alternative-for-images/a-short-phrase-or-label-with-an-alternative-graphical-representation-icons-logos.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/embedded-content/images/requirements-for-providing-text-to-act-as-an-alternative-for-images/a-short-phrase-or-label-with-an-alternative-graphical-representation-icons-logos.en.html></div>

  <p>一个文档可以包含图标信息，图标是为了帮助视觉浏览器的用户一目了然地识别功能。</p>

  <p>有些情况下，图标是文本标签的补充，它们传达同样的含义。
  那些情况下，<code id=a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos:attr-img-alt><a href=embedded-content.html#attr-img-alt>alt</a></code> 属性必须存在且为空。</p>

  <div class=example>

   <p>下面的图标在文本旁边表达同样的含义，所以它们的 <code id=a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos:attr-img-alt-2><a href=embedded-content.html#attr-img-alt>alt</a></code> 属性为空：</p>

   <pre>&lt;nav>
 &lt;p>&lt;a href="/help/"><strong>&lt;img src="/icons/help.png" alt=""></strong> Help&lt;/a>&lt;/p>
 &lt;p>&lt;a href="/configure/"><strong>&lt;img src="/icons/configuration.png" alt=""></strong>
 Configuration Tools&lt;/a>&lt;/p>
&lt;/nav></pre>

  </div>

  <p>另外一些情况下，图标旁边没有文字来描述它的含义；这样的图标就应该解释自己的含义。
  那些情况下，同等的文本标签必须通过<code id=a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos:attr-img-alt-3><a href=embedded-content.html#attr-img-alt>alt</a></code> 属性给出。</p>

  <div class=example>

   <p>下面是一个新闻站点，每个文章用一个图标来表示对应的话题。</p>

   <pre>&lt;body>
 &lt;article>
  &lt;header>
   &lt;h1>Ratatouille wins &lt;i>Best Movie of the Year&lt;/i> award&lt;/h1>
   &lt;p><strong>&lt;img src="movies.png" alt="Movies"></strong>&lt;/p>
  &lt;/header>
  &lt;p>Pixar has won yet another &lt;i>Best Movie of the Year&lt;/i> award,
  making this its 8th win in the last 12 years.&lt;/p>
 &lt;/article>
 &lt;article>
  &lt;header>
   &lt;h1>Latest TWiT episode is online&lt;/h1>
   &lt;p><strong>&lt;img src="podcasts.png" alt="Podcasts"></strong>&lt;/p>
  &lt;/header>
  &lt;p>The latest TWiT episode has been posted, in which we hear
  several tech news stories as well as learning much more about the
  iPhone. This week, the panelists compare how reflective their
  iPhones' Apple logos are.&lt;/p>
 &lt;/article>
&lt;/body></pre>

  </div>

  <p>许多页面包含标志（Logo），徽章，旗帜或徽记，代表某个特定实体，如公司，组织，项目，乐队，软件包，国家或某些特定实体。</p>

  <p>如果标志（Logo）被用于表示实体，例如作为页面标题。
  <code id=a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos:attr-img-alt-4><a href=embedded-content.html#attr-img-alt>alt</a></code> 属性必须包含由徽标表示的实体的名称。
  <code id=a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos:attr-img-alt-5><a href=embedded-content.html#attr-img-alt>alt</a></code> 属性 <em>不得</em> 包含类似 “logo” 的文字，因为它传达的不是标志，而是实体本身。</p>

  <p>如果标志（Logo）用在它表示的实体的名字旁边，那这个标志就是补充性的，
  其 <code id=a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos:attr-img-alt-6><a href=embedded-content.html#attr-img-alt>alt</a></code> 属性必须为空。</p>

  <p>如果标志（Logo）仅用作装饰材料（例如品牌标识，或者例如，作为提及徽标所属实体的文章中的配图），那么它适用下文的纯粹装饰性图片的条目。
  如果实际上讨论的就是标志，那么它就用作了短语或段落（徽标的描述）并且有替代的图形表示（徽标本身），它适用上面的第一个条目。</p>

  <div class=example>

   <p>在下面的代码片段中，上面四种情况都存在。首先这个标志用于表示一个公司：</p>

   <pre>&lt;h1><strong>&lt;img src="XYZ.gif" alt="The XYZ company"></strong>&lt;/h1></pre>

   <p>然后下面的段落中，在公司名旁边使用标志，所以没有替代文本：

   <pre>&lt;article>
 &lt;h2>News&lt;/h2>
 &lt;p>We have recently been looking at buying the <strong>&lt;img src="alpha.gif"
 alt=""> ΑΒΓ company</strong>, a small Greek company
 specializing in our type of product.&lt;/p></pre>

   <p>在这第三个代码片段中，在边栏中有一个标志，作为一个大的讨论并购的文章的一部分：</p>

<pre> <strong>&lt;aside>&lt;p>&lt;img src="alpha-large.gif" alt="">&lt;/p>&lt;/aside></strong>
 &lt;p>The ΑΒΓ company has had a good quarter, and our
 pie chart studies of their accounts suggest a much bigger blue slice
 than its green and orange slices, which is always a good sign.&lt;/p>
&lt;/article></pre>

   <p>最后，我们有一个意见部分谈论一个标志，因此在替代文本中细致地描述了这个标志。</p>

   <pre>&lt;p>Consider for a moment their logo:&lt;/p>

<strong>&lt;p>&lt;img src="/images/logo" alt="It consists of a green circle with a
green question mark centered inside it.">&lt;/p></strong>

&lt;p>How unoriginal can you get? I mean, oooooh, a question mark, how
&lt;em>revolutionary&lt;/em>, how utterly &lt;em>ground-breaking&lt;/em>, I'm
sure everyone will rush to adopt those specifications now! They could
at least have tried for some sort of, I don't know, sequence of
rounded squares with varying shades of green and bold white outlines,
at least that would look good on the cover of a blue book.&lt;/p></pre>

   <p>图片 <i id=a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos:img-available><a href=#img-available>不可用</a></i> 时就会使用文本。
   这个例子展示了替代文本应该怎样写，使得这些文本可以无缝地嵌入周围的文本，
   就像那里从来没有图片一样。</p>

  </div>



  <h6 id=text-that-has-been-rendered-to-a-graphic-for-typographical-effect><span class=secno>4.8.4.4.5</span> Text that has been rendered to a graphic for typographical effect<a href=#text-that-has-been-rendered-to-a-graphic-for-typographical-effect class=self-link></a></h6>
<div data-zh-date="" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/embedded-content/images/requirements-for-providing-text-to-act-as-an-alternative-for-images/text-that-has-been-rendered-to-a-graphic-for-typographical-effect.zh.html?filename=text-that-has-been-rendered-to-a-graphic-for-typographical-effect.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fembedded-content%2Fimages%2Frequirements-for-providing-text-to-act-as-an-alternative-for-images%2Ftext-that-has-been-rendered-to-a-graphic-for-typographical-effect.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/embedded-content/images/requirements-for-providing-text-to-act-as-an-alternative-for-images/text-that-has-been-rendered-to-a-graphic-for-typographical-effect.en.html></div>

  <p>Sometimes, an image just consists of text, and the purpose of the image is not to highlight the
  actual typographic effects used to render the text, but just to convey the text itself.</p>

  <p>In such cases, the <code id=text-that-has-been-rendered-to-a-graphic-for-typographical-effect:attr-img-alt><a href=embedded-content.html#attr-img-alt>alt</a></code> attribute must be present but must
  consist of the same text as written in the image itself.</p>

  <div class=example>

   <p>Consider a graphic containing the text "Earth Day", but with the letters all decorated with
   flowers and plants. If the text is merely being used as a heading, to spice up the page for
   graphical users, then the correct alternative text is just the same text "Earth Day", and no
   mention need be made of the decorations:</p>

   <pre><code class=html>&lt;h1><strong>&lt;img src="earthdayheading.png" alt="Earth Day"></strong>&lt;/h1></code></pre>

  </div>

  <div class=example>

   <p>An illuminated manuscript might use graphics for some of its images. The alternative text in
   such a situation is just the character that the image represents.</p>

   <pre><code class=html>&lt;p>&lt;img src="initials/o.svg" alt="O">nce upon a time and a long long time ago, late at
night, when it was dark, over the hills, through the woods, across a great ocean, in a land far
away, in a small house, on a hill, under a full moon...</code></pre> 

  </div>

  <p>When an image is used to represent a character that cannot otherwise be represented in Unicode,
  for example gaiji, itaiji, or new characters such as novel currency symbols, the alternative text
  should be a more conventional way of writing the same thing, e.g. using the phonetic hiragana or
  katakana to give the character's pronunciation.</p>

  <div class=example>

   <p>In this example from 1997, a new-fangled currency symbol that looks like a curly E with two
   bars in the middle instead of one is represented using an image. The alternative text gives the
   character's pronunciation.</p>

   <pre><code class=html>&lt;p>Only &lt;img src="euro.png" alt="euro ">5.99!</code></pre>

  </div>

  <p>An image should not be used if characters would serve an identical purpose. Only when the text
  cannot be directly represented using text, e.g., because of decorations or because there is no
  appropriate character (as in the case of gaiji), would an image be appropriate.</p>

  <p class=note>If an author is tempted to use an image because their default system font does not
  support a given character, then web Fonts are a better solution than images.</p>




  <h6 id=a-graphical-representation-of-some-of-the-surrounding-text><span class=secno>4.8.4.4.6</span> A graphical representation of some of the surrounding text<a href=#a-graphical-representation-of-some-of-the-surrounding-text class=self-link></a></h6>
<div data-zh-date="" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/embedded-content/images/requirements-for-providing-text-to-act-as-an-alternative-for-images/a-graphical-representation-of-some-of-the-surrounding-text.zh.html?filename=a-graphical-representation-of-some-of-the-surrounding-text.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fembedded-content%2Fimages%2Frequirements-for-providing-text-to-act-as-an-alternative-for-images%2Fa-graphical-representation-of-some-of-the-surrounding-text.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/embedded-content/images/requirements-for-providing-text-to-act-as-an-alternative-for-images/a-graphical-representation-of-some-of-the-surrounding-text.en.html></div>

  <p>In many cases, the image is actually just supplementary, and its presence merely reinforces the
  surrounding text. In these cases, the <code id=a-graphical-representation-of-some-of-the-surrounding-text:attr-img-alt><a href=embedded-content.html#attr-img-alt>alt</a></code> attribute must be
  present but its value must be the empty string.</p>

  <p>In general, an image falls into this category if removing the image doesn't make the page any
  less useful, but including the image makes it a lot easier for users of visual browsers to
  understand the concept.</p>

  <div class=example>

   <p>A flowchart that repeats the previous paragraph in graphical form:</p>

   <pre><code class=html>&lt;p>The Network passes data to the Input Stream Preprocessor, which
passes it to the Tokenizer, which passes it to the Tree Construction
stage. From there, data goes to both the DOM and to Script Execution.
Script Execution is linked to the DOM, and, using document.write(),
passes data to the Tokenizer.&lt;/p>
<strong>&lt;p>&lt;img src="images/parsing-model-overview.svg" alt="">&lt;/p></strong></code></pre>

   <p>In these cases, it would be wrong to include alternative text that consists of just a caption.
   If a caption is to be included, then either the <code id=a-graphical-representation-of-some-of-the-surrounding-text:attr-title><a href=dom.html#attr-title>title</a></code> attribute
   can be used, or the <code id=a-graphical-representation-of-some-of-the-surrounding-text:the-figure-element><a href=grouping-content.html#the-figure-element>figure</a></code> and <code id=a-graphical-representation-of-some-of-the-surrounding-text:the-figcaption-element><a href=grouping-content.html#the-figcaption-element>figcaption</a></code> elements can be used. In the
   latter case, the image would in fact be a phrase or paragraph with an alternative graphical
   representation, and would thus require alternative text.</p>

   <pre><code class=html>&lt;!-- Using the title="" attribute -->
&lt;p>The Network passes data to the Input Stream Preprocessor, which
passes it to the Tokenizer, which passes it to the Tree Construction
stage. From there, data goes to both the DOM and to Script Execution.
Script Execution is linked to the DOM, and, using document.write(),
passes data to the Tokenizer.&lt;/p>
&lt;p><strong>&lt;img src="images/parsing-model-overview.svg" alt=""
        title="Flowchart representation of the parsing model."></strong>&lt;/p></code></pre>

   <pre><code class=html>&lt;!-- Using &lt;figure> and &lt;figcaption> -->
&lt;p>The Network passes data to the Input Stream Preprocessor, which
passes it to the Tokenizer, which passes it to the Tree Construction
stage. From there, data goes to both the DOM and to Script Execution.
Script Execution is linked to the DOM, and, using document.write(),
passes data to the Tokenizer.&lt;/p>
&lt;figure>
 <strong>&lt;img src="images/parsing-model-overview.svg" alt="The Network leads to
 the Input Stream Preprocessor, which leads to the Tokenizer, which
 leads to the Tree Construction stage. The Tree Construction stage
 leads to two items. The first is Script Execution, which leads via
 document.write() back to the Tokenizer. The second item from which
 Tree Construction leads is the DOM. The DOM is related to the Script
 Execution."></strong>
 &lt;figcaption>Flowchart representation of the parsing model.&lt;/figcaption>
&lt;/figure></code></pre>

   <pre class=bad><code class=html>&lt;!-- This is WRONG. Do not do this. Instead, do what the above examples do. -->
&lt;p>The Network passes data to the Input Stream Preprocessor, which
passes it to the Tokenizer, which passes it to the Tree Construction
stage. From there, data goes to both the DOM and to Script Execution.
Script Execution is linked to the DOM, and, using document.write(),
passes data to the Tokenizer.&lt;/p>
&lt;p>&lt;img src="images/parsing-model-overview.svg"
        alt="Flowchart representation of the parsing model.">&lt;/p>
&lt;!-- Never put the image's caption in the alt="" attribute! --></code></pre>

  </div>

  <div class=example>

   <p>A graph that repeats the previous paragraph in graphical form:</p>

   <pre><code class=html>&lt;p>According to a study covering several billion pages,
about 62% of documents on the web in 2007 triggered the Quirks
rendering mode of web browsers, about 30% triggered the Almost
Standards mode, and about 9% triggered the Standards mode.&lt;/p>
<strong>&lt;p>&lt;img src="rendering-mode-pie-chart.png" alt="">&lt;/p></strong></code></pre>

  </div>




  <h6 id=ancillary-images><span class=secno>4.8.4.4.7</span> 辅助性图片<a href=#ancillary-images class=self-link></a></h6>
<div data-zh-date="Mon May 21 2018 10:30:26 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/the-elements-of-html/embedded-content/images/requirements-for-providing-text-to-act-as-an-alternative-for-images/ancillary-images.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/embedded-content/images/requirements-for-providing-text-to-act-as-an-alternative-for-images/ancillary-images.en.html></div>

  <p>有些图片对内容不那么重要，可能是纯粹装饰性图片，也可能与文本完全冗余。
  这些情况下，<code id=ancillary-images:attr-img-alt><a href=embedded-content.html#attr-img-alt>alt</a></code> 属性也必须存在，它的值应该是空字符串，
  或者是一个图片传达的信息的文本表示。如果图片的标题部分给出了图片标题，那么
  <code id=ancillary-images:attr-img-alt-2><a href=embedded-content.html#attr-img-alt>alt</a></code> 属性值不得为空（因为那可能会让非视觉媒体的读者感到困惑）。</p>

  <div class=example>

   <p>考虑一篇关于政治人物的新文章，其中的图片显示了人物的面部，通过样式表浮动到右侧。
   这张图片就不是纯装饰性的，因为它与故事相关。这张图片也不完全与故事冗余，因为它显示了政客的长相。
   是否提供替代文本取决于作者，也部分取决于这张图片是否对文章起到润色的作用。</p>

   <p>下面第一个例子中，图片没有上下文也没有替代文本：</p>

   <pre>&lt;p><strong>&lt;img src="alexsalmond.jpeg" alt=""></strong> Ahead of today's referendum,
the First Minister of Scotland, Alex Salmond, wrote an open letter to all
registered voters. In it, he admitted that all countries make mistakes.&lt;/p></pre>

   <p>如果图片只是一张脸，可能没有必要描述它。
   读者完全不关心他的头发是红色还是棕色，白皮肤或黑皮肤，有一个眼睛还是两个眼睛。</p>

   <p>但是如果图片更加动态，比如显示了政客很生气，或者非常开心，或者很颓废，
   可能就应该加一些替代文本来给文章一个基调。如果没有替代文本可能这个基调就会被读者遗漏。</p>

   <pre>&lt;p><strong>&lt;img src="alexsalmond.jpeg" alt="Alex Salmond is sad."></strong>
Ahead of today's referendum, the First Minister of Scotland, Alex Salmond,
wrote an open letter to all registered voters. In it, he admitted that all
countries make mistakes.&lt;/p></pre>

   <pre>&lt;p><strong>&lt;img src="alexsalmond.jpeg" alt="Alex Salmond is ecstatic!"></strong>
Ahead of today's referendum, the First Minister of Scotland, Alex Salmond,
wrote an open letter to all registered voters. In it, he admitted that all
countries make mistakes.&lt;/p></pre>

   <p>任务是 "伤心" 还是 "高兴" 会影响后续段落的解读：
   他可能是说由于即将举行的公民投票会对他不利而向民众辞职，
   也可能是说这次选举出了一些问题，但是接下来的投票率可能使它变得无关紧要。
   解读因图片内容而异。</p>

  </div>

  <div class=example>

   <p>如果该图片有标题部分，那么包含一段替代文本可以避免让非视觉媒体的用户困惑标题指代的内容。</p>

   <pre>&lt;p>Ahead of today's referendum, the First Minister of Scotland, Alex Salmond,
wrote an open letter to all registered voters. In it, he admitted that all
countries make mistakes.&lt;/p>
<strong>&lt;figure>
 &lt;img src="alexsalmond.jpeg"
      alt="A high forehead, cheerful disposition, and dark hair round out Alex Salmond's face.">
 &lt;figcaption> Alex Salmond, SNP. Photo © 2014 PolitiPhoto. &lt;/figcaption>
&lt;/figure></strong></pre>

  </div>




  <h6 id="a-purely-decorative-image-that-doesn't-add-any-information"><span class=secno>4.8.4.4.8</span> 不提供任何信息的纯装饰性图片<a href="#a-purely-decorative-image-that-doesn't-add-any-information" class=self-link></a></h6>
<div data-zh-date="Thu May 24 2018 01:36:45 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/the-elements-of-html/embedded-content/images/requirements-for-providing-text-to-act-as-an-alternative-for-images/a-purely-decorative-image-that-doesnt-add-any-information.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/embedded-content/images/requirements-for-providing-text-to-act-as-an-alternative-for-images/a-purely-decorative-image-that-doesnt-add-any-information.en.html></div>

  <p>如果图片是装饰性的而且不是页面特定的 — 比如这个图片作为站点设计的一部分。
  — 那么这个图片应该通过站点 CSS 来指定，而不是写在文档标记中。</p>

  <p>但是如果一张图片没有在周围的文字中加以讨论，但仍然有些关联，也可以使用
  <code id="a-purely-decorative-image-that-doesn't-add-any-information:the-img-element"><a href=embedded-content.html#the-img-element>img</a></code> 元素把它包含在页面中。这样的图片的 <code id="a-purely-decorative-image-that-doesn't-add-any-information:attr-img-alt"><a href=embedded-content.html#attr-img-alt>alt</a></code>
  属性必须存在而且值必须是空字符串。</p>

  <div class=example>

   <p>有些关联的纯装饰性图片的例子比如，一篇介绍在 Burning Man 发生的事件的博文会引入一张
   Black Rock City 景色的照片，或者在显示诗歌的页面上引入一张受这首诗启发的绘画作品。
   下面的代码片段是第二种情况的例子（代码中只引入了诗歌的第一小节）：</p>

   <pre>&lt;h1>The Lady of Shalott&lt;/h1>
<strong>&lt;p>&lt;img src="shalott.jpeg" alt="">&lt;/p></strong>
&lt;p>On either side the river lie&lt;br>
Long fields of barley and of rye,&lt;br>
That clothe the wold and meet the sky;&lt;br>
And through the field the road run by&lt;br>
To many-tower'd Camelot;&lt;br>
And up and down the people go,&lt;br>
Gazing where the lilies blow&lt;br>
Round an island there below,&lt;br>
The island of Shalott.&lt;/p></pre>

  </div>



  <h6 id=a-group-of-images-that-form-a-single-larger-picture-with-no-links><span class=secno>4.8.4.4.9</span> 组成但个没有链接的大图的图片组<a href=#a-group-of-images-that-form-a-single-larger-picture-with-no-links class=self-link></a></h6>
<div data-zh-date="Thu May 24 2018 01:36:45 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/the-elements-of-html/embedded-content/images/requirements-for-providing-text-to-act-as-an-alternative-for-images/a-group-of-images-that-form-a-single-larger-picture-with-no-links.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/embedded-content/images/requirements-for-providing-text-to-act-as-an-alternative-for-images/a-group-of-images-that-form-a-single-larger-picture-with-no-links.en.html></div>

  <p>当一张图片被切分为若干个小图片文件，用来拼装成原来的大图时，这些图片中要有一个的
  <code id=a-group-of-images-that-form-a-single-larger-picture-with-no-links:attr-img-alt><a href=embedded-content.html#attr-img-alt>alt</a></code> 属性按照相关规则设置为大图的替代文本。
  然后其他所有剩余图片必须把 <code id=a-group-of-images-that-form-a-single-larger-picture-with-no-links:attr-img-alt-2><a href=embedded-content.html#attr-img-alt>alt</a></code> 属性设为空字符串。</p>

  <div class=example>

   <p>下面的例子中，表示 <span>XYZ Corp</span> 公司 Logo 的图片被分为两部分，
   第一个包含字母 "XYZ" 第二个包含单词 "Corp"。
   都包含在了第一个图片的替代文本（"XYZ Corp"）中。</p>

   <pre>&lt;h1><strong>&lt;img src="logo1.png" alt="XYZ Corp">&lt;img src="logo2.png" alt=""></strong>&lt;/h1></pre>

  </div>

  <div class=example>

   <p>下面的例子中，评分显示为三颗星星和两颗空星。
   虽然替代文本可以是 "★★★☆☆"，但作者决定提供更有帮助的评分格式比如
   "3 / 5"。它设置为第一个图片的替代文本。其他图片的替代文本为空。</p>

   <pre>&lt;p>Rating: &lt;meter max=5 value=3><strong>&lt;img src="1" alt="3 out of 5"
  >&lt;img src="1" alt="">&lt;img src="1" alt="">&lt;img src="0" alt=""
  >&lt;img src="0" alt=""></strong>&lt;/meter>&lt;/p></pre>

  </div>




  <h6 id=a-group-of-images-that-form-a-single-larger-picture-with-links><span class=secno>4.8.4.4.10</span> 组成单个有链接的大图的图片组<a href=#a-group-of-images-that-form-a-single-larger-picture-with-links class=self-link></a></h6>
<div data-zh-date="Thu May 24 2018 01:36:45 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/the-elements-of-html/embedded-content/images/requirements-for-providing-text-to-act-as-an-alternative-for-images/a-group-of-images-that-form-a-single-larger-picture-with-links.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/embedded-content/images/requirements-for-providing-text-to-act-as-an-alternative-for-images/a-group-of-images-that-form-a-single-larger-picture-with-links.en.html></div>

  <p>通常带连接的图片应该使用 <a href=image-maps.html#image-map id=a-group-of-images-that-form-a-single-larger-picture-with-links:image-map>图片映射</a> 而不是切分图片。</p>

  <p>但是，如果图片确实已经被切分了，而且切分后的部分是链接的唯一内容，
  那么每个链接必须有一个图片必须把它的 <code id=a-group-of-images-that-form-a-single-larger-picture-with-links:attr-img-alt><a href=embedded-content.html#attr-img-alt>alt</a></code>
  属性设置为表示链接用途的替代文本。</p>

  <div class=example>

   <p>下面的例子是一张表示飞行面条怪物徽章的图片，左右两侧的面条状物是单独的两张图片，
   这样用户就可以在探险中选择左右两侧的图片了。</p>

   <pre>&lt;h1>The Church&lt;/h1>
&lt;p>You come across a flying spaghetti monster. Which side of His
Noodliness do you wish to reach out for?&lt;/p>
<strong>&lt;p>&lt;a href="?go=left" >&lt;img src="fsm-left.png"  alt="Left side. ">&lt;/a
  >&lt;img src="fsm-middle.png" alt=""
  >&lt;a href="?go=right">&lt;img src="fsm-right.png" alt="Right side.">&lt;/a>&lt;/p></strong></pre>

  </div>




  <h6 id=a-key-part-of-the-content><span class=secno>4.8.4.4.11</span> 内容的关键部分<a href=#a-key-part-of-the-content class=self-link></a></h6>
<div data-zh-date="Thu May 24 2018 01:36:45 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/the-elements-of-html/embedded-content/images/requirements-for-providing-text-to-act-as-an-alternative-for-images/a-key-part-of-the-content.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/embedded-content/images/requirements-for-providing-text-to-act-as-an-alternative-for-images/a-key-part-of-the-content.en.html></div>

  <p>有些情况下，图片是内容的关键部分。比如照片库页面中的图片就是这样的情况。
  这时图片就是包含它的页面的重点。</p>

  <p>如何为内容关键的图片提供替代文本取决于图片的出处。</p>

  <dl><dt>通常情况<dd>

    <p>如果可以提供详细的替代文本，如果图像是杂志评论中的一系列截图的一部分，或者是连环漫画的一部分，
    或者是关于该照片的博客文章中的那个照片，则必须通过 <code id=a-key-part-of-the-content:attr-img-alt><a href=embedded-content.html#attr-img-alt>alt</a></code>
    属性给出替代图片的文字。</p>

    <div class=example>

     <p>新操作系统的屏幕截图，其中包含一些替代文字：</p>

     <pre>&lt;figure>
 <strong>&lt;img src="KDE%20Light%20desktop.png"
      alt="The desktop is blue, with icons along the left hand side in
           two columns, reading System, Home, K-Mail, etc. A window is
           open showing that menus wrap to a second line if they
           cannot fit in the window. The window has a list of icons
           along the top, with an address bar below it, a list of
           icons for tabs along the left edge, a status bar on the
           bottom, and two panes in the middle. The desktop has a bar
           at the bottom of the screen with a few buttons, a pager, a
           list of open applications, and a clock."></strong>
 &lt;figcaption>Screenshot of a KDE desktop.&lt;/figcaption>
&lt;/figure></pre>

    </div>

    <div class=example>

     <p>财务报告中的图表：</p>

     <pre><strong>&lt;img src="sales.gif"
     title="Sales graph"
     alt="From 1998 to 2005, sales increased by the following percentages
     with each year: 624%, 75%, 138%, 40%, 35%, 9%, 21%"></strong></pre>

     <p>请注意，“销售图”对于销售图而言是不充分的替代文本。
     做 <em>标题</em> 很好的文本通常不适合做替代文本。</p>

    </div>

   <dt>难以提供完整描述的图片<dd>

    <p>有些情况下图片的特性决定了提供完整的替代文本不现实。
    例如，图像可能模糊不清，或者可能是复杂的分形，或者可能是详细的地形图。</p>

    <p>这些情况下 <code id=a-key-part-of-the-content:attr-img-alt-2><a href=embedded-content.html#attr-img-alt>alt</a></code> 属性也必须包含一些适当的替代文本，
    但可以比较简短。</p>

    <div class=example>

     <p>有时候根本无法用文字对图片做出正确的描述。例如对罗夏墨迹测验就无法提供有用的描述。
     但是，即使是一个简单的描述也比什么都没有要好：</p>

     <pre>&lt;figure>
 <strong>&lt;img src="/commons/a/a7/Rorschach1.jpg" alt="A shape with left-right
 symmetry with indistinct edges, with a small gap in the center, two
 larger gaps offset slightly from the center, with two similar gaps
 under them. The outline is wider in the top half than the bottom
 half, with the sides extending upwards higher than the center, and
 the center extending below the sides."></strong>
 &lt;figcaption>A black outline of the first of the ten cards
 in the Rorschach inkblot test.&lt;/figcaption>
&lt;/figure></pre>

     <p>注意下面是一个替代文本的非常糟糕的使用方式：</p>

     <pre class=bad>&lt;!-- This example is wrong. Do not copy it. -->
&lt;figure>
 &lt;img src="/commons/a/a7/Rorschach1.jpg" alt="A black outline
 of the first of the ten cards in the Rorschach inkblot test.">
 &lt;figcaption>A black outline of the first of the ten cards
 in the Rorschach inkblot test.&lt;/figcaption>
&lt;/figure></pre>

     <p>这样把标题放到替代文字中根本没用，因为对于没有图片的用户它只是重复了标题，
     相比于只读到或听到一次标题，再来重复一次根本不会有任何帮助。</p>

    </div>

    <div class=example>

     <p>无法描述的图片的另一个例子是分型，根据定义它的细节是无限的。</p>

     <p>下面的例子展示了为曼德博集合提供替代文字的一种可能的方式。</p>

     <pre><strong>&lt;img src="ms1.jpeg" alt="The Mandelbrot set appears as a cardioid with
its cusp on the real axis in the positive direction, with a smaller
bulb aligned along the same center line, touching it in the negative
direction, and with these two shapes being surrounded by smaller bulbs
of various sizes."></strong></pre>

    </div>

    <div class=example>

     <p>类似地，在生物学中人脸的照片也是内容的关键部分，也很难完全用文字替代：</p>

     <pre>&lt;section class="bio">
 &lt;h1>A Biography of Isaac Asimov&lt;/h1>
 &lt;p>Born &lt;b>Isaak Yudovich Ozimov&lt;/b> in 1920, Isaac was a prolific author.&lt;/p>
 &lt;p>&lt;img src="headpics/asimov.jpeg" alt="Isaac Asimov had dark hair, a tall forehead, and wore glasses.
 Later in life, he wore long white sideburns.">
 &lt;p>Asimov was born in Russia, and moved to the US when he was three years old.&lt;/p>
 &lt;p>...
&lt;/section></pre>

     <p>在这样的情况下，在替代文本中引述图片本身是不必要的（并且实际上不鼓励），
     因为这样的文本与浏览器自身的图片报告是冗余的。
     例如，如果替代文本是“Isaac Asimov的照片”，那么标准的用户代理可能将其读作
     “（Image）Isaac Asimov 的照片” 而不是（更有用）
     “（Image）Isaac Asimov 是黑发 ，额头很高，戴着眼镜......”。</p>

    </div>

   <dt id=unknown-images>未知内容的图片<dd>

    <p>有些情况比较不幸，根本没有替代文字。可能是因为图片是动态获取的且没有关联的替代文本
    （比如 Web 摄像头），也可能因为页面是由用户提供的图片通过脚本生成的，
    而用户并没有提供合适的可用替代文本（例如照片分享站点），
    也可能是因为作者自己不知道图片表示着什么（比如一个盲人摄影师在博客上分享了一张图片）。</p>

    <p>这种情况下，<code id=a-key-part-of-the-content:attr-img-alt-3><a href=embedded-content.html#attr-img-alt>alt</a></code> 属性可以忽略，但必须符合以下条件之一：</p>

    <ul><li id=figcaption-as-alt-condition><p><code id=a-key-part-of-the-content:the-img-element><a href=embedded-content.html#the-img-element>img</a></code> 元素在
     包含 <code id=a-key-part-of-the-content:the-figcaption-element><a href=grouping-content.html#the-figcaption-element>figcaption</a></code> 的 <code id=a-key-part-of-the-content:the-figure-element><a href=grouping-content.html#the-figure-element>figure</a></code> 元素中，
     且这个 <code id=a-key-part-of-the-content:the-figcaption-element-2><a href=grouping-content.html#the-figcaption-element>figcaption</a></code> 元素包含除
     <a href=dom.html#inter-element-whitespace id=a-key-part-of-the-content:inter-element-whitespace>元素间空白</a> 的内容，
     而且忽略 <code id=a-key-part-of-the-content:the-figcaption-element-3><a href=grouping-content.html#the-figcaption-element>figcaption</a></code> 元素及其后代节点后， <code id=a-key-part-of-the-content:the-figure-element-2><a href=grouping-content.html#the-figure-element>figure</a></code> 元素没有其他
     <a href=dom.html#flow-content id=a-key-part-of-the-content:flow-content>流式内容</a> 后代，
     <a href=dom.html#inter-element-whitespace id=a-key-part-of-the-content:inter-element-whitespace-2>元素间空白</a> 和 <code id=a-key-part-of-the-content:the-img-element-2><a href=embedded-content.html#the-img-element>img</a></code> 元素除外。<li>

      <p><code id=a-key-part-of-the-content:attr-title><a href=dom.html#attr-title>title</a></code> 属性存在且值非空。</p>

      
      <p class=note>目前不推荐依赖 <code id=a-key-part-of-the-content:attr-title-2><a href=dom.html#attr-title>title</a></code> 属性，
      因为很多用户代理不会按照标准把这个属性暴露给用户
      （例如用户代理会要求比如鼠标这样的指点设备才能显示提示内容，
      这排除了纯键盘用户和触摸设备用户，比如任何拥有现代手机和平板的用户。）</p>

     </ul>

    <p class=note>这种情况应该保持在最低限度。只要作者有能力提供真正的替代文本，
    那么忽略 <code id=a-key-part-of-the-content:attr-img-alt-4><a href=embedded-content.html#attr-img-alt>alt</a></code> 属性就是不可接受的。</p>

    <div class=example>

     <p>如果一个照片分享网站收到图片时除了标题没有其他任何元数据，
     这个照片可以这样标记：</p>

     <pre>&lt;figure>
 <strong>&lt;img src="1100670787_6a7c664aef.jpg"></strong>
 &lt;figcaption>Bubbles traveled everywhere with us.&lt;/figcaption>
&lt;/figure></pre>

     <p>当然如果能详细描述图片的重要部分，并通过替代文本提供出来会更好。</p>

    </div>

    <div class=example>

     <p>一个盲人的博客中，显示了一张用户拍的照片。刚开始用户可能不知道他们拍的照片上有什么：</p>

     <pre>&lt;article>
 &lt;h1>I took a photo&lt;/h1>
 &lt;p>I went out today and took a photo!&lt;/p>
 &lt;figure>
  <strong>&lt;img src="photo2.jpeg"></strong>
  &lt;figcaption>A photograph taken blindly from my front porch.&lt;/figcaption>
 &lt;/figure>
&lt;/article></pre>

     <p>最后如果用户从他们的朋友那里得到了图片的描述，他们就可以包含一些替代文本：</p>

     <pre>&lt;article>
 &lt;h1>I took a photo&lt;/h1>
 &lt;p>I went out today and took a photo!&lt;/p>
 &lt;figure>
  <strong>&lt;img src="photo2.jpeg" alt="The photograph shows my squirrel
  feeder hanging from the edge of my roof. It is half full, but there
  are no squirrels around. In the background, out-of-focus trees fill the
  shot. The feeder is made of wood with a metal grate, and it contains
  peanuts. The edge of the roof is wooden too, and is painted white
  with light blue streaks."></strong>
  &lt;figcaption>A photograph taken blindly from my front porch.&lt;/figcaption>
 &lt;/figure>
&lt;/article></pre>

    </div>

    <div class=example>

     <p>有时图片的整个意义就是没有文本描述，要用户为它提供描述。
     例如，CAPTCHA 图片的目的就是看用户能否从用文字描述图形。
     下面是标记 CAPTCHA 的一种方式（注意 <code id=a-key-part-of-the-content:attr-title-3><a href=dom.html#attr-title>title</a></code> 属性）：</p>

     <pre>&lt;p>&lt;label>What does this image say?
<strong>&lt;img src="captcha.cgi?id=8934" title="CAPTCHA"></strong>
&lt;input type=text name=captcha>&lt;/label>
(If you cannot see the image, you can use an &lt;a
href="?audio">audio&lt;/a> test instead.)&lt;/p></pre>

     <p>另一个例子是显示图片并询问替代文本的软件，这些文本之后会被写入到页面中。
     这样的页面可能会有一个图片表格，像这样：</p>

     <pre>&lt;table>
 &lt;thead>
  &lt;tr> &lt;th> Image &lt;th> Description
 &lt;tbody>
  &lt;tr>
   &lt;td> <strong>&lt;img src="2421.png" title="Image 640 by 100, filename 'banner.gif'"></strong>
   &lt;td> &lt;input name="alt2421">
  &lt;tr>
   &lt;td> <strong>&lt;img src="2422.png" title="Image 200 by 480, filename 'ad3.gif'"></strong>
   &lt;td> &lt;input name="alt2422">
&lt;/table></pre>

     <p>注意即使在这个例子中，在 <code id=a-key-part-of-the-content:attr-title-4><a href=dom.html#attr-title>title</a></code>
     属性中还是提供了尽可能多的有用信息。</p>

    </div>

    <p class=note>因为有些用户根本不能使用照片
    （比如因为他们的网络很慢，或因为他们在使用文本浏览器，或者因为他们正在听汽车的语音 Web
    浏览器阅读页面内容，或者只是因为他们是盲人），
    只在没有可用的替代文本而且没人可以提供时，才允许忽略 <code id=a-key-part-of-the-content:attr-img-alt-5><a href=embedded-content.html#attr-img-alt>alt</a></code> 属性。
    作者没有付出努力不是一个可以接受的理由。</p>

   </dl>




  <h6 id=an-image-not-intended-for-the-user><span class=secno>4.8.4.4.12</span> 不是给用户看的图片<a href=#an-image-not-intended-for-the-user class=self-link></a></h6>
<div data-zh-date="Mon May 21 2018 10:30:26 GMT+0000 (UTC)" data-en-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/the-elements-of-html/embedded-content/images/requirements-for-providing-text-to-act-as-an-alternative-for-images/an-image-not-intended-for-the-user.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/embedded-content/images/requirements-for-providing-text-to-act-as-an-alternative-for-images/an-image-not-intended-for-the-user.en.html></div>

  <p>通常作者应该避免使用不用来显示的 <code id=an-image-not-intended-for-the-user:the-img-element><a href=embedded-content.html#the-img-element>img</a></code> 元素。</p>

  <p>如果一个 <code id=an-image-not-intended-for-the-user:the-img-element-2><a href=embedded-content.html#the-img-element>img</a></code> 元素不是用于显示的，比如用于计算页面浏览量的服务。
  那么 <code id=an-image-not-intended-for-the-user:attr-img-alt><a href=embedded-content.html#attr-img-alt>alt</a></code> 属性必须为空字符串。</p>

  <p>在这些场景下，<code id=an-image-not-intended-for-the-user:attr-dim-width><a href=embedded-content-other.html#attr-dim-width>width</a></code> 和 <code id=an-image-not-intended-for-the-user:attr-dim-height><a href=embedded-content-other.html#attr-dim-height>height</a></code> 属性必须设为 0。</p>



  <h6 id=an-image-in-an-e-mail-or-private-document-intended-for-a-specific-person-who-is-known-to-be-able-to-view-images><span class=secno>4.8.4.4.13</span> An image in an email or private document intended for a specific person who is known to be able to view images<a href=#an-image-in-an-e-mail-or-private-document-intended-for-a-specific-person-who-is-known-to-be-able-to-view-images class=self-link></a></h6>
<div data-zh-date="" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/embedded-content/images/requirements-for-providing-text-to-act-as-an-alternative-for-images/an-image-in-an-email-or-private-document-intended-for-a-specific-person-who-is-known-to-be-able-to-view-images.zh.html?filename=an-image-in-an-email-or-private-document-intended-for-a-specific-person-who-is-known-to-be-able-to-view-images.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fembedded-content%2Fimages%2Frequirements-for-providing-text-to-act-as-an-alternative-for-images%2Fan-image-in-an-email-or-private-document-intended-for-a-specific-person-who-is-known-to-be-able-to-view-images.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/embedded-content/images/requirements-for-providing-text-to-act-as-an-alternative-for-images/an-image-in-an-email-or-private-document-intended-for-a-specific-person-who-is-known-to-be-able-to-view-images.en.html></div>

  <p><i>This section does not apply to documents that are publicly accessible, or whose target
  audience is not necessarily personally known to the author, such as documents on a web site,
  emails sent to public mailing lists, or software documentation.</i></p>

  <p>When an image is included in a private communication (such as an HTML email) aimed at a
  specific person who is known to be able to view images, the <code id=an-image-in-an-e-mail-or-private-document-intended-for-a-specific-person-who-is-known-to-be-able-to-view-images:attr-img-alt><a href=embedded-content.html#attr-img-alt>alt</a></code>
  attribute may be omitted. However, even in such cases authors are strongly urged to include
  alternative text (as appropriate according to the kind of image involved, as described in the
  above entries), so that the email is still usable should the user use a mail client that does not
  support images, or should the document be forwarded on to other users whose abilities might not
  include easily seeing images.</p>




  


  <h6 id=guidance-for-markup-generators><span class=secno>4.8.4.4.14</span> Guidance for markup generators<a href=#guidance-for-markup-generators class=self-link></a></h6>
<div data-zh-date="" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/embedded-content/images/requirements-for-providing-text-to-act-as-an-alternative-for-images/guidance-for-markup-generators.zh.html?filename=guidance-for-markup-generators.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fembedded-content%2Fimages%2Frequirements-for-providing-text-to-act-as-an-alternative-for-images%2Fguidance-for-markup-generators.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/embedded-content/images/requirements-for-providing-text-to-act-as-an-alternative-for-images/guidance-for-markup-generators.en.html></div>

  <p>Markup generators (such as WYSIWYG authoring tools) should, wherever possible, obtain
  alternative text from their users. However, it is recognized that in many cases, this will not be
  possible.</p>

  <p>For images that are the sole contents of links, markup generators should examine the link
  target to determine the title of the target, or the URL of the target, and use information
  obtained in this manner as the alternative text.</p>

  <p>For images that have captions, markup generators should use the <code id=guidance-for-markup-generators:the-figure-element><a href=grouping-content.html#the-figure-element>figure</a></code> and
  <code id=guidance-for-markup-generators:the-figcaption-element><a href=grouping-content.html#the-figcaption-element>figcaption</a></code> elements, or the <code id=guidance-for-markup-generators:attr-title><a href=dom.html#attr-title>title</a></code> attribute, to
  provide the image's caption.</p>

  <p>As a last resort, implementers should either set the <code id=guidance-for-markup-generators:attr-img-alt><a href=embedded-content.html#attr-img-alt>alt</a></code>
  attribute to the empty string, under the assumption that the image is a purely decorative image
  that doesn't add any information but is still specific to the surrounding content, or omit the
  <code id=guidance-for-markup-generators:attr-img-alt-2><a href=embedded-content.html#attr-img-alt>alt</a></code> attribute altogether, under the assumption that the image is
  a key part of the content.</p>

  <p>Markup generators may specify a <dfn id=attr-img-generator-unable-to-provide-required-alt><code>generator-unable-to-provide-required-alt</code></dfn>
  attribute on <code id=guidance-for-markup-generators:the-img-element><a href=embedded-content.html#the-img-element>img</a></code> elements for which they have been unable to obtain alternative text
  and for which they have therefore omitted the <code id=guidance-for-markup-generators:attr-img-alt-3><a href=embedded-content.html#attr-img-alt>alt</a></code> attribute. The
  value of this attribute must be the empty string. Documents containing such attributes are not
  conforming, but conformance checkers will <a href=#guidance-for-conformance-checkers>silently
  ignore</a> this error.</p>

  <p class=note>This is intended to avoid markup generators from being pressured into replacing
  the error of omitting the <code id=guidance-for-markup-generators:attr-img-alt-4><a href=embedded-content.html#attr-img-alt>alt</a></code> attribute with the even more
  egregious error of providing phony alternative text, because state-of-the-art automated
  conformance checkers cannot distinguish phony alternative text from correct alternative text.</p>

  <p>Markup generators should generally avoid using the image's own file name as the alternative
  text. Similarly, markup generators should avoid generating alternative text from any content that
  will be equally available to presentation user agents (e.g., web browsers).</p>

  <p class=note>This is because once a page is generated, it will typically not be updated,
  whereas the browsers that later read the page can be updated by the user, therefore the browser is
  likely to have more up-to-date and finely-tuned heuristics than the markup generator did when
  generating the page.</p>

  

  


  <h6 id=guidance-for-conformance-checkers><span class=secno>4.8.4.4.15</span> 规范检查工具指引<a href=#guidance-for-conformance-checkers class=self-link></a></h6>
<div data-zh-date="Sat May 19 2018 09:02:08 GMT+0000 (UTC)" data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/the-elements-of-html/embedded-content/images/requirements-for-providing-text-to-act-as-an-alternative-for-images/guidance-for-conformance-checkers.zh.html data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/embedded-content/images/requirements-for-providing-text-to-act-as-an-alternative-for-images/guidance-for-conformance-checkers.en.html></div>

  <p>规范检查工具必须把缺少 <code id=guidance-for-conformance-checkers:attr-img-alt><a href=embedded-content.html#attr-img-alt>alt</a></code> 属性报告为错误，
  符合以下条件之一的情形除外：</p>

  <ul><li><p>该 <code id=guidance-for-conformance-checkers:the-img-element><a href=embedded-content.html#the-img-element>img</a></code> 元素在一个 <code id=guidance-for-conformance-checkers:the-figure-element><a href=grouping-content.html#the-figure-element>figure</a></code> 元素中，
   这个 <code id=guidance-for-conformance-checkers:the-figure-element-2><a href=grouping-content.html#the-figure-element>figure</a></code> 元素满足 <a href=#figcaption-as-alt-condition>上述条件</a>。<li><p>该 <code id=guidance-for-conformance-checkers:the-img-element-2><a href=embedded-content.html#the-img-element>img</a></code> 元素有一个 <code id=guidance-for-conformance-checkers:attr-title><a href=dom.html#attr-title>title</a></code> 属性，
   其值不是空字符串（<a href=#unknown-images>描述如上</a>）。<li><p>规范检查工具的配置中声明了，该文档是一封邮件，或该文档的受众是特定的肯定可以查看图片的人。<li><p><code id=guidance-for-conformance-checkers:the-img-element-3><a href=embedded-content.html#the-img-element>img</a></code> 元素有一个 (不合规范的)
   <code id=guidance-for-conformance-checkers:attr-img-generator-unable-to-provide-required-alt><a href=#attr-img-generator-unable-to-provide-required-alt>generator-unable-to-provide-required-alt</a></code>
   属性其值为非空字符串。规范检查工具如果不把缺失
   <code id=guidance-for-conformance-checkers:attr-img-alt-2><a href=embedded-content.html#attr-img-alt>alt</a></code> 属性报告为错误，也必须不把空的
   <code id=guidance-for-conformance-checkers:attr-img-generator-unable-to-provide-required-alt-2><a href=#attr-img-generator-unable-to-provide-required-alt>generator-unable-to-provide-required-alt</a></code>
   属性报告为错误。
   （该情况并不代表文档符合规范，只是说生成器不能够确定合适的替代文本 —
   所以不要求验证器在这种情况下显示错误。因为这会鼓励标签生成器为了禁用检查工具报错而引入假的替代文本。
   正常情况下，规范检查工具 <em>可以</em> 把缺失 <code id=guidance-for-conformance-checkers:attr-img-alt-3><a href=embedded-content.html#attr-img-alt>alt</a></code> 属性报告为错误，
   即使指定了 <code id=guidance-for-conformance-checkers:attr-img-generator-unable-to-provide-required-alt-3><a href=#attr-img-generator-unable-to-provide-required-alt>generator-unable-to-provide-required-alt</a></code>
   属性；例如可能有一个用户选项是报告 <em>所有</em> 规范错误，
   即使这些错误可能是使用标记生成器或多或少不可避免的。）</ul>

  



  <nav><a href=embedded-content.html>← 4.8 嵌入内容</a> — <a href=./>Table of Contents</a> — <a href=iframe-embed-object.html>4.8.5 The
  iframe element →</a></nav>
<script src=/html/resources/zh-cn.js></script>
