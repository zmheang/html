<!DOCTYPE html><html class=split lang=en-US-x-hixie><script src=/link-fixup.js defer=""></script><meta charset=utf-8><meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name=viewport><title>HTML Standard, Developer's Edition</title><meta content=#3c790a name=theme-color><link rel=stylesheet href=https://resources.whatwg.org/standard-shared-with-dev.css crossorigin=""><link rel=icon href=https://resources.whatwg.org/logo.svg crossorigin=""><link rel=stylesheet href=/dev/styles.css crossorigin=""><script>
   function toggleStatus(div) {
     div.parentNode.classList.toggle('wrapped');
   }
   function setLinkFragment(link) {
     link.hash = location.hash;
   }
  </script><body>
  <script async="" src=/dev/search.js></script>
  
  
  
  <header id=head class="head with-buttons">
   <a href=https://whatwg.org/ class=logo><img width=100 alt=WHATWG crossorigin="" src=https://resources.whatwg.org/logo.svg height=100></a>
   
   <hgroup><h1><a rel=home href=/dev/>HTML: The Living Standard</a></h1><h2 id="developer's-edition-—-last-updated-date:-01-jan-1901" class="no-num no-toc">Developer's Edition — Last Updated <span class=pubdate>20 June 2021</span></h2><div data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/developers-edition-mdash-last-updated-date-01-jan-1901.en.html data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/developers-edition-mdash-last-updated-date-01-jan-1901.zh.html></div></hgroup>
   
   <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-91053840-1', 'auto');
      ga('send', 'pageview');
   </script>
  </header>

  

  


  
<div data-en-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" class=translate-info data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/table-of-contents.en.html data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/table-of-contents.zh.html></div>
  


  
<div data-en-date="Sat Aug 11 2018 08:00:56 GMT+0000 (UTC)" class=translate-info data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/full-table-of-contents.en.html data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/full-table-of-contents.zh.html></div>
  

  

  


  <h2 id=about-dev-edition class="no-num no-toc">关于本标准</h2>
<div data-en-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" class=translate-info data-zh-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/about-this-specification.en.html data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/about-this-specification.zh.html></div>

  <p>本标准与其他标准不同，它的处理完全考虑到了 Web 开发者。</p>

  <p>本标准关注可读性和可访问性，不像 <a href=/multipage/>完整的 HTML 标准</a>，"开发者版本" 移除了
  只有浏览器厂商需要知道的信息。它个版本是用我们的构建工具从完整的规范自动产出的，
  因此总会与最新开发的 HTML 保持同步。</p>

  <p>其概念、构造，以及未来可参考 <a href=http://web.archive.org/web/20150220020906/http://archive.germanforblack.com:80/articles/html5-for-web-developers>
  原始出版发行</a>，以及 <a href=https://blog.whatwg.org/developers-edition-comeback>关于重启该版本的博文</a>。</p>

  <p>最后，欢迎 <a href=https://github.com/whatwg/html/labels/dev%20edition>在 GitHub 贡献</a> 来改进该版本！</p>

  


  <nav><a href=scripting.html>← 4.12 脚本</a> — <a href=./>Table of Contents</a> — <a href=custom-elements.html>4.13 Custom elements →</a></nav><ol class=toc><li><ol><li><ol><li><a href=canvas.html#the-canvas-element><span class=secno>4.12.5</span> The <code>canvas</code> element</a><ol><li><a href=canvas.html#2dcontext><span class=secno>4.12.5.1</span> The 2D rendering context</a><ol><li><a href="canvas.html#Implementation notes"><span class=secno>4.12.5.1.1</span> 实现说明</a><li><a href=canvas.html#canvas-状态><span class=secno>4.12.5.1.2</span> Canvas 状态</a><li><a href=canvas.html#line-styles><span class=secno>4.12.5.1.3</span> Line styles</a><li><a href=canvas.html#text-styles><span class=secno>4.12.5.1.4</span> Text styles</a><li><a href=canvas.html#building-paths><span class=secno>4.12.5.1.5</span> Building paths</a><li><a href=canvas.html#path2d-objects><span class=secno>4.12.5.1.6</span> <code>Path2D</code> objects</a><li><a href=canvas.html#transformations><span class=secno>4.12.5.1.7</span> Transformations</a><li><a href=canvas.html#image-sources-for-2d-rendering-contexts><span class=secno>4.12.5.1.8</span> Image sources for 2D rendering contexts</a><li><a href=canvas.html#fill-and-stroke-styles><span class=secno>4.12.5.1.9</span> Fill and stroke styles</a><li><a href=canvas.html#drawing-rectangles-to-the-bitmap><span class=secno>4.12.5.1.10</span> Drawing rectangles to the bitmap</a><li><a href=canvas.html#drawing-text-to-the-bitmap><span class=secno>4.12.5.1.11</span> Drawing text to the bitmap</a><li><a href=canvas.html#drawing-paths-to-the-canvas><span class=secno>4.12.5.1.12</span> Drawing paths to the canvas</a><li><a href=canvas.html#drawing-focus-rings-and-scrolling-paths-into-view><span class=secno>4.12.5.1.13</span> Drawing focus rings and scrolling paths into view</a><li><a href=canvas.html#drawing-images><span class=secno>4.12.5.1.14</span> Drawing images</a><li><a href=canvas.html#pixel-manipulation><span class=secno>4.12.5.1.15</span> Pixel manipulation</a><li><a href=canvas.html#Compositing><span class=secno>4.12.5.1.16</span> 合成</a><li><a href=canvas.html#image-smoothing><span class=secno>4.12.5.1.17</span> Image smoothing</a><li><a href=canvas.html#shadows><span class=secno>4.12.5.1.18</span> Shadows</a><li><a href=canvas.html#Filters><span class=secno>4.12.5.1.19</span> 滤镜</a><li><a href="canvas.html#Working with externally-defined SVG filters"><span class=secno>4.12.5.1.20</span> 使用外部定义的 SVG 滤镜</a><li><a href="canvas.html#Best practices"><span class=secno>4.12.5.1.21</span> 最佳实践</a><li><a href=canvas.html#Examples><span class=secno>4.12.5.1.22</span> 示例</a></ol><li><a href=canvas.html#imagebitmap-渲染上下文><span class=secno>4.12.5.2</span> <code>ImageBitmap</code> 渲染上下文</a><ol><li><a href=canvas.html#introduction-5><span class=secno>4.12.5.2.1</span> Introduction</a><li><a href=canvas.html#the-imagebitmaprenderingcontext-interface><span class=secno>4.12.5.2.2</span> The <code>ImageBitmapRenderingContext</code> interface</a></ol><li><a href=canvas.html#the-offscreencanvas-interface><span class=secno>4.12.5.3</span> The <code>OffscreenCanvas</code> interface</a><ol><li><a href=canvas.html#the-offscreen-2d-rendering-context><span class=secno>4.12.5.3.1</span> The offscreen 2D rendering context</a></ol><li><a href=canvas.html#serialising-bitmaps-to-a-file><span class=secno>4.12.5.4</span> Serializing bitmaps to a file</a></ol></ol></ol></ol><h4 id=the-canvas-element><span class=secno>4.12.5</span> The <dfn id=canvas><code>canvas</code></dfn> element<a href=#the-canvas-element class=self-link></a></h4><div class="mdn-anno wrapped"><button onclick=toggleStatus(this) class=mdn-anno-btn><b title="Support in all current engines." class=all-engines-flag>✔</b><span>MDN</span></button><div class=feature><p><a href=https://developer.mozilla.org/en-US/docs/Web/HTML/Element/canvas title="Use the HTML <canvas> element with either the canvas scripting API or the WebGL API to draw graphics and animations.">Element/canvas</a><p class=all-engines-text>Support in all current engines.<div class=support><span class="firefox yes"><span>Firefox</span><span>1.5+</span></span><span class="safari yes"><span>Safari</span><span>2+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span><hr><span class="opera yes"><span>Opera</span><span>9+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>9+</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>4+</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>1+</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>18+</span></span><span class="webview_android yes"><span>WebView Android</span><span>37+</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>1.0+</span></span><span class="opera_android yes"><span>Opera Android</span><span>10.1+</span></span></div></div></div>
<div data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-date="" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/scripting/the-canvas-element/index.en.html data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/scripting/the-canvas-element/index.zh.html?filename=index.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fscripting%2Fthe-canvas-element%2Findex.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91"></div>

  <dl class=element><dt><a href=dom.html#concept-element-categories id=the-canvas-element:concept-element-categories>Categories</a>:<dd><a id=the-canvas-element:flow-content href=dom.html#flow-content>Flow content</a>.<dd><a id=the-canvas-element:phrasing-content href=dom.html#phrasing-content>Phrasing content</a>.<dd><a id=the-canvas-element:embedded-content-category href=dom.html#embedded-content-category>Embedded content</a>.<dd><a id=the-canvas-element:palpable-content-2 href=dom.html#palpable-content-2>Palpable content</a>.<dt><a href=dom.html#concept-element-contexts id=the-canvas-element:concept-element-contexts>Contexts in which this element can be used</a>:<dd>Where <a id=the-canvas-element:embedded-content-category-2 href=dom.html#embedded-content-category>embedded content</a> is expected.<dt><a href=dom.html#concept-element-content-model id=the-canvas-element:concept-element-content-model>Content model</a>:<dd><a id=the-canvas-element:transparent href=dom.html#transparent>Transparent</a>, but with no <a id=the-canvas-element:interactive-content href=dom.html#interactive-content>interactive content</a> descendants except
   for <code id=the-canvas-element:the-a-element><a href=text-level-semantics.html#the-a-element>a</a></code> elements, <code id=the-canvas-element:the-img-element><a href=embedded-content.html#the-img-element>img</a></code> elements with
   <code id=the-canvas-element:attr-hyperlink-usemap><a href=image-maps.html#attr-hyperlink-usemap>usemap</a></code> attributes, <code id=the-canvas-element:the-button-element><a href=form-elements.html#the-button-element>button</a></code> elements,
   <code id=the-canvas-element:the-input-element><a href=input.html#the-input-element>input</a></code> elements whose <code id=the-canvas-element:attr-input-type><a href=input.html#attr-input-type>type</a></code> attribute are in
   the <a href="input.html#checkbox-state-(type=checkbox)" id="the-canvas-element:checkbox-state-(type=checkbox)">Checkbox</a> or <a href="input.html#radio-button-state-(type=radio)" id="the-canvas-element:radio-button-state-(type=radio)">Radio Button</a> states, <code id=the-canvas-element:the-input-element-2><a href=input.html#the-input-element>input</a></code> elements that are
   <a href=forms.html#concept-button id=the-canvas-element:concept-button>buttons</a>, and <code id=the-canvas-element:the-select-element><a href=form-elements.html#the-select-element>select</a></code> elements with a <code id=the-canvas-element:attr-select-multiple><a href=form-elements.html#attr-select-multiple>multiple</a></code> attribute or a <span>display size</span> greater than 1.<dt><a href=dom.html#concept-element-tag-omission id=the-canvas-element:concept-element-tag-omission>text/html 中的标签省略</a>：<dd>哪个标签都不能省略。<dt><a href=dom.html#concept-element-attributes id=the-canvas-element:concept-element-attributes>Content attributes</a>:<dd><a id=the-canvas-element:全局属性 href=dom.html#全局属性>Global attributes</a><dd><code id=the-canvas-element:attr-canvas-width><a href=#attr-canvas-width>width</a></code> — Horizontal dimension<dd><code id=the-canvas-element:attr-canvas-height><a href=#attr-canvas-height>height</a></code> — Vertical dimension<dt><a href=dom.html#concept-element-accessibility-considerations id=the-canvas-element:concept-element-accessibility-considerations>Accessibility considerations</a>:<dd><a href=https://w3c.github.io/html-aria/#el-canvas>For authors</a>.<dd><a href=https://w3c.github.io/html-aam/#el-canvas>For implementers</a>.<dt><a href=dom.html#concept-element-dom id=the-canvas-element:concept-element-dom>DOM interface</a>:<dd>Uses <code>HTMLCanvasElement</code>.</dl>

  <p>The <code id=the-canvas-element:the-canvas-element><a href=#the-canvas-element>canvas</a></code> element provides scripts with a resolution-dependent bitmap canvas,
  which can be used for rendering graphs, game graphics, art, or other visual images on the fly.</p>

  <p>Authors should not use the <code id=the-canvas-element:the-canvas-element-2><a href=#the-canvas-element>canvas</a></code> element in a document when a more suitable
  element is available. For example, it is inappropriate to use a <code id=the-canvas-element:the-canvas-element-3><a href=#the-canvas-element>canvas</a></code> element to
  render a page heading: if the desired presentation of the heading is graphically intense, it
  should be marked up using appropriate elements (typically <code id=the-canvas-element:the-h1,-h2,-h3,-h4,-h5,-and-h6-elements><a href=sections.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements>h1</a></code>) and then styled using
  CSS and supporting technologies such as <a href=https://dom.spec.whatwg.org/#concept-shadow-tree id=the-canvas-element:shadow-tree data-x-internal=shadow-tree>shadow trees</a>.</p>

  <p>When authors use the <code id=the-canvas-element:the-canvas-element-4><a href=#the-canvas-element>canvas</a></code> element, they must also provide content that, when
  presented to the user, conveys essentially the same function or purpose as the
  <code id=the-canvas-element:the-canvas-element-5><a href=#the-canvas-element>canvas</a></code>'s bitmap. This content may be placed as content of the <code id=the-canvas-element:the-canvas-element-6><a href=#the-canvas-element>canvas</a></code>
  element. The contents of the <code id=the-canvas-element:the-canvas-element-7><a href=#the-canvas-element>canvas</a></code> element, if any, are the element's <a id=the-canvas-element:fallback-content href=dom.html#fallback-content>fallback
  content</a>.</p>

  <hr>

  <p>In interactive visual media, if <span>scripting is enabled</span> for
  the <code id=the-canvas-element:the-canvas-element-8><a href=#the-canvas-element>canvas</a></code> element, and if support for <code id=the-canvas-element:the-canvas-element-9><a href=#the-canvas-element>canvas</a></code> elements has been enabled,
  then the <code id=the-canvas-element:the-canvas-element-10><a href=#the-canvas-element>canvas</a></code> element <a id=the-canvas-element:represents href=dom.html#represents>represents</a> <a id=the-canvas-element:embedded-content-category-3 href=dom.html#embedded-content-category>embedded content</a>
  consisting of a dynamically created image, the element's bitmap.</p>

  <p>In non-interactive, static, visual media, if the <code id=the-canvas-element:the-canvas-element-11><a href=#the-canvas-element>canvas</a></code> element has been
  previously associated with a rendering context (e.g. if the page was viewed in an interactive
  visual medium and is now being printed, or if some script that ran during the page layout process
  painted on the element), then the <code id=the-canvas-element:the-canvas-element-12><a href=#the-canvas-element>canvas</a></code> element <a id=the-canvas-element:represents-2 href=dom.html#represents>represents</a>
  <a id=the-canvas-element:embedded-content-category-4 href=dom.html#embedded-content-category>embedded content</a> with the element's current bitmap and size. Otherwise, the element
  represents its <a id=the-canvas-element:fallback-content-2 href=dom.html#fallback-content>fallback content</a> instead.</p>

  <p>In non-visual media, and in visual media if <span>scripting is
  disabled</span> for the <code id=the-canvas-element:the-canvas-element-13><a href=#the-canvas-element>canvas</a></code> element or if support for <code id=the-canvas-element:the-canvas-element-14><a href=#the-canvas-element>canvas</a></code> elements
  has been disabled, the <code id=the-canvas-element:the-canvas-element-15><a href=#the-canvas-element>canvas</a></code> element <a id=the-canvas-element:represents-3 href=dom.html#represents>represents</a> its <a id=the-canvas-element:fallback-content-3 href=dom.html#fallback-content>fallback
  content</a> instead.</p>

  
  <p>When a <code id=the-canvas-element:the-canvas-element-16><a href=#the-canvas-element>canvas</a></code> element <a id=the-canvas-element:represents-4 href=dom.html#represents>represents</a> <a id=the-canvas-element:embedded-content-category-5 href=dom.html#embedded-content-category>embedded content</a>, the
  user can still focus descendants of the <code id=the-canvas-element:the-canvas-element-17><a href=#the-canvas-element>canvas</a></code> element (in the <a id=the-canvas-element:fallback-content-4 href=dom.html#fallback-content>fallback
  content</a>). When an element is <a id=the-canvas-element:focused href=interaction.html#focused>focused</a>, it is the target of keyboard interaction
  events (even though the element itself is not visible). This allows authors to make an interactive
  canvas keyboard-accessible: authors should have a one-to-one mapping of interactive regions to <i id=the-canvas-element:focusable-area><a href=interaction.html#focusable-area>focusable areas</a></i> in the <a id=the-canvas-element:fallback-content-5 href=dom.html#fallback-content>fallback content</a>. (Focus has no
  effect on mouse interaction events.) <a href=references.html#refsUIEVENTS>[UIEVENTS]</a></p> 

  <p>An element whose nearest <code id=the-canvas-element:the-canvas-element-18><a href=#the-canvas-element>canvas</a></code> element ancestor is <span>being rendered</span>
  and <a id=the-canvas-element:represents-5 href=dom.html#represents>represents</a> <a id=the-canvas-element:embedded-content-category-6 href=dom.html#embedded-content-category>embedded content</a> is an element that is <dfn id=being-used-as-relevant-canvas-fallback-content>being used as
  relevant canvas fallback content</dfn>.</p>

  <hr>

  <p>The <code id=the-canvas-element:the-canvas-element-19><a href=#the-canvas-element>canvas</a></code> element has two attributes to control the size of the element's bitmap:
  <dfn data-dfn-for=canvas id=attr-canvas-width data-dfn-type=element-attr><code>width</code></dfn> and <dfn id=attr-canvas-height><code>height</code></dfn>. These attributes, when specified, must have
  values that are <a href=infrastructure.html#valid-non-negative-integer id=the-canvas-element:valid-non-negative-integer>valid non-negative integers</a>.
   The
  <code id=the-canvas-element:attr-canvas-width-2><a href=#attr-canvas-width>width</a></code> attribute defaults to 300, and the <code id=the-canvas-element:attr-canvas-height-2><a href=#attr-canvas-height>height</a></code> attribute defaults to 150.</p>

  <p>When setting the value of the <code id=the-canvas-element:attr-canvas-width-3><a href=#attr-canvas-width>width</a></code> or <code id=the-canvas-element:attr-canvas-height-3><a href=#attr-canvas-height>height</a></code> attribute, if the <span>context mode</span> of the <code id=the-canvas-element:the-canvas-element-20><a href=#the-canvas-element>canvas</a></code>
  element is set to <span>placeholder</span>, the
  user agent must throw an <a id=the-canvas-element:invalidstateerror href=https://heycam.github.io/webidl/#invalidstateerror data-x-internal=invalidstateerror>"<code>InvalidStateError</code>"</a> <code id=the-canvas-element:domexception><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>
  and leave the attribute's value unchanged.</p>

  <p>The <a id=the-canvas-element:intrinsic-dimensions href=https://drafts.csswg.org/css-images/#intrinsic-dimensions data-x-internal=intrinsic-dimensions>intrinsic dimensions</a> of the <code id=the-canvas-element:the-canvas-element-21><a href=#the-canvas-element>canvas</a></code> element when it
  <a id=the-canvas-element:represents-6 href=dom.html#represents>represents</a> <a id=the-canvas-element:embedded-content-category-7 href=dom.html#embedded-content-category>embedded content</a> are equal to the dimensions of the
  element's bitmap.</p>

  <p>The user agent must use a square pixel density consisting of one pixel of image data per
  coordinate space unit for the bitmaps of a <code id=the-canvas-element:the-canvas-element-22><a href=#the-canvas-element>canvas</a></code> and its rendering contexts.</p>

  <p class=note>A <code id=the-canvas-element:the-canvas-element-23><a href=#the-canvas-element>canvas</a></code> element can be sized arbitrarily by a style sheet, its
  bitmap is then subject to the <a id="the-canvas-element:'object-fit'" href=https://drafts.csswg.org/css-images/#the-object-fit data-x-internal="'object-fit'">'object-fit'</a> CSS property.</p>

  

  <hr>

  <dl class=domintro><dt><var>context</var> = <var>canvas</var> . <code id=dom-canvas-getcontext>getContext</code>(<var>contextId</var> [, <var>options</var> ] )<dd>
    <p>Returns an object that exposes an API for drawing on the canvas. <var>contextId</var>
    specifies the desired API: "<code>2d</code>", "<code>bitmaprenderer</code>", "<code>webgl</code>", or "<code>webgl2</code>". <var>options</var> is handled by that API.</p>

    <p>This specification defines the "<code>2d</code>" and "<code>bitmaprenderer</code>" contexts below. The WebGL
    specifications define the "<code>webgl</code>" and "<code>webgl2</code>" contexts. <a href=references.html#refsWEBGL>[WEBGL]</a></p>

    <p>Returns null if <var>contextId</var> is not supported, or if the canvas has already been
    initialized with another context type (e.g., trying to get a "<code>2d</code>" context after getting a "<code>webgl</code>" context).</p>
   </dl>

  

  <dl class=domintro><dt><var>url</var> = <var>canvas</var> . <code id=dom-canvas-todataurl>toDataURL</code>( [ <var>type</var> [, <var>quality</var> ] ] )<dd>
    <p>Returns a <a href=https://tools.ietf.org/html/rfc2397#section-2 id=the-canvas-element:data-protocol data-x-internal=data-protocol><code>data:</code> URL</a> for the image in the
    canvas.</p>

    <p>The first argument, if provided, controls the type of the image to be returned (e.g. PNG or
    JPEG). The default is "<code id=the-canvas-element:image/png><a href=indices.html#image/png>image/png</a></code>"; that type is also used if the given type isn't
    supported. The second argument applies if the type is an image format that supports variable
    quality (such as "<code id=the-canvas-element:image/jpeg><a href=indices.html#image/jpeg>image/jpeg</a></code>"), and is a number in the range 0.0 to 1.0 inclusive
    indicating the desired quality level for the resulting image.</p>

    <p>When trying to use types other than "<code id=the-canvas-element:image/png-2><a href=indices.html#image/png>image/png</a></code>", authors can check if the image
    was really returned in the requested format by checking to see if the returned string starts
    with one of the exact strings "<code>data:image/png,</code>" or "<code>data:image/png;</code>". If it does, the image is PNG, and thus the requested type was
    not supported. (The one exception to this is if the canvas has either no height or no width, in
    which case the result might simply be "<code>data:,</code>".)</p>
   <dt><var>canvas</var> . <code id=dom-canvas-toblob>toBlob</code>(<var>callback</var> [, <var>type</var> [, quality ] ] )<dd>
    <p>Creates a <code id=the-canvas-element:blob><a data-x-internal=blob href=https://w3c.github.io/FileAPI/#dfn-Blob>Blob</a></code> object representing a file containing the image in the canvas,
    and invokes a callback with a handle to that object.</p>

    <p>The second argument, if provided, controls the type of the image to be returned (e.g. PNG or
    JPEG). The default is "<code id=the-canvas-element:image/png-3><a href=indices.html#image/png>image/png</a></code>"; that type is also used if the given type isn't
    supported. The third argument applies if the type is an image format that supports variable
    quality (such as "<code id=the-canvas-element:image/jpeg-2><a href=indices.html#image/jpeg>image/jpeg</a></code>"), and is a number in the range 0.0 to 1.0 inclusive
    indicating the desired quality level for the resulting image.</p>
   <dt><var>canvas</var> . <code id=dom-canvas-transfercontroltooffscreen>transferControlToOffscreen</code>()<dd>
    <p>Returns a newly created <code id=the-canvas-element:offscreencanvas><a href=#offscreencanvas>OffscreenCanvas</a></code> object that uses the
    <code id=the-canvas-element:the-canvas-element-24><a href=#the-canvas-element>canvas</a></code> element as a placeholder. Once the <code id=the-canvas-element:the-canvas-element-25><a href=#the-canvas-element>canvas</a></code> element has become a
    placeholder for an <code id=the-canvas-element:offscreencanvas-2><a href=#offscreencanvas>OffscreenCanvas</a></code> object, its intrinsic size can no longer be
    changed, and it cannot have a rendering context. The content of the placeholder canvas is
    updated by calling the <code id=the-canvas-element:offscreencontext-commit><a href=#offscreencontext-commit>commit()</a></code> method of the
    <code id=the-canvas-element:offscreencanvas-3><a href=#offscreencanvas>OffscreenCanvas</a></code> object's rendering context.
    </p>
   </dl>

  

  


  <h5 id=2dcontext><span class=secno>4.12.5.1</span> The 2D rendering context<a href=#2dcontext class=self-link></a></h5><div class="mdn-anno wrapped"><button onclick=toggleStatus(this) class=mdn-anno-btn><b title="Support in all current engines." class=all-engines-flag>✔</b><span>MDN</span></button><div class=feature><p><a href=https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D title="The CanvasRenderingContext2D interface, part of the Canvas API, provides the 2D rendering context for the drawing surface of a <canvas> element. It is used for drawing shapes, text, images, and other objects.">CanvasRenderingContext2D</a><p class=all-engines-text>Support in all current engines.<div class=support><span class="firefox yes"><span>Firefox</span><span>1.5+</span></span><span class="safari yes"><span>Safari</span><span>2+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span><hr><span class="opera yes"><span>Opera</span><span>9+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>9+</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>4+</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>1+</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>18+</span></span><span class="webview_android yes"><span>WebView Android</span><span>1+</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>1.0+</span></span><span class="opera_android yes"><span>Opera Android</span><span>10.1+</span></span></div></div></div>
<div data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-date="" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/index.en.html data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/index.zh.html?filename=index.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fscripting%2Fthe-canvas-element%2Fthe-2d-rendering-context%2Findex.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91"></div>

  

  <div class="mdn-anno wrapped before"><button onclick=toggleStatus(this) class=mdn-anno-btn><span>MDN</span></button><div class=feature><p><a href=https://developer.mozilla.org/en-US/docs/Web/API/CanvasImageSource title="CanvasImageSource provides a mechanism for other interfaces to be used as image sources for some methods of the CanvasDrawImage and CanvasFillStrokeStyles interfaces. It’s just an internal helper type to simplify the specification. It’s not an interface and there are no objects implementing it.">CanvasImageSource</a></div><div class=feature><p><a href=https://developer.mozilla.org/en-US/docs/Web/API/CanvasGradient title="The CanvasGradient interface represents an opaque object describing a gradient. It is returned by the methods CanvasRenderingContext2D.createLinearGradient(), CanvasRenderingContext2D.createConicGradient() or CanvasRenderingContext2D.createRadialGradient().">CanvasGradient</a><p class=all-engines-text>Support in all current engines.<div class=support><span class="firefox yes"><span>Firefox</span><span>3.6+</span></span><span class="safari yes"><span>Safari</span><span>5.1+</span></span><span class="chrome yes"><span>Chrome</span><span>6+</span></span><hr><span class="opera yes"><span>Opera</span><span>9+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>9+</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>4+</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>6+</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>18+</span></span><span class="webview_android yes"><span>WebView Android</span><span>37+</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>1.0+</span></span><span class="opera_android yes"><span>Opera Android</span><span>10.1+</span></span></div></div><div class=feature><p><a href=https://developer.mozilla.org/en-US/docs/Web/API/CanvasPattern title="The CanvasPattern interface represents an opaque object describing a pattern, based on an image, a canvas, or a video, created by the CanvasRenderingContext2D.createPattern() method.">CanvasPattern</a><p class=all-engines-text>Support in all current engines.<div class=support><span class="firefox yes"><span>Firefox</span><span>3.6+</span></span><span class="safari yes"><span>Safari</span><span>3.1+</span></span><span class="chrome yes"><span>Chrome</span><span>4+</span></span><hr><span class="opera yes"><span>Opera</span><span>9+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>9+</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>4+</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>3.2+</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>18+</span></span><span class="webview_android yes"><span>WebView Android</span><span>37+</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>1.0+</span></span><span class="opera_android yes"><span>Opera Android</span><span>10.1+</span></span></div></div><div class=feature><p><a href=https://developer.mozilla.org/en-US/docs/Web/API/TextMetrics title="The TextMetrics interface represents the dimensions of a piece of text in the canvas; a TextMetrics instance can be retrieved using the CanvasRenderingContext2D.measureText() method.">TextMetrics</a><p class=all-engines-text>Support in all current engines.<div class=support><span class="firefox yes"><span>Firefox</span><span>1.5+</span></span><span class="safari yes"><span>Safari</span><span>3.1+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span><hr><span class="opera yes"><span>Opera</span><span>9+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>9+</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>31+</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>Yes</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>18+</span></span><span class="webview_android yes"><span>WebView Android</span><span>1+</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>1.0+</span></span><span class="opera_android yes"><span>Opera Android</span><span>10.1+</span></span></div></div><div class=feature><p><a href=https://developer.mozilla.org/en-US/docs/Web/API/ImageData title="The ImageData interface represents the underlying pixel data of an area of a <canvas> element.">ImageData</a><p class=all-engines-text>Support in all current engines.<div class=support><span class="firefox yes"><span>Firefox</span><span>14+</span></span><span class="safari yes"><span>Safari</span><span>3.1+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span><hr><span class="opera yes"><span>Opera</span><span>9+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>9+</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>14+</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>2+</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>18+</span></span><span class="webview_android yes"><span>WebView Android</span><span>37+</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>1.0+</span></span><span class="opera_android yes"><span>Opera Android</span><span>10.1+</span></span></div></div></div><pre><code class=idl>typedef (<span>HTMLImageElement</span> or
         <a id=2dcontext:svgimageelement href=https://svgwg.org/svg2-draft/embedded.html#InterfaceSVGImageElement data-x-internal=svgimageelement>SVGImageElement</a>) <dfn id=htmlorsvgimageelement>HTMLOrSVGImageElement</dfn>;

typedef (<a href=#htmlorsvgimageelement id=2dcontext:htmlorsvgimageelement>HTMLOrSVGImageElement</a> or
         <span>HTMLVideoElement</span> or
         <span>HTMLCanvasElement</span> or
         <a id=2dcontext:imagebitmap href=imagebitmap-and-animations.html#imagebitmap>ImageBitmap</a> or
         <a href=#offscreencanvas id=2dcontext:offscreencanvas>OffscreenCanvas</a>) <dfn id=canvasimagesource>CanvasImageSource</dfn>;

enum <dfn id=canvasfillrule>CanvasFillRule</dfn> { "<a href=#dom-context-2d-fillrule-nonzero id=2dcontext:dom-context-2d-fillrule-nonzero>nonzero</a>", "<a href=#dom-context-2d-fillrule-evenodd id=2dcontext:dom-context-2d-fillrule-evenodd>evenodd</a>" };

dictionary <dfn id=canvasrenderingcontext2dsettings>CanvasRenderingContext2DSettings</dfn> {
  boolean <span>alpha</span> = true;
  boolean <span>desynchronized</span> = false;
};

enum <dfn id=imagesmoothingquality>ImageSmoothingQuality</dfn> { "<a href=#dom-context-2d-imagesmoothingquality-low id=2dcontext:dom-context-2d-imagesmoothingquality-low>low</a>", "<a href=#dom-context-2d-imagesmoothingquality-medium id=2dcontext:dom-context-2d-imagesmoothingquality-medium>medium</a>", "<a href=#dom-context-2d-imagesmoothingquality-high id=2dcontext:dom-context-2d-imagesmoothingquality-high>high</a>" };

[Exposed=Window]
interface <dfn id=canvasrenderingcontext2d>CanvasRenderingContext2D</dfn> {
  // back-reference to the canvas
  readonly attribute <span>HTMLCanvasElement</span> <a href=#dom-context-2d-canvas id=2dcontext:dom-context-2d-canvas>canvas</a>;

  <a href=#canvasrenderingcontext2dsettings id=2dcontext:canvasrenderingcontext2dsettings>CanvasRenderingContext2DSettings</a> <span>getContextAttributes</span>();
};
<a href=#canvasrenderingcontext2d id=2dcontext:canvasrenderingcontext2d>CanvasRenderingContext2D</a> includes <a href=#canvasstate id=2dcontext:canvasstate>CanvasState</a>;
<a href=#canvasrenderingcontext2d id=2dcontext:canvasrenderingcontext2d-2>CanvasRenderingContext2D</a> includes <a href=#canvastransform id=2dcontext:canvastransform>CanvasTransform</a>;
<a href=#canvasrenderingcontext2d id=2dcontext:canvasrenderingcontext2d-3>CanvasRenderingContext2D</a> includes <a href=#canvascompositing id=2dcontext:canvascompositing>CanvasCompositing</a>;
<a href=#canvasrenderingcontext2d id=2dcontext:canvasrenderingcontext2d-4>CanvasRenderingContext2D</a> includes <a href=#canvasimagesmoothing id=2dcontext:canvasimagesmoothing>CanvasImageSmoothing</a>;
<a href=#canvasrenderingcontext2d id=2dcontext:canvasrenderingcontext2d-5>CanvasRenderingContext2D</a> includes <a href=#canvasfillstrokestyles id=2dcontext:canvasfillstrokestyles>CanvasFillStrokeStyles</a>;
<a href=#canvasrenderingcontext2d id=2dcontext:canvasrenderingcontext2d-6>CanvasRenderingContext2D</a> includes <a href=#canvasshadowstyles id=2dcontext:canvasshadowstyles>CanvasShadowStyles</a>;
<a href=#canvasrenderingcontext2d id=2dcontext:canvasrenderingcontext2d-7>CanvasRenderingContext2D</a> includes <a href=#canvasfilters id=2dcontext:canvasfilters>CanvasFilters</a>;
<a href=#canvasrenderingcontext2d id=2dcontext:canvasrenderingcontext2d-8>CanvasRenderingContext2D</a> includes <a href=#canvasrect id=2dcontext:canvasrect>CanvasRect</a>;
<a href=#canvasrenderingcontext2d id=2dcontext:canvasrenderingcontext2d-9>CanvasRenderingContext2D</a> includes <a href=#canvasdrawpath id=2dcontext:canvasdrawpath>CanvasDrawPath</a>;
<a href=#canvasrenderingcontext2d id=2dcontext:canvasrenderingcontext2d-10>CanvasRenderingContext2D</a> includes <a href=#canvasuserinterface id=2dcontext:canvasuserinterface>CanvasUserInterface</a>;
<a href=#canvasrenderingcontext2d id=2dcontext:canvasrenderingcontext2d-11>CanvasRenderingContext2D</a> includes <a href=#canvastext id=2dcontext:canvastext>CanvasText</a>;
<a href=#canvasrenderingcontext2d id=2dcontext:canvasrenderingcontext2d-12>CanvasRenderingContext2D</a> includes <a href=#canvasdrawimage id=2dcontext:canvasdrawimage>CanvasDrawImage</a>;
<a href=#canvasrenderingcontext2d id=2dcontext:canvasrenderingcontext2d-13>CanvasRenderingContext2D</a> includes <a href=#canvasimagedata id=2dcontext:canvasimagedata>CanvasImageData</a>;
<a href=#canvasrenderingcontext2d id=2dcontext:canvasrenderingcontext2d-14>CanvasRenderingContext2D</a> includes <a href=#canvaspathdrawingstyles id=2dcontext:canvaspathdrawingstyles>CanvasPathDrawingStyles</a>;
<a href=#canvasrenderingcontext2d id=2dcontext:canvasrenderingcontext2d-15>CanvasRenderingContext2D</a> includes <a href=#canvastextdrawingstyles id=2dcontext:canvastextdrawingstyles>CanvasTextDrawingStyles</a>;
<a href=#canvasrenderingcontext2d id=2dcontext:canvasrenderingcontext2d-16>CanvasRenderingContext2D</a> includes <a href=#canvaspath id=2dcontext:canvaspath>CanvasPath</a>;

interface mixin <dfn id=canvasstate>CanvasState</dfn> {
  // state
  undefined <a href=#dom-context-2d-save id=2dcontext:dom-context-2d-save>save</a>(); // push state on state stack
  undefined <a href=#dom-context-2d-restore id=2dcontext:dom-context-2d-restore>restore</a>(); // pop state stack and restore state
};

interface mixin <dfn id=canvastransform>CanvasTransform</dfn> {
  // transformations (default transform is the identity matrix)
  undefined <a href=#dom-context-2d-scale id=2dcontext:dom-context-2d-scale>scale</a>(unrestricted double x, unrestricted double y);
  undefined <a href=#dom-context-2d-rotate id=2dcontext:dom-context-2d-rotate>rotate</a>(unrestricted double angle);
  undefined <a href=#dom-context-2d-translate id=2dcontext:dom-context-2d-translate>translate</a>(unrestricted double x, unrestricted double y);
  undefined <a href=#dom-context-2d-transform id=2dcontext:dom-context-2d-transform>transform</a>(unrestricted double a, unrestricted double b, unrestricted double c, unrestricted double d, unrestricted double e, unrestricted double f);

  [NewObject] <a id=2dcontext:dommatrix href=https://drafts.fxtf.org/geometry/#dommatrix data-x-internal=dommatrix>DOMMatrix</a> <a href=#dom-context-2d-gettransform id=2dcontext:dom-context-2d-gettransform>getTransform</a>();
  undefined <a href=#dom-context-2d-settransform id=2dcontext:dom-context-2d-settransform>setTransform</a>(unrestricted double a, unrestricted double b, unrestricted double c, unrestricted double d, unrestricted double e, unrestricted double f);
  undefined <a href=#dom-context-2d-settransform-matrix id=2dcontext:dom-context-2d-settransform-matrix>setTransform</a>(optional <a id=2dcontext:dommatrix2dinit href=https://drafts.fxtf.org/geometry/#dictdef-dommatrix2dinit data-x-internal=dommatrix2dinit>DOMMatrix2DInit</a> transform = {});
  undefined <a href=#dom-context-2d-resettransform id=2dcontext:dom-context-2d-resettransform>resetTransform</a>();

};

interface mixin <dfn id=canvascompositing>CanvasCompositing</dfn> {
  // compositing
  attribute unrestricted double <a href=#dom-context-2d-globalalpha id=2dcontext:dom-context-2d-globalalpha>globalAlpha</a>; // (default 1.0)
  attribute DOMString <a href=#dom-context-2d-globalcompositeoperation id=2dcontext:dom-context-2d-globalcompositeoperation>globalCompositeOperation</a>; // (default source-over)
};

interface mixin <dfn id=canvasimagesmoothing>CanvasImageSmoothing</dfn> {
  // image smoothing
  attribute boolean <a href=#dom-context-2d-imagesmoothingenabled id=2dcontext:dom-context-2d-imagesmoothingenabled>imageSmoothingEnabled</a>; // (default true)
  attribute <a href=#imagesmoothingquality id=2dcontext:imagesmoothingquality>ImageSmoothingQuality</a> <a href=#dom-context-2d-imagesmoothingquality id=2dcontext:dom-context-2d-imagesmoothingquality>imageSmoothingQuality</a>; // (default low)

};

interface mixin <dfn id=canvasfillstrokestyles>CanvasFillStrokeStyles</dfn> {
  // colors and styles (see also the <a href=#canvaspathdrawingstyles id=2dcontext:canvaspathdrawingstyles-2>CanvasPathDrawingStyles</a> and <a href=#canvastextdrawingstyles id=2dcontext:canvastextdrawingstyles-2>CanvasTextDrawingStyles</a> interfaces)
  attribute (DOMString or CanvasGradient or CanvasPattern) <a href=#dom-context-2d-strokestyle id=2dcontext:dom-context-2d-strokestyle>strokeStyle</a>; // (default black)
  attribute (DOMString or CanvasGradient or CanvasPattern) <a href=#dom-context-2d-fillstyle id=2dcontext:dom-context-2d-fillstyle>fillStyle</a>; // (default black)
  <a href=#canvasgradient id=2dcontext:canvasgradient>CanvasGradient</a> <a href=#dom-context-2d-createlineargradient id=2dcontext:dom-context-2d-createlineargradient>createLinearGradient</a>(double x0, double y0, double x1, double y1);
  <a href=#canvasgradient id=2dcontext:canvasgradient-2>CanvasGradient</a> <a href=#dom-context-2d-createradialgradient id=2dcontext:dom-context-2d-createradialgradient>createRadialGradient</a>(double x0, double y0, double r0, double x1, double y1, double r1);
  <a href=#canvaspattern id=2dcontext:canvaspattern>CanvasPattern</a>? <a href=#dom-context-2d-createpattern id=2dcontext:dom-context-2d-createpattern>createPattern</a>(<a href=#canvasimagesource id=2dcontext:canvasimagesource>CanvasImageSource</a> image, [<a id=2dcontext:legacynulltoemptystring href=https://heycam.github.io/webidl/#LegacyNullToEmptyString data-x-internal=legacynulltoemptystring>LegacyNullToEmptyString</a>] DOMString repetition);

};

interface mixin <dfn id=canvasshadowstyles>CanvasShadowStyles</dfn> {
  // shadows
  attribute unrestricted double <a href=#dom-context-2d-shadowoffsetx id=2dcontext:dom-context-2d-shadowoffsetx>shadowOffsetX</a>; // (default 0)
  attribute unrestricted double <a href=#dom-context-2d-shadowoffsety id=2dcontext:dom-context-2d-shadowoffsety>shadowOffsetY</a>; // (default 0)
  attribute unrestricted double <a href=#dom-context-2d-shadowblur id=2dcontext:dom-context-2d-shadowblur>shadowBlur</a>; // (default 0)
  attribute DOMString <a href=#dom-context-2d-shadowcolor id=2dcontext:dom-context-2d-shadowcolor>shadowColor</a>; // (default <a id=2dcontext:transparent-black href=https://drafts.csswg.org/css-color/#transparent-black data-x-internal=transparent-black>transparent black</a>)
};

interface mixin <dfn id=canvasfilters>CanvasFilters</dfn> {
  // filters
  attribute DOMString <a href=#dom-context-2d-filter id=2dcontext:dom-context-2d-filter>filter</a>; // (default "none")
};

interface mixin <dfn id=canvasrect>CanvasRect</dfn> {
  // rects
  undefined <a href=#dom-context-2d-clearrect id=2dcontext:dom-context-2d-clearrect>clearRect</a>(unrestricted double x, unrestricted double y, unrestricted double w, unrestricted double h);
  undefined <a href=#dom-context-2d-fillrect id=2dcontext:dom-context-2d-fillrect>fillRect</a>(unrestricted double x, unrestricted double y, unrestricted double w, unrestricted double h);
  undefined <a href=#dom-context-2d-strokerect id=2dcontext:dom-context-2d-strokerect>strokeRect</a>(unrestricted double x, unrestricted double y, unrestricted double w, unrestricted double h);
};

interface mixin <dfn id=canvasdrawpath>CanvasDrawPath</dfn> {
  // path API (see also <a href=#canvaspath id=2dcontext:canvaspath-2>CanvasPath</a>)
  undefined <a href=#dom-context-2d-beginpath id=2dcontext:dom-context-2d-beginpath>beginPath</a>();
  undefined <a href=#dom-context-2d-fill id=2dcontext:dom-context-2d-fill>fill</a>(optional <a href=#canvasfillrule id=2dcontext:canvasfillrule>CanvasFillRule</a> fillRule = "<a href=#dom-context-2d-fillrule-nonzero id=2dcontext:dom-context-2d-fillrule-nonzero-2>nonzero</a>");
  undefined <a href=#dom-context-2d-fill id=2dcontext:dom-context-2d-fill-2>fill</a>(<a href=#path2d id=2dcontext:path2d>Path2D</a> path, optional <a href=#canvasfillrule id=2dcontext:canvasfillrule-2>CanvasFillRule</a> fillRule = "<a href=#dom-context-2d-fillrule-nonzero id=2dcontext:dom-context-2d-fillrule-nonzero-3>nonzero</a>");
  undefined <a href=#dom-context-2d-stroke id=2dcontext:dom-context-2d-stroke>stroke</a>();
  undefined <a href=#dom-context-2d-stroke id=2dcontext:dom-context-2d-stroke-2>stroke</a>(<a href=#path2d id=2dcontext:path2d-2>Path2D</a> path);
  undefined <a href=#dom-context-2d-clip id=2dcontext:dom-context-2d-clip>clip</a>(optional <a href=#canvasfillrule id=2dcontext:canvasfillrule-3>CanvasFillRule</a> fillRule = "<a href=#dom-context-2d-fillrule-nonzero id=2dcontext:dom-context-2d-fillrule-nonzero-4>nonzero</a>");
  undefined <a href=#dom-context-2d-clip id=2dcontext:dom-context-2d-clip-2>clip</a>(<a href=#path2d id=2dcontext:path2d-3>Path2D</a> path, optional <a href=#canvasfillrule id=2dcontext:canvasfillrule-4>CanvasFillRule</a> fillRule = "<a href=#dom-context-2d-fillrule-nonzero id=2dcontext:dom-context-2d-fillrule-nonzero-5>nonzero</a>");
  boolean <a href=#dom-context-2d-ispointinpath id=2dcontext:dom-context-2d-ispointinpath>isPointInPath</a>(unrestricted double x, unrestricted double y, optional <a href=#canvasfillrule id=2dcontext:canvasfillrule-5>CanvasFillRule</a> fillRule = "<a href=#dom-context-2d-fillrule-nonzero id=2dcontext:dom-context-2d-fillrule-nonzero-6>nonzero</a>");
  boolean <a href=#dom-context-2d-ispointinpath id=2dcontext:dom-context-2d-ispointinpath-2>isPointInPath</a>(<a href=#path2d id=2dcontext:path2d-4>Path2D</a> path, unrestricted double x, unrestricted double y, optional <a href=#canvasfillrule id=2dcontext:canvasfillrule-6>CanvasFillRule</a> fillRule = "<a href=#dom-context-2d-fillrule-nonzero id=2dcontext:dom-context-2d-fillrule-nonzero-7>nonzero</a>");
  boolean <a href=#dom-context-2d-ispointinstroke id=2dcontext:dom-context-2d-ispointinstroke>isPointInStroke</a>(unrestricted double x, unrestricted double y);
  boolean <a href=#dom-context-2d-ispointinstroke id=2dcontext:dom-context-2d-ispointinstroke-2>isPointInStroke</a>(<a href=#path2d id=2dcontext:path2d-5>Path2D</a> path, unrestricted double x, unrestricted double y);
};

interface mixin <dfn id=canvasuserinterface>CanvasUserInterface</dfn> {
  undefined <a href=#dom-context-2d-drawfocusifneeded id=2dcontext:dom-context-2d-drawfocusifneeded>drawFocusIfNeeded</a>(<a id=2dcontext:element href=https://dom.spec.whatwg.org/#interface-element data-x-internal=element>Element</a> element);
  undefined <a href=#dom-context-2d-drawfocusifneeded id=2dcontext:dom-context-2d-drawfocusifneeded-2>drawFocusIfNeeded</a>(<a href=#path2d id=2dcontext:path2d-6>Path2D</a> path, <a id=2dcontext:element-2 href=https://dom.spec.whatwg.org/#interface-element data-x-internal=element>Element</a> element);
  undefined <a href=#dom-context-2d-scrollpathintoview id=2dcontext:dom-context-2d-scrollpathintoview>scrollPathIntoView</a>();
  undefined <a href=#dom-context-2d-scrollpathintoview id=2dcontext:dom-context-2d-scrollpathintoview-2>scrollPathIntoView</a>(<a href=#path2d id=2dcontext:path2d-7>Path2D</a> path);
};

interface mixin <dfn id=canvastext>CanvasText</dfn> {
  // text (see also the <a href=#canvaspathdrawingstyles id=2dcontext:canvaspathdrawingstyles-3>CanvasPathDrawingStyles</a> and <a href=#canvastextdrawingstyles id=2dcontext:canvastextdrawingstyles-3>CanvasTextDrawingStyles</a> interfaces)
  undefined <a href=#dom-context-2d-filltext id=2dcontext:dom-context-2d-filltext>fillText</a>(DOMString text, unrestricted double x, unrestricted double y, optional unrestricted double maxWidth);
  undefined <a href=#dom-context-2d-stroketext id=2dcontext:dom-context-2d-stroketext>strokeText</a>(DOMString text, unrestricted double x, unrestricted double y, optional unrestricted double maxWidth);
  <a href=#textmetrics id=2dcontext:textmetrics>TextMetrics</a> <a href=#dom-context-2d-measuretext id=2dcontext:dom-context-2d-measuretext>measureText</a>(DOMString text);
};

interface mixin <dfn id=canvasdrawimage>CanvasDrawImage</dfn> {
  // drawing images
  undefined <a href=#dom-context-2d-drawimage id=2dcontext:dom-context-2d-drawimage>drawImage</a>(<a href=#canvasimagesource id=2dcontext:canvasimagesource-2>CanvasImageSource</a> image, unrestricted double dx, unrestricted double dy);
  undefined <a href=#dom-context-2d-drawimage id=2dcontext:dom-context-2d-drawimage-2>drawImage</a>(<a href=#canvasimagesource id=2dcontext:canvasimagesource-3>CanvasImageSource</a> image, unrestricted double dx, unrestricted double dy, unrestricted double dw, unrestricted double dh);
  undefined <a href=#dom-context-2d-drawimage id=2dcontext:dom-context-2d-drawimage-3>drawImage</a>(<a href=#canvasimagesource id=2dcontext:canvasimagesource-4>CanvasImageSource</a> image, unrestricted double sx, unrestricted double sy, unrestricted double sw, unrestricted double sh, unrestricted double dx, unrestricted double dy, unrestricted double dw, unrestricted double dh);
};

interface mixin <dfn id=canvasimagedata>CanvasImageData</dfn> {
  // <a href=#pixel-manipulation id=2dcontext:pixel-manipulation>pixel manipulation</a>
  <a href=#imagedata id=2dcontext:imagedata>ImageData</a> <a href=#dom-context-2d-createimagedata id=2dcontext:dom-context-2d-createimagedata>createImageData</a>(long sw, long sh);
  <a href=#imagedata id=2dcontext:imagedata-2>ImageData</a> <a href=#dom-context-2d-createimagedata id=2dcontext:dom-context-2d-createimagedata-2>createImageData</a>(<a href=#imagedata id=2dcontext:imagedata-3>ImageData</a> imagedata);
  <a href=#imagedata id=2dcontext:imagedata-4>ImageData</a> <a href=#dom-context-2d-getimagedata id=2dcontext:dom-context-2d-getimagedata>getImageData</a>(long sx, long sy, long sw, long sh);
  undefined <a href=#dom-context-2d-putimagedata id=2dcontext:dom-context-2d-putimagedata>putImageData</a>(<a href=#imagedata id=2dcontext:imagedata-5>ImageData</a> imagedata, long dx, long dy);
  undefined <a href=#dom-context-2d-putimagedata id=2dcontext:dom-context-2d-putimagedata-2>putImageData</a>(<a href=#imagedata id=2dcontext:imagedata-6>ImageData</a> imagedata, long dx, long dy, long dirtyX, long dirtyY, long dirtyWidth, long dirtyHeight);
};

enum <dfn id=canvaslinecap>CanvasLineCap</dfn> { "butt", "round", "square" };
enum <dfn id=canvaslinejoin>CanvasLineJoin</dfn> { "round", "bevel", "miter" };
enum <dfn id=canvastextalign>CanvasTextAlign</dfn> { "<a href=#dom-context-2d-textalign-start id=2dcontext:dom-context-2d-textalign-start>start</a>", "<a href=#dom-context-2d-textalign-end id=2dcontext:dom-context-2d-textalign-end>end</a>", "<a href=#dom-context-2d-textalign-left id=2dcontext:dom-context-2d-textalign-left>left</a>", "<a href=#dom-context-2d-textalign-right id=2dcontext:dom-context-2d-textalign-right>right</a>", "<a href=#dom-context-2d-textalign-center id=2dcontext:dom-context-2d-textalign-center>center</a>" };
enum <dfn id=canvastextbaseline>CanvasTextBaseline</dfn> { "<a href=#dom-context-2d-textbaseline-top id=2dcontext:dom-context-2d-textbaseline-top>top</a>", "<a href=#dom-context-2d-textbaseline-hanging id=2dcontext:dom-context-2d-textbaseline-hanging>hanging</a>", "<a href=#dom-context-2d-textbaseline-middle id=2dcontext:dom-context-2d-textbaseline-middle>middle</a>", "<a href=#dom-context-2d-textbaseline-alphabetic id=2dcontext:dom-context-2d-textbaseline-alphabetic>alphabetic</a>", "<a href=#dom-context-2d-textbaseline-ideographic id=2dcontext:dom-context-2d-textbaseline-ideographic>ideographic</a>", "<a href=#dom-context-2d-textbaseline-bottom id=2dcontext:dom-context-2d-textbaseline-bottom>bottom</a>" };
enum <dfn id=canvasdirection>CanvasDirection</dfn> { "<a href=#dom-context-2d-direction-ltr id=2dcontext:dom-context-2d-direction-ltr>ltr</a>", "<a href=#dom-context-2d-direction-rtl id=2dcontext:dom-context-2d-direction-rtl>rtl</a>", "<a href=#dom-context-2d-direction-inherit id=2dcontext:dom-context-2d-direction-inherit>inherit</a>" };

interface mixin <dfn id=canvaspathdrawingstyles>CanvasPathDrawingStyles</dfn> {
  // line caps/joins
  attribute unrestricted double <a href=#dom-context-2d-linewidth id=2dcontext:dom-context-2d-linewidth>lineWidth</a>; // (default 1)
  attribute <a href=#canvaslinecap id=2dcontext:canvaslinecap>CanvasLineCap</a> <a href=#dom-context-2d-linecap id=2dcontext:dom-context-2d-linecap>lineCap</a>; // (default "butt")
  attribute <a href=#canvaslinejoin id=2dcontext:canvaslinejoin>CanvasLineJoin</a> <a href=#dom-context-2d-linejoin id=2dcontext:dom-context-2d-linejoin>lineJoin</a>; // (default "miter")
  attribute unrestricted double <a href=#dom-context-2d-miterlimit id=2dcontext:dom-context-2d-miterlimit>miterLimit</a>; // (default 10)

  // dashed lines
  undefined <a href=#dom-context-2d-setlinedash id=2dcontext:dom-context-2d-setlinedash>setLineDash</a>(sequence&lt;unrestricted double> segments); // default empty
  sequence&lt;unrestricted double> <a href=#dom-context-2d-getlinedash id=2dcontext:dom-context-2d-getlinedash>getLineDash</a>();
  attribute unrestricted double <a href=#dom-context-2d-linedashoffset id=2dcontext:dom-context-2d-linedashoffset>lineDashOffset</a>;
};

interface mixin <dfn id=canvastextdrawingstyles>CanvasTextDrawingStyles</dfn> {
  // text
  attribute DOMString <a href=#dom-context-2d-font id=2dcontext:dom-context-2d-font>font</a>; // (default 10px sans-serif)
  attribute <a href=#canvastextalign id=2dcontext:canvastextalign>CanvasTextAlign</a> <a href=#dom-context-2d-textalign id=2dcontext:dom-context-2d-textalign>textAlign</a>; // (default: "start")
  attribute <a href=#canvastextbaseline id=2dcontext:canvastextbaseline>CanvasTextBaseline</a> <a href=#dom-context-2d-textbaseline id=2dcontext:dom-context-2d-textbaseline>textBaseline</a>; // (default: "alphabetic")
  attribute <a href=#canvasdirection id=2dcontext:canvasdirection>CanvasDirection</a> <a href=#dom-context-2d-direction id=2dcontext:dom-context-2d-direction>direction</a>; // (default: "inherit")
};

interface mixin <dfn id=canvaspath>CanvasPath</dfn> {
  // shared path API methods
  undefined <a href=#dom-context-2d-closepath id=2dcontext:dom-context-2d-closepath>closePath</a>();
  undefined <a href=#dom-context-2d-moveto id=2dcontext:dom-context-2d-moveto>moveTo</a>(unrestricted double x, unrestricted double y);
  undefined <a href=#dom-context-2d-lineto id=2dcontext:dom-context-2d-lineto>lineTo</a>(unrestricted double x, unrestricted double y);
  undefined <a href=#dom-context-2d-quadraticcurveto id=2dcontext:dom-context-2d-quadraticcurveto>quadraticCurveTo</a>(unrestricted double cpx, unrestricted double cpy, unrestricted double x, unrestricted double y);
  undefined <a href=#dom-context-2d-beziercurveto id=2dcontext:dom-context-2d-beziercurveto>bezierCurveTo</a>(unrestricted double cp1x, unrestricted double cp1y, unrestricted double cp2x, unrestricted double cp2y, unrestricted double x, unrestricted double y);
  undefined <a href=#dom-context-2d-arcto id=2dcontext:dom-context-2d-arcto>arcTo</a>(unrestricted double x1, unrestricted double y1, unrestricted double x2, unrestricted double y2, unrestricted double radius); 
  undefined <a href=#dom-context-2d-rect id=2dcontext:dom-context-2d-rect>rect</a>(unrestricted double x, unrestricted double y, unrestricted double w, unrestricted double h);
  undefined <a href=#dom-context-2d-arc id=2dcontext:dom-context-2d-arc>arc</a>(unrestricted double x, unrestricted double y, unrestricted double radius, unrestricted double startAngle, unrestricted double endAngle, optional boolean anticlockwise = false); 
  undefined <a href=#dom-context-2d-ellipse id=2dcontext:dom-context-2d-ellipse>ellipse</a>(unrestricted double x, unrestricted double y, unrestricted double radiusX, unrestricted double radiusY, unrestricted double rotation, unrestricted double startAngle, unrestricted double endAngle, optional boolean anticlockwise = false); 
};

[Exposed=(Window,Worker)]
interface <dfn id=canvasgradient>CanvasGradient</dfn> {
  // opaque object
  undefined <a href=#dom-canvasgradient-addcolorstop id=2dcontext:dom-canvasgradient-addcolorstop>addColorStop</a>(double offset, DOMString color);
};

[Exposed=(Window,Worker)]
interface <dfn id=canvaspattern>CanvasPattern</dfn> {
  // opaque object
  undefined <a href=#dom-canvaspattern-settransform id=2dcontext:dom-canvaspattern-settransform>setTransform</a>(optional <a id=2dcontext:dommatrix2dinit-2 href=https://drafts.fxtf.org/geometry/#dictdef-dommatrix2dinit data-x-internal=dommatrix2dinit>DOMMatrix2DInit</a> transform = {});
};

[Exposed=(Window,Worker)]
interface <dfn id=textmetrics>TextMetrics</dfn> {
  // x-direction
  readonly attribute double <a href=#dom-textmetrics-width-2 id=2dcontext:dom-textmetrics-width-2>width</a>; // advance width
  readonly attribute double <a href=#dom-textmetrics-actualboundingboxleft-2 id=2dcontext:dom-textmetrics-actualboundingboxleft-2>actualBoundingBoxLeft</a>;
  readonly attribute double <a href=#dom-textmetrics-actualboundingboxright-2 id=2dcontext:dom-textmetrics-actualboundingboxright-2>actualBoundingBoxRight</a>;

  // y-direction
  readonly attribute double <a href=#dom-textmetrics-fontboundingboxascent-2 id=2dcontext:dom-textmetrics-fontboundingboxascent-2>fontBoundingBoxAscent</a>;
  readonly attribute double <a href=#dom-textmetrics-fontboundingboxdescent-2 id=2dcontext:dom-textmetrics-fontboundingboxdescent-2>fontBoundingBoxDescent</a>;
  readonly attribute double <a href=#dom-textmetrics-actualboundingboxascent-2 id=2dcontext:dom-textmetrics-actualboundingboxascent-2>actualBoundingBoxAscent</a>;
  readonly attribute double <a href=#dom-textmetrics-actualboundingboxdescent-2 id=2dcontext:dom-textmetrics-actualboundingboxdescent-2>actualBoundingBoxDescent</a>;
  readonly attribute double <a href=#dom-textmetrics-emheightascent-2 id=2dcontext:dom-textmetrics-emheightascent-2>emHeightAscent</a>;
  readonly attribute double <a href=#dom-textmetrics-emheightdescent-2 id=2dcontext:dom-textmetrics-emheightdescent-2>emHeightDescent</a>;
  readonly attribute double <a href=#dom-textmetrics-hangingbaseline-2 id=2dcontext:dom-textmetrics-hangingbaseline-2>hangingBaseline</a>;
  readonly attribute double <a href=#dom-textmetrics-alphabeticbaseline-2 id=2dcontext:dom-textmetrics-alphabeticbaseline-2>alphabeticBaseline</a>;
  readonly attribute double <a href=#dom-textmetrics-ideographicbaseline-2 id=2dcontext:dom-textmetrics-ideographicbaseline-2>ideographicBaseline</a>;
};

[Exposed=(Window,Worker),
 <span>Serializable</span>]
interface <dfn id=imagedata>ImageData</dfn> {
  <a href=#dom-imagedata id=2dcontext:dom-imagedata>constructor</a>(unsigned long sw, unsigned long sh);
  <a href=#dom-imagedata id=2dcontext:dom-imagedata-2>constructor</a>(<a href=https://heycam.github.io/webidl/#idl-Uint8ClampedArray id=2dcontext:idl-uint8clampedarray data-x-internal=idl-uint8clampedarray>Uint8ClampedArray</a> data, unsigned long sw, optional unsigned long sh);

  readonly attribute unsigned long <a href=#dom-imagedata-width id=2dcontext:dom-imagedata-width>width</a>;
  readonly attribute unsigned long <a href=#dom-imagedata-height id=2dcontext:dom-imagedata-height>height</a>;
  readonly attribute <a href=https://heycam.github.io/webidl/#idl-Uint8ClampedArray id=2dcontext:idl-uint8clampedarray-2 data-x-internal=idl-uint8clampedarray>Uint8ClampedArray</a> <a href=#dom-imagedata-data id=2dcontext:dom-imagedata-data>data</a>;
};

[Exposed=(Window,Worker)]
interface <dfn id=path2d>Path2D</dfn> {
  <a href=#dom-path2d id=2dcontext:dom-path2d>constructor</a>(optional (<a href=#path2d id=2dcontext:path2d-8>Path2D</a> or DOMString) path);

  undefined <a href=#dom-path2d-addpath id=2dcontext:dom-path2d-addpath>addPath</a>(<a href=#path2d id=2dcontext:path2d-9>Path2D</a> path, optional <a id=2dcontext:dommatrix2dinit-3 href=https://drafts.fxtf.org/geometry/#dictdef-dommatrix2dinit data-x-internal=dommatrix2dinit>DOMMatrix2DInit</a> transform = {});
};
<a href=#path2d id=2dcontext:path2d-10>Path2D</a> includes <a href=#canvaspath id=2dcontext:canvaspath-3>CanvasPath</a>;</code></pre>

 

  

  <dl class=domintro><dt><var>context</var> = <var>canvas</var> . <code id=2dcontext:dom-canvas-getcontext><a href=#dom-canvas-getcontext>getContext</a></code>('2d' [, { [ <code>alpha</code>: true ] [, <code>desynchronized</code>: false ] } ] )<dd>
    <p>Returns a <code id=2dcontext:canvasrenderingcontext2d-17><a href=#canvasrenderingcontext2d>CanvasRenderingContext2D</a></code> object that is permanently bound to a
    particular <code id=2dcontext:the-canvas-element><a href=#the-canvas-element>canvas</a></code> element.</p>

    <p>If the <code>alpha</code> member is
    false, then the context is forced to always be opaque.</p>

    <p>If the <code>desynchronized</code> member is
    true, then the context might be <span>desynchronized</span>.</p>
   <dt><var>context</var> . <code id=dom-context-2d-canvas>canvas</code><dd>
    <p>Returns the <code id=2dcontext:the-canvas-element-2><a href=#the-canvas-element>canvas</a></code> element.</p>
   <dt><var>attributes</var> = <var>canvas</var> . <code>getContextAttributes</code>()<dd>
    <p>Returns an object whose:</p>

    <ul><li><code>alpha</code> member is true if the context has an alpha
     channel, or false if it was forced to be opaque.<li><code>desynchronized</code>
     member is true if the context can be <span>desynchronized</span>.</ul>
   </dl>

  

  <hr>

  <p>The <code id=2dcontext:canvasfillrule-7><a href=#canvasfillrule>CanvasFillRule</a></code> enumeration is used to select the <dfn id=fill-rule>fill rule</dfn>
  algorithm by which to determine if a point is inside or outside a path.</p>

  <p>The value "<dfn id=dom-context-2d-fillrule-nonzero><code>nonzero</code></dfn>" value
  indicates the nonzero winding rule, wherein

     a point is considered to be outside a shape if the number of times a half-infinite straight
     line drawn from that point crosses the shape's path going in one direction is equal to the
     number of times it crosses the path going in the other direction.

  </p>


  <p>The "<dfn id=dom-context-2d-fillrule-evenodd><code>evenodd</code></dfn>" value indicates
  the even-odd rule, wherein

     a point is considered to be outside a shape if the number of times a half-infinite straight
     line drawn from that point crosses the shape's path is even.

  </p>

  <p>If a point is not outside a shape, it is inside the shape.</p>


  <hr>

  <p>The <code id=2dcontext:imagesmoothingquality-2><a href=#imagesmoothingquality>ImageSmoothingQuality</a></code> enumeration is used to express a preference for the
  interpolation quality to use when smoothing images.</p>

  <p>The "<dfn id=dom-context-2d-imagesmoothingquality-low><code>low</code></dfn>" value
  indicates a preference for a low level of image interpolation quality. Low-quality image
  interpolation may be more computationally efficient than higher settings.</p>

  <p>The "<dfn id=dom-context-2d-imagesmoothingquality-medium><code>medium</code></dfn>" value
  indicates a preference for a medium level of image interpolation quality.</p>

  <p>The "<dfn id=dom-context-2d-imagesmoothingquality-high><code>high</code></dfn>" value
  indicates a preference for a high level of image interpolation quality. High-quality image
  interpolation may be more computationally expensive than lower settings.</p>

  <p class=note>Bilinear scaling is an example of a relatively fast, lower-quality image-smoothing
  algorithm. Bicubic or Lanczos scaling are examples of image-smoothing algorithms that produce
  higher-quality output. This specification does not mandate that specific interpolation algorithms
  be used.</p>



  <h6 id="Implementation notes"><span class=secno>4.12.5.1.1</span> 实现说明<a href="#Implementation notes" class=self-link></a></h6>
<div data-en-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" class=translate-info data-zh-date="Sun Apr 15 2018 12:52:48 GMT+0000 (UTC)" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/implementation-notes.en.html data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/implementation-notes.zh.html></div>

  

  <p><span>输出位图</span>，当没有被用户代理直接直接显示时，
  实现中可以只记录已经应用的绘图操作序列，而不更新整个位图，直到需要位图的实际数据时。
  （例如调用了 <code id="Implementation notes:dom-context-2d-drawimage"><a href=#dom-context-2d-drawimage>drawImage()</a></code> 或
  <code id="Implementation notes:dom-createimagebitmap"><a href=imagebitmap-and-animations.html#dom-createimagebitmap>createImageBitmap()</a></code> 工厂方法）
  很多情况下这样可以提高内存的使用效率。</p>

  <p><code id="Implementation notes:the-canvas-element"><a href=#the-canvas-element>canvas</a></code> 元素的位图在实践中总是需要的，
  渲染上下文的 <span>输出位图</span>（如果有的话）
  只是 <code id="Implementation notes:the-canvas-element-2"><a href=#the-canvas-element>canvas</a></code> 元素的位图的别名。</p>

  <p>有时也会需要额外的位图，比如为了使 canvas 在绘制大小与其
  <a href=https://drafts.csswg.org/css-images/#intrinsic-dimensions id="Implementation notes:intrinsic-dimensions" data-x-internal=intrinsic-dimensions>固有尺寸</a> 不同时更快，
  或者为了实现双缓冲来使得绘制命令继续执行的同时图像可以持续地更新（比如在页面滚动时）。</p>


  <h6 id=canvas-状态><span class=secno>4.12.5.1.2</span> Canvas 状态<a href=#canvas-状态 class=self-link></a></h6>
<div data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-date="Sun Apr 15 2018 12:52:48 GMT+0000 (UTC)" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/the-canvas-state.en.html data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/the-canvas-state.zh.html></div>

  <p>实现 <code id=canvas-状态:canvasstate><a href=#canvasstate>CanvasState</a></code> 接口的对象维护一个绘图状态栈。
  <dfn id=drawing-state>绘图状态</dfn> 这样组成：</p>

  <ul class=brief><li>当前 <a href=#transformations id=canvas-状态:transformations>转换矩阵</a>。<li>当前 <span>裁剪区域</span>。<li>以下属性的当前值： <code id=canvas-状态:dom-context-2d-strokestyle><a href=#dom-context-2d-strokestyle>strokeStyle</a></code>, <code id=canvas-状态:dom-context-2d-fillstyle><a href=#dom-context-2d-fillstyle>fillStyle</a></code>, <code id=canvas-状态:dom-context-2d-globalalpha><a href=#dom-context-2d-globalalpha>globalAlpha</a></code>, <code id=canvas-状态:dom-context-2d-linewidth><a href=#dom-context-2d-linewidth>lineWidth</a></code>, <code id=canvas-状态:dom-context-2d-linecap><a href=#dom-context-2d-linecap>lineCap</a></code>, <code id=canvas-状态:dom-context-2d-linejoin><a href=#dom-context-2d-linejoin>lineJoin</a></code>, <code id=canvas-状态:dom-context-2d-miterlimit><a href=#dom-context-2d-miterlimit>miterLimit</a></code>, <code id=canvas-状态:dom-context-2d-linedashoffset><a href=#dom-context-2d-linedashoffset>lineDashOffset</a></code>, <code id=canvas-状态:dom-context-2d-shadowoffsetx><a href=#dom-context-2d-shadowoffsetx>shadowOffsetX</a></code>, <code id=canvas-状态:dom-context-2d-shadowoffsety><a href=#dom-context-2d-shadowoffsety>shadowOffsetY</a></code>, <code id=canvas-状态:dom-context-2d-shadowblur><a href=#dom-context-2d-shadowblur>shadowBlur</a></code>, <code id=canvas-状态:dom-context-2d-shadowcolor><a href=#dom-context-2d-shadowcolor>shadowColor</a></code>, <code id=canvas-状态:dom-context-2d-filter><a href=#dom-context-2d-filter>filter</a></code>, <code id=canvas-状态:dom-context-2d-globalcompositeoperation><a href=#dom-context-2d-globalcompositeoperation>globalCompositeOperation</a></code>, <code id=canvas-状态:dom-context-2d-font><a href=#dom-context-2d-font>font</a></code>, <code id=canvas-状态:dom-context-2d-textalign><a href=#dom-context-2d-textalign>textAlign</a></code>, <code id=canvas-状态:dom-context-2d-textbaseline><a href=#dom-context-2d-textbaseline>textBaseline</a></code>, <code id=canvas-状态:dom-context-2d-direction><a href=#dom-context-2d-direction>direction</a></code>, <code id=canvas-状态:dom-context-2d-imagesmoothingenabled><a href=#dom-context-2d-imagesmoothingenabled>imageSmoothingEnabled</a></code>, <code id=canvas-状态:dom-context-2d-imagesmoothingquality><a href=#dom-context-2d-imagesmoothingquality>imageSmoothingQuality</a></code>。<li>当前 <span>dash list</span>。</ul>

  <p class=note><a href=#current-default-path id=canvas-状态:current-default-path>当前默认路径</a>
  和渲染上下文的位图不属于绘图状态。
  <a href=#current-default-path id=canvas-状态:current-default-path-2>当前默认路径</a> 是持久的，只能使用
  <code id=canvas-状态:dom-context-2d-beginpath><a href=#dom-context-2d-beginpath>beginPath()</a></code> 方法重置。
  位图取决于渲染上下文是否（以及如何）绑定到 <code id=canvas-状态:the-canvas-element><a href=#the-canvas-element>canvas</a></code> 元素。</p>

  <dl class=domintro><dt><var>context</var> . <code id=dom-context-2d-save>save</code>()<dd>

    <p>把当前状态推入栈中。</p>

   <dt><var>context</var> . <code id=dom-context-2d-restore>restore</code>()<dd>

    <p>把栈顶部状态弹出并恢复到这个状态。</p>

   </dl>

  



  <h6 id=line-styles><span class=secno>4.12.5.1.3</span> Line styles<a href=#line-styles class=self-link></a></h6>
<div data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-date="" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/line-styles.en.html data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/line-styles.zh.html?filename=line-styles.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fscripting%2Fthe-canvas-element%2Fthe-2d-rendering-context%2Fline-styles.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91"></div>

  <dl class=domintro><dt><var>context</var> . <code id=dom-context-2d-linewidth>lineWidth</code> [ = <var>value</var> ]<dt><var>styles</var> . <code id=line-styles:dom-context-2d-linewidth><a href=#dom-context-2d-linewidth>lineWidth</a></code> [ = <var>value</var> ]<dd>
    <p>Returns the current line width.</p>

    <p>Can be set, to change the line width. Values that are not finite values greater than zero are
    ignored.</p>
   <dt><var>context</var> . <code id=dom-context-2d-linecap>lineCap</code> [ = <var>value</var> ]<dt><var>styles</var> . <code id=line-styles:dom-context-2d-linecap><a href=#dom-context-2d-linecap>lineCap</a></code> [ = <var>value</var> ]<dd>
    <p>Returns the current line cap style.</p>

    <p>Can be set, to change the line cap style.</p>

    <p>The possible line cap styles are "<code>butt</code>", "<code>round</code>", and "<code>square</code>". Other values are ignored.</p>
   <dt><var>context</var> . <code id=dom-context-2d-linejoin>lineJoin</code> [ = <var>value</var> ]<dt><var>styles</var> . <code id=line-styles:dom-context-2d-linejoin><a href=#dom-context-2d-linejoin>lineJoin</a></code> [ = <var>value</var> ]<dd>
    <p>Returns the current line join style.</p>

    <p>Can be set, to change the line join style.</p>

    <p>The possible line join styles are "<code>bevel</code>", "<code>round</code>", and "<code>miter</code>". Other values are ignored.</p>
   <dt><var>context</var> . <code id=dom-context-2d-miterlimit>miterLimit</code> [ = <var>value</var> ]<dt><var>styles</var> . <code id=line-styles:dom-context-2d-miterlimit><a href=#dom-context-2d-miterlimit>miterLimit</a></code> [ = <var>value</var> ]<dd>
    <p>Returns the current miter limit ratio.</p>

    <p>Can be set, to change the miter limit ratio. Values that are not finite values greater than
    zero are ignored.</p>
   <dt><var>context</var> . <code id=dom-context-2d-setlinedash>setLineDash</code>(<var>segments</var>)<dt><var>styles</var> . <code id=line-styles:dom-context-2d-setlinedash><a href=#dom-context-2d-setlinedash>setLineDash</a></code>(<var>segments</var>)<dd>
    <p>Sets the current line dash pattern (as used when stroking). The argument is a list of
    distances for which to alternately have the line on and the line off.</p>
   <dt><var>segments</var> = <var>context</var> . <code id=dom-context-2d-getlinedash>getLineDash</code>()<dt><var>segments</var> = <var>styles</var> . <code id=line-styles:dom-context-2d-getlinedash><a href=#dom-context-2d-getlinedash>getLineDash</a></code>()<dd>
    <p>Returns a copy of the current line dash pattern. The array returned will always have an even
    number of entries (i.e. the pattern is normalized).</p>
   <dt><var>context</var> . <code id=dom-context-2d-linedashoffset>lineDashOffset</code><dt><var>styles</var> . <code id=line-styles:dom-context-2d-linedashoffset><a href=#dom-context-2d-linedashoffset>lineDashOffset</a></code><dd>
    <p>Returns the phase offset (in the same units as the line dash pattern).</p>

    <p>Can be set, to change the phase offset. Values that are not finite values are ignored.</p>
   </dl>

  



  <h6 id=text-styles><span class=secno>4.12.5.1.4</span> Text styles<a href=#text-styles class=self-link></a></h6>
<div data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-date="" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/text-styles.en.html data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/text-styles.zh.html?filename=text-styles.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fscripting%2Fthe-canvas-element%2Fthe-2d-rendering-context%2Ftext-styles.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91"></div>

  <dl class=domintro><dt><var>context</var> . <code id=dom-context-2d-font>font</code> [ = <var>value</var> ]<dt><var>styles</var> . <code id=text-styles:dom-context-2d-font><a href=#dom-context-2d-font>font</a></code> [ = <var>value</var> ]<dd>
    <p>Returns the current font settings.</p>

    <p>Can be set, to change the font. The syntax is the same as for the CSS <a id="text-styles:'font'" href=https://drafts.csswg.org/css-fonts/#font-prop data-x-internal="'font'">'font'</a>
    property; values that cannot be parsed as CSS font values are ignored.</p>

    <p>Relative keywords and lengths are computed relative to the font of the <code id=text-styles:the-canvas-element><a href=#the-canvas-element>canvas</a></code>
    element.</p>
   <dt><var>context</var> . <code id=dom-context-2d-textalign>textAlign</code> [ = <var>value</var> ]<dt><var>styles</var> . <code id=text-styles:dom-context-2d-textalign><a href=#dom-context-2d-textalign>textAlign</a></code> [ = <var>value</var> ]<dd>
    <p>Returns the current text alignment settings.</p>

    <p>Can be set, to change the alignment. The possible values are and their meanings are given
    below. Other values are ignored. The default is "<code>start</code>".</p>
   <dt><var>context</var> . <code id=dom-context-2d-textbaseline>textBaseline</code> [ = <var>value</var> ]<dt><var>styles</var> . <code id=text-styles:dom-context-2d-textbaseline><a href=#dom-context-2d-textbaseline>textBaseline</a></code> [ = <var>value</var> ]<dd>
    <p>Returns the current baseline alignment settings.</p>

    <p>Can be set, to change the baseline alignment. The possible values and their meanings are
    given below. Other values are ignored. The default is "<code id=text-styles:dom-context-2d-textbaseline-alphabetic><a href=#dom-context-2d-textbaseline-alphabetic>alphabetic</a></code>".</p>
   <dt><var>context</var> . <code id=dom-context-2d-direction>direction</code> [ = <var>value</var> ]<dt><var>styles</var> . <code id=text-styles:dom-context-2d-direction><a href=#dom-context-2d-direction>direction</a></code> [ = <var>value</var> ]<dd>
    <p>Returns the current directionality.</p>

    <p>Can be set, to change the directionality. The possible values and their meanings are given
    below. Other values are ignored. The default is "<code id=text-styles:dom-context-2d-direction-inherit><a href=#dom-context-2d-direction-inherit>inherit</a></code>".</p>
   </dl>

  

  <p>The <code id=text-styles:dom-context-2d-textalign-2><a href=#dom-context-2d-textalign>textAlign</a></code> attribute's allowed keywords are
  as follows:</p>

  <dl><dt><dfn id=dom-context-2d-textalign-start><code>start</code></dfn>
   <dd><p>Align to the start edge of the text (left side in left-to-right text, right side in
   right-to-left text).<dt><dfn id=dom-context-2d-textalign-end><code>end</code></dfn>
   <dd><p>Align to the end edge of the text (right side in left-to-right text, left side in
   right-to-left text).<dt><dfn id=dom-context-2d-textalign-left><code>left</code></dfn>
   <dd><p>Align to the left.<dt><dfn id=dom-context-2d-textalign-right><code>right</code></dfn>
   <dd><p>Align to the right.<dt><dfn id=dom-context-2d-textalign-center><code>center</code></dfn>
   <dd><p>Align to the center.</dl>

  <p>The <code id=text-styles:dom-context-2d-textbaseline-2><a href=#dom-context-2d-textbaseline>textBaseline</a></code>
  attribute's allowed keywords correspond to alignment points in the
  font:</p>

  <p><img alt="The top of the em square is roughly at the top of the glyphs in a font, the hanging baseline is where some glyphs like आ are anchored, the middle is half-way between the top of the em square and the bottom of the em square, the alphabetic baseline is where characters like Á, ÿ, f, and Ω are anchored, the ideographic-under baseline is where glyphs like 私 and 達 are anchored, and the bottom of the em square is roughly at the bottom of the glyphs in a font. The top and bottom of the bounding box can be far from these baselines, due to glyphs extending far outside the em square." src=/images/baselines.png width=738 height=300></p>

  <p>The keywords map to these alignment points as follows:</p>

  <dl><dt><dfn id=dom-context-2d-textbaseline-top><code>top</code></dfn>
   <dd>The top of the em square<dt><dfn id=dom-context-2d-textbaseline-hanging><code>hanging</code></dfn>
   <dd>The <a id=text-styles:hanging-baseline href=https://drafts.csswg.org/css-inline/#hanging-baseline data-x-internal=hanging-baseline>hanging baseline</a><dt><dfn id=dom-context-2d-textbaseline-middle><code>middle</code></dfn>
   <dd>The middle of the em square<dt><dfn id=dom-context-2d-textbaseline-alphabetic><code>alphabetic</code></dfn>
   <dd>The <a id=text-styles:alphabetic-baseline href=https://drafts.csswg.org/css-inline/#alphabetic-baseline data-x-internal=alphabetic-baseline>alphabetic baseline</a><dt><dfn id=dom-context-2d-textbaseline-ideographic><code>ideographic</code></dfn>
   <dd>The <a id=text-styles:ideographic-under-baseline href=https://drafts.csswg.org/css-inline/#ideographic-under-baseline data-x-internal=ideographic-under-baseline>ideographic-under baseline</a><dt><dfn id=dom-context-2d-textbaseline-bottom><code>bottom</code></dfn>
   <dd>The bottom of the em square</dl>

  <p>The <code id=text-styles:dom-context-2d-direction-2><a href=#dom-context-2d-direction>direction</a></code> attribute's allowed keywords are
  as follows:</p>

  <dl><dt><dfn data-dfn-for=CanvasDirection id=dom-context-2d-direction-ltr data-dfn-type=enum-value><code>ltr</code></dfn>

   <dd><p>Treat input to the <a href=#text-preparation-algorithm id=text-styles:text-preparation-algorithm>text preparation algorithm</a> as left-to-right text.<dt><dfn data-dfn-for=CanvasDirection id=dom-context-2d-direction-rtl data-dfn-type=enum-value><code>rtl</code></dfn>

   <dd><p>Treat input to the <a href=#text-preparation-algorithm id=text-styles:text-preparation-algorithm-2>text preparation algorithm</a> as right-to-left text.<dt><dfn data-dfn-for=CanvasDirection id=dom-context-2d-direction-inherit data-dfn-type=enum-value><code>inherit</code></dfn>

   <dd><p>Default to the directionality of the <code id=text-styles:the-canvas-element-2><a href=#the-canvas-element>canvas</a></code> element or <code id=text-styles:document><a href=dom.html#document>Document</a></code>
   as appropriate.</dl>

  <p>The <dfn id=text-preparation-algorithm>text preparation algorithm</dfn> is as follows. It takes as input a string <var>text
  </var>, a <code id=text-styles:canvastextdrawingstyles><a href=#canvastextdrawingstyles>CanvasTextDrawingStyles</a></code> object <var>target</var>, and an optional length
  <var>maxWidth</var>. It returns an array of glyph shapes, each positioned on a common coordinate
  space, a <var>physical alignment</var> whose value is one of <i>left</i>, <i>right</i>, and
  <i>center</i>, and an <a id=text-styles:inline-box href=https://drafts.csswg.org/css2/#inline-box data-x-internal=inline-box>inline box</a>. (Most callers of this algorithm ignore the
  <var>physical alignment</var> and the <a id=text-styles:inline-box-2 href=https://drafts.csswg.org/css2/#inline-box data-x-internal=inline-box>inline box</a>.)</p>

  <ol><li><p>If <var>maxWidth</var> was provided but is less than or equal to zero or equal to NaN,
   then return an empty array.<li><p>Replace all <a id=text-styles:space-characters href=https://infra.spec.whatwg.org/#ascii-whitespace data-x-internal=space-characters>ASCII whitespace</a> in <var>text</var> with U+0020 SPACE
   characters.<li><p>Let <var>font</var> be the current font of <var>target</var>, as given
   by that object's <code id=text-styles:dom-context-2d-font-2><a href=#dom-context-2d-font>font</a></code> attribute.<li>
    <p>Apply the appropriate step from the following list to determine the value of <var>direction</var>:</p>

    <dl class=switch><dt>If the <var>target</var> object's <code id=text-styles:dom-context-2d-direction-3><a href=#dom-context-2d-direction>direction</a></code> attribute has the value "<code id=text-styles:dom-context-2d-direction-ltr><a href=#dom-context-2d-direction-ltr>ltr</a></code>"<dd>Let <var>direction</var> be '<a href=dom.html#concept-ltr id=text-styles:concept-ltr>ltr</a>'.<dt>If the <var>target</var> object's <code id=text-styles:dom-context-2d-direction-4><a href=#dom-context-2d-direction>direction</a></code> attribute has the value "<code id=text-styles:dom-context-2d-direction-rtl><a href=#dom-context-2d-direction-rtl>rtl</a></code>"<dd>Let <var>direction</var> be '<a href=dom.html#concept-rtl id=text-styles:concept-rtl>rtl</a>'.<dt>If the <var>target</var> object's <span>font style source object</span> is an
     element<dd>Let <var>direction</var> be <a id=text-styles:the-directionality href=dom.html#the-directionality>the directionality</a> of the <var>target</var> object's <span>font style source object</span>.<dt>If the <var>target</var> object's <span>font style source object</span> is a
     <code id=text-styles:document-2><a href=dom.html#document>Document</a></code> with a non-null <a id=text-styles:document-element href=https://dom.spec.whatwg.org/#document-element data-x-internal=document-element>document element</a><dd>Let <var>direction</var> be <a id=text-styles:the-directionality-2 href=dom.html#the-directionality>the directionality</a> of the <var>target</var>
     object's <span>font style source object</span>'s <a id=text-styles:document-element-2 href=https://dom.spec.whatwg.org/#document-element data-x-internal=document-element>document element</a>.<dt>Otherwise<dd>Let <var>direction</var> be '<a href=dom.html#concept-ltr id=text-styles:concept-ltr-2>ltr</a>'.</dl>
   <li><p>Form a hypothetical infinitely-wide CSS <a id=text-styles:line-box href=https://drafts.csswg.org/css2/#line-box data-x-internal=line-box>line box</a> containing a single
   <a id=text-styles:inline-box-3 href=https://drafts.csswg.org/css2/#inline-box data-x-internal=inline-box>inline box</a> containing the text <var>text</var>, with all the properties at their
   initial values except the <a id="text-styles:'font'-2" href=https://drafts.csswg.org/css-fonts/#font-prop data-x-internal="'font'">'font'</a> property of the <a id=text-styles:inline-box-4 href=https://drafts.csswg.org/css2/#inline-box data-x-internal=inline-box>inline box</a> set to
   <var>font</var>, the <a id="text-styles:'direction'" href=https://drafts.csswg.org/css-writing-modes/#direction data-x-internal="'direction'">'direction'</a> property of the <a id=text-styles:inline-box-5 href=https://drafts.csswg.org/css2/#inline-box data-x-internal=inline-box>inline box</a> set to
   <var>direction</var>, and the <a id="text-styles:'white-space'" href=https://drafts.csswg.org/css-text/#white-space-property data-x-internal="'white-space'">'white-space'</a> property set to 'pre'. <a href=references.html#refsCSS>[CSS]</a><li><p>If <var>maxWidth</var> was provided and the hypothetical width of the
   <a id=text-styles:inline-box-6 href=https://drafts.csswg.org/css2/#inline-box data-x-internal=inline-box>inline box</a> in the hypothetical <a id=text-styles:line-box-2 href=https://drafts.csswg.org/css2/#line-box data-x-internal=line-box>line box</a> is greater than
   <var>maxWidth</var> <a href=https://drafts.csswg.org/css-values/#px id="text-styles:'px'" data-x-internal="'px'">CSS pixels</a>, then change <var>font</var> to have a
   more condensed font (if one is available or if a reasonably readable one can be synthesized by
   applying a horizontal scale factor to the font) or a smaller font, and return to the previous
   step.<li>
    <p>The <var>anchor point</var> is a point on the <a id=text-styles:inline-box-7 href=https://drafts.csswg.org/css2/#inline-box data-x-internal=inline-box>inline box</a>, and the <var>physical
    alignment</var> is one of the values <i>left</i>, <i>right</i>, and <i>center</i>. These
    variables are determined by the <code id=text-styles:dom-context-2d-textalign-3><a href=#dom-context-2d-textalign>textAlign</a></code> and
    <code id=text-styles:dom-context-2d-textbaseline-3><a href=#dom-context-2d-textbaseline>textBaseline</a></code> values as follows:</p>

    <p>Horizontal position:</p>

    <dl><dt>If <code id=text-styles:dom-context-2d-textalign-4><a href=#dom-context-2d-textalign>textAlign</a></code> is <code id=text-styles:dom-context-2d-textalign-left><a href=#dom-context-2d-textalign-left>left</a></code><dt>If <code id=text-styles:dom-context-2d-textalign-5><a href=#dom-context-2d-textalign>textAlign</a></code> is <code id=text-styles:dom-context-2d-textalign-start><a href=#dom-context-2d-textalign-start>start</a></code> and <var>direction</var> is
     'ltr'<dt>If <code id=text-styles:dom-context-2d-textalign-6><a href=#dom-context-2d-textalign>textAlign</a></code> is <code id=text-styles:dom-context-2d-textalign-end><a href=#dom-context-2d-textalign-end>end</a></code> and <var>direction</var> is 'rtl'<dd>Let the <var>anchor point</var>'s horizontal position be the left edge of the
     <a id=text-styles:inline-box-8 href=https://drafts.csswg.org/css2/#inline-box data-x-internal=inline-box>inline box</a>, and let <var>physical alignment</var> be <i>left</i>.<dt>If <code id=text-styles:dom-context-2d-textalign-7><a href=#dom-context-2d-textalign>textAlign</a></code> is <code id=text-styles:dom-context-2d-textalign-right><a href=#dom-context-2d-textalign-right>right</a></code><dt>If <code id=text-styles:dom-context-2d-textalign-8><a href=#dom-context-2d-textalign>textAlign</a></code> is <code id=text-styles:dom-context-2d-textalign-end-2><a href=#dom-context-2d-textalign-end>end</a></code> and <var>direction</var> is 'ltr'<dt>If <code id=text-styles:dom-context-2d-textalign-9><a href=#dom-context-2d-textalign>textAlign</a></code> is <code id=text-styles:dom-context-2d-textalign-start-2><a href=#dom-context-2d-textalign-start>start</a></code> and <var>direction</var> is
     'rtl'<dd>Let the <var>anchor point</var>'s horizontal position be the right edge of the
     <a id=text-styles:inline-box-9 href=https://drafts.csswg.org/css2/#inline-box data-x-internal=inline-box>inline box</a>, and let <var>physical alignment</var> be <i>right</i>.<dt>If <code id=text-styles:dom-context-2d-textalign-10><a href=#dom-context-2d-textalign>textAlign</a></code> is <code id=text-styles:dom-context-2d-textalign-center><a href=#dom-context-2d-textalign-center>center</a></code><dd>Let the <var>anchor point</var>'s horizontal position be half way between the left
     and right edges of the <a id=text-styles:inline-box-10 href=https://drafts.csswg.org/css2/#inline-box data-x-internal=inline-box>inline box</a>, and let <var>physical alignment</var> be
     <i>center</i>.</dl>

    <p>Vertical position:</p>

    <dl><dt>If <code id=text-styles:dom-context-2d-textbaseline-4><a href=#dom-context-2d-textbaseline>textBaseline</a></code> is <code id=text-styles:dom-context-2d-textbaseline-top><a href=#dom-context-2d-textbaseline-top>top</a></code><dd>Let the <var>anchor point</var>'s vertical position be the top of the em box of
     the <a id=text-styles:first-available-font href=https://drafts.csswg.org/css-fonts/#first-available-font data-x-internal=first-available-font>first available font</a> of the <a id=text-styles:inline-box-11 href=https://drafts.csswg.org/css2/#inline-box data-x-internal=inline-box>inline box</a>.<dt>If <code id=text-styles:dom-context-2d-textbaseline-5><a href=#dom-context-2d-textbaseline>textBaseline</a></code> is <code id=text-styles:dom-context-2d-textbaseline-hanging><a href=#dom-context-2d-textbaseline-hanging>hanging</a></code><dd>Let the <var>anchor point</var>'s vertical position be the <a id=text-styles:hanging-baseline-2 href=https://drafts.csswg.org/css-inline/#hanging-baseline data-x-internal=hanging-baseline>hanging baseline</a> of
     the <a id=text-styles:first-available-font-2 href=https://drafts.csswg.org/css-fonts/#first-available-font data-x-internal=first-available-font>first available font</a> of the <a id=text-styles:inline-box-12 href=https://drafts.csswg.org/css2/#inline-box data-x-internal=inline-box>inline box</a>.<dt>If <code id=text-styles:dom-context-2d-textbaseline-6><a href=#dom-context-2d-textbaseline>textBaseline</a></code> is <code id=text-styles:dom-context-2d-textbaseline-middle><a href=#dom-context-2d-textbaseline-middle>middle</a></code><dd>Let the <var>anchor point</var>'s vertical position be half way between the bottom
     and the top of the em box of the <a id=text-styles:first-available-font-3 href=https://drafts.csswg.org/css-fonts/#first-available-font data-x-internal=first-available-font>first available font</a> of the <a id=text-styles:inline-box-13 href=https://drafts.csswg.org/css2/#inline-box data-x-internal=inline-box>inline
     box</a>.<dt>If <code id=text-styles:dom-context-2d-textbaseline-7><a href=#dom-context-2d-textbaseline>textBaseline</a></code> is <code id=text-styles:dom-context-2d-textbaseline-alphabetic-2><a href=#dom-context-2d-textbaseline-alphabetic>alphabetic</a></code><dd>Let the <var>anchor point</var>'s vertical position be the <a id=text-styles:alphabetic-baseline-2 href=https://drafts.csswg.org/css-inline/#alphabetic-baseline data-x-internal=alphabetic-baseline>alphabetic baseline</a>
     of the <a id=text-styles:first-available-font-4 href=https://drafts.csswg.org/css-fonts/#first-available-font data-x-internal=first-available-font>first available font</a> of the <a id=text-styles:inline-box-14 href=https://drafts.csswg.org/css2/#inline-box data-x-internal=inline-box>inline box</a>.<dt>If <code id=text-styles:dom-context-2d-textbaseline-8><a href=#dom-context-2d-textbaseline>textBaseline</a></code> is <code id=text-styles:dom-context-2d-textbaseline-ideographic><a href=#dom-context-2d-textbaseline-ideographic>ideographic</a></code><dd>Let the <var>anchor point</var>'s vertical position be the <a id=text-styles:ideographic-under-baseline-2 href=https://drafts.csswg.org/css-inline/#ideographic-under-baseline data-x-internal=ideographic-under-baseline>ideographic-under
     baseline</a> of the <a id=text-styles:first-available-font-5 href=https://drafts.csswg.org/css-fonts/#first-available-font data-x-internal=first-available-font>first available font</a> of the <a id=text-styles:inline-box-15 href=https://drafts.csswg.org/css2/#inline-box data-x-internal=inline-box>inline box</a>.<dt>If <code id=text-styles:dom-context-2d-textbaseline-9><a href=#dom-context-2d-textbaseline>textBaseline</a></code> is <code id=text-styles:dom-context-2d-textbaseline-bottom><a href=#dom-context-2d-textbaseline-bottom>bottom</a></code><dd>Let the <var>anchor point</var>'s vertical position be the bottom of the em box of
     the <a id=text-styles:first-available-font-6 href=https://drafts.csswg.org/css-fonts/#first-available-font data-x-internal=first-available-font>first available font</a> of the <a id=text-styles:inline-box-16 href=https://drafts.csswg.org/css2/#inline-box data-x-internal=inline-box>inline box</a>.</dl>
   <li>
    <p>Let <var>result</var> be an array constructed by iterating over each glyph in the
    <a id=text-styles:inline-box-17 href=https://drafts.csswg.org/css2/#inline-box data-x-internal=inline-box>inline box</a> from left to right (if any), adding to the array, for each glyph, the
    shape of the glyph as it is in the <a id=text-styles:inline-box-18 href=https://drafts.csswg.org/css2/#inline-box data-x-internal=inline-box>inline box</a>, positioned on a coordinate space
    using <a href=https://drafts.csswg.org/css-values/#px id="text-styles:'px'-2" data-x-internal="'px'">CSS pixels</a> with its origin is at the <var>anchor
    point</var>.</p>
   <li><p>Return <var>result</var>, <var>physical alignment</var>, and the inline
   box.</ol>



  <h6 id=building-paths><span class=secno>4.12.5.1.5</span> Building paths<a href=#building-paths class=self-link></a></h6>
<div data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-date="" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/building-paths.en.html data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/building-paths.zh.html?filename=building-paths.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fscripting%2Fthe-canvas-element%2Fthe-2d-rendering-context%2Fbuilding-paths.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91"></div>

  <p>Objects that implement the <code id=building-paths:canvaspath><a href=#canvaspath>CanvasPath</a></code> interface have a <a href=#concept-path id=building-paths:concept-path>path</a>. A <dfn id=concept-path>path</dfn> has a list of zero or
  more subpaths. Each subpath consists of a list of one or more points, connected by straight or
  curved <dfn id=line-segments>line segments</dfn>, and a flag indicating whether the subpath is closed or not. A
  closed subpath is one where the last point of the subpath is connected to the first point of the
  subpath by a straight line. Subpaths with only one point are ignored when painting the path.</p>

  <p><a href=#concept-path id=building-paths:concept-path-2>Paths</a> have a <dfn id=need-new-subpath>need new subpath</dfn> flag. When this
  flag is set, certain APIs create a new subpath rather than extending the previous one. When a
  <a href=#concept-path id=building-paths:concept-path-3>path</a> is created, its <a href=#need-new-subpath id=building-paths:need-new-subpath>need new subpath</a> flag must be
  set.</p>

  <p>When an object implementing the <code id=building-paths:canvaspath-2><a href=#canvaspath>CanvasPath</a></code> interface is created, its <a href=#concept-path id=building-paths:concept-path-4>path</a> must be initialized to zero subpaths.</p>

  <dl class=domintro><dt><var>context</var> . <code id=dom-context-2d-moveto>moveTo</code>(<var>x</var>, <var>y</var>)<dt><var>path</var> . <code id=building-paths:dom-context-2d-moveto><a href=#dom-context-2d-moveto>moveTo</a></code>(<var>x</var>, <var>y</var>)<dd>
    <p>Creates a new subpath with the given point.</p>
   <dt><var>context</var> . <code id=dom-context-2d-closepath>closePath</code>()<dt><var>path</var> . <code id=building-paths:dom-context-2d-closepath><a href=#dom-context-2d-closepath>closePath</a></code>()<dd>
    <p>Marks the current subpath as closed, and starts a new subpath with a point the same as the
    start and end of the newly closed subpath.</p>
   <dt><var>context</var> . <code id=dom-context-2d-lineto>lineTo</code>(<var>x</var>, <var>y</var>)<dt><var>path</var> . <code id=building-paths:dom-context-2d-lineto><a href=#dom-context-2d-lineto>lineTo</a></code>(<var>x</var>, <var>y</var>)<dd>
    <p>Adds the given point to the current subpath, connected to the previous one by a straight
    line.</p>
   <dt><var>context</var> . <code id=dom-context-2d-quadraticcurveto>quadraticCurveTo</code>(<var>cpx</var>, <var>cpy</var>, <var>x</var>, <var>y</var>)<dt><var>path</var> . <code id=building-paths:dom-context-2d-quadraticcurveto><a href=#dom-context-2d-quadraticcurveto>quadraticCurveTo</a></code>(<var>cpx</var>, <var>cpy</var>, <var>x</var>, <var>y</var>)<dd>
    <p>Adds the given point to the current subpath, connected to the previous one by a quadratic
    Bézier curve with the given control point.</p>
   <dt><var>context</var> . <code id=dom-context-2d-beziercurveto>bezierCurveTo</code>(<var>cp1x</var>, <var>cp1y</var>, <var>cp2x</var>, <var>cp2y</var>, <var>x</var>, <var>y</var>)<dt><var>path</var> . <code id=building-paths:dom-context-2d-beziercurveto><a href=#dom-context-2d-beziercurveto>bezierCurveTo</a></code>(<var>cp1x</var>, <var>cp1y</var>, <var>cp2x</var>, <var>cp2y</var>, <var>x</var>, <var>y</var>)<dd>
    <p>Adds the given point to the current subpath, connected to the previous one by a cubic
    Bézier curve with the given control points.</p>
   <dt><var>context</var> . <code id=dom-context-2d-arcto>arcTo</code>(<var>x1</var>, <var>y1</var>, <var>x2</var>, <var>y2</var>, <var>radius</var>)<dt><var>path</var> . <code id=building-paths:dom-context-2d-arcto><a href=#dom-context-2d-arcto>arcTo</a></code>(<var>x1</var>, <var>y1</var>, <var>x2</var>, <var>y2</var>, <var>radius</var>)<dd>
    <p>Adds an arc with the given control points and radius to the current subpath, connected to the
    previous point by a straight line.</p>

    <p>Throws an <a id=building-paths:indexsizeerror href=https://heycam.github.io/webidl/#indexsizeerror data-x-internal=indexsizeerror>"<code>IndexSizeError</code>"</a> <code id=building-paths:domexception><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code> if the given
    radius is negative.</p>

    <figure class=diagrams>
     
     <img alt="" src=/images/arcTo1.png width=357 height=254>
     <img alt="" src=/images/arcTo2.png width=468 height=310>
     <img alt="" src=/images/arcTo3.png width=513 height=233>
    </figure>


   <dt><var>context</var> . <code id=dom-context-2d-arc>arc</code>(<var>x</var>, <var>y</var>, <var>radius</var>, <var>startAngle</var>, <var>endAngle</var> [, <var>anticlockwise</var> ] )<dt><var>path</var> . <code id=building-paths:dom-context-2d-arc><a href=#dom-context-2d-arc>arc</a></code>(<var>x</var>, <var>y</var>, <var>radius</var>, <var>startAngle</var>, <var>endAngle</var> [, <var>anticlockwise</var> ] )<dd>
    <p>Adds points to the subpath such that the arc described by the circumference of the circle
    described by the arguments, starting at the given start angle and ending at the given end angle,
    going in the given direction (defaulting to clockwise), is added to the path, connected to the
    previous point by a straight line.</p>

    <p>Throws an <a id=building-paths:indexsizeerror-2 href=https://heycam.github.io/webidl/#indexsizeerror data-x-internal=indexsizeerror>"<code>IndexSizeError</code>"</a> <code id=building-paths:domexception-2><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code> if the given
    radius is negative.</p>

    <figure class=diagrams>
     
     <img alt="" src=/images/arc1.png width=590 height=255>
    </figure>


   <dt><var>context</var> . <code id=dom-context-2d-ellipse>ellipse</code>(<var>x</var>, <var>y</var>, <var>radiusX</var>, <var>radiusY</var>, <var>rotation</var>, <var>startAngle</var>, <var>endAngle</var> [, <var>anticlockwise</var>] )<dt><var>path</var> . <code id=building-paths:dom-context-2d-ellipse><a href=#dom-context-2d-ellipse>ellipse</a></code>(<var>x</var>, <var>y</var>, <var>radiusX</var>, <var>radiusY</var>, <var>rotation</var>, <var>startAngle</var>, <var>endAngle</var> [, <var>anticlockwise</var>] )<dd>
    <p>Adds points to the subpath such that the arc described by the circumference of the ellipse
    described by the arguments, starting at the given start angle and ending at the given end angle,
    going in the given direction (defaulting to clockwise), is added to the path, connected to the
    previous point by a straight line.</p>

    <p>Throws an <a id=building-paths:indexsizeerror-3 href=https://heycam.github.io/webidl/#indexsizeerror data-x-internal=indexsizeerror>"<code>IndexSizeError</code>"</a> <code id=building-paths:domexception-3><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code> if the given
    radius is negative.</p>
   <dt><var>context</var> . <code id=dom-context-2d-rect>rect</code>(<var>x</var>, <var>y</var>, <var>w</var>, <var>h</var>)<dt><var>path</var> . <code id=building-paths:dom-context-2d-rect><a href=#dom-context-2d-rect>rect</a></code>(<var>x</var>, <var>y</var>, <var>w</var>, <var>h</var>)<dd>
    <p>Adds a new closed subpath to the path, representing the given rectangle.</p>
   </dl>

  




  <h6 id=path2d-objects><span class=secno>4.12.5.1.6</span> <code id=path2d-objects:path2d><a href=#path2d>Path2D</a></code> objects<a href=#path2d-objects class=self-link></a></h6><div class="mdn-anno wrapped"><button onclick=toggleStatus(this) class=mdn-anno-btn><b title="Support in all current engines." class=all-engines-flag>✔</b><span>MDN</span></button><div class=feature><p><a href=https://developer.mozilla.org/en-US/docs/Web/API/Path2D title="The Path2D interface of the Canvas 2D API is used to declare a path that can then be used on a CanvasRenderingContext2D object. The path methods of the CanvasRenderingContext2D interface are also present on this interface, which gives you the convenience of being able to retain and replay your path whenever desired.">Path2D</a><p class=all-engines-text>Support in all current engines.<div class=support><span class="firefox yes"><span>Firefox</span><span>31+</span></span><span class="safari yes"><span>Safari</span><span>7+</span></span><span class="chrome yes"><span>Chrome</span><span>36+</span></span><hr><span class="opera yes"><span>Opera</span><span>23+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>14+</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>31+</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>7+</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>36+</span></span><span class="webview_android yes"><span>WebView Android</span><span>37+</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>3.0+</span></span><span class="opera_android yes"><span>Opera Android</span><span>24+</span></span></div></div></div>
<div data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-date="" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/path2d-objects.en.html data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/path2d-objects.zh.html?filename=path2d-objects.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fscripting%2Fthe-canvas-element%2Fthe-2d-rendering-context%2Fpath2d-objects.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91"></div>

  <p><code id=path2d-objects:path2d-2><a href=#path2d>Path2D</a></code> objects can be used to declare paths that are then later used on
  objects implementing the <code id=path2d-objects:canvasdrawpath><a href=#canvasdrawpath>CanvasDrawPath</a></code> interface. In addition to many of the APIs
  described in earlier sections, <code id=path2d-objects:path2d-3><a href=#path2d>Path2D</a></code> objects have methods to combine paths, and to
  add text to paths.</p>

  <dl class=domintro><dt><var>path</var> = new <code id=dom-path2d>Path2D</code>()<dd><p>Creates a new empty <code id=path2d-objects:path2d-4><a href=#path2d>Path2D</a></code> object.<dt><var>path</var> = new <code id=path2d-objects:dom-path2d><a href=#dom-path2d>Path2D</a></code>(<var>path</var>)<dd>
    <p>When <var>path</var> is a <code id=path2d-objects:path2d-5><a href=#path2d>Path2D</a></code> object, returns a copy.</p>

    <p>When <var>path</var> is a string, creates the path described by the argument, interpreted as
    SVG path data. <a href=references.html#refsSVG>[SVG]</a>
   <dt><var>path</var> . <code id=dom-path2d-addpath>addPath</code>(<var>path</var> [, <var>transform</var> ] )<dd><p>Adds to the path the path given by the argument.</dl>

  



  <h6 id=transformations><span class=secno>4.12.5.1.7</span> <dfn>Transformations</dfn><a href=#transformations class=self-link></a></h6>
<div data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-date="" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/transformations.en.html data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/transformations.zh.html?filename=transformations.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fscripting%2Fthe-canvas-element%2Fthe-2d-rendering-context%2Ftransformations.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91"></div>

  <p>Objects that implement the <code id=transformations:canvastransform><a href=#canvastransform>CanvasTransform</a></code> interface have a <dfn id=current-transformation-matrix>current
  transformation matrix</dfn>, as well as methods (described in this section) to manipulate it. When
  an object implementing the <code id=transformations:canvastransform-2><a href=#canvastransform>CanvasTransform</a></code> interface is created, its transformation
  matrix must be initialized to the identity matrix.</p>

  <p>The <a href=#current-transformation-matrix id=transformations:current-transformation-matrix>current transformation matrix</a> is applied to coordinates when creating the
  <a href=#current-default-path id=transformations:current-default-path>current default path</a>, and when painting text, shapes, and <code id=transformations:path2d><a href=#path2d>Path2D</a></code>
  objects, on objects implementing the <code id=transformations:canvastransform-3><a href=#canvastransform>CanvasTransform</a></code> interface.</p>
  

  

  <dl class=domintro><dt><var>context</var> . <code id=dom-context-2d-scale>scale</code>(<var>x</var>, <var>y</var>)<dd>
    <p>Changes the <a href=#current-transformation-matrix id=transformations:current-transformation-matrix-2>current transformation matrix</a> to apply a scaling transformation
    with the given characteristics.</p>
   <dt><var>context</var> . <code id=dom-context-2d-rotate>rotate</code>(<var>angle</var>)<dd>
    <p>Changes the <a href=#current-transformation-matrix id=transformations:current-transformation-matrix-3>current transformation matrix</a> to apply a rotation transformation
    with the given characteristics. The angle is in radians.</p>
   <dt><var>context</var> . <code id=dom-context-2d-translate>translate</code>(<var>x</var>, <var>y</var>)<dd>
    <p>Changes the <a href=#current-transformation-matrix id=transformations:current-transformation-matrix-4>current transformation matrix</a> to apply a translation transformation
    with the given characteristics.</p>
   <dt><var>context</var> . <code id=dom-context-2d-transform>transform</code>(<var>a</var>, <var>b</var>, <var>c</var>, <var>d</var>, <var>e</var>, <var>f</var>)<dd>
    <p>Changes the <a href=#current-transformation-matrix id=transformations:current-transformation-matrix-5>current transformation matrix</a> to apply the matrix given by the
    arguments as described below.</p>
   <dt><var>matrix</var> = <var>context</var> . <code id=dom-context-2d-gettransform>getTransform</code>()<dd>
    <p>Returns a copy of the <a href=#current-transformation-matrix id=transformations:current-transformation-matrix-6>current transformation matrix</a>, as a newly created
    <code id=transformations:dommatrix><a data-x-internal=dommatrix href=https://drafts.fxtf.org/geometry/#dommatrix>DOMMatrix</a></code> object.</p>
   <dt><var>context</var> . <code id=dom-context-2d-settransform>setTransform</code>(<var>a</var>, <var>b</var>, <var>c</var>, <var>d</var>, <var>e</var>, <var>f</var>)<dd>
    <p>Changes the <a href=#current-transformation-matrix id=transformations:current-transformation-matrix-7>current transformation matrix</a> <em>to</em> the matrix given by the
    arguments as described below.</p>
   <dt><var>context</var> . <code id=dom-context-2d-settransform-matrix>setTransform</code>(<var>transform</var>)<dd>
    <p>Changes the <a href=#current-transformation-matrix id=transformations:current-transformation-matrix-8>current transformation matrix</a> <em>to</em> the matrix represented by
    the passed <code id=transformations:dommatrix2dinit><a data-x-internal=dommatrix2dinit href=https://drafts.fxtf.org/geometry/#dictdef-dommatrix2dinit>DOMMatrix2DInit</a></code> dictionary.</p>
   <dt><var>context</var> . <code id=dom-context-2d-resettransform>resetTransform</code>()<dd>
    <p>Changes the <a href=#current-transformation-matrix id=transformations:current-transformation-matrix-9>current transformation matrix</a> to the identity matrix.</p>
   </dl>

  

  <table class=matrix><tr><td><var>a</var><td><var>c</var><td><var>e</var><tr><td><var>b</var><td><var>d</var><td><var>f</var><tr><td>0<td>0<td>1</table>

  <p class=note>The arguments <var>a</var>, <var>b</var>, <var>c</var>, <var>d</var>,
  <var>e</var>, and <var>f</var> are sometimes called <var>m11</var>, <var>m12</var>,
  <var>m21</var>, <var>m22</var>, <var>dx</var>, and <var>dy</var> or <var>m11</var>,
  <var>m21</var>, <var>m12</var>, <var>m22</var>, <var>dx</var>, and <var>dy</var>. Care ought to be
  taken in particular with the order of the second and third arguments (<var>b</var> and
  <var>c</var>) as their order varies from API to API and APIs sometimes use the notation
  <var>m12</var>/<var>m21</var> and sometimes <var>m21</var>/<var>m12</var> for those positions.</p>

  

  <div class=note>
   <p>Given a matrix of the form created by the <code id=transformations:dom-context-2d-transform><a href=#dom-context-2d-transform>transform()</a></code> and <code id=transformations:dom-context-2d-settransform><a href=#dom-context-2d-settransform>setTransform()</a></code> methods, i.e.,</p>

   <table class=matrix><tr><td><var>a</var><td><var>c</var><td><var>e</var><tr><td><var>b</var><td><var>d</var><td><var>f</var><tr><td>0<td>0<td>1</table>

   <p>the resulting transformed coordinates after transform matrix multiplication will be</p>

   <p class=equations>
    <var>x</var><sub>new</sub> = <var>a</var> <var>x</var> + <var>c</var> <var>y</var> + <var>e</var><br>
    <var>y</var><sub>new</sub> = <var>b</var> <var>x</var> + <var>d</var> <var>y</var> + <var>f</var>
   </p>
  </div>




  <h6 id=image-sources-for-2d-rendering-contexts><span class=secno>4.12.5.1.8</span> Image sources for 2D rendering contexts<a href=#image-sources-for-2d-rendering-contexts class=self-link></a></h6>
<div data-en-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" class=translate-info data-zh-date="" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/image-sources-for-2d-rendering-contexts.en.html data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/image-sources-for-2d-rendering-contexts.zh.html?filename=image-sources-for-2d-rendering-contexts.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fscripting%2Fthe-canvas-element%2Fthe-2d-rendering-context%2Fimage-sources-for-2d-rendering-contexts.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91"></div>

  <p>Some methods on the <code id=image-sources-for-2d-rendering-contexts:canvasdrawimage><a href=#canvasdrawimage>CanvasDrawImage</a></code> and <code id=image-sources-for-2d-rendering-contexts:canvasfillstrokestyles><a href=#canvasfillstrokestyles>CanvasFillStrokeStyles</a></code>
  interfaces take the union type <code id=image-sources-for-2d-rendering-contexts:canvasimagesource><a href=#canvasimagesource>CanvasImageSource</a></code> as an argument.</p>

  <p>This union type allows objects implementing any of the following interfaces to be used as image
  sources:</p>

  <ul><li><code id=image-sources-for-2d-rendering-contexts:htmlorsvgimageelement><a href=#htmlorsvgimageelement>HTMLOrSVGImageElement</a></code> (<code id=image-sources-for-2d-rendering-contexts:the-img-element><a href=embedded-content.html#the-img-element>img</a></code> or <a id=image-sources-for-2d-rendering-contexts:svg-image href=https://svgwg.org/svg2-draft/embedded.html#ImageElement data-x-internal=svg-image>SVG <code>image</code></a>
   elements)<li><code>HTMLVideoElement</code> (<code id=image-sources-for-2d-rendering-contexts:the-video-element><a href=media.html#the-video-element>video</a></code> elements)<li><code>HTMLCanvasElement</code> (<code id=image-sources-for-2d-rendering-contexts:the-canvas-element><a href=#the-canvas-element>canvas</a></code> elements)<li><code id=image-sources-for-2d-rendering-contexts:imagebitmap><a href=imagebitmap-and-animations.html#imagebitmap>ImageBitmap</a></code></ul>

  <p class=note>Although not formally specified as such, <a id=image-sources-for-2d-rendering-contexts:svg-image-2 href=https://svgwg.org/svg2-draft/embedded.html#ImageElement data-x-internal=svg-image>SVG <code>image</code></a>
  elements are expected to be implemented nearly identical to <code id=image-sources-for-2d-rendering-contexts:the-img-element-2><a href=embedded-content.html#the-img-element>img</a></code> elements. That is,
  <a id=image-sources-for-2d-rendering-contexts:svg-image-3 href=https://svgwg.org/svg2-draft/embedded.html#ImageElement data-x-internal=svg-image>SVG <code>image</code></a> elements share the fundamental concepts and features of
  <code id=image-sources-for-2d-rendering-contexts:the-img-element-3><a href=embedded-content.html#the-img-element>img</a></code> elements.</p>

  <p class=note>The <code id=image-sources-for-2d-rendering-contexts:imagebitmap-2><a href=imagebitmap-and-animations.html#imagebitmap>ImageBitmap</a></code> interface can be created from a number of other
  image-representing types, including <code id=image-sources-for-2d-rendering-contexts:imagedata><a href=#imagedata>ImageData</a></code>.</p>

  <p>To <dfn id=check-the-usability-of-the-image-argument>check the usability of the <var>image</var> argument</dfn>, where <var>image</var>
  is a <code id=image-sources-for-2d-rendering-contexts:canvasimagesource-2><a href=#canvasimagesource>CanvasImageSource</a></code> object, run these steps:</p>

  <ol><li>
    <p>Switch on <var>image</var>:</p>

    <dl class=switch><dt><code id=image-sources-for-2d-rendering-contexts:htmlorsvgimageelement-2><a href=#htmlorsvgimageelement>HTMLOrSVGImageElement</a></code><dd>
      <p>If <var>image</var>'s <span>current request</span>'s <span>state</span> is <span>broken</span>, then
      throw an <a id=image-sources-for-2d-rendering-contexts:invalidstateerror href=https://heycam.github.io/webidl/#invalidstateerror data-x-internal=invalidstateerror>"<code>InvalidStateError</code>"</a> <code id=image-sources-for-2d-rendering-contexts:domexception><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>.</p>

      <p>If <var>image</var> is not <span>fully decodable</span>,
      then return <i>bad</i>.</p>

      <p>If <var>image</var> has an <a id=image-sources-for-2d-rendering-contexts:intrinsic-width href=https://drafts.csswg.org/css-images/#intrinsic-width data-x-internal=intrinsic-width>intrinsic width</a> or <a id=image-sources-for-2d-rendering-contexts:intrinsic-height href=https://drafts.csswg.org/css-images/#intrinsic-height data-x-internal=intrinsic-height>intrinsic height</a>
      (or both) equal to zero, then return <i>bad</i>.</p> 
     <dt><code>HTMLVideoElement</code><dd><p>If <var>image</var>'s <code id=image-sources-for-2d-rendering-contexts:dom-media-readystate><a href=media.html#dom-media-readystate>readyState</a></code>
     attribute is either <code id=image-sources-for-2d-rendering-contexts:dom-media-have_nothing><a href=media.html#dom-media-have_nothing>HAVE_NOTHING</a></code> or <code id=image-sources-for-2d-rendering-contexts:dom-media-have_metadata><a href=media.html#dom-media-have_metadata>HAVE_METADATA</a></code>, then return <i>bad</i>.<dt><code>HTMLCanvasElement</code><dt><code id=image-sources-for-2d-rendering-contexts:offscreencanvas><a href=#offscreencanvas>OffscreenCanvas</a></code><dd><p>If <var>image</var> has either a horizontal dimension or a vertical dimension
     equal to zero, then throw an <a id=image-sources-for-2d-rendering-contexts:invalidstateerror-2 href=https://heycam.github.io/webidl/#invalidstateerror data-x-internal=invalidstateerror>"<code>InvalidStateError</code>"</a>
     <code id=image-sources-for-2d-rendering-contexts:domexception-2><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>.<dt><code id=image-sources-for-2d-rendering-contexts:imagebitmap-3><a href=imagebitmap-and-animations.html#imagebitmap>ImageBitmap</a></code><dd><p>If <var>image</var>'s <span>[[Detached]]</span> internal slot value
     is set to true, then throw an <a id=image-sources-for-2d-rendering-contexts:invalidstateerror-3 href=https://heycam.github.io/webidl/#invalidstateerror data-x-internal=invalidstateerror>"<code>InvalidStateError</code>"</a>
     <code id=image-sources-for-2d-rendering-contexts:domexception-3><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>.</dl>
   <li>
    <p>Return <i>good</i>.</p>
   </ol>

  <p>When a <code id=image-sources-for-2d-rendering-contexts:canvasimagesource-3><a href=#canvasimagesource>CanvasImageSource</a></code> object represents an <code id=image-sources-for-2d-rendering-contexts:htmlorsvgimageelement-3><a href=#htmlorsvgimageelement>HTMLOrSVGImageElement</a></code>,
  the element's image must be used as the source image.</p>

  <p>Specifically, when a <code id=image-sources-for-2d-rendering-contexts:canvasimagesource-4><a href=#canvasimagesource>CanvasImageSource</a></code> object represents an animated image in an
  <code id=image-sources-for-2d-rendering-contexts:htmlorsvgimageelement-4><a href=#htmlorsvgimageelement>HTMLOrSVGImageElement</a></code>, the user agent must use the default image of the animation
  (the one that the format defines is to be used when animation is not supported or is disabled),
  or, if there is no such image, the first frame of the animation, when rendering the image for
  <code id=image-sources-for-2d-rendering-contexts:canvasrenderingcontext2d><a href=#canvasrenderingcontext2d>CanvasRenderingContext2D</a></code> APIs.</p>

  <p>When a <code id=image-sources-for-2d-rendering-contexts:canvasimagesource-5><a href=#canvasimagesource>CanvasImageSource</a></code> object represents an <code>HTMLVideoElement</code>, then
  the frame at the <span>current playback position</span> when the method with the argument is
  invoked must be used as the source image when rendering the image for
  <code id=image-sources-for-2d-rendering-contexts:canvasrenderingcontext2d-2><a href=#canvasrenderingcontext2d>CanvasRenderingContext2D</a></code> APIs, and the source image's dimensions must be the <span>intrinsic width</span> and <span>intrinsic height</span> of the <a id=image-sources-for-2d-rendering-contexts:media-resource href=media.html#media-resource>media resource</a>
  (i.e. after any aspect-ratio correction has been applied).</p>

  <p>When a <code id=image-sources-for-2d-rendering-contexts:canvasimagesource-6><a href=#canvasimagesource>CanvasImageSource</a></code> object represents an <code>HTMLCanvasElement</code>, the
  element's bitmap must be used as the source image.</p>

  <p>When a <code id=image-sources-for-2d-rendering-contexts:canvasimagesource-7><a href=#canvasimagesource>CanvasImageSource</a></code> object represents an element that is <span>being
  rendered</span> and that element has been resized, the original image data of the source image
  must be used, not the image as it is rendered (e.g. <code id=image-sources-for-2d-rendering-contexts:attr-dim-width><a href=embedded-content-other.html#attr-dim-width>width</a></code> and
  <code id=image-sources-for-2d-rendering-contexts:attr-dim-height><a href=embedded-content-other.html#attr-dim-height>height</a></code> attributes on the source element have no effect on how
  the object is interpreted when rendering the image for <code id=image-sources-for-2d-rendering-contexts:canvasrenderingcontext2d-3><a href=#canvasrenderingcontext2d>CanvasRenderingContext2D</a></code>
  APIs).</p>

  <p>When a <code id=image-sources-for-2d-rendering-contexts:canvasimagesource-8><a href=#canvasimagesource>CanvasImageSource</a></code> object represents an <code id=image-sources-for-2d-rendering-contexts:imagebitmap-4><a href=imagebitmap-and-animations.html#imagebitmap>ImageBitmap</a></code>, the
  object's bitmap image data must be used as the source image.</p>

  <p>An object <var>image</var> <dfn id=the-image-argument-is-not-origin-clean>is not
  origin-clean</dfn> if, switching on <var>image</var>:</p>

  <dl class=switch><dt><code id=image-sources-for-2d-rendering-contexts:htmlorsvgimageelement-5><a href=#htmlorsvgimageelement>HTMLOrSVGImageElement</a></code>
   <dt><code>HTMLVideoElement</code>
   <dd><p><var>image</var>'s <a id=image-sources-for-2d-rendering-contexts:concept-origin href=origin.html#concept-origin>origin</a> is not <span>same origin</span> with <span>entry
   settings object</span>'s <span>origin</span>.<dt><code>HTMLCanvasElement</code>
   <dt><code id=image-sources-for-2d-rendering-contexts:imagebitmap-5><a href=imagebitmap-and-animations.html#imagebitmap>ImageBitMap</a></code>
   <dd><p><var>image</var>'s bitmap's <span>origin-clean</span>
   flag is false.</dl>




  <h6 id=fill-and-stroke-styles><span class=secno>4.12.5.1.9</span> Fill and stroke styles<a href=#fill-and-stroke-styles class=self-link></a></h6>
<div data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-date="" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/fill-and-stroke-styles.en.html data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/fill-and-stroke-styles.zh.html?filename=fill-and-stroke-styles.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fscripting%2Fthe-canvas-element%2Fthe-2d-rendering-context%2Ffill-and-stroke-styles.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91"></div>

  <dl class=domintro><dt><var>context</var> . <code id=dom-context-2d-fillstyle>fillStyle</code> [ = <var>value</var> ]<dd>
    <p>Returns the current style used for filling shapes.</p>

    <p>Can be set, to change the fill style.</p>

    <p>The style can be either a string containing a CSS color, or a <code id=fill-and-stroke-styles:canvasgradient><a href=#canvasgradient>CanvasGradient</a></code> or
    <code id=fill-and-stroke-styles:canvaspattern><a href=#canvaspattern>CanvasPattern</a></code> object. Invalid values are ignored.</p>
   <dt><var>context</var> . <code id=dom-context-2d-strokestyle>strokeStyle</code> [ = <var>value</var> ]<dd>
    <p>Returns the current style used for stroking shapes.</p>

    <p>Can be set, to change the stroke style.</p>

    <p>The style can be either a string containing a CSS color, or a <code id=fill-and-stroke-styles:canvasgradient-2><a href=#canvasgradient>CanvasGradient</a></code> or
    <code id=fill-and-stroke-styles:canvaspattern-2><a href=#canvaspattern>CanvasPattern</a></code> object. Invalid values are ignored.</p>
   </dl>

  

  <hr>

  <p>There are two types of gradients, linear gradients and radial gradients, both represented by
  objects implementing the opaque <code id=fill-and-stroke-styles:canvasgradient-3><a href=#canvasgradient>CanvasGradient</a></code> interface.</p>

  <p id=interpolation>Once a gradient has been created (see below), stops are placed along it to
  define how the colors are distributed along the gradient. </p>

  <dl class=domintro><dt><var>gradient</var> . <code id=dom-canvasgradient-addcolorstop>addColorStop</code>(<var>offset</var>, <var>color</var>)<dd>
    <p>Adds a color stop with the given color to the gradient at the given offset. 0.0 is the offset
    at one end of the gradient, 1.0 is the offset at the other end.</p>

    <p>Throws an <a id=fill-and-stroke-styles:indexsizeerror href=https://heycam.github.io/webidl/#indexsizeerror data-x-internal=indexsizeerror>"<code>IndexSizeError</code>"</a> <code id=fill-and-stroke-styles:domexception><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code> if the offset
    is out of range. Throws a <a id=fill-and-stroke-styles:syntaxerror href=https://heycam.github.io/webidl/#syntaxerror data-x-internal=syntaxerror>"<code>SyntaxError</code>"</a> <code id=fill-and-stroke-styles:domexception-2><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code> if
    the color cannot be parsed.</p>
   <dt><var>gradient</var> = <var>context</var> . <code id=dom-context-2d-createlineargradient>createLinearGradient</code>(<var>x0</var>, <var>y0</var>, <var>x1</var>, <var>y1</var>)<dd>
    <p>Returns a <code id=fill-and-stroke-styles:canvasgradient-4><a href=#canvasgradient>CanvasGradient</a></code> object that represents a
    linear gradient that paints along the line given by the
    coordinates represented by the arguments.</p>
   <dt><var>gradient</var> = <var>context</var> . <code id=dom-context-2d-createradialgradient>createRadialGradient</code>(<var>x0</var>, <var>y0</var>, <var>r0</var>, <var>x1</var>, <var>y1</var>, <var>r1</var>)<dd>
    <p>Returns a <code id=fill-and-stroke-styles:canvasgradient-5><a href=#canvasgradient>CanvasGradient</a></code> object that represents a
    radial gradient that paints along the cone given by the circles
    represented by the arguments.</p>

    <p>If either of the radii are negative, throws an
    <a id=fill-and-stroke-styles:indexsizeerror-2 href=https://heycam.github.io/webidl/#indexsizeerror data-x-internal=indexsizeerror>"<code>IndexSizeError</code>"</a> <code id=fill-and-stroke-styles:domexception-3><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code> exception.</p>
   </dl>

  

  <hr>

  <p>Patterns are represented by objects implementing the opaque <code id=fill-and-stroke-styles:canvaspattern-3><a href=#canvaspattern>CanvasPattern</a></code>
  interface.</p>

  <dl class=domintro><dt><var>pattern</var> = <var>context</var> . <code id=dom-context-2d-createpattern>createPattern</code>(<var>image</var>, <var>repetition</var>)<dd>
    <p>Returns a <code id=fill-and-stroke-styles:canvaspattern-4><a href=#canvaspattern>CanvasPattern</a></code> object that uses the given image and repeats in the
    direction(s) given by the <var>repetition</var> argument.</p>

    <p>The allowed values for <var>repetition</var> are <code>repeat</code> (both
    directions), <code>repeat-x</code> (horizontal only), <code>repeat-y</code>
    (vertical only), and <code>no-repeat</code> (neither). If the <var>repetition</var> argument is empty, the value <code>repeat</code> is used.</p>

    <p>If the image isn't yet fully decoded, then nothing is drawn. If the image is a canvas with no
    data, throws an <a id=fill-and-stroke-styles:invalidstateerror href=https://heycam.github.io/webidl/#invalidstateerror data-x-internal=invalidstateerror>"<code>InvalidStateError</code>"</a> <code id=fill-and-stroke-styles:domexception-4><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>.</p>
   <dt><var>pattern</var> . <code id=dom-canvaspattern-settransform>setTransform</code>(<var>transform</var>)<dd>
    <p>Sets the transformation matrix that will be used when rendering the pattern during a fill or
    stroke painting operation.</p>
   </dl>

  





  <h6 id=drawing-rectangles-to-the-bitmap><span class=secno>4.12.5.1.10</span> Drawing rectangles to the bitmap<a href=#drawing-rectangles-to-the-bitmap class=self-link></a></h6>
<div data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-date="" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/drawing-rectangles-to-the-bitmap.en.html data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/drawing-rectangles-to-the-bitmap.zh.html?filename=drawing-rectangles-to-the-bitmap.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fscripting%2Fthe-canvas-element%2Fthe-2d-rendering-context%2Fdrawing-rectangles-to-the-bitmap.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91"></div>

  <p>Objects that implement the <code id=drawing-rectangles-to-the-bitmap:canvasrect><a href=#canvasrect>CanvasRect</a></code> interface provide the following methods for
  immediately drawing rectangles to the bitmap. The methods each take four arguments; the first two
  give the <var>x</var> and <var>y</var> coordinates of the top left of the rectangle, and the
  second two give the width <var>w</var> and height <var>h</var> of the rectangle, respectively.</p>

  

  <dl class=domintro><dt><var>context</var> . <code id=dom-context-2d-clearrect>clearRect</code>(<var>x</var>, <var>y</var>, <var>w</var>, <var>h</var>)<dd>
    <p>Clears all pixels on the bitmap in the given rectangle to <a id=drawing-rectangles-to-the-bitmap:transparent-black href=https://drafts.csswg.org/css-color/#transparent-black data-x-internal=transparent-black>transparent black</a>.</p>
   <dt><var>context</var> . <code id=dom-context-2d-fillrect>fillRect</code>(<var>x</var>, <var>y</var>, <var>w</var>, <var>h</var>)<dd>
    <p>Paints the given rectangle onto the bitmap, using the current fill style.</p>
   <dt><var>context</var> . <code id=dom-context-2d-strokerect>strokeRect</code>(<var>x</var>, <var>y</var>, <var>w</var>, <var>h</var>)<dd>
    <p>Paints the box that outlines the given rectangle onto the bitmap, using the current stroke
    style.</p>
   </dl>

  




  <h6 id=drawing-text-to-the-bitmap><span class=secno>4.12.5.1.11</span> Drawing text to the bitmap<a href=#drawing-text-to-the-bitmap class=self-link></a></h6><div class="mdn-anno wrapped"><button onclick=toggleStatus(this) class=mdn-anno-btn><b title="Support in all current engines." class=all-engines-flag>✔</b><span>MDN</span></button><div class=feature><p><a href=https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D title="The CanvasRenderingContext2D interface, part of the Canvas API, provides the 2D rendering context for the drawing surface of a <canvas> element. It is used for drawing shapes, text, images, and other objects.">CanvasRenderingContext2D</a><p class=all-engines-text>Support in all current engines.<div class=support><span class="firefox yes"><span>Firefox</span><span>1.5+</span></span><span class="safari yes"><span>Safari</span><span>2+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span><hr><span class="opera yes"><span>Opera</span><span>9+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>9+</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>4+</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>1+</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>18+</span></span><span class="webview_android yes"><span>WebView Android</span><span>1+</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>1.0+</span></span><span class="opera_android yes"><span>Opera Android</span><span>10.1+</span></span></div></div></div>
<div data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-date="" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/drawing-text-to-the-bitmap.en.html data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/drawing-text-to-the-bitmap.zh.html?filename=drawing-text-to-the-bitmap.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fscripting%2Fthe-canvas-element%2Fthe-2d-rendering-context%2Fdrawing-text-to-the-bitmap.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91"></div>

  <dl id=text-0 class=domintro><dt><var>context</var> . <code id=dom-context-2d-filltext>fillText</code>(<var>text</var>, <var>x</var>, <var>y</var> [, <var>maxWidth</var> ] )<dt><var>context</var> . <code id=dom-context-2d-stroketext>strokeText</code>(<var>text</var>, <var>x</var>, <var>y</var> [, <var>maxWidth</var> ] )<dd>
    <p>Fills or strokes (respectively) the given text at the given position. If a maximum width is
    provided, the text will be scaled to fit that width if necessary.</p>
   <dt><var>metrics</var> = <var>context</var> . <code id=dom-context-2d-measuretext>measureText</code>(<var>text</var>)<dd>
    <p>Returns a <code id=drawing-text-to-the-bitmap:textmetrics><a href=#textmetrics>TextMetrics</a></code> object with the metrics of the given text in the current
    font.</p>
   <dt><var>metrics</var> . <code id=dom-textmetrics-width><a href=#dom-textmetrics-width-2>width</a></code><dt><var>metrics</var> . <code id=dom-textmetrics-actualboundingboxleft><a href=#dom-textmetrics-actualboundingboxleft-2>actualBoundingBoxLeft</a></code><dt><var>metrics</var> . <code id=dom-textmetrics-actualboundingboxright><a href=#dom-textmetrics-actualboundingboxright-2>actualBoundingBoxRight</a></code><dt><var>metrics</var> . <code id=dom-textmetrics-fontboundingboxascent><a href=#dom-textmetrics-fontboundingboxascent-2>fontBoundingBoxAscent</a></code><dt><var>metrics</var> . <code id=dom-textmetrics-fontboundingboxdescent><a href=#dom-textmetrics-fontboundingboxdescent-2>fontBoundingBoxDescent</a></code><dt><var>metrics</var> . <code id=dom-textmetrics-actualboundingboxascent><a href=#dom-textmetrics-actualboundingboxascent-2>actualBoundingBoxAscent</a></code><dt><var>metrics</var> . <code id=dom-textmetrics-actualboundingboxdescent><a href=#dom-textmetrics-actualboundingboxdescent-2>actualBoundingBoxDescent</a></code><dt><var>metrics</var> . <code id=dom-textmetrics-emheightascent><a href=#dom-textmetrics-emheightascent-2>emHeightAscent</a></code><dt><var>metrics</var> . <code id=dom-textmetrics-emheightdescent><a href=#dom-textmetrics-emheightdescent-2>emHeightDescent</a></code><dt><var>metrics</var> . <code id=dom-textmetrics-hangingbaseline><a href=#dom-textmetrics-hangingbaseline-2>hangingBaseline</a></code><dt><var>metrics</var> . <code id=dom-textmetrics-alphabeticbaseline><a href=#dom-textmetrics-alphabeticbaseline-2>alphabeticBaseline</a></code><dt><var>metrics</var> . <code id=dom-textmetrics-ideographicbaseline><a href=#dom-textmetrics-ideographicbaseline-2>ideographicBaseline</a></code><dd>
    <p>Returns the measurement described below.</p>
   </dl>

  

  <dl><dt><dfn data-dfn-for=TextMetrics id=dom-textmetrics-width-2 data-dfn-type=attribute><code>width</code></dfn>
   attribute<dd><p>The width of that <a id=drawing-text-to-the-bitmap:inline-box href=https://drafts.csswg.org/css2/#inline-box data-x-internal=inline-box>inline box</a>, in <a href=https://drafts.csswg.org/css-values/#px id="drawing-text-to-the-bitmap:'px'" data-x-internal="'px'">CSS pixels</a>. (The
   text's advance width.)<dt><dfn id=dom-textmetrics-actualboundingboxleft-2><code>actualBoundingBoxLeft</code></dfn> attribute<dd>
    <p>The distance parallel to the baseline from the alignment point given by the <code id=drawing-text-to-the-bitmap:dom-context-2d-textalign><a href=#dom-context-2d-textalign>textAlign</a></code> attribute to the left side of the bounding
    rectangle of the given text, in <a href=https://drafts.csswg.org/css-values/#px id="drawing-text-to-the-bitmap:'px'-2" data-x-internal="'px'">CSS pixels</a>; positive numbers
    indicating a distance going left from the given alignment point.

    <p class=note>The sum of this value and the next (<code id=drawing-text-to-the-bitmap:dom-textmetrics-actualboundingboxright-2><a href=#dom-textmetrics-actualboundingboxright-2>actualBoundingBoxRight</a></code>) can be wider than
    the width of the <a id=drawing-text-to-the-bitmap:inline-box-2 href=https://drafts.csswg.org/css2/#inline-box data-x-internal=inline-box>inline box</a> (<code id=drawing-text-to-the-bitmap:dom-textmetrics-width-2><a href=#dom-textmetrics-width-2>width</a></code>), in
    particular with slanted fonts where characters overhang their advance width.</p>
   <dt><dfn id=dom-textmetrics-actualboundingboxright-2><code>actualBoundingBoxRight</code></dfn> attribute<dd>
    <p>The distance parallel to the baseline from the alignment point given by the <code id=drawing-text-to-the-bitmap:dom-context-2d-textalign-2><a href=#dom-context-2d-textalign>textAlign</a></code> attribute to the right side of the bounding
    rectangle of the given text, in <a href=https://drafts.csswg.org/css-values/#px id="drawing-text-to-the-bitmap:'px'-3" data-x-internal="'px'">CSS pixels</a>; positive numbers
    indicating a distance going right from the given alignment point.</p>
   <dt><dfn id=dom-textmetrics-fontboundingboxascent-2><code>fontBoundingBoxAscent</code></dfn> attribute<dd>
    <p>The distance from the horizontal line indicated by the <code id=drawing-text-to-the-bitmap:dom-context-2d-textbaseline><a href=#dom-context-2d-textbaseline>textBaseline</a></code> attribute to the <a id=drawing-text-to-the-bitmap:ascent-metric href=https://drafts.csswg.org/css-inline/#ascent-metric data-x-internal=ascent-metric>ascent
    metric</a> of the <a id=drawing-text-to-the-bitmap:first-available-font href=https://drafts.csswg.org/css-fonts/#first-available-font data-x-internal=first-available-font>first available font</a>, in <a href=https://drafts.csswg.org/css-values/#px id="drawing-text-to-the-bitmap:'px'-4" data-x-internal="'px'">CSS
    pixels</a>; positive numbers indicating a distance going up from the given baseline.</p>

    <p class=note>This value and the next are useful when rendering a background that have to have
    a consistent height even if the exact text being rendered changes. The <code id=drawing-text-to-the-bitmap:dom-textmetrics-actualboundingboxascent-2><a href=#dom-textmetrics-actualboundingboxascent-2>actualBoundingBoxAscent</a></code> attribute (and
    its corresponding attribute for the descent) are useful when drawing a bounding box around
    specific text.</p>
   <dt><dfn id=dom-textmetrics-fontboundingboxdescent-2><code>fontBoundingBoxDescent</code></dfn> attribute<dd><p>The distance from the horizontal line indicated by the <code id=drawing-text-to-the-bitmap:dom-context-2d-textbaseline-2><a href=#dom-context-2d-textbaseline>textBaseline</a></code> attribute to the <a id=drawing-text-to-the-bitmap:descent-metric href=https://drafts.csswg.org/css-inline/#descent-metric data-x-internal=descent-metric>descent
   metric</a> of the <a id=drawing-text-to-the-bitmap:first-available-font-2 href=https://drafts.csswg.org/css-fonts/#first-available-font data-x-internal=first-available-font>first available font</a>, in <a href=https://drafts.csswg.org/css-values/#px id="drawing-text-to-the-bitmap:'px'-5" data-x-internal="'px'">CSS pixels</a>;
   positive numbers indicating a distance going down from the given baseline.<dt><dfn id=dom-textmetrics-actualboundingboxascent-2><code>actualBoundingBoxAscent</code></dfn> attribute<dd>
    <p>The distance from the horizontal line indicated by the <code id=drawing-text-to-the-bitmap:dom-context-2d-textbaseline-3><a href=#dom-context-2d-textbaseline>textBaseline</a></code> attribute to the top of the bounding
    rectangle of the given text, in <a href=https://drafts.csswg.org/css-values/#px id="drawing-text-to-the-bitmap:'px'-6" data-x-internal="'px'">CSS pixels</a>; positive numbers
    indicating a distance going up from the given baseline.

    <p class=note>This number can vary greatly based on the input text, even if the first font
    specified covers all the characters in the input. For example, the <code id=drawing-text-to-the-bitmap:dom-textmetrics-actualboundingboxascent-2-2><a href=#dom-textmetrics-actualboundingboxascent-2>actualBoundingBoxAscent</a></code> of a lowercase
    "o" from an <a id=drawing-text-to-the-bitmap:alphabetic-baseline href=https://drafts.csswg.org/css-inline/#alphabetic-baseline data-x-internal=alphabetic-baseline>alphabetic baseline</a> would be less than that of an uppercase "F". The
    value can easily be negative; for example, the distance from the top of the em box (<code id=drawing-text-to-the-bitmap:dom-context-2d-textbaseline-4><a href=#dom-context-2d-textbaseline>textBaseline</a></code> value "<code id=drawing-text-to-the-bitmap:dom-context-2d-textbaseline-top><a href=#dom-context-2d-textbaseline-top>top</a></code>") to the top of the bounding rectangle when
    the given text is just a single comma "<code>,</code>" would likely (unless the font is
    quite unusual) be negative.</p>
   <dt><dfn id=dom-textmetrics-actualboundingboxdescent-2><code>actualBoundingBoxDescent</code></dfn> attribute<dd><p>The distance from the horizontal line indicated by the <code id=drawing-text-to-the-bitmap:dom-context-2d-textbaseline-5><a href=#dom-context-2d-textbaseline>textBaseline</a></code> attribute to the bottom of the bounding
   rectangle of the given text, in <a href=https://drafts.csswg.org/css-values/#px id="drawing-text-to-the-bitmap:'px'-7" data-x-internal="'px'">CSS pixels</a>; positive numbers
   indicating a distance going down from the given baseline.<dt><dfn id=dom-textmetrics-emheightascent-2><code>emHeightAscent</code></dfn> attribute<dd><p>The distance from the horizontal line indicated by the <code id=drawing-text-to-the-bitmap:dom-context-2d-textbaseline-6><a href=#dom-context-2d-textbaseline>textBaseline</a></code> attribute to the highest top of the em
   squares in the <a id=drawing-text-to-the-bitmap:inline-box-3 href=https://drafts.csswg.org/css2/#inline-box data-x-internal=inline-box>inline box</a>, in <a href=https://drafts.csswg.org/css-values/#px id="drawing-text-to-the-bitmap:'px'-8" data-x-internal="'px'">CSS pixels</a>; positive numbers
   indicating that the given baseline is below the top of that em square (so this value will usually
   be positive). Zero if the given baseline is the top of that em square; half the font size if the
   given baseline is the middle of that em square.<dt><dfn id=dom-textmetrics-emheightdescent-2><code>emHeightDescent</code></dfn> attribute<dd><p>The distance from the horizontal line indicated by the <code id=drawing-text-to-the-bitmap:dom-context-2d-textbaseline-7><a href=#dom-context-2d-textbaseline>textBaseline</a></code> attribute to the lowest bottom of the em
   squares in the <a id=drawing-text-to-the-bitmap:inline-box-4 href=https://drafts.csswg.org/css2/#inline-box data-x-internal=inline-box>inline box</a>, in <a href=https://drafts.csswg.org/css-values/#px id="drawing-text-to-the-bitmap:'px'-9" data-x-internal="'px'">CSS pixels</a>; positive numbers
   indicating that the given baseline is above the bottom of that em square. (Zero if the given baseline
   is the bottom of that em square.)<dt><dfn id=dom-textmetrics-hangingbaseline-2><code>hangingBaseline</code></dfn> attribute<dd><p>The distance from the horizontal line indicated by the <code id=drawing-text-to-the-bitmap:dom-context-2d-textbaseline-8><a href=#dom-context-2d-textbaseline>textBaseline</a></code> attribute to the <a id=drawing-text-to-the-bitmap:hanging-baseline href=https://drafts.csswg.org/css-inline/#hanging-baseline data-x-internal=hanging-baseline>hanging
   baseline</a> of the <a id=drawing-text-to-the-bitmap:inline-box-5 href=https://drafts.csswg.org/css2/#inline-box data-x-internal=inline-box>inline box</a>, in <a href=https://drafts.csswg.org/css-values/#px id="drawing-text-to-the-bitmap:'px'-10" data-x-internal="'px'">CSS pixels</a>;
   positive numbers indicating that the given baseline is below the <a id=drawing-text-to-the-bitmap:hanging-baseline-2 href=https://drafts.csswg.org/css-inline/#hanging-baseline data-x-internal=hanging-baseline>hanging baseline</a>.
   (Zero if the given baseline is the <a id=drawing-text-to-the-bitmap:hanging-baseline-3 href=https://drafts.csswg.org/css-inline/#hanging-baseline data-x-internal=hanging-baseline>hanging baseline</a>.)<dt><dfn id=dom-textmetrics-alphabeticbaseline-2><code>alphabeticBaseline</code></dfn> attribute<dd><p>The distance from the horizontal line indicated by the <code id=drawing-text-to-the-bitmap:dom-context-2d-textbaseline-9><a href=#dom-context-2d-textbaseline>textBaseline</a></code> attribute to the <a id=drawing-text-to-the-bitmap:alphabetic-baseline-2 href=https://drafts.csswg.org/css-inline/#alphabetic-baseline data-x-internal=alphabetic-baseline>alphabetic
   baseline</a> of the <a id=drawing-text-to-the-bitmap:inline-box-6 href=https://drafts.csswg.org/css2/#inline-box data-x-internal=inline-box>inline box</a>, in <a href=https://drafts.csswg.org/css-values/#px id="drawing-text-to-the-bitmap:'px'-11" data-x-internal="'px'">CSS pixels</a>;
   positive numbers indicating that the given baseline is below the <a id=drawing-text-to-the-bitmap:alphabetic-baseline-3 href=https://drafts.csswg.org/css-inline/#alphabetic-baseline data-x-internal=alphabetic-baseline>alphabetic
   baseline</a>. (Zero if the given baseline is the <a id=drawing-text-to-the-bitmap:alphabetic-baseline-4 href=https://drafts.csswg.org/css-inline/#alphabetic-baseline data-x-internal=alphabetic-baseline>alphabetic baseline</a>.)<dt><dfn id=dom-textmetrics-ideographicbaseline-2><code>ideographicBaseline</code></dfn> attribute<dd><p>The distance from the horizontal line indicated by the <code id=drawing-text-to-the-bitmap:dom-context-2d-textbaseline-10><a href=#dom-context-2d-textbaseline>textBaseline</a></code> attribute to the <a id=drawing-text-to-the-bitmap:ideographic-under-baseline href=https://drafts.csswg.org/css-inline/#ideographic-under-baseline data-x-internal=ideographic-under-baseline>ideographic-under
   baseline</a> of the <a id=drawing-text-to-the-bitmap:inline-box-7 href=https://drafts.csswg.org/css2/#inline-box data-x-internal=inline-box>inline box</a>, in <a href=https://drafts.csswg.org/css-values/#px id="drawing-text-to-the-bitmap:'px'-12" data-x-internal="'px'">CSS pixels</a>;
   positive numbers indicating that the given baseline is below the <a id=drawing-text-to-the-bitmap:ideographic-under-baseline-2 href=https://drafts.csswg.org/css-inline/#ideographic-under-baseline data-x-internal=ideographic-under-baseline>ideographic-under
   baseline</a>. (Zero if the given baseline is the <a id=drawing-text-to-the-bitmap:ideographic-under-baseline-3 href=https://drafts.csswg.org/css-inline/#ideographic-under-baseline data-x-internal=ideographic-under-baseline>ideographic-under
   baseline</a>.)</dl>

  <p class=note>Glyphs rendered using <code id=drawing-text-to-the-bitmap:dom-context-2d-filltext><a href=#dom-context-2d-filltext>fillText()</a></code> and
  <code id=drawing-text-to-the-bitmap:dom-context-2d-stroketext><a href=#dom-context-2d-stroketext>strokeText()</a></code> can spill out of the box given by the
  font size (the em square size) and the width returned by <code id=drawing-text-to-the-bitmap:dom-context-2d-measuretext><a href=#dom-context-2d-measuretext>measureText()</a></code> (the text width). Authors are encouraged
  to use the bounding box values described above if this is an issue.</p>

  <p class=note>A future version of the 2D context API might provide a way to render fragments of
  documents, rendered using CSS, straight to the canvas. This would be provided in preference to a
  dedicated way of doing multiline layout.</p>




  <h6 id=drawing-paths-to-the-canvas><span class=secno>4.12.5.1.12</span> Drawing paths to the canvas<a href=#drawing-paths-to-the-canvas class=self-link></a></h6>
<div data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-date="" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/drawing-paths-to-the-canvas.en.html data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/drawing-paths-to-the-canvas.zh.html?filename=drawing-paths-to-the-canvas.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fscripting%2Fthe-canvas-element%2Fthe-2d-rendering-context%2Fdrawing-paths-to-the-canvas.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91"></div>

  <p>Objects that implement the <code id=drawing-paths-to-the-canvas:canvasdrawpath><a href=#canvasdrawpath>CanvasDrawPath</a></code> interface have a <dfn id=current-default-path>current default
  path</dfn>. There is only one <a href=#current-default-path id=drawing-paths-to-the-canvas:current-default-path>current default path</a>, it is not part of the
  <a href=#drawing-state id=drawing-paths-to-the-canvas:drawing-state>drawing state</a>. The <a href=#current-default-path id=drawing-paths-to-the-canvas:current-default-path-2>current default path</a> is a <a href=#concept-path id=drawing-paths-to-the-canvas:concept-path>path</a>, as described above.</p>

  <dl class=domintro><dt><var>context</var> . <code id=dom-context-2d-beginpath>beginPath</code>()<dd>
    <p>Resets the <a href=#current-default-path id=drawing-paths-to-the-canvas:current-default-path-3>current default path</a>.</p>
   <dt><var>context</var> . <code id=dom-context-2d-fill>fill</code>( [ <var>fillRule</var> ] )<dt><var>context</var> . <code id=drawing-paths-to-the-canvas:dom-context-2d-fill><a href=#dom-context-2d-fill>fill</a></code>(<var>path</var> [, <var>fillRule</var> ] )<dd>
    <p>Fills the subpaths of the <a href=#current-default-path id=drawing-paths-to-the-canvas:current-default-path-4>current default path</a> or the given path with the
    current fill style, obeying the given fill rule.</p>
   <dt><var>context</var> . <code id=dom-context-2d-stroke>stroke</code>()<dt><var>context</var> . <code id=drawing-paths-to-the-canvas:dom-context-2d-stroke><a href=#dom-context-2d-stroke>stroke</a></code>(<var>path</var>)<dd>
    <p>Strokes the subpaths of the <a href=#current-default-path id=drawing-paths-to-the-canvas:current-default-path-5>current default path</a> or the given path with the
    current stroke style.</p>
   <dt><var>context</var> . <code id=dom-context-2d-clip>clip</code>( [ <var>fillRule</var> ] )<dt><var>context</var> . <code id=drawing-paths-to-the-canvas:dom-context-2d-clip><a href=#dom-context-2d-clip>clip</a></code>(<var>path</var> [, <var>fillRule</var> ] )<dd>
    <p>Further constrains the clipping region to the <a href=#current-default-path id=drawing-paths-to-the-canvas:current-default-path-6>current default path</a> or the given
    path, using the given fill rule to determine what points are in the path.</p>
   <dt><var>context</var> . <code id=dom-context-2d-ispointinpath>isPointInPath</code>(<var>x</var>, <var>y</var> [, <var>fillRule</var> ] )<dt><var>context</var> . <code id=drawing-paths-to-the-canvas:dom-context-2d-ispointinpath><a href=#dom-context-2d-ispointinpath>isPointInPath</a></code>(<var>path</var>, <var>x</var>, <var>y</var> [, <var>fillRule</var> ] )<dd>
    <p>Returns true if the given point is in the <a href=#current-default-path id=drawing-paths-to-the-canvas:current-default-path-7>current default path</a> or the given
    path, using the given fill rule to determine what points are in the path.</p>
   <dt><var>context</var> . <code id=dom-context-2d-ispointinstroke>isPointInStroke</code>(<var>x</var>, <var>y</var>)<dt><var>context</var> . <code id=drawing-paths-to-the-canvas:dom-context-2d-ispointinstroke><a href=#dom-context-2d-ispointinstroke>isPointInStroke</a></code>(<var>path</var>, <var>x</var>, <var>y</var>)<dd>
    <p>Returns true if the given point would be in the region covered by the stroke of the
    <a href=#current-default-path id=drawing-paths-to-the-canvas:current-default-path-8>current default path</a> or the given path, given the current stroke style.</p>
   </dl>

  

  <div id=drawCustomFocusRingExample class=example>

   <p>This <code id=drawing-paths-to-the-canvas:the-canvas-element><a href=#the-canvas-element>canvas</a></code> element has a couple of checkboxes. The path-related commands are
   highlighted:</p>

   <pre><code class=html>&lt;canvas height=400 width=750>
 &lt;label>&lt;input type=checkbox id=showA> Show As&lt;/label>
 &lt;label>&lt;input type=checkbox id=showB> Show Bs&lt;/label>
 &lt;!-- ... -->
&lt;/canvas>
&lt;script>
 function drawCheckbox(context, element, x, y, paint) {
   context.save();
   context.font = '10px sans-serif';
   context.textAlign = 'left';
   context.textBaseline = 'middle';
   var metrics = context.measureText(element.labels[0].textContent);
   if (paint) {
<strong>     context.beginPath();
     context.strokeStyle = 'black';
     context.rect(x-5, y-5, 10, 10);
     context.stroke();
</strong>     if (element.checked) {
<strong>       context.fillStyle = 'black';
       context.fill();
</strong>     }
     context.fillText(element.labels[0].textContent, x+5, y);
   }
<strong>   context.beginPath();
   context.rect(x-7, y-7, 12 + metrics.width+2, 14);
</strong>
   context.drawFocusIfNeeded(element);
   context.restore();
 }
 function drawBase() { /* ... */ }
 function drawAs() { /* ... */ }
 function drawBs() { /* ... */ }
 function redraw() {
   var canvas = document.getElementsByTagName('canvas')[0];
   var context = canvas.getContext('2d');
   context.clearRect(0, 0, canvas.width, canvas.height);
   drawCheckbox(context, document.getElementById('showA'), 20, 40, true);
   drawCheckbox(context, document.getElementById('showB'), 20, 60, true);
   drawBase();
   if (document.getElementById('showA').checked)
     drawAs();
   if (document.getElementById('showB').checked)
     drawBs();
 }
 function processClick(event) {
   var canvas = document.getElementsByTagName('canvas')[0];
   var context = canvas.getContext('2d');
   var x = event.clientX;
   var y = event.clientY;
   var node = event.target;
   while (node) {
     x -= node.offsetLeft - node.scrollLeft;
     y -= node.offsetTop - node.scrollTop;
     node = node.offsetParent;
   }
   drawCheckbox(context, document.getElementById('showA'), 20, 40, false);
   if (<strong>context.isPointInPath(x, y)</strong>)
     document.getElementById('showA').checked = !(document.getElementById('showA').checked);
   drawCheckbox(context, document.getElementById('showB'), 20, 60, false);
   if (<strong>context.isPointInPath(x, y)</strong>)
     document.getElementById('showB').checked = !(document.getElementById('showB').checked);
   redraw();
 }
 document.getElementsByTagName('canvas')[0].addEventListener('focus', redraw, true);
 document.getElementsByTagName('canvas')[0].addEventListener('blur', redraw, true);
 document.getElementsByTagName('canvas')[0].addEventListener('change', redraw, true);
 document.getElementsByTagName('canvas')[0].addEventListener('click', processClick, false);
 redraw();
&lt;/script></code></pre>


  </div>


  <h6 id=drawing-focus-rings-and-scrolling-paths-into-view><span class=secno>4.12.5.1.13</span> Drawing focus rings and scrolling paths into view<a href=#drawing-focus-rings-and-scrolling-paths-into-view class=self-link></a></h6>
<div data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-date="" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/drawing-focus-rings-and-scrolling-paths-into-view.en.html data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/drawing-focus-rings-and-scrolling-paths-into-view.zh.html?filename=drawing-focus-rings-and-scrolling-paths-into-view.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fscripting%2Fthe-canvas-element%2Fthe-2d-rendering-context%2Fdrawing-focus-rings-and-scrolling-paths-into-view.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91"></div>

  <dl class=domintro><dt><var>context</var> . <code id=dom-context-2d-drawfocusifneeded>drawFocusIfNeeded</code>(<var>element</var>)<dt><var>context</var> . <code id=drawing-focus-rings-and-scrolling-paths-into-view:dom-context-2d-drawfocusifneeded><a href=#dom-context-2d-drawfocusifneeded>drawFocusIfNeeded</a></code>(<var>path</var>, <var>element</var>)<dd>
    <p>If the given element is <a id=drawing-focus-rings-and-scrolling-paths-into-view:focused href=interaction.html#focused>focused</a>, draws a focus ring around the <a href=#current-default-path id=drawing-focus-rings-and-scrolling-paths-into-view:current-default-path>current
    default path</a> or the given path, following the platform conventions for focus rings.</p>
   <dt><var>context</var> . <code id=dom-context-2d-scrollpathintoview>scrollPathIntoView</code>()<dt><var>context</var> . <code id=drawing-focus-rings-and-scrolling-paths-into-view:dom-context-2d-scrollpathintoview><a href=#dom-context-2d-scrollpathintoview>scrollPathIntoView</a></code>(<var>path</var>)<dd>
    <p>Scrolls the <a href=#current-default-path id=drawing-focus-rings-and-scrolling-paths-into-view:current-default-path-2>current default path</a> or the given path into view. This is especially
    useful on devices with small screens, where the whole canvas might not be visible at once.</p>
   </dl>

  


  <h6 id=drawing-images><span class=secno>4.12.5.1.14</span> Drawing images<a href=#drawing-images class=self-link></a></h6>
<div data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-date="" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/drawing-images.en.html data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/drawing-images.zh.html?filename=drawing-images.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fscripting%2Fthe-canvas-element%2Fthe-2d-rendering-context%2Fdrawing-images.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91"></div>

  <p>Objects that implement the <code id=drawing-images:canvasdrawimage><a href=#canvasdrawimage>CanvasDrawImage</a></code> interface have the <dfn id=dom-context-2d-drawimage><code>drawImage</code></dfn> method to draw images.</p>

  

  <dl class=domintro><dt><var>context</var> . <code id=dom-context-2d-drawimage-2><a href=#dom-context-2d-drawimage>drawImage</a></code>(<var>image</var>, <var>dx</var>, <var>dy</var>)<dt><var>context</var> . <code id=drawing-images:dom-context-2d-drawimage><a href=#dom-context-2d-drawimage>drawImage</a></code>(<var>image</var>, <var>dx</var>, <var>dy</var>, <var>dw</var>, <var>dh</var>)<dt><var>context</var> . <code id=drawing-images:dom-context-2d-drawimage-2><a href=#dom-context-2d-drawimage>drawImage</a></code>(<var>image</var>, <var>sx</var>, <var>sy</var>, <var>sw</var>, <var>sh</var>, <var>dx</var>, <var>dy</var>, <var>dw</var>, <var>dh</var>)<dd>
    <p>Draws the given image onto the canvas. The arguments are
    interpreted as follows:</p>

    <p><img alt="The sx and sy parameters give the x and y coordinates of the source rectangle; the sw and sh arguments give the width and height of the source rectangle; the dx and dy give the x and y coordinates of the destination rectangle; and the dw and dh arguments give the width and height of the destination rectangle." src=/images/drawImage.png width=356 height=356></p>

    <p>If the image isn't yet fully decoded, then nothing is drawn. If the image is a canvas with no
    data, throws an <a id=drawing-images:invalidstateerror href=https://heycam.github.io/webidl/#invalidstateerror data-x-internal=invalidstateerror>"<code>InvalidStateError</code>"</a> <code id=drawing-images:domexception><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>.</p>
   </dl>

  



  <h6 id=pixel-manipulation><span class=secno>4.12.5.1.15</span> <dfn>Pixel manipulation</dfn><a href=#pixel-manipulation class=self-link></a></h6>
<div data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-date="" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/pixel-manipulation.en.html data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/pixel-manipulation.zh.html?filename=pixel-manipulation.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fscripting%2Fthe-canvas-element%2Fthe-2d-rendering-context%2Fpixel-manipulation.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91"></div>

  <dl class=domintro><dt><var>imagedata</var> = new <code id=dom-imagedata>ImageData</code>(<var>sw</var>, <var>sh</var>)<dt><var>imagedata</var> = <var>context</var> . <code id=dom-context-2d-createimagedata>createImageData</code>(<var>sw</var>, <var>sh</var>)<dd>
    <p>Returns an <code id=pixel-manipulation:imagedata><a href=#imagedata>ImageData</a></code> object with the given dimensions. All the pixels in the
    returned object are <a id=pixel-manipulation:transparent-black href=https://drafts.csswg.org/css-color/#transparent-black data-x-internal=transparent-black>transparent black</a>.</p>

    <p>Throws an <a id=pixel-manipulation:indexsizeerror href=https://heycam.github.io/webidl/#indexsizeerror data-x-internal=indexsizeerror>"<code>IndexSizeError</code>"</a> <code id=pixel-manipulation:domexception><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code> if either of
    the width or height arguments are zero.</p>
   <dt><var>imagedata</var> = <var>context</var> . <code id=pixel-manipulation:dom-context-2d-createimagedata><a href=#dom-context-2d-createimagedata>createImageData</a></code>(<var>imagedata</var>)<dd><p>Returns an <code id=pixel-manipulation:imagedata-2><a href=#imagedata>ImageData</a></code> object with the same dimensions as the argument. All the
   pixels in the returned object are <a id=pixel-manipulation:transparent-black-2 href=https://drafts.csswg.org/css-color/#transparent-black data-x-internal=transparent-black>transparent black</a>.<dt><var>imagedata</var> = new <code id=pixel-manipulation:dom-imagedata><a href=#dom-imagedata>ImageData</a></code>(<var>data</var>, <var>sw</var> [, <var>sh</var> ] )<dd>
    <p>Returns an <code id=pixel-manipulation:imagedata-3><a href=#imagedata>ImageData</a></code> object using the data provided in the <code id=pixel-manipulation:idl-uint8clampedarray><a data-x-internal=idl-uint8clampedarray href=https://heycam.github.io/webidl/#idl-Uint8ClampedArray>Uint8ClampedArray</a></code> argument, interpreted using the given
    dimensions.</p>

    <p>As each pixel in the data is represented by four numbers, the length of the data needs to be
    a multiple of four times the given width. If the height is provided as well, then the length
    needs to be exactly the width times the height times 4.</p>

    <p>Throws an <a id=pixel-manipulation:indexsizeerror-2 href=https://heycam.github.io/webidl/#indexsizeerror data-x-internal=indexsizeerror>"<code>IndexSizeError</code>"</a> <code id=pixel-manipulation:domexception-2><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code> if the given
    data and dimensions can't be interpreted consistently, or if either dimension is zero.</p>
   <dt><var>imagedata</var> = <var>context</var> . <code id=dom-context-2d-getimagedata>getImageData</code>(<var>sx</var>, <var>sy</var>, <var>sw</var>, <var>sh</var>)<dd>
    <p>Returns an <code id=pixel-manipulation:imagedata-4><a href=#imagedata>ImageData</a></code> object containing the image data for the given rectangle of
    the bitmap.</p>

    <p>Throws an <a id=pixel-manipulation:indexsizeerror-3 href=https://heycam.github.io/webidl/#indexsizeerror data-x-internal=indexsizeerror>"<code>IndexSizeError</code>"</a> <code id=pixel-manipulation:domexception-3><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code> if the either
    of the width or height arguments are zero.</p>
   <dt><var>imagedata</var> . <code id=dom-imagedata-width>width</code><dt><var>imagedata</var> . <code id=dom-imagedata-height>height</code><dd><p>Returns the actual dimensions of the data in the <code id=pixel-manipulation:imagedata-5><a href=#imagedata>ImageData</a></code> object, in
   pixels.<dt><var>imagedata</var> . <code id=dom-imagedata-data>data</code><dd><p>Returns the one-dimensional array containing the data in RGBA order, as integers in the
   range 0 to 255.<dt><var>context</var> . <code id=dom-context-2d-putimagedata>putImageData</code>(<var>imagedata</var>, <var>dx</var>, <var>dy</var> [, <var>dirtyX</var>, <var>dirtyY</var>, <var>dirtyWidth</var>, <var>dirtyHeight</var> ] )<dd>
    <p>Paints the data from the given <code id=pixel-manipulation:imagedata-6><a href=#imagedata>ImageData</a></code> object onto the bitmap. If a dirty
    rectangle is provided, only the pixels from that rectangle are painted.</p>

    <p>The <code id=pixel-manipulation:dom-context-2d-globalalpha><a href=#dom-context-2d-globalalpha>globalAlpha</a></code> and <code id=pixel-manipulation:dom-context-2d-globalcompositeoperation><a href=#dom-context-2d-globalcompositeoperation>globalCompositeOperation</a></code> attributes, as
    well as the shadow attributes, are ignored for the purposes of this method call; pixels in the
    canvas are replaced wholesale, with no composition, alpha blending, no shadows, etc.</p>

    <p>Throws an <a id=pixel-manipulation:invalidstateerror href=https://heycam.github.io/webidl/#invalidstateerror data-x-internal=invalidstateerror>"<code>InvalidStateError</code>"</a> <code id=pixel-manipulation:domexception-4><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code> if the
    <var>imagedata</var> object's <code id=pixel-manipulation:dom-imagedata-data><a href=#dom-imagedata-data>data</a></code> attribute value's
    [[ViewedArrayBuffer]] internal slot is detached.</p>
   </dl>

  

  <div class=example>

   <p>In the following example, the script generates an <code id=pixel-manipulation:imagedata-7><a href=#imagedata>ImageData</a></code> object so that it can
   draw onto it.</p>

   <pre><code class=js>// canvas is a reference to a &lt;canvas> element
var context = canvas.getContext('2d');

// create a blank slate
var data = context.createImageData(canvas.width, canvas.height);

// create some plasma
FillPlasma(data, 'green'); // green plasma

// add a cloud to the plasma
AddCloud(data, data.width/2, data.height/2); // put a cloud in the middle

// paint the plasma+cloud on the canvas
context.putImageData(data, 0, 0);

// support methods
function FillPlasma(data, color) { ... }
function AddCloud(data, x, y) { ... }</code></pre>

  </div>

  <div class=example>

   <p>Here is an example of using <code id=pixel-manipulation:dom-context-2d-getimagedata><a href=#dom-context-2d-getimagedata>getImageData()</a></code> and <code id=pixel-manipulation:dom-context-2d-putimagedata><a href=#dom-context-2d-putimagedata>putImageData()</a></code> to implement an edge detection
   filter.</p>

   <pre><code class=html>&lt;!DOCTYPE HTML>
&lt;html lang="en">
 &lt;head>
  &lt;title>Edge detection demo&lt;/title>
  &lt;script>
   var image = new Image();
   function init() {
     image.onload = demo;
     image.src = "image.jpeg";
   }
   function demo() {
     var canvas = document.getElementsByTagName('canvas')[0];
     var context = canvas.getContext('2d');

     // draw the image onto the canvas
     context.drawImage(image, 0, 0);

     // get the image data to manipulate
     var input = context.getImageData(0, 0, canvas.width, canvas.height);

     // get an empty slate to put the data into
     var output = context.createImageData(canvas.width, canvas.height);

     // alias some variables for convenience
     // In this case input.width and input.height
     // match canvas.width and canvas.height
     // but we'll use the former to keep the code generic.
     var w = input.width, h = input.height;
     var inputData = input.data;
     var outputData = output.data;

     // edge detection
     for (var y = 1; y &lt; h-1; y += 1) {
       for (var x = 1; x &lt; w-1; x += 1) {
         for (var c = 0; c &lt; 3; c += 1) {
           var i = (y*w + x)*4 + c;
           outputData[i] = 127 + -inputData[i - w*4 - 4] -   inputData[i - w*4] - inputData[i - w*4 + 4] +
                                 -inputData[i - 4]       + 8*inputData[i]       - inputData[i + 4] +
                                 -inputData[i + w*4 - 4] -   inputData[i + w*4] - inputData[i + w*4 + 4];
         }
         outputData[(y*w + x)*4 + 3] = 255; // alpha
       }
     }

     // put the image data back after manipulation
     context.putImageData(output, 0, 0);
   }
  &lt;/script>
 &lt;/head>
 &lt;body onload="init()">
  &lt;canvas>&lt;/canvas>
 &lt;/body>
&lt;/html></code></pre>

  </div>





  <h6 id=Compositing><span class=secno>4.12.5.1.16</span> 合成<a href=#Compositing class=self-link></a></h6>
<div data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/compositing.en.html data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/compositing.zh.html></div>

  <dl class=domintro><dt><var>context</var> . <code id=dom-context-2d-globalalpha>globalAlpha</code> [ = <var>value</var> ]<dd>

    <p>返回当前应用于渲染操作的 alpha 值。</p>

    <p>可以设置来改变 alpha 值。在 0.0 .. 1.0 之外的值会被忽略。</p>

   <dt><var>context</var> . <code id=dom-context-2d-globalcompositeoperation>globalCompositeOperation</code> [ = <var>value</var> ]<dd>

    <p>返回当前合成操作，来自 Compositing 和 Blending 规范定义的值。<a href=references.html#refsCOMPOSITE>[COMPOSITE]</a>.</p>

    <p>可以设置来改变合成操作。未知值会被忽略。</p>

   </dl>

  




  <h6 id=image-smoothing><span class=secno>4.12.5.1.17</span> Image smoothing<a href=#image-smoothing class=self-link></a></h6>
<div data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-date="" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/image-smoothing.en.html data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/image-smoothing.zh.html?filename=image-smoothing.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fscripting%2Fthe-canvas-element%2Fthe-2d-rendering-context%2Fimage-smoothing.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91"></div>

  <dl class=domintro><dt><var>context</var> . <code id=dom-context-2d-imagesmoothingenabled>imageSmoothingEnabled</code> [ = <var>value</var> ]<dd>
    <p>Returns whether pattern fills and the <code id=image-smoothing:dom-context-2d-drawimage><a href=#dom-context-2d-drawimage>drawImage()</a></code> method will attempt to smooth images if
    their pixels don't line up exactly with the display, when scaling images up.</p>

    <p>Can be set, to change whether images are smoothed (true) or not (false).</p>
   <dt><var>context</var> . <code id=dom-context-2d-imagesmoothingquality>imageSmoothingQuality</code> [ = <var>value</var> ]<dd>
    <p>Returns the current image-smoothing-quality preference.</p>

    <p>Can be set, to change the preferred quality of image smoothing. The possible values are
    "<code id=image-smoothing:dom-context-2d-imagesmoothingquality-low><a href=#dom-context-2d-imagesmoothingquality-low>low</a></code>", "<code id=image-smoothing:dom-context-2d-imagesmoothingquality-medium><a href=#dom-context-2d-imagesmoothingquality-medium>medium</a></code>" and "<code id=image-smoothing:dom-context-2d-imagesmoothingquality-high><a href=#dom-context-2d-imagesmoothingquality-high>high</a></code>". Unknown values are ignored.</p>
   </dl>

  



  <h6 id=shadows><span class=secno>4.12.5.1.18</span> <dfn>Shadows</dfn><a href=#shadows class=self-link></a></h6>
<div data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-date="" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/shadows.en.html data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/shadows.zh.html?filename=shadows.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fscripting%2Fthe-canvas-element%2Fthe-2d-rendering-context%2Fshadows.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91"></div>

  <p>All drawing operations on an object which implements the <code id=shadows:canvasshadowstyles><a href=#canvasshadowstyles>CanvasShadowStyles</a></code>
  interface are affected by the four global shadow attributes.</p>

  <dl class=domintro><dt><var>context</var> . <code id=dom-context-2d-shadowcolor>shadowColor</code> [ = <var>value</var> ]<dd>
    <p>Returns the current shadow color.</p>

    <p>Can be set, to change the shadow color. Values that cannot be parsed as CSS colors are ignored.</p>
   <dt><var>context</var> . <code id=dom-context-2d-shadowoffsetx>shadowOffsetX</code> [ = <var>value</var> ]<dt><var>context</var> . <code id=dom-context-2d-shadowoffsety>shadowOffsetY</code> [ = <var>value</var> ]<dd>
    <p>Returns the current shadow offset.</p>

    <p>Can be set, to change the shadow offset. Values that are not finite numbers are ignored.</p>
   <dt><var>context</var> . <code id=dom-context-2d-shadowblur>shadowBlur</code> [ = <var>value</var> ]<dd>
    <p>Returns the current level of blur applied to shadows.</p>

    <p>Can be set, to change the blur level. Values that are not finite numbers greater than or
    equal to zero are ignored.</p>
   </dl>

  

  <p>If the current composition operation is <code>copy</code>, then shadows
  effectively won't render (since the shape will overwrite the shadow).</p>


  <h6 id=Filters><span class=secno>4.12.5.1.19</span> 滤镜<a href=#Filters class=self-link></a></h6>
<div data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-date="Sun Apr 15 2018 12:52:48 GMT+0000 (UTC)" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/filters.en.html data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/filters.zh.html></div>

  <p>对实现了 <code id=Filters:canvasfilters><a href=#canvasfilters>CanvasFilters</a></code> 接口的对象的所有绘图操作
  都会被全局 <dfn id=dom-context-2d-filter><code>滤镜</code></dfn> 属性影响。</p>

  <dl class=domintro><dt><var>context</var> . <code id=dom-context-2d-filter-2><a href=#dom-context-2d-filter>filter</a></code> [ = <var>value</var> ]<dd>

    <p>返回当前滤镜。</p>

    <p>可以设置它来改变滤镜。不能解析为 <a id=Filters:filter-function-list href=https://drafts.fxtf.org/filter-effects/#typedef-filter-function-list data-x-internal=filter-function-list>&lt;filter-function-list></a> 的值会被忽略。</p>

   </dl>

  


  <h6 id="Working with externally-defined SVG filters"><span class=secno>4.12.5.1.20</span> 使用外部定义的 SVG 滤镜<a href="#Working with externally-defined SVG filters" class=self-link></a></h6>
<div data-en-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" class=translate-info data-zh-date="Sun Apr 15 2018 12:52:48 GMT+0000 (UTC)" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/working-with-externally-defined-svg-filters.en.html data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/working-with-externally-defined-svg-filters.zh.html></div>

  

  <p>因为在外部定义的滤镜完成载入之前，绘制使用的滤镜值都是 'none'，
  因此作者可能希望在进行绘图操作前确定滤镜是否已经载入。
  一种实现方式是在同一个页面的其他地方加一个元素来载入外部定义的滤镜，
  （比如 <a id="Working with externally-defined SVG filters:svg-use" href=https://svgwg.org/svg2-draft/struct.html#UseElement data-x-internal=svg-use>SVG <code>use</code></a> 元素），
  然后等待 <code>load</code> 事件的派发。</p>

  





  <h6 id="Best practices"><span class=secno>4.12.5.1.21</span> 最佳实践<a href="#Best practices" class=self-link></a></h6>
<div data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-date="Sun Apr 15 2018 12:52:48 GMT+0000 (UTC)" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/best-practices.en.html data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/best-practices.zh.html></div>

  <p>如果画布可交互，作者应该对画布的每个可聚焦部分，都在该元素的 fallback 内容中包含一个可聚焦元素，
  像 <a href=#drawCustomFocusRingExample>上述例子</a> 中那样。</p>

  <p>当渲染焦点环时，为了确保焦点环的外观和原生焦点环相同，作者应该使用 <code id="Best practices:dom-context-2d-drawfocusifneeded"><a href=#dom-context-2d-drawfocusifneeded>drawFocusIfNeeded()</a></code> 方法，
  把需要绘制焦点环的元素传给它。该方法只在元素 <a href=interaction.html#focused id="Best practices:focused">获得焦点</a>
  时才绘制焦点环。这样就可以在每次绘制元素时简单地调用它，而不需要先检查元素是否已经获得焦点。</p>

  <p>除了绘制焦点环以外，作者还应该在画布中的元素获得焦点时调用 <code id="Best practices:dom-context-2d-scrollpathintoview"><a href=#dom-context-2d-scrollpathintoview>scrollPathIntoView()</a></code> 方法，
  以确保它在屏幕上可见（如果可以的话）。</p>

  <p id=no-text-editing-in-canvas-please>作者应该避免使用 <code id="Best practices:the-canvas-element"><a href=#the-canvas-element>canvas</a></code> 元素
  实现文本编辑控件，这样做有很多缺点：</p>

  <ul><li>必须重新实现鼠标移动光标位置。<li>必须重新实现键盘移动光标位置（对于多行文本输入可能会跨行）<li>必须重新实现文本控件的滚动。（很长的行会横向滚动，多行输入会纵向滚动）<li>必须重新实现拷贝粘贴这样的原生特性。<li>必须重新实现拼写检查这样的原生特性。<li>必须重新实现拖放这样的原生特性。<li>必须重新实现页面范围内文本搜索这样的原生特性。<li>必须重新实现用户特定的一些原生特性，例如自定义文本服务。
   由于不同用户可能安装有不同的服务，而且可能有无限种这样的服务，基本不可能实现这些特性。<li>必须重新实现双向文本编辑。<li>对多行文本编辑，必须为相关语言重新实现折行。<li>必须重新实现文本选择。<li>必须重新实现双向文本选区的拖动。<li>必须重新实现平台原生的键盘快捷键。<li>必须重新实现平台原生的输入法编辑器(IMEs)。<li>必须重新实现撤销和重做功能。<li>必须重新实现可访问性特性，比如跟随光标或选区放大。</ul>

  <p>这是巨大的工作量，而且强烈建议作者避免做任何这些事情，不如直接使用
  <code id="Best practices:the-input-element"><a href=input.html#the-input-element>input</a></code> 元素， <code id="Best practices:the-textarea-element"><a href=form-elements.html#the-textarea-element>textarea</a></code> 元素，或者
  <code id="Best practices:attr-contenteditable"><a href=interaction.html#attr-contenteditable>contenteditable</a></code> 属性。</p>



  <h6 id=Examples><span class=secno>4.12.5.1.22</span> 示例<a href=#Examples class=self-link></a></h6>
<div data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-date="Sun Apr 15 2018 12:52:48 GMT+0000 (UTC)" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/examples.en.html data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/the-elements-of-html/scripting/the-canvas-element/the-2d-rendering-context/examples.zh.html></div>

  

  <div class=example>

  <p>这是一个使用 canvas 绘图 <a href="data:text/html;charset=utf-8;base64,PCFET0NUWVBFIEhUTUw%2BDQo8aHRtbCBsYW5nPSJlbiI%2BDQogPGhlYWQ%2BDQogIDx0aXRsZT5QcmV0dHkgR2xvd2luZyBMaW5lczwvdGl0bGU%2BDQogPC9oZWFkPg0KIDxib2R5Pg0KPGNhbnZhcyB3aWR0aD0iODAwIiBoZWlnaHQ9IjQ1MCI%2BPC9jYW52YXM%2BDQo8c2NyaXB0Pg0KDQogdmFyIGNvbnRleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnY2FudmFzJylbMF0uZ2V0Q29udGV4dCgnMmQnKTsNCg0KIHZhciBsYXN0WCA9IGNvbnRleHQuY2FudmFzLndpZHRoICogTWF0aC5yYW5kb20oKTsNCiB2YXIgbGFzdFkgPSBjb250ZXh0LmNhbnZhcy5oZWlnaHQgKiBNYXRoLnJhbmRvbSgpOw0KIHZhciBodWUgPSAwOw0KIGZ1bmN0aW9uIGxpbmUoKSB7DQogICBjb250ZXh0LnNhdmUoKTsNCiAgIGNvbnRleHQudHJhbnNsYXRlKGNvbnRleHQuY2FudmFzLndpZHRoLzIsIGNvbnRleHQuY2FudmFzLmhlaWdodC8yKTsNCiAgIGNvbnRleHQuc2NhbGUoMC45LCAwLjkpOw0KICAgY29udGV4dC50cmFuc2xhdGUoLWNvbnRleHQuY2FudmFzLndpZHRoLzIsIC1jb250ZXh0LmNhbnZhcy5oZWlnaHQvMik7DQogICBjb250ZXh0LmJlZ2luUGF0aCgpOw0KICAgY29udGV4dC5saW5lV2lkdGggPSA1ICsgTWF0aC5yYW5kb20oKSAqIDEwOw0KICAgY29udGV4dC5tb3ZlVG8obGFzdFgsIGxhc3RZKTsNCiAgIGxhc3RYID0gY29udGV4dC5jYW52YXMud2lkdGggKiBNYXRoLnJhbmRvbSgpOw0KICAgbGFzdFkgPSBjb250ZXh0LmNhbnZhcy5oZWlnaHQgKiBNYXRoLnJhbmRvbSgpOw0KICAgY29udGV4dC5iZXppZXJDdXJ2ZVRvKGNvbnRleHQuY2FudmFzLndpZHRoICogTWF0aC5yYW5kb20oKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmNhbnZhcy5oZWlnaHQgKiBNYXRoLnJhbmRvbSgpLA0KICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuY2FudmFzLndpZHRoICogTWF0aC5yYW5kb20oKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmNhbnZhcy5oZWlnaHQgKiBNYXRoLnJhbmRvbSgpLA0KICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RYLCBsYXN0WSk7DQoNCiAgIGh1ZSA9IGh1ZSArIDEwICogTWF0aC5yYW5kb20oKTsNCiAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSAnaHNsKCcgKyBodWUgKyAnLCA1MCUsIDUwJSknOw0KICAgY29udGV4dC5zaGFkb3dDb2xvciA9ICd3aGl0ZSc7DQogICBjb250ZXh0LnNoYWRvd0JsdXIgPSAxMDsNCiAgIGNvbnRleHQuc3Ryb2tlKCk7DQogICBjb250ZXh0LnJlc3RvcmUoKTsNCiB9DQogc2V0SW50ZXJ2YWwobGluZSwgNTApOw0KDQogZnVuY3Rpb24gYmxhbmsoKSB7DQogICBjb250ZXh0LmZpbGxTdHlsZSA9ICdyZ2JhKDAsMCwwLDAuMSknOw0KICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCBjb250ZXh0LmNhbnZhcy53aWR0aCwgY29udGV4dC5jYW52YXMuaGVpZ2h0KTsNCiB9DQogc2V0SW50ZXJ2YWwoYmxhbmssIDQwKTsNCg0KPC9zY3JpcHQ%2BDQogPC9ib2R5Pg0KPC9odG1sPg0K">漂亮的发光线</a> 的脚本示例。</p>

  <pre>&lt;canvas width="800" height="450">&lt;/canvas>
&lt;script>

 var context = document.getElementsByTagName('canvas')[0].getContext('2d');

 var lastX = context.canvas.width * Math.random();
 var lastY = context.canvas.height * Math.random();
 var hue = 0;
 function line() {
   context.save();
   context.translate(context.canvas.width/2, context.canvas.height/2);
   context.scale(0.9, 0.9);
   context.translate(-context.canvas.width/2, -context.canvas.height/2);
   context.beginPath();
   context.lineWidth = 5 + Math.random() * 10;
   context.moveTo(lastX, lastY);
   lastX = context.canvas.width * Math.random();
   lastY = context.canvas.height * Math.random();
   context.bezierCurveTo(context.canvas.width * Math.random(),
                         context.canvas.height * Math.random(),
                         context.canvas.width * Math.random(),
                         context.canvas.height * Math.random(),
                         lastX, lastY);

   hue = hue + 10 * Math.random();
   context.strokeStyle = 'hsl(' + hue + ', 50%, 50%)';
   context.shadowColor = 'white';
   context.shadowBlur = 10;
   context.stroke();
   context.restore();
 }
 setInterval(line, 50);

 function blank() {
   context.fillStyle = 'rgba(0,0,0,0.1)';
   context.fillRect(0, 0, context.canvas.width, context.canvas.height);
 }
 setInterval(blank, 40);

&lt;/script></pre>

  </div>

  <div class=example>

   <p>基于雪碧图的游戏经常使用 <code id=Examples:the-canvas-element><a href=#the-canvas-element>canvas</a></code> 的 2D 渲染上下文。下面的例子可以作为演示：</p>

   <iframe src=/demos/canvas/blue-robot/index-idle.html width=396 height=216></iframe>

   <p>这是该例子的源码：</p>

   <pre>&lt;!DOCTYPE HTML>
&lt;html lang="en">
&lt;meta charset="utf-8">
&lt;title>Blue Robot Demo&lt;/title>
&lt;style>
  html { overflow: hidden; min-height: 200px; min-width: 380px; }
  body { height: 200px; position: relative; margin: 8px; }
  .buttons { position: absolute; bottom: 0px; left: 0px; margin: 4px; }
&lt;/style>
&lt;canvas width="380" height="200">&lt;/canvas>
&lt;script>
 var Landscape = function (context, width, height) {
   this.offset = 0;
   this.width = width;
   this.advance = function (dx) {
     this.offset += dx;
   };
   this.horizon = height * 0.7;
   // This creates the sky gradient (from a darker blue to white at the bottom)
   this.sky = context.createLinearGradient(0, 0, 0, this.horizon);
   this.sky.addColorStop(0.0, 'rgb(55,121,179)');
   this.sky.addColorStop(0.7, 'rgb(121,194,245)');
   this.sky.addColorStop(1.0, 'rgb(164,200,214)');
   // this creates the grass gradient (from a darker green to a lighter green)
   this.earth = context.createLinearGradient(0, this.horizon, 0, height);
   this.earth.addColorStop(0.0, 'rgb(81,140,20)');
   this.earth.addColorStop(1.0, 'rgb(123,177,57)');
   this.paintBackground = function (context, width, height) {
     // first, paint the sky and grass rectangles
     context.fillStyle = this.sky;
     context.fillRect(0, 0, width, this.horizon);
     context.fillStyle = this.earth;
     context.fillRect(0, this.horizon, width, height-this.horizon);
     // then, draw the cloudy banner
     // we make it cloudy by having the draw text off the top of the
     // canvas, and just having the blurred shadow shown on the canvas
     context.save();
     context.translate(width-((this.offset+(this.width*3.2)) % (this.width*4.0))+0, 0);
     context.shadowColor = 'white';
     context.shadowOffsetY = 30+this.horizon/3; // offset down on canvas
     context.shadowBlur = '5';
     context.fillStyle = 'white';
     context.textAlign = 'left';
     context.textBaseline = 'top';
     context.font = '20px sans-serif';
     context.fillText('WHATWG ROCKS', 10, -30); // text up above canvas
     context.restore();
     // then, draw the background tree
     context.save();
     context.translate(width-((this.offset+(this.width*0.2)) % (this.width*1.5))+30, 0);
     context.beginPath();
     context.fillStyle = 'rgb(143,89,2)';
     context.lineStyle = 'rgb(10,10,10)';
     context.lineWidth = 2;
     context.rect(0, this.horizon+5, 10, -50); // trunk
     context.fill();
     context.stroke();
     context.beginPath();
     context.fillStyle = 'rgb(78,154,6)';
     context.arc(5, this.horizon-60, 30, 0, Math.PI*2); // leaves
     context.fill();
     context.stroke();
     context.restore();
   };
   this.paintForeground = function (context, width, height) {
     // draw the box that goes in front
     context.save();
     context.translate(width-((this.offset+(this.width*0.7)) % (this.width*1.1))+0, 0);
     context.beginPath();
     context.rect(0, this.horizon - 5, 25, 25);
     context.fillStyle = 'rgb(220,154,94)';
     context.lineStyle = 'rgb(10,10,10)';
     context.lineWidth = 2;
     context.fill();
     context.stroke();
     context.restore();
   };
 };
&lt;/script>
&lt;script>
 var BlueRobot = function () {
   this.sprites = new Image();
   this.sprites.src = 'blue-robot.png'; // this sprite sheet has 8 cells
   this.targetMode = 'idle';
   this.walk = function () {
     this.targetMode = 'walk';
   };
   this.stop = function () {
     this.targetMode = 'idle';
   };
   this.frameIndex = {
     'idle': [0], // first cell is the idle frame
     'walk': [1,2,3,4,5,6], // the walking animation is cells 1-6
     'stop': [7], // last cell is the stopping animation
   };
   this.mode = 'idle';
   this.frame = 0; // index into frameIndex
   this.tick = function () {
     // this advances the frame and the robot
     // the return value is how many pixels the robot has moved
     this.frame += 1;
     if (this.frame >= this.frameIndex[this.mode].length) {
       // we've reached the end of this animation cycle
       this.frame = 0;
       if (this.mode != this.targetMode) {
         // switch to next cycle
         if (this.mode == 'walk') {
           // we need to stop walking before we decide what to do next
           this.mode = 'stop';
         } else if (this.mode == 'stop') {
           if (this.targetMode == 'walk')
             this.mode = 'walk';
           else
             this.mode = 'idle';
         } else if (this.mode == 'idle') {
           if (this.targetMode == 'walk')
             this.mode = 'walk';
         }
       }
     }
     if (this.mode == 'walk')
       return 8;
     return 0;
   },
   this.paint = function (context, x, y) {
     if (!this.sprites.complete) return;
     // draw the right frame out of the sprite sheet onto the canvas
     // we assume each frame is as high as the sprite sheet
     // the x,y coordinates give the position of the bottom center of the sprite
     context.drawImage(this.sprites,
                       this.frameIndex[this.mode][this.frame] * this.sprites.height, 0, this.sprites.height, this.sprites.height,
                       x-this.sprites.height/2, y-this.sprites.height, this.sprites.height, this.sprites.height);
   };
 };
&lt;/script>
&lt;script>
 var canvas = document.getElementsByTagName('canvas')[0];
 var context = canvas.getContext('2d');
 var landscape = new Landscape(context, canvas.width, canvas.height);
 var blueRobot = new BlueRobot();
 // paint when the browser wants us to, using requestAnimationFrame()
 function paint() {
   context.clearRect(0, 0, canvas.width, canvas.height);
   landscape.paintBackground(context, canvas.width, canvas.height);
   blueRobot.paint(context, canvas.width/2, landscape.horizon*1.1);
   landscape.paintForeground(context, canvas.width, canvas.height);
   requestAnimationFrame(paint);
 }
 paint();
 // but tick every 100ms, so that we don't slow down when we don't paint
 setInterval(function () {
   var dx = blueRobot.tick();
   landscape.advance(dx);
 }, 100);
&lt;/script>
&lt;p class="buttons">
 &lt;input type=button value="Walk" onclick="blueRobot.walk()">
 &lt;input type=button value="Stop" onclick="blueRobot.stop()">
&lt;footer>
 &lt;small> Blue Robot Player Sprite by &lt;a href="https://johncolburn.deviantart.com/">JohnColburn&lt;/a>.
 Licensed under the terms of the Creative Commons Attribution Share-Alike 3.0 Unported license.&lt;/small>
 &lt;small> This work is itself licensed under a &lt;a rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/">Creative
 Commons Attribution-ShareAlike 3.0 Unported License&lt;/a>.&lt;/small>
&lt;/footer>
</pre>

  </div>





  <h5 id=imagebitmap-渲染上下文><span class=secno>4.12.5.2</span> <code id=imagebitmap-渲染上下文:imagebitmap><a href=imagebitmap-and-animations.html#imagebitmap>ImageBitmap</a></code> 渲染上下文<a href=#imagebitmap-渲染上下文 class=self-link></a></h5>
<div data-en-date="Thu Mar 01 2018 15:51:30 GMT+0000 (UTC)" class=translate-info data-zh-date="Sun Apr 15 2018 12:52:48 GMT+0000 (UTC)" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/scripting/the-canvas-element/the-imagebitmap-rendering-context/index.en.html data-zh-file=https://github.com/whatwg-cn/html/edit/master/src/the-elements-of-html/scripting/the-canvas-element/the-imagebitmap-rendering-context/index.zh.html></div>


  <h6 id=introduction-5><span class=secno>4.12.5.2.1</span> Introduction<a href=#introduction-5 class=self-link></a></h6>
<div data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-date="" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/scripting/the-canvas-element/the-imagebitmap-rendering-context/introduction.en.html data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/scripting/the-canvas-element/the-imagebitmap-rendering-context/introduction.zh.html?filename=introduction.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fscripting%2Fthe-canvas-element%2Fthe-imagebitmap-rendering-context%2Fintroduction.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91"></div>

  <p><code id=introduction-5:imagebitmaprenderingcontext><a href=#imagebitmaprenderingcontext>ImageBitmapRenderingContext</a></code> is a performance-oriented interface that provides a
  low overhead method for displaying the contents of <code id=introduction-5:imagebitmap><a href=imagebitmap-and-animations.html#imagebitmap>ImageBitmap</a></code> objects. It uses
  transfer semantics to reduce overall memory consumption. It also streamlines performance by
  avoiding intermediate compositing, unlike the <code id=introduction-5:dom-context-2d-drawimage><a href=#dom-context-2d-drawimage>drawImage()</a></code> method of
  <code id=introduction-5:canvasrenderingcontext2d><a href=#canvasrenderingcontext2d>CanvasRenderingContext2D</a></code>.</p>

  <p>Using an <code id=introduction-5:the-img-element><a href=embedded-content.html#the-img-element>img</a></code> element as an intermediate for getting an image resource into a
  canvas, for example, would result in two copies of the decoded image existing in memory at the
  same time: the <code id=introduction-5:the-img-element-2><a href=embedded-content.html#the-img-element>img</a></code> element's copy, and the one in the canvas's backing store. This
  memory cost can be prohibitive when dealing with extremely large images. This can be avoided by
  using <code id=introduction-5:imagebitmaprenderingcontext-2><a href=#imagebitmaprenderingcontext>ImageBitmapRenderingContext</a></code>.</p>

  <div class=example>
   <p>Using <code id=introduction-5:imagebitmaprenderingcontext-3><a href=#imagebitmaprenderingcontext>ImageBitmapRenderingContext</a></code>, here is how to transcode an image to the JPEG
   format in a memory- and CPU-efficient way:</p>

   <pre><code class=js>createImageBitmap(inputImageBlob).then(image => {
  const canvas = document.createElement('canvas');
  const context = canvas.getContext('bitmaprenderer');
  context.transferFromImageBitmap(image);

  canvas.toBlob(outputJPEGBlob => {
    // Do something with outputJPEGBlob.
  }, 'image/jpeg');
});</code></pre>
  </div>


  <h6 id=the-imagebitmaprenderingcontext-interface><span class=secno>4.12.5.2.2</span> The <code id=the-imagebitmaprenderingcontext-interface:imagebitmaprenderingcontext><a href=#imagebitmaprenderingcontext>ImageBitmapRenderingContext</a></code> interface<a href=#the-imagebitmaprenderingcontext-interface class=self-link></a></h6><div class="mdn-anno wrapped"><button onclick=toggleStatus(this) class=mdn-anno-btn><span>MDN</span></button><div class=feature><p><a href=https://developer.mozilla.org/en-US/docs/Web/API/ImageBitmapRenderingContext title="The ImageBitmapRenderingContext interface is a canvas rendering context that provides the functionality to replace the canvas's contents with the given ImageBitmap. Its context id (the first argument to HTMLCanvasElement.getContext() or OffscreenCanvas.getContext()) is &quot;bitmaprenderer&quot;.">ImageBitmapRenderingContext</a><div class=support><span class="firefox yes"><span>Firefox</span><span>46+</span></span><span class="safari no"><span>Safari</span><span>No</span></span><span class="chrome yes"><span>Chrome</span><span>56+</span></span><hr><span class="opera yes"><span>Opera</span><span>43+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge no"><span>Edge (Legacy)</span><span>No</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>46+</span></span><span class="safari_ios no"><span>Safari iOS</span><span>No</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>56+</span></span><span class="webview_android yes"><span>WebView Android</span><span>56+</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>6.0+</span></span><span class="opera_android yes"><span>Opera Android</span><span>43+</span></span></div></div></div>
<div data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-date="" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/scripting/the-canvas-element/the-imagebitmap-rendering-context/the-imagebitmaprenderingcontext-interface.en.html data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/scripting/the-canvas-element/the-imagebitmap-rendering-context/the-imagebitmaprenderingcontext-interface.zh.html?filename=the-imagebitmaprenderingcontext-interface.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fscripting%2Fthe-canvas-element%2Fthe-imagebitmap-rendering-context%2Fthe-imagebitmaprenderingcontext-interface.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91"></div>

  <pre><code class=idl>[Exposed=(Window,Worker)]
interface <dfn id=imagebitmaprenderingcontext>ImageBitmapRenderingContext</dfn> {
  readonly attribute (<span>HTMLCanvasElement</span> or <a href=#offscreencanvas id=the-imagebitmaprenderingcontext-interface:offscreencanvas>OffscreenCanvas</a>) <a href=#dom-imagebitmaprenderingcontext-canvas id=the-imagebitmaprenderingcontext-interface:dom-imagebitmaprenderingcontext-canvas>canvas</a>;
  undefined <a href=#dom-imagebitmaprenderingcontext-transferfromimagebitmap id=the-imagebitmaprenderingcontext-interface:dom-imagebitmaprenderingcontext-transferfromimagebitmap>transferFromImageBitmap</a>(<a id=the-imagebitmaprenderingcontext-interface:imagebitmap href=imagebitmap-and-animations.html#imagebitmap>ImageBitmap</a>? bitmap);
};

dictionary <dfn id=imagebitmaprenderingcontextsettings>ImageBitmapRenderingContextSettings</dfn> {
  boolean <span>alpha</span> = true;
};</code></pre>

  <dl class=domintro><dt><var>context</var> = <var>canvas</var> . <code id=the-imagebitmaprenderingcontext-interface:dom-canvas-getcontext><a href=#dom-canvas-getcontext>getContext</a></code>('bitmaprenderer' [, { [ <code>alpha</code>: false ] } ] )<dd>
    <p>Returns an <code id=the-imagebitmaprenderingcontext-interface:imagebitmaprenderingcontext-2><a href=#imagebitmaprenderingcontext>ImageBitmapRenderingContext</a></code> object that is permanently bound to a
    particular <code id=the-imagebitmaprenderingcontext-interface:the-canvas-element><a href=#the-canvas-element>canvas</a></code> element.</p>

    <p>If the <code>alpha</code> setting is
    provided and set to false, then the canvas is forced to always be opaque.</p>
   <dt><var>context</var> . <code id=dom-imagebitmaprenderingcontext-canvas>canvas</code><dd>
    <p>Returns the <code id=the-imagebitmaprenderingcontext-interface:the-canvas-element-2><a href=#the-canvas-element>canvas</a></code> element that the context is bound to.</p>
   <dt><var>context</var> . <code id=dom-imagebitmaprenderingcontext-transferfromimagebitmap>transferFromImageBitmap</code>(imageBitmap)<dd>
    <p>Transfers the underlying <span>bitmap data</span>
    from <var>imageBitmap</var> to <var>context</var>, and the bitmap becomes the contents of the
    <code id=the-imagebitmaprenderingcontext-interface:the-canvas-element-3><a href=#the-canvas-element>canvas</a></code> element to which <var>context</var> is bound.</p>
   <dt><var>context</var> . <code id=the-imagebitmaprenderingcontext-interface:dom-imagebitmaprenderingcontext-transferfromimagebitmap-2><a href=#dom-imagebitmaprenderingcontext-transferfromimagebitmap>transferFromImageBitmap</a></code>(null)<dd>
    <p>Replaces contents of the <code id=the-imagebitmaprenderingcontext-interface:the-canvas-element-4><a href=#the-canvas-element>canvas</a></code> element to which <var>context</var>
    is bound with a <a id=the-imagebitmaprenderingcontext-interface:transparent-black href=https://drafts.csswg.org/css-color/#transparent-black data-x-internal=transparent-black>transparent black</a> bitmap whose size corresponds to the <code id=the-imagebitmaprenderingcontext-interface:attr-canvas-width><a href=#attr-canvas-width>width</a></code> and <code id=the-imagebitmaprenderingcontext-interface:attr-canvas-height><a href=#attr-canvas-height>height</a></code>
    content attributes of the <code id=the-imagebitmaprenderingcontext-interface:the-canvas-element-5><a href=#the-canvas-element>canvas</a></code> element.</p>
   </dl>

  





  <h5 id=the-offscreencanvas-interface><span class=secno>4.12.5.3</span> The <code id=the-offscreencanvas-interface:offscreencanvas><a href=#offscreencanvas>OffscreenCanvas</a></code> interface<a href=#the-offscreencanvas-interface class=self-link></a></h5><div class="mdn-anno wrapped"><button onclick=toggleStatus(this) class=mdn-anno-btn><b title="Support in one engine only." class=less-than-two-engines-flag>⚠</b><span>MDN</span></button><div class=feature><p><a href=https://developer.mozilla.org/en-US/docs/Web/API/OffscreenCanvas title="The OffscreenCanvas interface provides a canvas that can be rendered off screen. It is available in both the window and worker contexts.">OffscreenCanvas</a><p class=less-than-two-engines-text>Support in one engine only.<div class=support><span class="firefox yes"><span>Firefox</span><span title="Partial implementation.">🔰 44+</span></span><span class="safari no"><span>Safari</span><span>No</span></span><span class="chrome yes"><span>Chrome</span><span>69+</span></span><hr><span class="opera yes"><span>Opera</span><span>56+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge no"><span>Edge (Legacy)</span><span>No</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span title="Partial implementation.">🔰 44+</span></span><span class="safari_ios no"><span>Safari iOS</span><span>No</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>69+</span></span><span class="webview_android no"><span>WebView Android</span><span>No</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>10.0+</span></span><span class="opera_android yes"><span>Opera Android</span><span>48+</span></span></div></div></div>
<div data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-date="" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/scripting/the-canvas-element/the-offscreencanvas-interface/index.en.html data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/scripting/the-canvas-element/the-offscreencanvas-interface/index.zh.html?filename=index.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fscripting%2Fthe-canvas-element%2Fthe-offscreencanvas-interface%2Findex.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91"></div>

  <pre><code class=idl>typedef (<a href=#offscreencanvasrenderingcontext2d id=the-offscreencanvas-interface:offscreencanvasrenderingcontext2d>OffscreenCanvasRenderingContext2D</a> or <a href=#imagebitmaprenderingcontext id=the-offscreencanvas-interface:imagebitmaprenderingcontext>ImageBitmapRenderingContext</a> or <a id=the-offscreencanvas-interface:webglrenderingcontext href=https://www.khronos.org/registry/webgl/specs/latest/1.0/#WebGLRenderingContext data-x-internal=webglrenderingcontext>WebGLRenderingContext</a> or <a id=the-offscreencanvas-interface:webgl2renderingcontext href=https://www.khronos.org/registry/webgl/specs/latest/2.0/#WebGL2RenderingContext data-x-internal=webgl2renderingcontext>WebGL2RenderingContext</a>) <dfn id=offscreenrenderingcontext>OffscreenRenderingContext</dfn>;

dictionary <dfn id=imageencodeoptions>ImageEncodeOptions</dfn> {
  DOMString <span>type</span> = "image/png";
  unrestricted double <span>quality</span>;
};

enum <dfn id=offscreenrenderingcontextid>OffscreenRenderingContextId</dfn> { "<span>2d</span>", "<span>bitmaprenderer</span>", "<span>webgl</span>", "<span>webgl2</span>" };

[Exposed=(Window,Worker), <span>Transferable</span>]
interface <dfn id=offscreencanvas>OffscreenCanvas</dfn> : <a id=the-offscreencanvas-interface:eventtarget href=https://dom.spec.whatwg.org/#interface-eventtarget data-x-internal=eventtarget>EventTarget</a> {
  <a href=#dom-offscreencanvas id=the-offscreencanvas-interface:dom-offscreencanvas>constructor</a>([EnforceRange] unsigned long long width, [EnforceRange] unsigned long long height);

  attribute [EnforceRange] unsigned long long <a href=#dom-offscreencanvas-width id=the-offscreencanvas-interface:dom-offscreencanvas-width>width</a>;
  attribute [EnforceRange] unsigned long long <a href=#dom-offscreencanvas-height id=the-offscreencanvas-interface:dom-offscreencanvas-height>height</a>;

  <a href=#offscreenrenderingcontext id=the-offscreencanvas-interface:offscreenrenderingcontext>OffscreenRenderingContext</a>? <a href=#dom-offscreencanvas-getcontext id=the-offscreencanvas-interface:dom-offscreencanvas-getcontext>getContext</a>(<a href=#offscreenrenderingcontextid id=the-offscreencanvas-interface:offscreenrenderingcontextid>OffscreenRenderingContextId</a> contextId, optional any options = null);
  <a id=the-offscreencanvas-interface:imagebitmap href=imagebitmap-and-animations.html#imagebitmap>ImageBitmap</a> <a href=#dom-offscreencanvas-transfertoimagebitmap id=the-offscreencanvas-interface:dom-offscreencanvas-transfertoimagebitmap>transferToImageBitmap</a>();
  Promise&lt;<a id=the-offscreencanvas-interface:blob href=https://w3c.github.io/FileAPI/#dfn-Blob data-x-internal=blob>Blob</a>> <a href=#dom-offscreencanvas-converttoblob id=the-offscreencanvas-interface:dom-offscreencanvas-converttoblob>convertToBlob</a>(optional <a href=#imageencodeoptions id=the-offscreencanvas-interface:imageencodeoptions>ImageEncodeOptions</a> options = {});
};</code></pre>

  <p class=note><code id=the-offscreencanvas-interface:offscreencanvas-2><a href=#offscreencanvas>OffscreenCanvas</a></code> is an <code id=the-offscreencanvas-interface:eventtarget-2><a data-x-internal=eventtarget href=https://dom.spec.whatwg.org/#interface-eventtarget>EventTarget</a></code> so that WebGL can
  fire <code>webglcontextlost</code> and <code>webglcontextrestored</code>
  events at it. <a href=references.html#refsWEBGL>[WEBGL]</a></p>

  <p><code id=the-offscreencanvas-interface:offscreencanvas-3><a href=#offscreencanvas>OffscreenCanvas</a></code> objects are used to create rendering contexts, much like an
  <code>HTMLCanvasElement</code>, but with no connection to the DOM. This makes it possible to
  use canvas rendering contexts in <a href=workers.html#workers>workers</a>.</p>

  <div class="mdn-anno wrapped before"><button onclick=toggleStatus(this) class=mdn-anno-btn><b title="Support in one engine only." class=less-than-two-engines-flag>⚠</b><span>MDN</span></button><div class=feature><p><a href=https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/commit title="The WebGLRenderingContext.commit() method pushes frames back to the original HTMLCanvasElement, if the context is not directly fixed to a specific canvas.">WebGLRenderingContext/commit</a><p class=less-than-two-engines-text>Support in one engine only.<div class=support><span class="firefox yes"><span>Firefox</span><span title="Requires setting a user preference or runtime flag.">🔰 44+</span></span><span class="safari no"><span>Safari</span><span>No</span></span><span class="chrome no"><span>Chrome</span><span>No</span></span><hr><span class="opera no"><span>Opera</span><span>No</span></span><span class="edge_blink no"><span>Edge</span><span>No</span></span><hr><span class="edge no"><span>Edge (Legacy)</span><span>No</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android no"><span>Firefox Android</span><span>No</span></span><span class="safari_ios no"><span>Safari iOS</span><span>No</span></span><span class="chrome_android no"><span>Chrome Android</span><span>No</span></span><span class="webview_android no"><span>WebView Android</span><span>No</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>No</span></span><span class="opera_android no"><span>Opera Android</span><span>No</span></span></div></div></div><p>An <code id=the-offscreencanvas-interface:offscreencanvas-4><a href=#offscreencanvas>OffscreenCanvas</a></code> object may hold a weak reference to a <dfn id=offscreencanvas-placeholder>placeholder <code>canvas</code> element</dfn>, which is
  typically in the DOM, whose embedded content is provided by the <code id=the-offscreencanvas-interface:offscreencanvas-5><a href=#offscreencanvas>OffscreenCanvas</a></code>
  object. The bitmap of the <code id=the-offscreencanvas-interface:offscreencanvas-6><a href=#offscreencanvas>OffscreenCanvas</a></code> object is pushed to the <a href=#offscreencanvas-placeholder id=the-offscreencanvas-interface:offscreencanvas-placeholder>placeholder <code>canvas</code> element</a> by
  calling the <dfn id=offscreencontext-commit><code>commit()</code></dfn> method of the
  <code id=the-offscreencanvas-interface:offscreencanvas-7><a href=#offscreencanvas>OffscreenCanvas</a></code> object's rendering context. All rendering context types that
  can be created by an <code id=the-offscreencanvas-interface:offscreencanvas-8><a href=#offscreencanvas>OffscreenCanvas</a></code> object must implement a <code id=the-offscreencanvas-interface:offscreencontext-commit><a href=#offscreencontext-commit>commit()</a></code> method. The exact behavior of the commit
  method (e.g. whether it copies or transfers bitmaps) may vary, as defined by the rendering
  contexts' respective specifications. Only the <a href=#offscreencanvasrenderingcontext2d id=the-offscreencanvas-interface:offscreencanvasrenderingcontext2d-2>2D context for offscreen canvases</a> is defined
  in this specification.</p>

  <dl class=domintro><dt><var>offscreenCanvas</var> = new <code id=dom-offscreencanvas>OffscreenCanvas</code>(<var>width</var>,
   <var>height</var>)<dt>
   <dd>
    <p>Returns a new <code id=the-offscreencanvas-interface:offscreencanvas-9><a href=#offscreencanvas>OffscreenCanvas</a></code> object that is not linked to a <a href=#offscreencanvas-placeholder id=the-offscreencanvas-interface:offscreencanvas-placeholder-2>placeholder <code>canvas</code> element</a>, and
    whose bitmap's size is determined by the <var>width</var> and <var>height</var> arguments.</p>
   <dt><var>context</var> = <var>offscreenCanvas</var> . <code id=dom-offscreencanvas-getcontext>getContext</code>(<var>contextId</var> [,
   <var>options</var> ] )<dd>
    <p>Returns an object that exposes an API for drawing on the <code id=the-offscreencanvas-interface:offscreencanvas-10><a href=#offscreencanvas>OffscreenCanvas</a></code>
    object. <var>contextId</var> specifies the desired API: "<code>2d</code>", "<code>bitmaprenderer</code>", "<code>webgl</code>", or "<code>webgl2</code>". <var>options</var> is handled by that
    API.</p>

    <p>This specification defines the "<code>2d</code>" context below,
    which is similar but distinct from the "<code>2d</code>"
    context that is created from a <code id=the-offscreencanvas-interface:the-canvas-element><a href=#the-canvas-element>canvas</a></code> element. The WebGL specifications define the
    "<code>webgl</code>" and "<code>webgl2</code>" contexts. <a href=references.html#refsWEBGL>[WEBGL]</a></p>

    <p>Returns null if the canvas has already been initialized with another context type (e.g.,
    trying to get a "<code>2d</code>" context after getting a
    "<code>webgl</code>" context).</p>
   </dl>

  

  <dl class=domintro><dt><var>offscreenCanvas</var> . <code id=dom-offscreencanvas-width>width</code> [
   = <var>value</var> ]<dt><var>offscreenCanvas</var> . <code id=dom-offscreencanvas-height>height</code> [
   = <var>value</var> ]<dd>
    <p>These attributes return the dimensions of the <code id=the-offscreencanvas-interface:offscreencanvas-11><a href=#offscreencanvas>OffscreenCanvas</a></code> object's <span>bitmap</span>.</p>

    <p>They can be set, to replace the <span>bitmap</span> with a
    new, <a id=the-offscreencanvas-interface:transparent-black href=https://drafts.csswg.org/css-color/#transparent-black data-x-internal=transparent-black>transparent black</a> bitmap of the specified dimensions (effectively resizing
    it).</p>
   </dl>

  

  <p class=note>If an <code id=the-offscreencanvas-interface:offscreencanvas-12><a href=#offscreencanvas>OffscreenCanvas</a></code> object whose dimensions were changed has
  a <a href=#offscreencanvas-placeholder id=the-offscreencanvas-interface:offscreencanvas-placeholder-3>placeholder <code>canvas</code> element</a>, then
  the <a href=#offscreencanvas-placeholder id=the-offscreencanvas-interface:offscreencanvas-placeholder-4>placeholder <code>canvas</code> element</a>'s
  <a href=https://drafts.csswg.org/css-images/#intrinsic-dimensions id=the-offscreencanvas-interface:intrinsic-dimensions data-x-internal=intrinsic-dimensions>intrinsic size</a> will only be updated via the <code id=the-offscreencanvas-interface:offscreencontext-commit-2><a href=#offscreencontext-commit>commit()</a></code> method of the <code id=the-offscreencanvas-interface:offscreencanvas-13><a href=#offscreencanvas>OffscreenCanvas</a></code>
  object's rendering context.</p>

  <dl class=domintro><dt><var>promise</var> = <var>offscreenCanvas</var> . <code id=dom-offscreencanvas-converttoblob>convertToBlob</code>( [<var>options</var>] )<dd>
    <p>Returns a promise that will fulfill with a new <code id=the-offscreencanvas-interface:blob-2><a data-x-internal=blob href=https://w3c.github.io/FileAPI/#dfn-Blob>Blob</a></code> object representing a file
    containing the image in the <code id=the-offscreencanvas-interface:offscreencanvas-14><a href=#offscreencanvas>OffscreenCanvas</a></code> object.</p>

    <p>The argument, if provided, is a dictionary that controls the encoding options of the image
    file to be created. The <code>type</code>
    field specifies the file format and has a default value of "<code id=the-offscreencanvas-interface:image/png><a href=indices.html#image/png>image/png</a></code>"; that type
    is also used if the requested type isn't supported. If the image format supports variable
    quality (such as "<code id=the-offscreencanvas-interface:image/jpeg><a href=indices.html#image/jpeg>image/jpeg</a></code>"), then the <code>quality</code> field is a number in the range 0.0
    to 1.0 inclusive indicating the desired quality level for the resulting image.</p>
   <dt><var>canvas</var> . <code id=dom-offscreencanvas-transfertoimagebitmap>transferToImageBitmap</code>()<dd>
    <p>Returns a newly created <code id=the-offscreencanvas-interface:imagebitmap-2><a href=imagebitmap-and-animations.html#imagebitmap>ImageBitmap</a></code> object with the image in the
    <code id=the-offscreencanvas-interface:offscreencanvas-15><a href=#offscreencanvas>OffscreenCanvas</a></code> object. The image in the <code id=the-offscreencanvas-interface:offscreencanvas-16><a href=#offscreencanvas>OffscreenCanvas</a></code> object is
    replaced with a new blank image.</p>
   </dl>

  


  <h6 id=the-offscreen-2d-rendering-context><span class=secno>4.12.5.3.1</span> The offscreen 2D rendering context<a href=#the-offscreen-2d-rendering-context class=self-link></a></h6>
<div data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-date="" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/scripting/the-canvas-element/the-offscreencanvas-interface/the-offscreen-2d-rendering-context.en.html data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/scripting/the-canvas-element/the-offscreencanvas-interface/the-offscreen-2d-rendering-context.zh.html?filename=the-offscreen-2d-rendering-context.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fscripting%2Fthe-canvas-element%2Fthe-offscreencanvas-interface%2Fthe-offscreen-2d-rendering-context.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91"></div>

  <pre><code class=idl>[Exposed=(Window,Worker)]
interface <dfn id=offscreencanvasrenderingcontext2d>OffscreenCanvasRenderingContext2D</dfn> {
  undefined <a href=#offscreencontext2d-commit id=the-offscreen-2d-rendering-context:offscreencontext2d-commit>commit</a>();
  readonly attribute <a href=#offscreencanvas id=the-offscreen-2d-rendering-context:offscreencanvas>OffscreenCanvas</a> <a href=#offscreencontext2d-canvas id=the-offscreen-2d-rendering-context:offscreencontext2d-canvas>canvas</a>;
};

<a href=#offscreencanvasrenderingcontext2d id=the-offscreen-2d-rendering-context:offscreencanvasrenderingcontext2d>OffscreenCanvasRenderingContext2D</a> includes <a href=#canvasstate id=the-offscreen-2d-rendering-context:canvasstate>CanvasState</a>;
<a href=#offscreencanvasrenderingcontext2d id=the-offscreen-2d-rendering-context:offscreencanvasrenderingcontext2d-2>OffscreenCanvasRenderingContext2D</a> includes <a href=#canvastransform id=the-offscreen-2d-rendering-context:canvastransform>CanvasTransform</a>;
<a href=#offscreencanvasrenderingcontext2d id=the-offscreen-2d-rendering-context:offscreencanvasrenderingcontext2d-3>OffscreenCanvasRenderingContext2D</a> includes <a href=#canvascompositing id=the-offscreen-2d-rendering-context:canvascompositing>CanvasCompositing</a>;
<a href=#offscreencanvasrenderingcontext2d id=the-offscreen-2d-rendering-context:offscreencanvasrenderingcontext2d-4>OffscreenCanvasRenderingContext2D</a> includes <a href=#canvasimagesmoothing id=the-offscreen-2d-rendering-context:canvasimagesmoothing>CanvasImageSmoothing</a>;
<a href=#offscreencanvasrenderingcontext2d id=the-offscreen-2d-rendering-context:offscreencanvasrenderingcontext2d-5>OffscreenCanvasRenderingContext2D</a> includes <a href=#canvasfillstrokestyles id=the-offscreen-2d-rendering-context:canvasfillstrokestyles>CanvasFillStrokeStyles</a>;
<a href=#offscreencanvasrenderingcontext2d id=the-offscreen-2d-rendering-context:offscreencanvasrenderingcontext2d-6>OffscreenCanvasRenderingContext2D</a> includes <a href=#canvasshadowstyles id=the-offscreen-2d-rendering-context:canvasshadowstyles>CanvasShadowStyles</a>;
<a href=#offscreencanvasrenderingcontext2d id=the-offscreen-2d-rendering-context:offscreencanvasrenderingcontext2d-7>OffscreenCanvasRenderingContext2D</a> includes <a href=#canvasfilters id=the-offscreen-2d-rendering-context:canvasfilters>CanvasFilters</a>;
<a href=#offscreencanvasrenderingcontext2d id=the-offscreen-2d-rendering-context:offscreencanvasrenderingcontext2d-8>OffscreenCanvasRenderingContext2D</a> includes <a href=#canvasrect id=the-offscreen-2d-rendering-context:canvasrect>CanvasRect</a>;
<a href=#offscreencanvasrenderingcontext2d id=the-offscreen-2d-rendering-context:offscreencanvasrenderingcontext2d-9>OffscreenCanvasRenderingContext2D</a> includes <a href=#canvasdrawpath id=the-offscreen-2d-rendering-context:canvasdrawpath>CanvasDrawPath</a>;
<a href=#offscreencanvasrenderingcontext2d id=the-offscreen-2d-rendering-context:offscreencanvasrenderingcontext2d-10>OffscreenCanvasRenderingContext2D</a> includes <a href=#canvastext id=the-offscreen-2d-rendering-context:canvastext>CanvasText</a>;
<a href=#offscreencanvasrenderingcontext2d id=the-offscreen-2d-rendering-context:offscreencanvasrenderingcontext2d-11>OffscreenCanvasRenderingContext2D</a> includes <a href=#canvasdrawimage id=the-offscreen-2d-rendering-context:canvasdrawimage>CanvasDrawImage</a>;
<a href=#offscreencanvasrenderingcontext2d id=the-offscreen-2d-rendering-context:offscreencanvasrenderingcontext2d-12>OffscreenCanvasRenderingContext2D</a> includes <a href=#canvasimagedata id=the-offscreen-2d-rendering-context:canvasimagedata>CanvasImageData</a>;
<a href=#offscreencanvasrenderingcontext2d id=the-offscreen-2d-rendering-context:offscreencanvasrenderingcontext2d-13>OffscreenCanvasRenderingContext2D</a> includes <a href=#canvaspathdrawingstyles id=the-offscreen-2d-rendering-context:canvaspathdrawingstyles>CanvasPathDrawingStyles</a>;
<a href=#offscreencanvasrenderingcontext2d id=the-offscreen-2d-rendering-context:offscreencanvasrenderingcontext2d-14>OffscreenCanvasRenderingContext2D</a> includes <a href=#canvastextdrawingstyles id=the-offscreen-2d-rendering-context:canvastextdrawingstyles>CanvasTextDrawingStyles</a>;
<a href=#offscreencanvasrenderingcontext2d id=the-offscreen-2d-rendering-context:offscreencanvasrenderingcontext2d-15>OffscreenCanvasRenderingContext2D</a> includes <a href=#canvaspath id=the-offscreen-2d-rendering-context:canvaspath>CanvasPath</a>;</code></pre>

  <p>The <code id=the-offscreen-2d-rendering-context:offscreencanvasrenderingcontext2d-16><a href=#offscreencanvasrenderingcontext2d>OffscreenCanvasRenderingContext2D</a></code> object is a rendering context for drawing to
  the <span>bitmap</span> of an <code id=the-offscreen-2d-rendering-context:offscreencanvas-2><a href=#offscreencanvas>OffscreenCanvas</a></code> object.
  It is similar to the <code id=the-offscreen-2d-rendering-context:canvasrenderingcontext2d><a href=#canvasrenderingcontext2d>CanvasRenderingContext2D</a></code> object, with the following
  differences:</p>

  <ul><li><p>there is no support for <a href=#canvasuserinterface id=the-offscreen-2d-rendering-context:canvasuserinterface>user interface</a>
   features;<li><p>its <code id=the-offscreen-2d-rendering-context:offscreencontext2d-canvas-2><a href=#offscreencontext2d-canvas>canvas</a></code> attribute refers to an
   <code id=the-offscreen-2d-rendering-context:offscreencanvas-3><a href=#offscreencanvas>OffscreenCanvas</a></code> object rather than a <code id=the-offscreen-2d-rendering-context:the-canvas-element><a href=#the-canvas-element>canvas</a></code> element;<li><p>it has a <code id=the-offscreen-2d-rendering-context:offscreencontext2d-commit-2><a href=#offscreencontext2d-commit>commit()</a></code> method for pushing the
   rendered image to the context's <code id=the-offscreen-2d-rendering-context:offscreencanvas-4><a href=#offscreencanvas>OffscreenCanvas</a></code> object's <a href=#offscreencanvas-placeholder id=the-offscreen-2d-rendering-context:offscreencanvas-placeholder>placeholder <code>canvas</code> element</a>.</ul>

  <p>An <code id=the-offscreen-2d-rendering-context:offscreencanvasrenderingcontext2d-17><a href=#offscreencanvasrenderingcontext2d>OffscreenCanvasRenderingContext2D</a></code> object has a <dfn id=offscreencontext2d-bitmap>bitmap</dfn> that is initialized when the object is
  created.</p>

  <p>The <a href=#offscreencontext2d-bitmap id=the-offscreen-2d-rendering-context:offscreencontext2d-bitmap>bitmap</a> has an <dfn id=offscreencontext2d-origin-clean>origin-clean</dfn> flag, which can be set to true or
  false. Initially, when one of these bitmaps is created, its <a href=#offscreencontext2d-origin-clean id=the-offscreen-2d-rendering-context:offscreencontext2d-origin-clean>origin-clean</a> flag must be set to true.</p>

  <p>An <code id=the-offscreen-2d-rendering-context:offscreencanvasrenderingcontext2d-18><a href=#offscreencanvasrenderingcontext2d>OffscreenCanvasRenderingContext2D</a></code> object also has an <dfn id=offscreencontext2d-alpha>alpha</dfn> flag, which can be set to true or false. Initially,
  when the context is created, its alpha flag must be set to true. When an
  <code id=the-offscreen-2d-rendering-context:offscreencanvasrenderingcontext2d-19><a href=#offscreencanvasrenderingcontext2d>OffscreenCanvasRenderingContext2D</a></code> object has its <a href=#offscreencontext2d-alpha id=the-offscreen-2d-rendering-context:offscreencontext2d-alpha>alpha</a> flag set to false, then its alpha channel must be
  fixed to 1.0 (fully opaque) for all pixels, and attempts to change the alpha component of any pixel
  must be silently ignored.</p>

  <p>An <code id=the-offscreen-2d-rendering-context:offscreencanvasrenderingcontext2d-20><a href=#offscreencanvasrenderingcontext2d>OffscreenCanvasRenderingContext2D</a></code> object has an <dfn id=associated-offscreencanvas-object>associated
  <code>OffscreenCanvas</code> object</dfn>, which is the <code id=the-offscreen-2d-rendering-context:offscreencanvas-5><a href=#offscreencanvas>OffscreenCanvas</a></code> object
  from which the <code id=the-offscreen-2d-rendering-context:offscreencanvasrenderingcontext2d-21><a href=#offscreencanvasrenderingcontext2d>OffscreenCanvasRenderingContext2D</a></code> object was created.

  <dl class=domintro><dt><var>offscreenCanvasRenderingContext2D</var> . <code id=offscreencontext2d-commit>commit</code>()<dd>
    <p>Copies the rendering context's <a href=#offscreencontext2d-bitmap id=the-offscreen-2d-rendering-context:offscreencontext2d-bitmap-2>bitmap</a> to
    the bitmap of the <a href=#offscreencanvas-placeholder id=the-offscreen-2d-rendering-context:offscreencanvas-placeholder-2>placeholder <code>canvas</code>
    element</a> of the <a href=#associated-offscreencanvas-object id=the-offscreen-2d-rendering-context:associated-offscreencanvas-object>associated <code>OffscreenCanvas</code> object</a>. The copy
    operation is synchronous. Calling this method is not needed for the transfer, since it happens
    automatically during the <span>event loop</span> execution.</p>
   <dt><var>offscreenCanvas</var> = <var>offscreenCanvasRenderingContext2D</var> . <code id=offscreencontext2d-canvas>canvas</code><dd>
    <p>Returns the <a href=#associated-offscreencanvas-object id=the-offscreen-2d-rendering-context:associated-offscreencanvas-object-2>associated <code>OffscreenCanvas</code> object</a>.</p>
   </dl>

  

  




  <h5 id=serialising-bitmaps-to-a-file><span class=secno>4.12.5.4</span> Serializing bitmaps to a file<a href=#serialising-bitmaps-to-a-file class=self-link></a></h5>
<div data-en-date="Wed Nov 04 2020 06:47:17 GMT+0000 (UTC)" class=translate-info data-zh-date="" data-en-file=https://github.com/whatwg-cn/html/blob/master/src/the-elements-of-html/scripting/the-canvas-element/serializing-bitmaps-to-a-file.en.html data-zh-file="https://github.com/whatwg-cn/html/new/master/src/the-elements-of-html/scripting/the-canvas-element/serializing-bitmaps-to-a-file.zh.html?filename=serializing-bitmaps-to-a-file.zh.html&amp;value=%E4%BB%8E%20https%3A%2F%2Fgithub.com%2Fwhatwg-cn%2Fhtml%2Fblob%2Fmaster%2Fsrc%2Fthe-elements-of-html%2Fscripting%2Fthe-canvas-element%2Fserializing-bitmaps-to-a-file.en.html%20%E6%8B%B7%E8%B4%9D%E8%8B%B1%E6%96%87%E6%BA%90%E7%A0%81%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%BC%80%E5%A7%8B%E7%BF%BB%E8%AF%91"></div>

  


  


  <nav><a href=scripting.html>← 4.12 脚本</a> — <a href=./>Table of Contents</a> — <a href=custom-elements.html>4.13 Custom elements →</a></nav>
